(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))m(_);new MutationObserver(_=>{for(const w of _)if(w.type==="childList")for(const c of w.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&m(c)}).observe(document,{childList:!0,subtree:!0});function p(_){const w={};return _.integrity&&(w.integrity=_.integrity),_.referrerPolicy&&(w.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?w.credentials="include":_.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function m(_){if(_.ep)return;_.ep=!0;const w=p(_);fetch(_.href,w)}})();var p3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var $_={exports:{}},md={},K_={exports:{}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up=Symbol.for("react.element"),h3=Symbol.for("react.portal"),f3=Symbol.for("react.fragment"),d3=Symbol.for("react.strict_mode"),m3=Symbol.for("react.profiler"),y3=Symbol.for("react.provider"),g3=Symbol.for("react.context"),v3=Symbol.for("react.forward_ref"),_3=Symbol.for("react.suspense"),x3=Symbol.for("react.memo"),w3=Symbol.for("react.lazy"),kv=Symbol.iterator;function b3(r){return r===null||typeof r!="object"?null:(r=kv&&r[kv]||r["@@iterator"],typeof r=="function"?r:null)}var Y_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J_=Object.assign,Q_={};function rc(r,i,p){this.props=r,this.context=i,this.refs=Q_,this.updater=p||Y_}rc.prototype.isReactComponent={};rc.prototype.setState=function(r,i){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,i,"setState")};rc.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function e1(){}e1.prototype=rc.prototype;function ay(r,i,p){this.props=r,this.context=i,this.refs=Q_,this.updater=p||Y_}var sy=ay.prototype=new e1;sy.constructor=ay;J_(sy,rc.prototype);sy.isPureReactComponent=!0;var Pv=Array.isArray,t1=Object.prototype.hasOwnProperty,ly={current:null},r1={key:!0,ref:!0,__self:!0,__source:!0};function n1(r,i,p){var m,_={},w=null,c=null;if(i!=null)for(m in i.ref!==void 0&&(c=i.ref),i.key!==void 0&&(w=""+i.key),i)t1.call(i,m)&&!r1.hasOwnProperty(m)&&(_[m]=i[m]);var F=arguments.length-2;if(F===1)_.children=p;else if(1<F){for(var M=Array(F),ee=0;ee<F;ee++)M[ee]=arguments[ee+2];_.children=M}if(r&&r.defaultProps)for(m in F=r.defaultProps,F)_[m]===void 0&&(_[m]=F[m]);return{$$typeof:Up,type:r,key:w,ref:c,props:_,_owner:ly.current}}function S3(r,i){return{$$typeof:Up,type:r.type,key:i,ref:r.ref,props:r.props,_owner:r._owner}}function uy(r){return typeof r=="object"&&r!==null&&r.$$typeof===Up}function E3(r){var i={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(p){return i[p]})}var zv=/\/+/g;function Om(r,i){return typeof r=="object"&&r!==null&&r.key!=null?E3(""+r.key):i.toString(36)}function Af(r,i,p,m,_){var w=typeof r;(w==="undefined"||w==="boolean")&&(r=null);var c=!1;if(r===null)c=!0;else switch(w){case"string":case"number":c=!0;break;case"object":switch(r.$$typeof){case Up:case h3:c=!0}}if(c)return c=r,_=_(c),r=m===""?"."+Om(c,0):m,Pv(_)?(p="",r!=null&&(p=r.replace(zv,"$&/")+"/"),Af(_,i,p,"",function(ee){return ee})):_!=null&&(uy(_)&&(_=S3(_,p+(!_.key||c&&c.key===_.key?"":(""+_.key).replace(zv,"$&/")+"/")+r)),i.push(_)),1;if(c=0,m=m===""?".":m+":",Pv(r))for(var F=0;F<r.length;F++){w=r[F];var M=m+Om(w,F);c+=Af(w,i,p,M,_)}else if(M=b3(r),typeof M=="function")for(r=M.call(r),F=0;!(w=r.next()).done;)w=w.value,M=m+Om(w,F++),c+=Af(w,i,p,M,_);else if(w==="object")throw i=String(r),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return c}function pf(r,i,p){if(r==null)return r;var m=[],_=0;return Af(r,m,"","",function(w){return i.call(p,w,_++)}),m}function T3(r){if(r._status===-1){var i=r._result;i=i(),i.then(function(p){(r._status===0||r._status===-1)&&(r._status=1,r._result=p)},function(p){(r._status===0||r._status===-1)&&(r._status=2,r._result=p)}),r._status===-1&&(r._status=0,r._result=i)}if(r._status===1)return r._result.default;throw r._result}var yi={current:null},Mf={transition:null},C3={ReactCurrentDispatcher:yi,ReactCurrentBatchConfig:Mf,ReactCurrentOwner:ly};Zt.Children={map:pf,forEach:function(r,i,p){pf(r,function(){i.apply(this,arguments)},p)},count:function(r){var i=0;return pf(r,function(){i++}),i},toArray:function(r){return pf(r,function(i){return i})||[]},only:function(r){if(!uy(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Zt.Component=rc;Zt.Fragment=f3;Zt.Profiler=m3;Zt.PureComponent=ay;Zt.StrictMode=d3;Zt.Suspense=_3;Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C3;Zt.cloneElement=function(r,i,p){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var m=J_({},r.props),_=r.key,w=r.ref,c=r._owner;if(i!=null){if(i.ref!==void 0&&(w=i.ref,c=ly.current),i.key!==void 0&&(_=""+i.key),r.type&&r.type.defaultProps)var F=r.type.defaultProps;for(M in i)t1.call(i,M)&&!r1.hasOwnProperty(M)&&(m[M]=i[M]===void 0&&F!==void 0?F[M]:i[M])}var M=arguments.length-2;if(M===1)m.children=p;else if(1<M){F=Array(M);for(var ee=0;ee<M;ee++)F[ee]=arguments[ee+2];m.children=F}return{$$typeof:Up,type:r.type,key:_,ref:w,props:m,_owner:c}};Zt.createContext=function(r){return r={$$typeof:g3,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:y3,_context:r},r.Consumer=r};Zt.createElement=n1;Zt.createFactory=function(r){var i=n1.bind(null,r);return i.type=r,i};Zt.createRef=function(){return{current:null}};Zt.forwardRef=function(r){return{$$typeof:v3,render:r}};Zt.isValidElement=uy;Zt.lazy=function(r){return{$$typeof:w3,_payload:{_status:-1,_result:r},_init:T3}};Zt.memo=function(r,i){return{$$typeof:x3,type:r,compare:i===void 0?null:i}};Zt.startTransition=function(r){var i=Mf.transition;Mf.transition={};try{r()}finally{Mf.transition=i}};Zt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Zt.useCallback=function(r,i){return yi.current.useCallback(r,i)};Zt.useContext=function(r){return yi.current.useContext(r)};Zt.useDebugValue=function(){};Zt.useDeferredValue=function(r){return yi.current.useDeferredValue(r)};Zt.useEffect=function(r,i){return yi.current.useEffect(r,i)};Zt.useId=function(){return yi.current.useId()};Zt.useImperativeHandle=function(r,i,p){return yi.current.useImperativeHandle(r,i,p)};Zt.useInsertionEffect=function(r,i){return yi.current.useInsertionEffect(r,i)};Zt.useLayoutEffect=function(r,i){return yi.current.useLayoutEffect(r,i)};Zt.useMemo=function(r,i){return yi.current.useMemo(r,i)};Zt.useReducer=function(r,i,p){return yi.current.useReducer(r,i,p)};Zt.useRef=function(r){return yi.current.useRef(r)};Zt.useState=function(r){return yi.current.useState(r)};Zt.useSyncExternalStore=function(r,i,p){return yi.current.useSyncExternalStore(r,i,p)};Zt.useTransition=function(){return yi.current.useTransition()};Zt.version="18.2.0";K_.exports=Zt;var tn=K_.exports;const di=oy(tn);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I3=tn,k3=Symbol.for("react.element"),P3=Symbol.for("react.fragment"),z3=Object.prototype.hasOwnProperty,A3=I3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,M3={key:!0,ref:!0,__self:!0,__source:!0};function i1(r,i,p){var m,_={},w=null,c=null;p!==void 0&&(w=""+p),i.key!==void 0&&(w=""+i.key),i.ref!==void 0&&(c=i.ref);for(m in i)z3.call(i,m)&&!M3.hasOwnProperty(m)&&(_[m]=i[m]);if(r&&r.defaultProps)for(m in i=r.defaultProps,i)_[m]===void 0&&(_[m]=i[m]);return{$$typeof:k3,type:r,key:w,ref:c,props:_,_owner:A3.current}}md.Fragment=P3;md.jsx=i1;md.jsxs=i1;$_.exports=md;var Ee=$_.exports,h0={},o1={exports:{}},$i={},a1={exports:{}},s1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function i(He,gt){var ft=He.length;He.push(gt);e:for(;0<ft;){var Lt=ft-1>>>1,Ot=He[Lt];if(0<_(Ot,gt))He[Lt]=gt,He[ft]=Ot,ft=Lt;else break e}}function p(He){return He.length===0?null:He[0]}function m(He){if(He.length===0)return null;var gt=He[0],ft=He.pop();if(ft!==gt){He[0]=ft;e:for(var Lt=0,Ot=He.length,gn=Ot>>>1;Lt<gn;){var nn=2*(Lt+1)-1,pn=He[nn],Zn=nn+1,gr=He[Zn];if(0>_(pn,ft))Zn<Ot&&0>_(gr,pn)?(He[Lt]=gr,He[Zn]=ft,Lt=Zn):(He[Lt]=pn,He[nn]=ft,Lt=nn);else if(Zn<Ot&&0>_(gr,ft))He[Lt]=gr,He[Zn]=ft,Lt=Zn;else break e}}return gt}function _(He,gt){var ft=He.sortIndex-gt.sortIndex;return ft!==0?ft:He.id-gt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var w=performance;r.unstable_now=function(){return w.now()}}else{var c=Date,F=c.now();r.unstable_now=function(){return c.now()-F}}var M=[],ee=[],oe=1,me=null,te=3,Pe=!1,Me=!1,ke=!1,at=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function le(He){for(var gt=p(ee);gt!==null;){if(gt.callback===null)m(ee);else if(gt.startTime<=He)m(ee),gt.sortIndex=gt.expirationTime,i(M,gt);else break;gt=p(ee)}}function xe(He){if(ke=!1,le(He),!Me)if(p(M)!==null)Me=!0,yr(Ue);else{var gt=p(ee);gt!==null&&Mn(xe,gt.startTime-He)}}function Ue(He,gt){Me=!1,ke&&(ke=!1,ae(rt),rt=-1),Pe=!0;var ft=te;try{for(le(gt),me=p(M);me!==null&&(!(me.expirationTime>gt)||He&&!tr());){var Lt=me.callback;if(typeof Lt=="function"){me.callback=null,te=me.priorityLevel;var Ot=Lt(me.expirationTime<=gt);gt=r.unstable_now(),typeof Ot=="function"?me.callback=Ot:me===p(M)&&m(M),le(gt)}else m(M);me=p(M)}if(me!==null)var gn=!0;else{var nn=p(ee);nn!==null&&Mn(xe,nn.startTime-gt),gn=!1}return gn}finally{me=null,te=ft,Pe=!1}}var Ke=!1,Je=null,rt=-1,It=5,yt=-1;function tr(){return!(r.unstable_now()-yt<It)}function Wr(){if(Je!==null){var He=r.unstable_now();yt=He;var gt=!0;try{gt=Je(!0,He)}finally{gt?Nt():(Ke=!1,Je=null)}}else Ke=!1}var Nt;if(typeof J=="function")Nt=function(){J(Wr)};else if(typeof MessageChannel<"u"){var Ht=new MessageChannel,Gn=Ht.port2;Ht.port1.onmessage=Wr,Nt=function(){Gn.postMessage(null)}}else Nt=function(){at(Wr,0)};function yr(He){Je=He,Ke||(Ke=!0,Nt())}function Mn(He,gt){rt=at(function(){He(r.unstable_now())},gt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(He){He.callback=null},r.unstable_continueExecution=function(){Me||Pe||(Me=!0,yr(Ue))},r.unstable_forceFrameRate=function(He){0>He||125<He?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):It=0<He?Math.floor(1e3/He):5},r.unstable_getCurrentPriorityLevel=function(){return te},r.unstable_getFirstCallbackNode=function(){return p(M)},r.unstable_next=function(He){switch(te){case 1:case 2:case 3:var gt=3;break;default:gt=te}var ft=te;te=gt;try{return He()}finally{te=ft}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(He,gt){switch(He){case 1:case 2:case 3:case 4:case 5:break;default:He=3}var ft=te;te=He;try{return gt()}finally{te=ft}},r.unstable_scheduleCallback=function(He,gt,ft){var Lt=r.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?Lt+ft:Lt):ft=Lt,He){case 1:var Ot=-1;break;case 2:Ot=250;break;case 5:Ot=1073741823;break;case 4:Ot=1e4;break;default:Ot=5e3}return Ot=ft+Ot,He={id:oe++,callback:gt,priorityLevel:He,startTime:ft,expirationTime:Ot,sortIndex:-1},ft>Lt?(He.sortIndex=ft,i(ee,He),p(M)===null&&He===p(ee)&&(ke?(ae(rt),rt=-1):ke=!0,Mn(xe,ft-Lt))):(He.sortIndex=Ot,i(M,He),Me||Pe||(Me=!0,yr(Ue))),He},r.unstable_shouldYield=tr,r.unstable_wrapCallback=function(He){var gt=te;return function(){var ft=te;te=gt;try{return He.apply(this,arguments)}finally{te=ft}}}})(s1);a1.exports=s1;var L3=a1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1=tn,Xi=L3;function Oe(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,p=1;p<arguments.length;p++)i+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u1=new Set,bp={};function Pl(r,i){$u(r,i),$u(r+"Capture",i)}function $u(r,i){for(bp[r]=i,r=0;r<i.length;r++)u1.add(i[r])}var Ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f0=Object.prototype.hasOwnProperty,D3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Av={},Mv={};function R3(r){return f0.call(Mv,r)?!0:f0.call(Av,r)?!1:D3.test(r)?Mv[r]=!0:(Av[r]=!0,!1)}function O3(r,i,p,m){if(p!==null&&p.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return m?!1:p!==null?!p.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function B3(r,i,p,m){if(i===null||typeof i>"u"||O3(r,i,p,m))return!0;if(m)return!1;if(p!==null)switch(p.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function gi(r,i,p,m,_,w,c){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=m,this.attributeNamespace=_,this.mustUseProperty=p,this.propertyName=r,this.type=i,this.sanitizeURL=w,this.removeEmptyString=c}var qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){qn[r]=new gi(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];qn[i]=new gi(i,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){qn[r]=new gi(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){qn[r]=new gi(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){qn[r]=new gi(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){qn[r]=new gi(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){qn[r]=new gi(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){qn[r]=new gi(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){qn[r]=new gi(r,5,!1,r.toLowerCase(),null,!1,!1)});var cy=/[\-:]([a-z])/g;function py(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(cy,py);qn[i]=new gi(i,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(cy,py);qn[i]=new gi(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(cy,py);qn[i]=new gi(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){qn[r]=new gi(r,1,!1,r.toLowerCase(),null,!1,!1)});qn.xlinkHref=new gi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){qn[r]=new gi(r,1,!1,r.toLowerCase(),null,!0,!0)});function hy(r,i,p,m){var _=qn.hasOwnProperty(i)?qn[i]:null;(_!==null?_.type!==0:m||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(B3(i,p,_,m)&&(p=null),m||_===null?R3(i)&&(p===null?r.removeAttribute(i):r.setAttribute(i,""+p)):_.mustUseProperty?r[_.propertyName]=p===null?_.type===3?!1:"":p:(i=_.attributeName,m=_.attributeNamespace,p===null?r.removeAttribute(i):(_=_.type,p=_===3||_===4&&p===!0?"":""+p,m?r.setAttributeNS(m,i,p):r.setAttribute(i,p))))}var Ga=l1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hf=Symbol.for("react.element"),Au=Symbol.for("react.portal"),Mu=Symbol.for("react.fragment"),fy=Symbol.for("react.strict_mode"),d0=Symbol.for("react.profiler"),c1=Symbol.for("react.provider"),p1=Symbol.for("react.context"),dy=Symbol.for("react.forward_ref"),m0=Symbol.for("react.suspense"),y0=Symbol.for("react.suspense_list"),my=Symbol.for("react.memo"),ds=Symbol.for("react.lazy"),h1=Symbol.for("react.offscreen"),Lv=Symbol.iterator;function tp(r){return r===null||typeof r!="object"?null:(r=Lv&&r[Lv]||r["@@iterator"],typeof r=="function"?r:null)}var Vr=Object.assign,Bm;function up(r){if(Bm===void 0)try{throw Error()}catch(p){var i=p.stack.trim().match(/\n( *(at )?)/);Bm=i&&i[1]||""}return`
`+Bm+r}var Fm=!1;function Nm(r,i){if(!r||Fm)return"";Fm=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(ee){var m=ee}Reflect.construct(r,[],i)}else{try{i.call()}catch(ee){m=ee}r.call(i.prototype)}else{try{throw Error()}catch(ee){m=ee}r()}}catch(ee){if(ee&&m&&typeof ee.stack=="string"){for(var _=ee.stack.split(`
`),w=m.stack.split(`
`),c=_.length-1,F=w.length-1;1<=c&&0<=F&&_[c]!==w[F];)F--;for(;1<=c&&0<=F;c--,F--)if(_[c]!==w[F]){if(c!==1||F!==1)do if(c--,F--,0>F||_[c]!==w[F]){var M=`
`+_[c].replace(" at new "," at ");return r.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",r.displayName)),M}while(1<=c&&0<=F);break}}}finally{Fm=!1,Error.prepareStackTrace=p}return(r=r?r.displayName||r.name:"")?up(r):""}function F3(r){switch(r.tag){case 5:return up(r.type);case 16:return up("Lazy");case 13:return up("Suspense");case 19:return up("SuspenseList");case 0:case 2:case 15:return r=Nm(r.type,!1),r;case 11:return r=Nm(r.type.render,!1),r;case 1:return r=Nm(r.type,!0),r;default:return""}}function g0(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Mu:return"Fragment";case Au:return"Portal";case d0:return"Profiler";case fy:return"StrictMode";case m0:return"Suspense";case y0:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case p1:return(r.displayName||"Context")+".Consumer";case c1:return(r._context.displayName||"Context")+".Provider";case dy:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case my:return i=r.displayName||null,i!==null?i:g0(r.type)||"Memo";case ds:i=r._payload,r=r._init;try{return g0(r(i))}catch{}}return null}function N3(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return g0(i);case 8:return i===fy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ps(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function f1(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function U3(r){var i=f1(r)?"checked":"value",p=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),m=""+r[i];if(!r.hasOwnProperty(i)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var _=p.get,w=p.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return _.call(this)},set:function(c){m=""+c,w.call(this,c)}}),Object.defineProperty(r,i,{enumerable:p.enumerable}),{getValue:function(){return m},setValue:function(c){m=""+c},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function ff(r){r._valueTracker||(r._valueTracker=U3(r))}function d1(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var p=i.getValue(),m="";return r&&(m=f1(r)?r.checked?"true":"false":r.value),r=m,r!==p?(i.setValue(r),!0):!1}function qf(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function v0(r,i){var p=i.checked;return Vr({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??r._wrapperState.initialChecked})}function Dv(r,i){var p=i.defaultValue==null?"":i.defaultValue,m=i.checked!=null?i.checked:i.defaultChecked;p=Ps(i.value!=null?i.value:p),r._wrapperState={initialChecked:m,initialValue:p,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function m1(r,i){i=i.checked,i!=null&&hy(r,"checked",i,!1)}function _0(r,i){m1(r,i);var p=Ps(i.value),m=i.type;if(p!=null)m==="number"?(p===0&&r.value===""||r.value!=p)&&(r.value=""+p):r.value!==""+p&&(r.value=""+p);else if(m==="submit"||m==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?x0(r,i.type,p):i.hasOwnProperty("defaultValue")&&x0(r,i.type,Ps(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function Rv(r,i,p){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var m=i.type;if(!(m!=="submit"&&m!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,p||i===r.value||(r.value=i),r.defaultValue=i}p=r.name,p!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,p!==""&&(r.name=p)}function x0(r,i,p){(i!=="number"||qf(r.ownerDocument)!==r)&&(p==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+p&&(r.defaultValue=""+p))}var cp=Array.isArray;function qu(r,i,p,m){if(r=r.options,i){i={};for(var _=0;_<p.length;_++)i["$"+p[_]]=!0;for(p=0;p<r.length;p++)_=i.hasOwnProperty("$"+r[p].value),r[p].selected!==_&&(r[p].selected=_),_&&m&&(r[p].defaultSelected=!0)}else{for(p=""+Ps(p),i=null,_=0;_<r.length;_++){if(r[_].value===p){r[_].selected=!0,m&&(r[_].defaultSelected=!0);return}i!==null||r[_].disabled||(i=r[_])}i!==null&&(i.selected=!0)}}function w0(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return Vr({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ov(r,i){var p=i.value;if(p==null){if(p=i.children,i=i.defaultValue,p!=null){if(i!=null)throw Error(Oe(92));if(cp(p)){if(1<p.length)throw Error(Oe(93));p=p[0]}i=p}i==null&&(i=""),p=i}r._wrapperState={initialValue:Ps(p)}}function y1(r,i){var p=Ps(i.value),m=Ps(i.defaultValue);p!=null&&(p=""+p,p!==r.value&&(r.value=p),i.defaultValue==null&&r.defaultValue!==p&&(r.defaultValue=p)),m!=null&&(r.defaultValue=""+m)}function Bv(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function g1(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function b0(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?g1(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var df,v1=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,p,m,_){MSApp.execUnsafeLocalFunction(function(){return r(i,p,m,_)})}:r}(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(df=df||document.createElement("div"),df.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=df.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Sp(r,i){if(i){var p=r.firstChild;if(p&&p===r.lastChild&&p.nodeType===3){p.nodeValue=i;return}}r.textContent=i}var fp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},V3=["Webkit","ms","Moz","O"];Object.keys(fp).forEach(function(r){V3.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),fp[i]=fp[r]})});function _1(r,i,p){return i==null||typeof i=="boolean"||i===""?"":p||typeof i!="number"||i===0||fp.hasOwnProperty(r)&&fp[r]?(""+i).trim():i+"px"}function x1(r,i){r=r.style;for(var p in i)if(i.hasOwnProperty(p)){var m=p.indexOf("--")===0,_=_1(p,i[p],m);p==="float"&&(p="cssFloat"),m?r.setProperty(p,_):r[p]=_}}var j3=Vr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function S0(r,i){if(i){if(j3[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(Oe(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(Oe(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(Oe(61))}if(i.style!=null&&typeof i.style!="object")throw Error(Oe(62))}}function E0(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var T0=null;function yy(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var C0=null,Gu=null,Zu=null;function Fv(r){if(r=qp(r)){if(typeof C0!="function")throw Error(Oe(280));var i=r.stateNode;i&&(i=xd(i),C0(r.stateNode,r.type,i))}}function w1(r){Gu?Zu?Zu.push(r):Zu=[r]:Gu=r}function b1(){if(Gu){var r=Gu,i=Zu;if(Zu=Gu=null,Fv(r),i)for(r=0;r<i.length;r++)Fv(i[r])}}function S1(r,i){return r(i)}function E1(){}var Um=!1;function T1(r,i,p){if(Um)return r(i,p);Um=!0;try{return S1(r,i,p)}finally{Um=!1,(Gu!==null||Zu!==null)&&(E1(),b1())}}function Ep(r,i){var p=r.stateNode;if(p===null)return null;var m=xd(p);if(m===null)return null;p=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(p&&typeof p!="function")throw Error(Oe(231,i,typeof p));return p}var I0=!1;if(Ua)try{var rp={};Object.defineProperty(rp,"passive",{get:function(){I0=!0}}),window.addEventListener("test",rp,rp),window.removeEventListener("test",rp,rp)}catch{I0=!1}function q3(r,i,p,m,_,w,c,F,M){var ee=Array.prototype.slice.call(arguments,3);try{i.apply(p,ee)}catch(oe){this.onError(oe)}}var dp=!1,Gf=null,Zf=!1,k0=null,G3={onError:function(r){dp=!0,Gf=r}};function Z3(r,i,p,m,_,w,c,F,M){dp=!1,Gf=null,q3.apply(G3,arguments)}function H3(r,i,p,m,_,w,c,F,M){if(Z3.apply(this,arguments),dp){if(dp){var ee=Gf;dp=!1,Gf=null}else throw Error(Oe(198));Zf||(Zf=!0,k0=ee)}}function zl(r){var i=r,p=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,i.flags&4098&&(p=i.return),r=i.return;while(r)}return i.tag===3?p:null}function C1(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Nv(r){if(zl(r)!==r)throw Error(Oe(188))}function W3(r){var i=r.alternate;if(!i){if(i=zl(r),i===null)throw Error(Oe(188));return i!==r?null:r}for(var p=r,m=i;;){var _=p.return;if(_===null)break;var w=_.alternate;if(w===null){if(m=_.return,m!==null){p=m;continue}break}if(_.child===w.child){for(w=_.child;w;){if(w===p)return Nv(_),r;if(w===m)return Nv(_),i;w=w.sibling}throw Error(Oe(188))}if(p.return!==m.return)p=_,m=w;else{for(var c=!1,F=_.child;F;){if(F===p){c=!0,p=_,m=w;break}if(F===m){c=!0,m=_,p=w;break}F=F.sibling}if(!c){for(F=w.child;F;){if(F===p){c=!0,p=w,m=_;break}if(F===m){c=!0,m=w,p=_;break}F=F.sibling}if(!c)throw Error(Oe(189))}}if(p.alternate!==m)throw Error(Oe(190))}if(p.tag!==3)throw Error(Oe(188));return p.stateNode.current===p?r:i}function I1(r){return r=W3(r),r!==null?k1(r):null}function k1(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=k1(r);if(i!==null)return i;r=r.sibling}return null}var P1=Xi.unstable_scheduleCallback,Uv=Xi.unstable_cancelCallback,X3=Xi.unstable_shouldYield,$3=Xi.unstable_requestPaint,rn=Xi.unstable_now,K3=Xi.unstable_getCurrentPriorityLevel,gy=Xi.unstable_ImmediatePriority,z1=Xi.unstable_UserBlockingPriority,Hf=Xi.unstable_NormalPriority,Y3=Xi.unstable_LowPriority,A1=Xi.unstable_IdlePriority,yd=null,na=null;function J3(r){if(na&&typeof na.onCommitFiberRoot=="function")try{na.onCommitFiberRoot(yd,r,void 0,(r.current.flags&128)===128)}catch{}}var Co=Math.clz32?Math.clz32:tb,Q3=Math.log,eb=Math.LN2;function tb(r){return r>>>=0,r===0?32:31-(Q3(r)/eb|0)|0}var mf=64,yf=4194304;function pp(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Wf(r,i){var p=r.pendingLanes;if(p===0)return 0;var m=0,_=r.suspendedLanes,w=r.pingedLanes,c=p&268435455;if(c!==0){var F=c&~_;F!==0?m=pp(F):(w&=c,w!==0&&(m=pp(w)))}else c=p&~_,c!==0?m=pp(c):w!==0&&(m=pp(w));if(m===0)return 0;if(i!==0&&i!==m&&!(i&_)&&(_=m&-m,w=i&-i,_>=w||_===16&&(w&4194240)!==0))return i;if(m&4&&(m|=p&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=m;0<i;)p=31-Co(i),_=1<<p,m|=r[p],i&=~_;return m}function rb(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nb(r,i){for(var p=r.suspendedLanes,m=r.pingedLanes,_=r.expirationTimes,w=r.pendingLanes;0<w;){var c=31-Co(w),F=1<<c,M=_[c];M===-1?(!(F&p)||F&m)&&(_[c]=rb(F,i)):M<=i&&(r.expiredLanes|=F),w&=~F}}function P0(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function M1(){var r=mf;return mf<<=1,!(mf&4194240)&&(mf=64),r}function Vm(r){for(var i=[],p=0;31>p;p++)i.push(r);return i}function Vp(r,i,p){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Co(i),r[i]=p}function ib(r,i){var p=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var m=r.eventTimes;for(r=r.expirationTimes;0<p;){var _=31-Co(p),w=1<<_;i[_]=0,m[_]=-1,r[_]=-1,p&=~w}}function vy(r,i){var p=r.entangledLanes|=i;for(r=r.entanglements;p;){var m=31-Co(p),_=1<<m;_&i|r[m]&i&&(r[m]|=i),p&=~_}}var pr=0;function L1(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var D1,_y,R1,O1,B1,z0=!1,gf=[],ws=null,bs=null,Ss=null,Tp=new Map,Cp=new Map,ys=[],ob="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vv(r,i){switch(r){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":bs=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":Tp.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cp.delete(i.pointerId)}}function np(r,i,p,m,_,w){return r===null||r.nativeEvent!==w?(r={blockedOn:i,domEventName:p,eventSystemFlags:m,nativeEvent:w,targetContainers:[_]},i!==null&&(i=qp(i),i!==null&&_y(i)),r):(r.eventSystemFlags|=m,i=r.targetContainers,_!==null&&i.indexOf(_)===-1&&i.push(_),r)}function ab(r,i,p,m,_){switch(i){case"focusin":return ws=np(ws,r,i,p,m,_),!0;case"dragenter":return bs=np(bs,r,i,p,m,_),!0;case"mouseover":return Ss=np(Ss,r,i,p,m,_),!0;case"pointerover":var w=_.pointerId;return Tp.set(w,np(Tp.get(w)||null,r,i,p,m,_)),!0;case"gotpointercapture":return w=_.pointerId,Cp.set(w,np(Cp.get(w)||null,r,i,p,m,_)),!0}return!1}function F1(r){var i=_l(r.target);if(i!==null){var p=zl(i);if(p!==null){if(i=p.tag,i===13){if(i=C1(p),i!==null){r.blockedOn=i,B1(r.priority,function(){R1(p)});return}}else if(i===3&&p.stateNode.current.memoizedState.isDehydrated){r.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Lf(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var p=A0(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(p===null){p=r.nativeEvent;var m=new p.constructor(p.type,p);T0=m,p.target.dispatchEvent(m),T0=null}else return i=qp(p),i!==null&&_y(i),r.blockedOn=p,!1;i.shift()}return!0}function jv(r,i,p){Lf(r)&&p.delete(i)}function sb(){z0=!1,ws!==null&&Lf(ws)&&(ws=null),bs!==null&&Lf(bs)&&(bs=null),Ss!==null&&Lf(Ss)&&(Ss=null),Tp.forEach(jv),Cp.forEach(jv)}function ip(r,i){r.blockedOn===i&&(r.blockedOn=null,z0||(z0=!0,Xi.unstable_scheduleCallback(Xi.unstable_NormalPriority,sb)))}function Ip(r){function i(_){return ip(_,r)}if(0<gf.length){ip(gf[0],r);for(var p=1;p<gf.length;p++){var m=gf[p];m.blockedOn===r&&(m.blockedOn=null)}}for(ws!==null&&ip(ws,r),bs!==null&&ip(bs,r),Ss!==null&&ip(Ss,r),Tp.forEach(i),Cp.forEach(i),p=0;p<ys.length;p++)m=ys[p],m.blockedOn===r&&(m.blockedOn=null);for(;0<ys.length&&(p=ys[0],p.blockedOn===null);)F1(p),p.blockedOn===null&&ys.shift()}var Hu=Ga.ReactCurrentBatchConfig,Xf=!0;function lb(r,i,p,m){var _=pr,w=Hu.transition;Hu.transition=null;try{pr=1,xy(r,i,p,m)}finally{pr=_,Hu.transition=w}}function ub(r,i,p,m){var _=pr,w=Hu.transition;Hu.transition=null;try{pr=4,xy(r,i,p,m)}finally{pr=_,Hu.transition=w}}function xy(r,i,p,m){if(Xf){var _=A0(r,i,p,m);if(_===null)Ym(r,i,m,$f,p),Vv(r,m);else if(ab(_,r,i,p,m))m.stopPropagation();else if(Vv(r,m),i&4&&-1<ob.indexOf(r)){for(;_!==null;){var w=qp(_);if(w!==null&&D1(w),w=A0(r,i,p,m),w===null&&Ym(r,i,m,$f,p),w===_)break;_=w}_!==null&&m.stopPropagation()}else Ym(r,i,m,null,p)}}var $f=null;function A0(r,i,p,m){if($f=null,r=yy(m),r=_l(r),r!==null)if(i=zl(r),i===null)r=null;else if(p=i.tag,p===13){if(r=C1(i),r!==null)return r;r=null}else if(p===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return $f=r,null}function N1(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K3()){case gy:return 1;case z1:return 4;case Hf:case Y3:return 16;case A1:return 536870912;default:return 16}default:return 16}}var vs=null,wy=null,Df=null;function U1(){if(Df)return Df;var r,i=wy,p=i.length,m,_="value"in vs?vs.value:vs.textContent,w=_.length;for(r=0;r<p&&i[r]===_[r];r++);var c=p-r;for(m=1;m<=c&&i[p-m]===_[w-m];m++);return Df=_.slice(r,1<m?1-m:void 0)}function Rf(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function vf(){return!0}function qv(){return!1}function Ki(r){function i(p,m,_,w,c){this._reactName=p,this._targetInst=_,this.type=m,this.nativeEvent=w,this.target=c,this.currentTarget=null;for(var F in r)r.hasOwnProperty(F)&&(p=r[F],this[F]=p?p(w):w[F]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?vf:qv,this.isPropagationStopped=qv,this}return Vr(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=vf)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=vf)},persist:function(){},isPersistent:vf}),i}var nc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},by=Ki(nc),jp=Vr({},nc,{view:0,detail:0}),cb=Ki(jp),jm,qm,op,gd=Vr({},jp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sy,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==op&&(op&&r.type==="mousemove"?(jm=r.screenX-op.screenX,qm=r.screenY-op.screenY):qm=jm=0,op=r),jm)},movementY:function(r){return"movementY"in r?r.movementY:qm}}),Gv=Ki(gd),pb=Vr({},gd,{dataTransfer:0}),hb=Ki(pb),fb=Vr({},jp,{relatedTarget:0}),Gm=Ki(fb),db=Vr({},nc,{animationName:0,elapsedTime:0,pseudoElement:0}),mb=Ki(db),yb=Vr({},nc,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),gb=Ki(yb),vb=Vr({},nc,{data:0}),Zv=Ki(vb),_b={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bb(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=wb[r])?!!i[r]:!1}function Sy(){return bb}var Sb=Vr({},jp,{key:function(r){if(r.key){var i=_b[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Rf(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?xb[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sy,charCode:function(r){return r.type==="keypress"?Rf(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Rf(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Eb=Ki(Sb),Tb=Vr({},gd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hv=Ki(Tb),Cb=Vr({},jp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sy}),Ib=Ki(Cb),kb=Vr({},nc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pb=Ki(kb),zb=Vr({},gd,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ab=Ki(zb),Mb=[9,13,27,32],Ey=Ua&&"CompositionEvent"in window,mp=null;Ua&&"documentMode"in document&&(mp=document.documentMode);var Lb=Ua&&"TextEvent"in window&&!mp,V1=Ua&&(!Ey||mp&&8<mp&&11>=mp),Wv=" ",Xv=!1;function j1(r,i){switch(r){case"keyup":return Mb.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q1(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Lu=!1;function Db(r,i){switch(r){case"compositionend":return q1(i);case"keypress":return i.which!==32?null:(Xv=!0,Wv);case"textInput":return r=i.data,r===Wv&&Xv?null:r;default:return null}}function Rb(r,i){if(Lu)return r==="compositionend"||!Ey&&j1(r,i)?(r=U1(),Df=wy=vs=null,Lu=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return V1&&i.locale!=="ko"?null:i.data;default:return null}}var Ob={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $v(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Ob[r.type]:i==="textarea"}function G1(r,i,p,m){w1(m),i=Kf(i,"onChange"),0<i.length&&(p=new by("onChange","change",null,p,m),r.push({event:p,listeners:i}))}var yp=null,kp=null;function Bb(r){tx(r,0)}function vd(r){var i=Ou(r);if(d1(i))return r}function Fb(r,i){if(r==="change")return i}var Z1=!1;if(Ua){var Zm;if(Ua){var Hm="oninput"in document;if(!Hm){var Kv=document.createElement("div");Kv.setAttribute("oninput","return;"),Hm=typeof Kv.oninput=="function"}Zm=Hm}else Zm=!1;Z1=Zm&&(!document.documentMode||9<document.documentMode)}function Yv(){yp&&(yp.detachEvent("onpropertychange",H1),kp=yp=null)}function H1(r){if(r.propertyName==="value"&&vd(kp)){var i=[];G1(i,kp,r,yy(r)),T1(Bb,i)}}function Nb(r,i,p){r==="focusin"?(Yv(),yp=i,kp=p,yp.attachEvent("onpropertychange",H1)):r==="focusout"&&Yv()}function Ub(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vd(kp)}function Vb(r,i){if(r==="click")return vd(i)}function jb(r,i){if(r==="input"||r==="change")return vd(i)}function qb(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var ko=typeof Object.is=="function"?Object.is:qb;function Pp(r,i){if(ko(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var p=Object.keys(r),m=Object.keys(i);if(p.length!==m.length)return!1;for(m=0;m<p.length;m++){var _=p[m];if(!f0.call(i,_)||!ko(r[_],i[_]))return!1}return!0}function Jv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Qv(r,i){var p=Jv(r);r=0;for(var m;p;){if(p.nodeType===3){if(m=r+p.textContent.length,r<=i&&m>=i)return{node:p,offset:i-r};r=m}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Jv(p)}}function W1(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?W1(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function X1(){for(var r=window,i=qf();i instanceof r.HTMLIFrameElement;){try{var p=typeof i.contentWindow.location.href=="string"}catch{p=!1}if(p)r=i.contentWindow;else break;i=qf(r.document)}return i}function Ty(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function Gb(r){var i=X1(),p=r.focusedElem,m=r.selectionRange;if(i!==p&&p&&p.ownerDocument&&W1(p.ownerDocument.documentElement,p)){if(m!==null&&Ty(p)){if(i=m.start,r=m.end,r===void 0&&(r=i),"selectionStart"in p)p.selectionStart=i,p.selectionEnd=Math.min(r,p.value.length);else if(r=(i=p.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var _=p.textContent.length,w=Math.min(m.start,_);m=m.end===void 0?w:Math.min(m.end,_),!r.extend&&w>m&&(_=m,m=w,w=_),_=Qv(p,w);var c=Qv(p,m);_&&c&&(r.rangeCount!==1||r.anchorNode!==_.node||r.anchorOffset!==_.offset||r.focusNode!==c.node||r.focusOffset!==c.offset)&&(i=i.createRange(),i.setStart(_.node,_.offset),r.removeAllRanges(),w>m?(r.addRange(i),r.extend(c.node,c.offset)):(i.setEnd(c.node,c.offset),r.addRange(i)))}}for(i=[],r=p;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<i.length;p++)r=i[p],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Zb=Ua&&"documentMode"in document&&11>=document.documentMode,Du=null,M0=null,gp=null,L0=!1;function e_(r,i,p){var m=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;L0||Du==null||Du!==qf(m)||(m=Du,"selectionStart"in m&&Ty(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),gp&&Pp(gp,m)||(gp=m,m=Kf(M0,"onSelect"),0<m.length&&(i=new by("onSelect","select",null,i,p),r.push({event:i,listeners:m}),i.target=Du)))}function _f(r,i){var p={};return p[r.toLowerCase()]=i.toLowerCase(),p["Webkit"+r]="webkit"+i,p["Moz"+r]="moz"+i,p}var Ru={animationend:_f("Animation","AnimationEnd"),animationiteration:_f("Animation","AnimationIteration"),animationstart:_f("Animation","AnimationStart"),transitionend:_f("Transition","TransitionEnd")},Wm={},$1={};Ua&&($1=document.createElement("div").style,"AnimationEvent"in window||(delete Ru.animationend.animation,delete Ru.animationiteration.animation,delete Ru.animationstart.animation),"TransitionEvent"in window||delete Ru.transitionend.transition);function _d(r){if(Wm[r])return Wm[r];if(!Ru[r])return r;var i=Ru[r],p;for(p in i)if(i.hasOwnProperty(p)&&p in $1)return Wm[r]=i[p];return r}var K1=_d("animationend"),Y1=_d("animationiteration"),J1=_d("animationstart"),Q1=_d("transitionend"),ex=new Map,t_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(r,i){ex.set(r,i),Pl(i,[r])}for(var Xm=0;Xm<t_.length;Xm++){var $m=t_[Xm],Hb=$m.toLowerCase(),Wb=$m[0].toUpperCase()+$m.slice(1);As(Hb,"on"+Wb)}As(K1,"onAnimationEnd");As(Y1,"onAnimationIteration");As(J1,"onAnimationStart");As("dblclick","onDoubleClick");As("focusin","onFocus");As("focusout","onBlur");As(Q1,"onTransitionEnd");$u("onMouseEnter",["mouseout","mouseover"]);$u("onMouseLeave",["mouseout","mouseover"]);$u("onPointerEnter",["pointerout","pointerover"]);$u("onPointerLeave",["pointerout","pointerover"]);Pl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xb=new Set("cancel close invalid load scroll toggle".split(" ").concat(hp));function r_(r,i,p){var m=r.type||"unknown-event";r.currentTarget=p,H3(m,i,void 0,r),r.currentTarget=null}function tx(r,i){i=(i&4)!==0;for(var p=0;p<r.length;p++){var m=r[p],_=m.event;m=m.listeners;e:{var w=void 0;if(i)for(var c=m.length-1;0<=c;c--){var F=m[c],M=F.instance,ee=F.currentTarget;if(F=F.listener,M!==w&&_.isPropagationStopped())break e;r_(_,F,ee),w=M}else for(c=0;c<m.length;c++){if(F=m[c],M=F.instance,ee=F.currentTarget,F=F.listener,M!==w&&_.isPropagationStopped())break e;r_(_,F,ee),w=M}}}if(Zf)throw r=k0,Zf=!1,k0=null,r}function Pr(r,i){var p=i[F0];p===void 0&&(p=i[F0]=new Set);var m=r+"__bubble";p.has(m)||(rx(i,r,2,!1),p.add(m))}function Km(r,i,p){var m=0;i&&(m|=4),rx(p,r,m,i)}var xf="_reactListening"+Math.random().toString(36).slice(2);function zp(r){if(!r[xf]){r[xf]=!0,u1.forEach(function(p){p!=="selectionchange"&&(Xb.has(p)||Km(p,!1,r),Km(p,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[xf]||(i[xf]=!0,Km("selectionchange",!1,i))}}function rx(r,i,p,m){switch(N1(i)){case 1:var _=lb;break;case 4:_=ub;break;default:_=xy}p=_.bind(null,i,p,r),_=void 0,!I0||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(_=!0),m?_!==void 0?r.addEventListener(i,p,{capture:!0,passive:_}):r.addEventListener(i,p,!0):_!==void 0?r.addEventListener(i,p,{passive:_}):r.addEventListener(i,p,!1)}function Ym(r,i,p,m,_){var w=m;if(!(i&1)&&!(i&2)&&m!==null)e:for(;;){if(m===null)return;var c=m.tag;if(c===3||c===4){var F=m.stateNode.containerInfo;if(F===_||F.nodeType===8&&F.parentNode===_)break;if(c===4)for(c=m.return;c!==null;){var M=c.tag;if((M===3||M===4)&&(M=c.stateNode.containerInfo,M===_||M.nodeType===8&&M.parentNode===_))return;c=c.return}for(;F!==null;){if(c=_l(F),c===null)return;if(M=c.tag,M===5||M===6){m=w=c;continue e}F=F.parentNode}}m=m.return}T1(function(){var ee=w,oe=yy(p),me=[];e:{var te=ex.get(r);if(te!==void 0){var Pe=by,Me=r;switch(r){case"keypress":if(Rf(p)===0)break e;case"keydown":case"keyup":Pe=Eb;break;case"focusin":Me="focus",Pe=Gm;break;case"focusout":Me="blur",Pe=Gm;break;case"beforeblur":case"afterblur":Pe=Gm;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=Gv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=hb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=Ib;break;case K1:case Y1:case J1:Pe=mb;break;case Q1:Pe=Pb;break;case"scroll":Pe=cb;break;case"wheel":Pe=Ab;break;case"copy":case"cut":case"paste":Pe=gb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=Hv}var ke=(i&4)!==0,at=!ke&&r==="scroll",ae=ke?te!==null?te+"Capture":null:te;ke=[];for(var J=ee,le;J!==null;){le=J;var xe=le.stateNode;if(le.tag===5&&xe!==null&&(le=xe,ae!==null&&(xe=Ep(J,ae),xe!=null&&ke.push(Ap(J,xe,le)))),at)break;J=J.return}0<ke.length&&(te=new Pe(te,Me,null,p,oe),me.push({event:te,listeners:ke}))}}if(!(i&7)){e:{if(te=r==="mouseover"||r==="pointerover",Pe=r==="mouseout"||r==="pointerout",te&&p!==T0&&(Me=p.relatedTarget||p.fromElement)&&(_l(Me)||Me[Va]))break e;if((Pe||te)&&(te=oe.window===oe?oe:(te=oe.ownerDocument)?te.defaultView||te.parentWindow:window,Pe?(Me=p.relatedTarget||p.toElement,Pe=ee,Me=Me?_l(Me):null,Me!==null&&(at=zl(Me),Me!==at||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(Pe=null,Me=ee),Pe!==Me)){if(ke=Gv,xe="onMouseLeave",ae="onMouseEnter",J="mouse",(r==="pointerout"||r==="pointerover")&&(ke=Hv,xe="onPointerLeave",ae="onPointerEnter",J="pointer"),at=Pe==null?te:Ou(Pe),le=Me==null?te:Ou(Me),te=new ke(xe,J+"leave",Pe,p,oe),te.target=at,te.relatedTarget=le,xe=null,_l(oe)===ee&&(ke=new ke(ae,J+"enter",Me,p,oe),ke.target=le,ke.relatedTarget=at,xe=ke),at=xe,Pe&&Me)t:{for(ke=Pe,ae=Me,J=0,le=ke;le;le=zu(le))J++;for(le=0,xe=ae;xe;xe=zu(xe))le++;for(;0<J-le;)ke=zu(ke),J--;for(;0<le-J;)ae=zu(ae),le--;for(;J--;){if(ke===ae||ae!==null&&ke===ae.alternate)break t;ke=zu(ke),ae=zu(ae)}ke=null}else ke=null;Pe!==null&&n_(me,te,Pe,ke,!1),Me!==null&&at!==null&&n_(me,at,Me,ke,!0)}}e:{if(te=ee?Ou(ee):window,Pe=te.nodeName&&te.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&te.type==="file")var Ue=Fb;else if($v(te))if(Z1)Ue=jb;else{Ue=Ub;var Ke=Nb}else(Pe=te.nodeName)&&Pe.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(Ue=Vb);if(Ue&&(Ue=Ue(r,ee))){G1(me,Ue,p,oe);break e}Ke&&Ke(r,te,ee),r==="focusout"&&(Ke=te._wrapperState)&&Ke.controlled&&te.type==="number"&&x0(te,"number",te.value)}switch(Ke=ee?Ou(ee):window,r){case"focusin":($v(Ke)||Ke.contentEditable==="true")&&(Du=Ke,M0=ee,gp=null);break;case"focusout":gp=M0=Du=null;break;case"mousedown":L0=!0;break;case"contextmenu":case"mouseup":case"dragend":L0=!1,e_(me,p,oe);break;case"selectionchange":if(Zb)break;case"keydown":case"keyup":e_(me,p,oe)}var Je;if(Ey)e:{switch(r){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else Lu?j1(r,p)&&(rt="onCompositionEnd"):r==="keydown"&&p.keyCode===229&&(rt="onCompositionStart");rt&&(V1&&p.locale!=="ko"&&(Lu||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&Lu&&(Je=U1()):(vs=oe,wy="value"in vs?vs.value:vs.textContent,Lu=!0)),Ke=Kf(ee,rt),0<Ke.length&&(rt=new Zv(rt,r,null,p,oe),me.push({event:rt,listeners:Ke}),Je?rt.data=Je:(Je=q1(p),Je!==null&&(rt.data=Je)))),(Je=Lb?Db(r,p):Rb(r,p))&&(ee=Kf(ee,"onBeforeInput"),0<ee.length&&(oe=new Zv("onBeforeInput","beforeinput",null,p,oe),me.push({event:oe,listeners:ee}),oe.data=Je))}tx(me,i)})}function Ap(r,i,p){return{instance:r,listener:i,currentTarget:p}}function Kf(r,i){for(var p=i+"Capture",m=[];r!==null;){var _=r,w=_.stateNode;_.tag===5&&w!==null&&(_=w,w=Ep(r,p),w!=null&&m.unshift(Ap(r,w,_)),w=Ep(r,i),w!=null&&m.push(Ap(r,w,_))),r=r.return}return m}function zu(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function n_(r,i,p,m,_){for(var w=i._reactName,c=[];p!==null&&p!==m;){var F=p,M=F.alternate,ee=F.stateNode;if(M!==null&&M===m)break;F.tag===5&&ee!==null&&(F=ee,_?(M=Ep(p,w),M!=null&&c.unshift(Ap(p,M,F))):_||(M=Ep(p,w),M!=null&&c.push(Ap(p,M,F)))),p=p.return}c.length!==0&&r.push({event:i,listeners:c})}var $b=/\r\n?/g,Kb=/\u0000|\uFFFD/g;function i_(r){return(typeof r=="string"?r:""+r).replace($b,`
`).replace(Kb,"")}function wf(r,i,p){if(i=i_(i),i_(r)!==i&&p)throw Error(Oe(425))}function Yf(){}var D0=null,R0=null;function O0(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var B0=typeof setTimeout=="function"?setTimeout:void 0,Yb=typeof clearTimeout=="function"?clearTimeout:void 0,o_=typeof Promise=="function"?Promise:void 0,Jb=typeof queueMicrotask=="function"?queueMicrotask:typeof o_<"u"?function(r){return o_.resolve(null).then(r).catch(Qb)}:B0;function Qb(r){setTimeout(function(){throw r})}function Jm(r,i){var p=i,m=0;do{var _=p.nextSibling;if(r.removeChild(p),_&&_.nodeType===8)if(p=_.data,p==="/$"){if(m===0){r.removeChild(_),Ip(i);return}m--}else p!=="$"&&p!=="$?"&&p!=="$!"||m++;p=_}while(p);Ip(i)}function Es(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function a_(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var p=r.data;if(p==="$"||p==="$!"||p==="$?"){if(i===0)return r;i--}else p==="/$"&&i++}r=r.previousSibling}return null}var ic=Math.random().toString(36).slice(2),ra="__reactFiber$"+ic,Mp="__reactProps$"+ic,Va="__reactContainer$"+ic,F0="__reactEvents$"+ic,e4="__reactListeners$"+ic,t4="__reactHandles$"+ic;function _l(r){var i=r[ra];if(i)return i;for(var p=r.parentNode;p;){if(i=p[Va]||p[ra]){if(p=i.alternate,i.child!==null||p!==null&&p.child!==null)for(r=a_(r);r!==null;){if(p=r[ra])return p;r=a_(r)}return i}r=p,p=r.parentNode}return null}function qp(r){return r=r[ra]||r[Va],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ou(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(Oe(33))}function xd(r){return r[Mp]||null}var N0=[],Bu=-1;function Ms(r){return{current:r}}function zr(r){0>Bu||(r.current=N0[Bu],N0[Bu]=null,Bu--)}function wr(r,i){Bu++,N0[Bu]=r.current,r.current=i}var zs={},oi=Ms(zs),Li=Ms(!1),El=zs;function Ku(r,i){var p=r.type.contextTypes;if(!p)return zs;var m=r.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===i)return m.__reactInternalMemoizedMaskedChildContext;var _={},w;for(w in p)_[w]=i[w];return m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=_),_}function Di(r){return r=r.childContextTypes,r!=null}function Jf(){zr(Li),zr(oi)}function s_(r,i,p){if(oi.current!==zs)throw Error(Oe(168));wr(oi,i),wr(Li,p)}function nx(r,i,p){var m=r.stateNode;if(i=i.childContextTypes,typeof m.getChildContext!="function")return p;m=m.getChildContext();for(var _ in m)if(!(_ in i))throw Error(Oe(108,N3(r)||"Unknown",_));return Vr({},p,m)}function Qf(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||zs,El=oi.current,wr(oi,r),wr(Li,Li.current),!0}function l_(r,i,p){var m=r.stateNode;if(!m)throw Error(Oe(169));p?(r=nx(r,i,El),m.__reactInternalMemoizedMergedChildContext=r,zr(Li),zr(oi),wr(oi,r)):zr(Li),wr(Li,p)}var Oa=null,wd=!1,Qm=!1;function ix(r){Oa===null?Oa=[r]:Oa.push(r)}function r4(r){wd=!0,ix(r)}function Ls(){if(!Qm&&Oa!==null){Qm=!0;var r=0,i=pr;try{var p=Oa;for(pr=1;r<p.length;r++){var m=p[r];do m=m(!0);while(m!==null)}Oa=null,wd=!1}catch(_){throw Oa!==null&&(Oa=Oa.slice(r+1)),P1(gy,Ls),_}finally{pr=i,Qm=!1}}return null}var Fu=[],Nu=0,ed=null,td=0,oo=[],ao=0,Tl=null,Ba=1,Fa="";function gl(r,i){Fu[Nu++]=td,Fu[Nu++]=ed,ed=r,td=i}function ox(r,i,p){oo[ao++]=Ba,oo[ao++]=Fa,oo[ao++]=Tl,Tl=r;var m=Ba;r=Fa;var _=32-Co(m)-1;m&=~(1<<_),p+=1;var w=32-Co(i)+_;if(30<w){var c=_-_%5;w=(m&(1<<c)-1).toString(32),m>>=c,_-=c,Ba=1<<32-Co(i)+_|p<<_|m,Fa=w+r}else Ba=1<<w|p<<_|m,Fa=r}function Cy(r){r.return!==null&&(gl(r,1),ox(r,1,0))}function Iy(r){for(;r===ed;)ed=Fu[--Nu],Fu[Nu]=null,td=Fu[--Nu],Fu[Nu]=null;for(;r===Tl;)Tl=oo[--ao],oo[ao]=null,Fa=oo[--ao],oo[ao]=null,Ba=oo[--ao],oo[ao]=null}var Wi=null,Hi=null,Dr=!1,To=null;function ax(r,i){var p=so(5,null,null,0);p.elementType="DELETED",p.stateNode=i,p.return=r,i=r.deletions,i===null?(r.deletions=[p],r.flags|=16):i.push(p)}function u_(r,i){switch(r.tag){case 5:var p=r.type;return i=i.nodeType!==1||p.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,Wi=r,Hi=Es(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,Wi=r,Hi=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(p=Tl!==null?{id:Ba,overflow:Fa}:null,r.memoizedState={dehydrated:i,treeContext:p,retryLane:1073741824},p=so(18,null,null,0),p.stateNode=i,p.return=r,r.child=p,Wi=r,Hi=null,!0):!1;default:return!1}}function U0(r){return(r.mode&1)!==0&&(r.flags&128)===0}function V0(r){if(Dr){var i=Hi;if(i){var p=i;if(!u_(r,i)){if(U0(r))throw Error(Oe(418));i=Es(p.nextSibling);var m=Wi;i&&u_(r,i)?ax(m,p):(r.flags=r.flags&-4097|2,Dr=!1,Wi=r)}}else{if(U0(r))throw Error(Oe(418));r.flags=r.flags&-4097|2,Dr=!1,Wi=r}}}function c_(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Wi=r}function bf(r){if(r!==Wi)return!1;if(!Dr)return c_(r),Dr=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!O0(r.type,r.memoizedProps)),i&&(i=Hi)){if(U0(r))throw sx(),Error(Oe(418));for(;i;)ax(r,i),i=Es(i.nextSibling)}if(c_(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Oe(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var p=r.data;if(p==="/$"){if(i===0){Hi=Es(r.nextSibling);break e}i--}else p!=="$"&&p!=="$!"&&p!=="$?"||i++}r=r.nextSibling}Hi=null}}else Hi=Wi?Es(r.stateNode.nextSibling):null;return!0}function sx(){for(var r=Hi;r;)r=Es(r.nextSibling)}function Yu(){Hi=Wi=null,Dr=!1}function ky(r){To===null?To=[r]:To.push(r)}var n4=Ga.ReactCurrentBatchConfig;function So(r,i){if(r&&r.defaultProps){i=Vr({},i),r=r.defaultProps;for(var p in r)i[p]===void 0&&(i[p]=r[p]);return i}return i}var rd=Ms(null),nd=null,Uu=null,Py=null;function zy(){Py=Uu=nd=null}function Ay(r){var i=rd.current;zr(rd),r._currentValue=i}function j0(r,i,p){for(;r!==null;){var m=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),r===p)break;r=r.return}}function Wu(r,i){nd=r,Py=Uu=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&i&&(Mi=!0),r.firstContext=null)}function uo(r){var i=r._currentValue;if(Py!==r)if(r={context:r,memoizedValue:i,next:null},Uu===null){if(nd===null)throw Error(Oe(308));Uu=r,nd.dependencies={lanes:0,firstContext:r}}else Uu=Uu.next=r;return i}var xl=null;function My(r){xl===null?xl=[r]:xl.push(r)}function lx(r,i,p,m){var _=i.interleaved;return _===null?(p.next=p,My(i)):(p.next=_.next,_.next=p),i.interleaved=p,ja(r,m)}function ja(r,i){r.lanes|=i;var p=r.alternate;for(p!==null&&(p.lanes|=i),p=r,r=r.return;r!==null;)r.childLanes|=i,p=r.alternate,p!==null&&(p.childLanes|=i),p=r,r=r.return;return p.tag===3?p.stateNode:null}var ms=!1;function Ly(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ux(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Na(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function Ts(r,i,p){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,er&2){var _=m.pending;return _===null?i.next=i:(i.next=_.next,_.next=i),m.pending=i,ja(r,p)}return _=m.interleaved,_===null?(i.next=i,My(m)):(i.next=_.next,_.next=i),m.interleaved=i,ja(r,p)}function Of(r,i,p){if(i=i.updateQueue,i!==null&&(i=i.shared,(p&4194240)!==0)){var m=i.lanes;m&=r.pendingLanes,p|=m,i.lanes=p,vy(r,p)}}function p_(r,i){var p=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,p===m)){var _=null,w=null;if(p=p.firstBaseUpdate,p!==null){do{var c={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};w===null?_=w=c:w=w.next=c,p=p.next}while(p!==null);w===null?_=w=i:w=w.next=i}else _=w=i;p={baseState:m.baseState,firstBaseUpdate:_,lastBaseUpdate:w,shared:m.shared,effects:m.effects},r.updateQueue=p;return}r=p.lastBaseUpdate,r===null?p.firstBaseUpdate=i:r.next=i,p.lastBaseUpdate=i}function id(r,i,p,m){var _=r.updateQueue;ms=!1;var w=_.firstBaseUpdate,c=_.lastBaseUpdate,F=_.shared.pending;if(F!==null){_.shared.pending=null;var M=F,ee=M.next;M.next=null,c===null?w=ee:c.next=ee,c=M;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,F=oe.lastBaseUpdate,F!==c&&(F===null?oe.firstBaseUpdate=ee:F.next=ee,oe.lastBaseUpdate=M))}if(w!==null){var me=_.baseState;c=0,oe=ee=M=null,F=w;do{var te=F.lane,Pe=F.eventTime;if((m&te)===te){oe!==null&&(oe=oe.next={eventTime:Pe,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var Me=r,ke=F;switch(te=i,Pe=p,ke.tag){case 1:if(Me=ke.payload,typeof Me=="function"){me=Me.call(Pe,me,te);break e}me=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=ke.payload,te=typeof Me=="function"?Me.call(Pe,me,te):Me,te==null)break e;me=Vr({},me,te);break e;case 2:ms=!0}}F.callback!==null&&F.lane!==0&&(r.flags|=64,te=_.effects,te===null?_.effects=[F]:te.push(F))}else Pe={eventTime:Pe,lane:te,tag:F.tag,payload:F.payload,callback:F.callback,next:null},oe===null?(ee=oe=Pe,M=me):oe=oe.next=Pe,c|=te;if(F=F.next,F===null){if(F=_.shared.pending,F===null)break;te=F,F=te.next,te.next=null,_.lastBaseUpdate=te,_.shared.pending=null}}while(!0);if(oe===null&&(M=me),_.baseState=M,_.firstBaseUpdate=ee,_.lastBaseUpdate=oe,i=_.shared.interleaved,i!==null){_=i;do c|=_.lane,_=_.next;while(_!==i)}else w===null&&(_.shared.lanes=0);Il|=c,r.lanes=c,r.memoizedState=me}}function h_(r,i,p){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var m=r[i],_=m.callback;if(_!==null){if(m.callback=null,m=p,typeof _!="function")throw Error(Oe(191,_));_.call(m)}}}var cx=new l1.Component().refs;function q0(r,i,p,m){i=r.memoizedState,p=p(m,i),p=p==null?i:Vr({},i,p),r.memoizedState=p,r.lanes===0&&(r.updateQueue.baseState=p)}var bd={isMounted:function(r){return(r=r._reactInternals)?zl(r)===r:!1},enqueueSetState:function(r,i,p){r=r._reactInternals;var m=mi(),_=Is(r),w=Na(m,_);w.payload=i,p!=null&&(w.callback=p),i=Ts(r,w,_),i!==null&&(Io(i,r,_,m),Of(i,r,_))},enqueueReplaceState:function(r,i,p){r=r._reactInternals;var m=mi(),_=Is(r),w=Na(m,_);w.tag=1,w.payload=i,p!=null&&(w.callback=p),i=Ts(r,w,_),i!==null&&(Io(i,r,_,m),Of(i,r,_))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var p=mi(),m=Is(r),_=Na(p,m);_.tag=2,i!=null&&(_.callback=i),i=Ts(r,_,m),i!==null&&(Io(i,r,m,p),Of(i,r,m))}};function f_(r,i,p,m,_,w,c){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,w,c):i.prototype&&i.prototype.isPureReactComponent?!Pp(p,m)||!Pp(_,w):!0}function px(r,i,p){var m=!1,_=zs,w=i.contextType;return typeof w=="object"&&w!==null?w=uo(w):(_=Di(i)?El:oi.current,m=i.contextTypes,w=(m=m!=null)?Ku(r,_):zs),i=new i(p,w),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=bd,r.stateNode=i,i._reactInternals=r,m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=_,r.__reactInternalMemoizedMaskedChildContext=w),i}function d_(r,i,p,m){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(p,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(p,m),i.state!==r&&bd.enqueueReplaceState(i,i.state,null)}function G0(r,i,p,m){var _=r.stateNode;_.props=p,_.state=r.memoizedState,_.refs=cx,Ly(r);var w=i.contextType;typeof w=="object"&&w!==null?_.context=uo(w):(w=Di(i)?El:oi.current,_.context=Ku(r,w)),_.state=r.memoizedState,w=i.getDerivedStateFromProps,typeof w=="function"&&(q0(r,i,w,p),_.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(i=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),i!==_.state&&bd.enqueueReplaceState(_,_.state,null),id(r,p,_,m),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308)}function ap(r,i,p){if(r=p.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(Oe(309));var m=p.stateNode}if(!m)throw Error(Oe(147,r));var _=m,w=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===w?i.ref:(i=function(c){var F=_.refs;F===cx&&(F=_.refs={}),c===null?delete F[w]:F[w]=c},i._stringRef=w,i)}if(typeof r!="string")throw Error(Oe(284));if(!p._owner)throw Error(Oe(290,r))}return r}function Sf(r,i){throw r=Object.prototype.toString.call(i),Error(Oe(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function m_(r){var i=r._init;return i(r._payload)}function hx(r){function i(ae,J){if(r){var le=ae.deletions;le===null?(ae.deletions=[J],ae.flags|=16):le.push(J)}}function p(ae,J){if(!r)return null;for(;J!==null;)i(ae,J),J=J.sibling;return null}function m(ae,J){for(ae=new Map;J!==null;)J.key!==null?ae.set(J.key,J):ae.set(J.index,J),J=J.sibling;return ae}function _(ae,J){return ae=ks(ae,J),ae.index=0,ae.sibling=null,ae}function w(ae,J,le){return ae.index=le,r?(le=ae.alternate,le!==null?(le=le.index,le<J?(ae.flags|=2,J):le):(ae.flags|=2,J)):(ae.flags|=1048576,J)}function c(ae){return r&&ae.alternate===null&&(ae.flags|=2),ae}function F(ae,J,le,xe){return J===null||J.tag!==6?(J=a0(le,ae.mode,xe),J.return=ae,J):(J=_(J,le),J.return=ae,J)}function M(ae,J,le,xe){var Ue=le.type;return Ue===Mu?oe(ae,J,le.props.children,xe,le.key):J!==null&&(J.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===ds&&m_(Ue)===J.type)?(xe=_(J,le.props),xe.ref=ap(ae,J,le),xe.return=ae,xe):(xe=jf(le.type,le.key,le.props,null,ae.mode,xe),xe.ref=ap(ae,J,le),xe.return=ae,xe)}function ee(ae,J,le,xe){return J===null||J.tag!==4||J.stateNode.containerInfo!==le.containerInfo||J.stateNode.implementation!==le.implementation?(J=s0(le,ae.mode,xe),J.return=ae,J):(J=_(J,le.children||[]),J.return=ae,J)}function oe(ae,J,le,xe,Ue){return J===null||J.tag!==7?(J=Sl(le,ae.mode,xe,Ue),J.return=ae,J):(J=_(J,le),J.return=ae,J)}function me(ae,J,le){if(typeof J=="string"&&J!==""||typeof J=="number")return J=a0(""+J,ae.mode,le),J.return=ae,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case hf:return le=jf(J.type,J.key,J.props,null,ae.mode,le),le.ref=ap(ae,null,J),le.return=ae,le;case Au:return J=s0(J,ae.mode,le),J.return=ae,J;case ds:var xe=J._init;return me(ae,xe(J._payload),le)}if(cp(J)||tp(J))return J=Sl(J,ae.mode,le,null),J.return=ae,J;Sf(ae,J)}return null}function te(ae,J,le,xe){var Ue=J!==null?J.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return Ue!==null?null:F(ae,J,""+le,xe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case hf:return le.key===Ue?M(ae,J,le,xe):null;case Au:return le.key===Ue?ee(ae,J,le,xe):null;case ds:return Ue=le._init,te(ae,J,Ue(le._payload),xe)}if(cp(le)||tp(le))return Ue!==null?null:oe(ae,J,le,xe,null);Sf(ae,le)}return null}function Pe(ae,J,le,xe,Ue){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return ae=ae.get(le)||null,F(J,ae,""+xe,Ue);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case hf:return ae=ae.get(xe.key===null?le:xe.key)||null,M(J,ae,xe,Ue);case Au:return ae=ae.get(xe.key===null?le:xe.key)||null,ee(J,ae,xe,Ue);case ds:var Ke=xe._init;return Pe(ae,J,le,Ke(xe._payload),Ue)}if(cp(xe)||tp(xe))return ae=ae.get(le)||null,oe(J,ae,xe,Ue,null);Sf(J,xe)}return null}function Me(ae,J,le,xe){for(var Ue=null,Ke=null,Je=J,rt=J=0,It=null;Je!==null&&rt<le.length;rt++){Je.index>rt?(It=Je,Je=null):It=Je.sibling;var yt=te(ae,Je,le[rt],xe);if(yt===null){Je===null&&(Je=It);break}r&&Je&&yt.alternate===null&&i(ae,Je),J=w(yt,J,rt),Ke===null?Ue=yt:Ke.sibling=yt,Ke=yt,Je=It}if(rt===le.length)return p(ae,Je),Dr&&gl(ae,rt),Ue;if(Je===null){for(;rt<le.length;rt++)Je=me(ae,le[rt],xe),Je!==null&&(J=w(Je,J,rt),Ke===null?Ue=Je:Ke.sibling=Je,Ke=Je);return Dr&&gl(ae,rt),Ue}for(Je=m(ae,Je);rt<le.length;rt++)It=Pe(Je,ae,rt,le[rt],xe),It!==null&&(r&&It.alternate!==null&&Je.delete(It.key===null?rt:It.key),J=w(It,J,rt),Ke===null?Ue=It:Ke.sibling=It,Ke=It);return r&&Je.forEach(function(tr){return i(ae,tr)}),Dr&&gl(ae,rt),Ue}function ke(ae,J,le,xe){var Ue=tp(le);if(typeof Ue!="function")throw Error(Oe(150));if(le=Ue.call(le),le==null)throw Error(Oe(151));for(var Ke=Ue=null,Je=J,rt=J=0,It=null,yt=le.next();Je!==null&&!yt.done;rt++,yt=le.next()){Je.index>rt?(It=Je,Je=null):It=Je.sibling;var tr=te(ae,Je,yt.value,xe);if(tr===null){Je===null&&(Je=It);break}r&&Je&&tr.alternate===null&&i(ae,Je),J=w(tr,J,rt),Ke===null?Ue=tr:Ke.sibling=tr,Ke=tr,Je=It}if(yt.done)return p(ae,Je),Dr&&gl(ae,rt),Ue;if(Je===null){for(;!yt.done;rt++,yt=le.next())yt=me(ae,yt.value,xe),yt!==null&&(J=w(yt,J,rt),Ke===null?Ue=yt:Ke.sibling=yt,Ke=yt);return Dr&&gl(ae,rt),Ue}for(Je=m(ae,Je);!yt.done;rt++,yt=le.next())yt=Pe(Je,ae,rt,yt.value,xe),yt!==null&&(r&&yt.alternate!==null&&Je.delete(yt.key===null?rt:yt.key),J=w(yt,J,rt),Ke===null?Ue=yt:Ke.sibling=yt,Ke=yt);return r&&Je.forEach(function(Wr){return i(ae,Wr)}),Dr&&gl(ae,rt),Ue}function at(ae,J,le,xe){if(typeof le=="object"&&le!==null&&le.type===Mu&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case hf:e:{for(var Ue=le.key,Ke=J;Ke!==null;){if(Ke.key===Ue){if(Ue=le.type,Ue===Mu){if(Ke.tag===7){p(ae,Ke.sibling),J=_(Ke,le.props.children),J.return=ae,ae=J;break e}}else if(Ke.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===ds&&m_(Ue)===Ke.type){p(ae,Ke.sibling),J=_(Ke,le.props),J.ref=ap(ae,Ke,le),J.return=ae,ae=J;break e}p(ae,Ke);break}else i(ae,Ke);Ke=Ke.sibling}le.type===Mu?(J=Sl(le.props.children,ae.mode,xe,le.key),J.return=ae,ae=J):(xe=jf(le.type,le.key,le.props,null,ae.mode,xe),xe.ref=ap(ae,J,le),xe.return=ae,ae=xe)}return c(ae);case Au:e:{for(Ke=le.key;J!==null;){if(J.key===Ke)if(J.tag===4&&J.stateNode.containerInfo===le.containerInfo&&J.stateNode.implementation===le.implementation){p(ae,J.sibling),J=_(J,le.children||[]),J.return=ae,ae=J;break e}else{p(ae,J);break}else i(ae,J);J=J.sibling}J=s0(le,ae.mode,xe),J.return=ae,ae=J}return c(ae);case ds:return Ke=le._init,at(ae,J,Ke(le._payload),xe)}if(cp(le))return Me(ae,J,le,xe);if(tp(le))return ke(ae,J,le,xe);Sf(ae,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,J!==null&&J.tag===6?(p(ae,J.sibling),J=_(J,le),J.return=ae,ae=J):(p(ae,J),J=a0(le,ae.mode,xe),J.return=ae,ae=J),c(ae)):p(ae,J)}return at}var Ju=hx(!0),fx=hx(!1),Gp={},ia=Ms(Gp),Lp=Ms(Gp),Dp=Ms(Gp);function wl(r){if(r===Gp)throw Error(Oe(174));return r}function Dy(r,i){switch(wr(Dp,i),wr(Lp,r),wr(ia,Gp),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:b0(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=b0(i,r)}zr(ia),wr(ia,i)}function Qu(){zr(ia),zr(Lp),zr(Dp)}function dx(r){wl(Dp.current);var i=wl(ia.current),p=b0(i,r.type);i!==p&&(wr(Lp,r),wr(ia,p))}function Ry(r){Lp.current===r&&(zr(ia),zr(Lp))}var Nr=Ms(0);function od(r){for(var i=r;i!==null;){if(i.tag===13){var p=i.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var e0=[];function Oy(){for(var r=0;r<e0.length;r++)e0[r]._workInProgressVersionPrimary=null;e0.length=0}var Bf=Ga.ReactCurrentDispatcher,t0=Ga.ReactCurrentBatchConfig,Cl=0,Ur=null,mn=null,Pn=null,ad=!1,vp=!1,Rp=0,i4=0;function ti(){throw Error(Oe(321))}function By(r,i){if(i===null)return!1;for(var p=0;p<i.length&&p<r.length;p++)if(!ko(r[p],i[p]))return!1;return!0}function Fy(r,i,p,m,_,w){if(Cl=w,Ur=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Bf.current=r===null||r.memoizedState===null?l4:u4,r=p(m,_),vp){w=0;do{if(vp=!1,Rp=0,25<=w)throw Error(Oe(301));w+=1,Pn=mn=null,i.updateQueue=null,Bf.current=c4,r=p(m,_)}while(vp)}if(Bf.current=sd,i=mn!==null&&mn.next!==null,Cl=0,Pn=mn=Ur=null,ad=!1,i)throw Error(Oe(300));return r}function Ny(){var r=Rp!==0;return Rp=0,r}function ta(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Ur.memoizedState=Pn=r:Pn=Pn.next=r,Pn}function co(){if(mn===null){var r=Ur.alternate;r=r!==null?r.memoizedState:null}else r=mn.next;var i=Pn===null?Ur.memoizedState:Pn.next;if(i!==null)Pn=i,mn=r;else{if(r===null)throw Error(Oe(310));mn=r,r={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},Pn===null?Ur.memoizedState=Pn=r:Pn=Pn.next=r}return Pn}function Op(r,i){return typeof i=="function"?i(r):i}function r0(r){var i=co(),p=i.queue;if(p===null)throw Error(Oe(311));p.lastRenderedReducer=r;var m=mn,_=m.baseQueue,w=p.pending;if(w!==null){if(_!==null){var c=_.next;_.next=w.next,w.next=c}m.baseQueue=_=w,p.pending=null}if(_!==null){w=_.next,m=m.baseState;var F=c=null,M=null,ee=w;do{var oe=ee.lane;if((Cl&oe)===oe)M!==null&&(M=M.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),m=ee.hasEagerState?ee.eagerState:r(m,ee.action);else{var me={lane:oe,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};M===null?(F=M=me,c=m):M=M.next=me,Ur.lanes|=oe,Il|=oe}ee=ee.next}while(ee!==null&&ee!==w);M===null?c=m:M.next=F,ko(m,i.memoizedState)||(Mi=!0),i.memoizedState=m,i.baseState=c,i.baseQueue=M,p.lastRenderedState=m}if(r=p.interleaved,r!==null){_=r;do w=_.lane,Ur.lanes|=w,Il|=w,_=_.next;while(_!==r)}else _===null&&(p.lanes=0);return[i.memoizedState,p.dispatch]}function n0(r){var i=co(),p=i.queue;if(p===null)throw Error(Oe(311));p.lastRenderedReducer=r;var m=p.dispatch,_=p.pending,w=i.memoizedState;if(_!==null){p.pending=null;var c=_=_.next;do w=r(w,c.action),c=c.next;while(c!==_);ko(w,i.memoizedState)||(Mi=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),p.lastRenderedState=w}return[w,m]}function mx(){}function yx(r,i){var p=Ur,m=co(),_=i(),w=!ko(m.memoizedState,_);if(w&&(m.memoizedState=_,Mi=!0),m=m.queue,Uy(_x.bind(null,p,m,r),[r]),m.getSnapshot!==i||w||Pn!==null&&Pn.memoizedState.tag&1){if(p.flags|=2048,Bp(9,vx.bind(null,p,m,_,i),void 0,null),zn===null)throw Error(Oe(349));Cl&30||gx(p,i,_)}return _}function gx(r,i,p){r.flags|=16384,r={getSnapshot:i,value:p},i=Ur.updateQueue,i===null?(i={lastEffect:null,stores:null},Ur.updateQueue=i,i.stores=[r]):(p=i.stores,p===null?i.stores=[r]:p.push(r))}function vx(r,i,p,m){i.value=p,i.getSnapshot=m,xx(i)&&wx(r)}function _x(r,i,p){return p(function(){xx(i)&&wx(r)})}function xx(r){var i=r.getSnapshot;r=r.value;try{var p=i();return!ko(r,p)}catch{return!0}}function wx(r){var i=ja(r,1);i!==null&&Io(i,r,1,-1)}function y_(r){var i=ta();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Op,lastRenderedState:r},i.queue=r,r=r.dispatch=s4.bind(null,Ur,r),[i.memoizedState,r]}function Bp(r,i,p,m){return r={tag:r,create:i,destroy:p,deps:m,next:null},i=Ur.updateQueue,i===null?(i={lastEffect:null,stores:null},Ur.updateQueue=i,i.lastEffect=r.next=r):(p=i.lastEffect,p===null?i.lastEffect=r.next=r:(m=p.next,p.next=r,r.next=m,i.lastEffect=r)),r}function bx(){return co().memoizedState}function Ff(r,i,p,m){var _=ta();Ur.flags|=r,_.memoizedState=Bp(1|i,p,void 0,m===void 0?null:m)}function Sd(r,i,p,m){var _=co();m=m===void 0?null:m;var w=void 0;if(mn!==null){var c=mn.memoizedState;if(w=c.destroy,m!==null&&By(m,c.deps)){_.memoizedState=Bp(i,p,w,m);return}}Ur.flags|=r,_.memoizedState=Bp(1|i,p,w,m)}function g_(r,i){return Ff(8390656,8,r,i)}function Uy(r,i){return Sd(2048,8,r,i)}function Sx(r,i){return Sd(4,2,r,i)}function Ex(r,i){return Sd(4,4,r,i)}function Tx(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Cx(r,i,p){return p=p!=null?p.concat([r]):null,Sd(4,4,Tx.bind(null,i,r),p)}function Vy(){}function Ix(r,i){var p=co();i=i===void 0?null:i;var m=p.memoizedState;return m!==null&&i!==null&&By(i,m[1])?m[0]:(p.memoizedState=[r,i],r)}function kx(r,i){var p=co();i=i===void 0?null:i;var m=p.memoizedState;return m!==null&&i!==null&&By(i,m[1])?m[0]:(r=r(),p.memoizedState=[r,i],r)}function Px(r,i,p){return Cl&21?(ko(p,i)||(p=M1(),Ur.lanes|=p,Il|=p,r.baseState=!0),i):(r.baseState&&(r.baseState=!1,Mi=!0),r.memoizedState=p)}function o4(r,i){var p=pr;pr=p!==0&&4>p?p:4,r(!0);var m=t0.transition;t0.transition={};try{r(!1),i()}finally{pr=p,t0.transition=m}}function zx(){return co().memoizedState}function a4(r,i,p){var m=Is(r);if(p={lane:m,action:p,hasEagerState:!1,eagerState:null,next:null},Ax(r))Mx(i,p);else if(p=lx(r,i,p,m),p!==null){var _=mi();Io(p,r,m,_),Lx(p,i,m)}}function s4(r,i,p){var m=Is(r),_={lane:m,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ax(r))Mx(i,_);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var c=i.lastRenderedState,F=w(c,p);if(_.hasEagerState=!0,_.eagerState=F,ko(F,c)){var M=i.interleaved;M===null?(_.next=_,My(i)):(_.next=M.next,M.next=_),i.interleaved=_;return}}catch{}finally{}p=lx(r,i,_,m),p!==null&&(_=mi(),Io(p,r,m,_),Lx(p,i,m))}}function Ax(r){var i=r.alternate;return r===Ur||i!==null&&i===Ur}function Mx(r,i){vp=ad=!0;var p=r.pending;p===null?i.next=i:(i.next=p.next,p.next=i),r.pending=i}function Lx(r,i,p){if(p&4194240){var m=i.lanes;m&=r.pendingLanes,p|=m,i.lanes=p,vy(r,p)}}var sd={readContext:uo,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useInsertionEffect:ti,useLayoutEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useMutableSource:ti,useSyncExternalStore:ti,useId:ti,unstable_isNewReconciler:!1},l4={readContext:uo,useCallback:function(r,i){return ta().memoizedState=[r,i===void 0?null:i],r},useContext:uo,useEffect:g_,useImperativeHandle:function(r,i,p){return p=p!=null?p.concat([r]):null,Ff(4194308,4,Tx.bind(null,i,r),p)},useLayoutEffect:function(r,i){return Ff(4194308,4,r,i)},useInsertionEffect:function(r,i){return Ff(4,2,r,i)},useMemo:function(r,i){var p=ta();return i=i===void 0?null:i,r=r(),p.memoizedState=[r,i],r},useReducer:function(r,i,p){var m=ta();return i=p!==void 0?p(i):i,m.memoizedState=m.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},m.queue=r,r=r.dispatch=a4.bind(null,Ur,r),[m.memoizedState,r]},useRef:function(r){var i=ta();return r={current:r},i.memoizedState=r},useState:y_,useDebugValue:Vy,useDeferredValue:function(r){return ta().memoizedState=r},useTransition:function(){var r=y_(!1),i=r[0];return r=o4.bind(null,r[1]),ta().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,p){var m=Ur,_=ta();if(Dr){if(p===void 0)throw Error(Oe(407));p=p()}else{if(p=i(),zn===null)throw Error(Oe(349));Cl&30||gx(m,i,p)}_.memoizedState=p;var w={value:p,getSnapshot:i};return _.queue=w,g_(_x.bind(null,m,w,r),[r]),m.flags|=2048,Bp(9,vx.bind(null,m,w,p,i),void 0,null),p},useId:function(){var r=ta(),i=zn.identifierPrefix;if(Dr){var p=Fa,m=Ba;p=(m&~(1<<32-Co(m)-1)).toString(32)+p,i=":"+i+"R"+p,p=Rp++,0<p&&(i+="H"+p.toString(32)),i+=":"}else p=i4++,i=":"+i+"r"+p.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},u4={readContext:uo,useCallback:Ix,useContext:uo,useEffect:Uy,useImperativeHandle:Cx,useInsertionEffect:Sx,useLayoutEffect:Ex,useMemo:kx,useReducer:r0,useRef:bx,useState:function(){return r0(Op)},useDebugValue:Vy,useDeferredValue:function(r){var i=co();return Px(i,mn.memoizedState,r)},useTransition:function(){var r=r0(Op)[0],i=co().memoizedState;return[r,i]},useMutableSource:mx,useSyncExternalStore:yx,useId:zx,unstable_isNewReconciler:!1},c4={readContext:uo,useCallback:Ix,useContext:uo,useEffect:Uy,useImperativeHandle:Cx,useInsertionEffect:Sx,useLayoutEffect:Ex,useMemo:kx,useReducer:n0,useRef:bx,useState:function(){return n0(Op)},useDebugValue:Vy,useDeferredValue:function(r){var i=co();return mn===null?i.memoizedState=r:Px(i,mn.memoizedState,r)},useTransition:function(){var r=n0(Op)[0],i=co().memoizedState;return[r,i]},useMutableSource:mx,useSyncExternalStore:yx,useId:zx,unstable_isNewReconciler:!1};function ec(r,i){try{var p="",m=i;do p+=F3(m),m=m.return;while(m);var _=p}catch(w){_=`
Error generating stack: `+w.message+`
`+w.stack}return{value:r,source:i,stack:_,digest:null}}function i0(r,i,p){return{value:r,source:null,stack:p??null,digest:i??null}}function Z0(r,i){try{console.error(i.value)}catch(p){setTimeout(function(){throw p})}}var p4=typeof WeakMap=="function"?WeakMap:Map;function Dx(r,i,p){p=Na(-1,p),p.tag=3,p.payload={element:null};var m=i.value;return p.callback=function(){ud||(ud=!0,ty=m),Z0(r,i)},p}function Rx(r,i,p){p=Na(-1,p),p.tag=3;var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var _=i.value;p.payload=function(){return m(_)},p.callback=function(){Z0(r,i)}}var w=r.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(p.callback=function(){Z0(r,i),typeof m!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var c=i.stack;this.componentDidCatch(i.value,{componentStack:c!==null?c:""})}),p}function v_(r,i,p){var m=r.pingCache;if(m===null){m=r.pingCache=new p4;var _=new Set;m.set(i,_)}else _=m.get(i),_===void 0&&(_=new Set,m.set(i,_));_.has(p)||(_.add(p),r=T4.bind(null,r,i,p),i.then(r,r))}function __(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function x_(r,i,p,m,_){return r.mode&1?(r.flags|=65536,r.lanes=_,r):(r===i?r.flags|=65536:(r.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(i=Na(-1,1),i.tag=2,Ts(p,i,1))),p.lanes|=1),r)}var h4=Ga.ReactCurrentOwner,Mi=!1;function fi(r,i,p,m){i.child=r===null?fx(i,null,p,m):Ju(i,r.child,p,m)}function w_(r,i,p,m,_){p=p.render;var w=i.ref;return Wu(i,_),m=Fy(r,i,p,m,w,_),p=Ny(),r!==null&&!Mi?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~_,qa(r,i,_)):(Dr&&p&&Cy(i),i.flags|=1,fi(r,i,m,_),i.child)}function b_(r,i,p,m,_){if(r===null){var w=p.type;return typeof w=="function"&&!$y(w)&&w.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(i.tag=15,i.type=w,Ox(r,i,w,m,_)):(r=jf(p.type,null,m,i,i.mode,_),r.ref=i.ref,r.return=i,i.child=r)}if(w=r.child,!(r.lanes&_)){var c=w.memoizedProps;if(p=p.compare,p=p!==null?p:Pp,p(c,m)&&r.ref===i.ref)return qa(r,i,_)}return i.flags|=1,r=ks(w,m),r.ref=i.ref,r.return=i,i.child=r}function Ox(r,i,p,m,_){if(r!==null){var w=r.memoizedProps;if(Pp(w,m)&&r.ref===i.ref)if(Mi=!1,i.pendingProps=m=w,(r.lanes&_)!==0)r.flags&131072&&(Mi=!0);else return i.lanes=r.lanes,qa(r,i,_)}return H0(r,i,p,m,_)}function Bx(r,i,p){var m=i.pendingProps,_=m.children,w=r!==null?r.memoizedState:null;if(m.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},wr(ju,Zi),Zi|=p;else{if(!(p&1073741824))return r=w!==null?w.baseLanes|p:p,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,wr(ju,Zi),Zi|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=w!==null?w.baseLanes:p,wr(ju,Zi),Zi|=m}else w!==null?(m=w.baseLanes|p,i.memoizedState=null):m=p,wr(ju,Zi),Zi|=m;return fi(r,i,_,p),i.child}function Fx(r,i){var p=i.ref;(r===null&&p!==null||r!==null&&r.ref!==p)&&(i.flags|=512,i.flags|=2097152)}function H0(r,i,p,m,_){var w=Di(p)?El:oi.current;return w=Ku(i,w),Wu(i,_),p=Fy(r,i,p,m,w,_),m=Ny(),r!==null&&!Mi?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~_,qa(r,i,_)):(Dr&&m&&Cy(i),i.flags|=1,fi(r,i,p,_),i.child)}function S_(r,i,p,m,_){if(Di(p)){var w=!0;Qf(i)}else w=!1;if(Wu(i,_),i.stateNode===null)Nf(r,i),px(i,p,m),G0(i,p,m,_),m=!0;else if(r===null){var c=i.stateNode,F=i.memoizedProps;c.props=F;var M=c.context,ee=p.contextType;typeof ee=="object"&&ee!==null?ee=uo(ee):(ee=Di(p)?El:oi.current,ee=Ku(i,ee));var oe=p.getDerivedStateFromProps,me=typeof oe=="function"||typeof c.getSnapshotBeforeUpdate=="function";me||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(F!==m||M!==ee)&&d_(i,c,m,ee),ms=!1;var te=i.memoizedState;c.state=te,id(i,m,c,_),M=i.memoizedState,F!==m||te!==M||Li.current||ms?(typeof oe=="function"&&(q0(i,p,oe,m),M=i.memoizedState),(F=ms||f_(i,p,F,m,te,M,ee))?(me||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(i.flags|=4194308)):(typeof c.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=M),c.props=m,c.state=M,c.context=ee,m=F):(typeof c.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{c=i.stateNode,ux(r,i),F=i.memoizedProps,ee=i.type===i.elementType?F:So(i.type,F),c.props=ee,me=i.pendingProps,te=c.context,M=p.contextType,typeof M=="object"&&M!==null?M=uo(M):(M=Di(p)?El:oi.current,M=Ku(i,M));var Pe=p.getDerivedStateFromProps;(oe=typeof Pe=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(F!==me||te!==M)&&d_(i,c,m,M),ms=!1,te=i.memoizedState,c.state=te,id(i,m,c,_);var Me=i.memoizedState;F!==me||te!==Me||Li.current||ms?(typeof Pe=="function"&&(q0(i,p,Pe,m),Me=i.memoizedState),(ee=ms||f_(i,p,ee,m,te,Me,M)||!1)?(oe||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(m,Me,M),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(m,Me,M)),typeof c.componentDidUpdate=="function"&&(i.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof c.componentDidUpdate!="function"||F===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||F===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=Me),c.props=m,c.state=Me,c.context=M,m=ee):(typeof c.componentDidUpdate!="function"||F===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||F===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),m=!1)}return W0(r,i,p,m,w,_)}function W0(r,i,p,m,_,w){Fx(r,i);var c=(i.flags&128)!==0;if(!m&&!c)return _&&l_(i,p,!1),qa(r,i,w);m=i.stateNode,h4.current=i;var F=c&&typeof p.getDerivedStateFromError!="function"?null:m.render();return i.flags|=1,r!==null&&c?(i.child=Ju(i,r.child,null,w),i.child=Ju(i,null,F,w)):fi(r,i,F,w),i.memoizedState=m.state,_&&l_(i,p,!0),i.child}function Nx(r){var i=r.stateNode;i.pendingContext?s_(r,i.pendingContext,i.pendingContext!==i.context):i.context&&s_(r,i.context,!1),Dy(r,i.containerInfo)}function E_(r,i,p,m,_){return Yu(),ky(_),i.flags|=256,fi(r,i,p,m),i.child}var X0={dehydrated:null,treeContext:null,retryLane:0};function $0(r){return{baseLanes:r,cachePool:null,transitions:null}}function Ux(r,i,p){var m=i.pendingProps,_=Nr.current,w=!1,c=(i.flags&128)!==0,F;if((F=c)||(F=r!==null&&r.memoizedState===null?!1:(_&2)!==0),F?(w=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(_|=1),wr(Nr,_&1),r===null)return V0(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(i.mode&1?r.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(c=m.children,r=m.fallback,w?(m=i.mode,w=i.child,c={mode:"hidden",children:c},!(m&1)&&w!==null?(w.childLanes=0,w.pendingProps=c):w=Cd(c,m,0,null),r=Sl(r,m,p,null),w.return=i,r.return=i,w.sibling=r,i.child=w,i.child.memoizedState=$0(p),i.memoizedState=X0,r):jy(i,c));if(_=r.memoizedState,_!==null&&(F=_.dehydrated,F!==null))return f4(r,i,c,m,F,_,p);if(w){w=m.fallback,c=i.mode,_=r.child,F=_.sibling;var M={mode:"hidden",children:m.children};return!(c&1)&&i.child!==_?(m=i.child,m.childLanes=0,m.pendingProps=M,i.deletions=null):(m=ks(_,M),m.subtreeFlags=_.subtreeFlags&14680064),F!==null?w=ks(F,w):(w=Sl(w,c,p,null),w.flags|=2),w.return=i,m.return=i,m.sibling=w,i.child=m,m=w,w=i.child,c=r.child.memoizedState,c=c===null?$0(p):{baseLanes:c.baseLanes|p,cachePool:null,transitions:c.transitions},w.memoizedState=c,w.childLanes=r.childLanes&~p,i.memoizedState=X0,m}return w=r.child,r=w.sibling,m=ks(w,{mode:"visible",children:m.children}),!(i.mode&1)&&(m.lanes=p),m.return=i,m.sibling=null,r!==null&&(p=i.deletions,p===null?(i.deletions=[r],i.flags|=16):p.push(r)),i.child=m,i.memoizedState=null,m}function jy(r,i){return i=Cd({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Ef(r,i,p,m){return m!==null&&ky(m),Ju(i,r.child,null,p),r=jy(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function f4(r,i,p,m,_,w,c){if(p)return i.flags&256?(i.flags&=-257,m=i0(Error(Oe(422))),Ef(r,i,c,m)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(w=m.fallback,_=i.mode,m=Cd({mode:"visible",children:m.children},_,0,null),w=Sl(w,_,c,null),w.flags|=2,m.return=i,w.return=i,m.sibling=w,i.child=m,i.mode&1&&Ju(i,r.child,null,c),i.child.memoizedState=$0(c),i.memoizedState=X0,w);if(!(i.mode&1))return Ef(r,i,c,null);if(_.data==="$!"){if(m=_.nextSibling&&_.nextSibling.dataset,m)var F=m.dgst;return m=F,w=Error(Oe(419)),m=i0(w,m,void 0),Ef(r,i,c,m)}if(F=(c&r.childLanes)!==0,Mi||F){if(m=zn,m!==null){switch(c&-c){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(m.suspendedLanes|c)?0:_,_!==0&&_!==w.retryLane&&(w.retryLane=_,ja(r,_),Io(m,r,_,-1))}return Xy(),m=i0(Error(Oe(421))),Ef(r,i,c,m)}return _.data==="$?"?(i.flags|=128,i.child=r.child,i=C4.bind(null,r),_._reactRetry=i,null):(r=w.treeContext,Hi=Es(_.nextSibling),Wi=i,Dr=!0,To=null,r!==null&&(oo[ao++]=Ba,oo[ao++]=Fa,oo[ao++]=Tl,Ba=r.id,Fa=r.overflow,Tl=i),i=jy(i,m.children),i.flags|=4096,i)}function T_(r,i,p){r.lanes|=i;var m=r.alternate;m!==null&&(m.lanes|=i),j0(r.return,i,p)}function o0(r,i,p,m,_){var w=r.memoizedState;w===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:p,tailMode:_}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=m,w.tail=p,w.tailMode=_)}function Vx(r,i,p){var m=i.pendingProps,_=m.revealOrder,w=m.tail;if(fi(r,i,m.children,p),m=Nr.current,m&2)m=m&1|2,i.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&T_(r,p,i);else if(r.tag===19)T_(r,p,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}if(wr(Nr,m),!(i.mode&1))i.memoizedState=null;else switch(_){case"forwards":for(p=i.child,_=null;p!==null;)r=p.alternate,r!==null&&od(r)===null&&(_=p),p=p.sibling;p=_,p===null?(_=i.child,i.child=null):(_=p.sibling,p.sibling=null),o0(i,!1,_,p,w);break;case"backwards":for(p=null,_=i.child,i.child=null;_!==null;){if(r=_.alternate,r!==null&&od(r)===null){i.child=_;break}r=_.sibling,_.sibling=p,p=_,_=r}o0(i,!0,p,null,w);break;case"together":o0(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Nf(r,i){!(i.mode&1)&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function qa(r,i,p){if(r!==null&&(i.dependencies=r.dependencies),Il|=i.lanes,!(p&i.childLanes))return null;if(r!==null&&i.child!==r.child)throw Error(Oe(153));if(i.child!==null){for(r=i.child,p=ks(r,r.pendingProps),i.child=p,p.return=i;r.sibling!==null;)r=r.sibling,p=p.sibling=ks(r,r.pendingProps),p.return=i;p.sibling=null}return i.child}function d4(r,i,p){switch(i.tag){case 3:Nx(i),Yu();break;case 5:dx(i);break;case 1:Di(i.type)&&Qf(i);break;case 4:Dy(i,i.stateNode.containerInfo);break;case 10:var m=i.type._context,_=i.memoizedProps.value;wr(rd,m._currentValue),m._currentValue=_;break;case 13:if(m=i.memoizedState,m!==null)return m.dehydrated!==null?(wr(Nr,Nr.current&1),i.flags|=128,null):p&i.child.childLanes?Ux(r,i,p):(wr(Nr,Nr.current&1),r=qa(r,i,p),r!==null?r.sibling:null);wr(Nr,Nr.current&1);break;case 19:if(m=(p&i.childLanes)!==0,r.flags&128){if(m)return Vx(r,i,p);i.flags|=128}if(_=i.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),wr(Nr,Nr.current),m)break;return null;case 22:case 23:return i.lanes=0,Bx(r,i,p)}return qa(r,i,p)}var jx,K0,qx,Gx;jx=function(r,i){for(var p=i.child;p!==null;){if(p.tag===5||p.tag===6)r.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)break;for(;p.sibling===null;){if(p.return===null||p.return===i)return;p=p.return}p.sibling.return=p.return,p=p.sibling}};K0=function(){};qx=function(r,i,p,m){var _=r.memoizedProps;if(_!==m){r=i.stateNode,wl(ia.current);var w=null;switch(p){case"input":_=v0(r,_),m=v0(r,m),w=[];break;case"select":_=Vr({},_,{value:void 0}),m=Vr({},m,{value:void 0}),w=[];break;case"textarea":_=w0(r,_),m=w0(r,m),w=[];break;default:typeof _.onClick!="function"&&typeof m.onClick=="function"&&(r.onclick=Yf)}S0(p,m);var c;p=null;for(ee in _)if(!m.hasOwnProperty(ee)&&_.hasOwnProperty(ee)&&_[ee]!=null)if(ee==="style"){var F=_[ee];for(c in F)F.hasOwnProperty(c)&&(p||(p={}),p[c]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(bp.hasOwnProperty(ee)?w||(w=[]):(w=w||[]).push(ee,null));for(ee in m){var M=m[ee];if(F=_!=null?_[ee]:void 0,m.hasOwnProperty(ee)&&M!==F&&(M!=null||F!=null))if(ee==="style")if(F){for(c in F)!F.hasOwnProperty(c)||M&&M.hasOwnProperty(c)||(p||(p={}),p[c]="");for(c in M)M.hasOwnProperty(c)&&F[c]!==M[c]&&(p||(p={}),p[c]=M[c])}else p||(w||(w=[]),w.push(ee,p)),p=M;else ee==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,F=F?F.__html:void 0,M!=null&&F!==M&&(w=w||[]).push(ee,M)):ee==="children"?typeof M!="string"&&typeof M!="number"||(w=w||[]).push(ee,""+M):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(bp.hasOwnProperty(ee)?(M!=null&&ee==="onScroll"&&Pr("scroll",r),w||F===M||(w=[])):(w=w||[]).push(ee,M))}p&&(w=w||[]).push("style",p);var ee=w;(i.updateQueue=ee)&&(i.flags|=4)}};Gx=function(r,i,p,m){p!==m&&(i.flags|=4)};function sp(r,i){if(!Dr)switch(r.tailMode){case"hidden":i=r.tail;for(var p=null;i!==null;)i.alternate!==null&&(p=i),i=i.sibling;p===null?r.tail=null:p.sibling=null;break;case"collapsed":p=r.tail;for(var m=null;p!==null;)p.alternate!==null&&(m=p),p=p.sibling;m===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function ri(r){var i=r.alternate!==null&&r.alternate.child===r.child,p=0,m=0;if(i)for(var _=r.child;_!==null;)p|=_.lanes|_.childLanes,m|=_.subtreeFlags&14680064,m|=_.flags&14680064,_.return=r,_=_.sibling;else for(_=r.child;_!==null;)p|=_.lanes|_.childLanes,m|=_.subtreeFlags,m|=_.flags,_.return=r,_=_.sibling;return r.subtreeFlags|=m,r.childLanes=p,i}function m4(r,i,p){var m=i.pendingProps;switch(Iy(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(i),null;case 1:return Di(i.type)&&Jf(),ri(i),null;case 3:return m=i.stateNode,Qu(),zr(Li),zr(oi),Oy(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(r===null||r.child===null)&&(bf(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,To!==null&&(iy(To),To=null))),K0(r,i),ri(i),null;case 5:Ry(i);var _=wl(Dp.current);if(p=i.type,r!==null&&i.stateNode!=null)qx(r,i,p,m,_),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!m){if(i.stateNode===null)throw Error(Oe(166));return ri(i),null}if(r=wl(ia.current),bf(i)){m=i.stateNode,p=i.type;var w=i.memoizedProps;switch(m[ra]=i,m[Mp]=w,r=(i.mode&1)!==0,p){case"dialog":Pr("cancel",m),Pr("close",m);break;case"iframe":case"object":case"embed":Pr("load",m);break;case"video":case"audio":for(_=0;_<hp.length;_++)Pr(hp[_],m);break;case"source":Pr("error",m);break;case"img":case"image":case"link":Pr("error",m),Pr("load",m);break;case"details":Pr("toggle",m);break;case"input":Dv(m,w),Pr("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!w.multiple},Pr("invalid",m);break;case"textarea":Ov(m,w),Pr("invalid",m)}S0(p,w),_=null;for(var c in w)if(w.hasOwnProperty(c)){var F=w[c];c==="children"?typeof F=="string"?m.textContent!==F&&(w.suppressHydrationWarning!==!0&&wf(m.textContent,F,r),_=["children",F]):typeof F=="number"&&m.textContent!==""+F&&(w.suppressHydrationWarning!==!0&&wf(m.textContent,F,r),_=["children",""+F]):bp.hasOwnProperty(c)&&F!=null&&c==="onScroll"&&Pr("scroll",m)}switch(p){case"input":ff(m),Rv(m,w,!0);break;case"textarea":ff(m),Bv(m);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(m.onclick=Yf)}m=_,i.updateQueue=m,m!==null&&(i.flags|=4)}else{c=_.nodeType===9?_:_.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=g1(p)),r==="http://www.w3.org/1999/xhtml"?p==="script"?(r=c.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof m.is=="string"?r=c.createElement(p,{is:m.is}):(r=c.createElement(p),p==="select"&&(c=r,m.multiple?c.multiple=!0:m.size&&(c.size=m.size))):r=c.createElementNS(r,p),r[ra]=i,r[Mp]=m,jx(r,i,!1,!1),i.stateNode=r;e:{switch(c=E0(p,m),p){case"dialog":Pr("cancel",r),Pr("close",r),_=m;break;case"iframe":case"object":case"embed":Pr("load",r),_=m;break;case"video":case"audio":for(_=0;_<hp.length;_++)Pr(hp[_],r);_=m;break;case"source":Pr("error",r),_=m;break;case"img":case"image":case"link":Pr("error",r),Pr("load",r),_=m;break;case"details":Pr("toggle",r),_=m;break;case"input":Dv(r,m),_=v0(r,m),Pr("invalid",r);break;case"option":_=m;break;case"select":r._wrapperState={wasMultiple:!!m.multiple},_=Vr({},m,{value:void 0}),Pr("invalid",r);break;case"textarea":Ov(r,m),_=w0(r,m),Pr("invalid",r);break;default:_=m}S0(p,_),F=_;for(w in F)if(F.hasOwnProperty(w)){var M=F[w];w==="style"?x1(r,M):w==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&v1(r,M)):w==="children"?typeof M=="string"?(p!=="textarea"||M!=="")&&Sp(r,M):typeof M=="number"&&Sp(r,""+M):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(bp.hasOwnProperty(w)?M!=null&&w==="onScroll"&&Pr("scroll",r):M!=null&&hy(r,w,M,c))}switch(p){case"input":ff(r),Rv(r,m,!1);break;case"textarea":ff(r),Bv(r);break;case"option":m.value!=null&&r.setAttribute("value",""+Ps(m.value));break;case"select":r.multiple=!!m.multiple,w=m.value,w!=null?qu(r,!!m.multiple,w,!1):m.defaultValue!=null&&qu(r,!!m.multiple,m.defaultValue,!0);break;default:typeof _.onClick=="function"&&(r.onclick=Yf)}switch(p){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return ri(i),null;case 6:if(r&&i.stateNode!=null)Gx(r,i,r.memoizedProps,m);else{if(typeof m!="string"&&i.stateNode===null)throw Error(Oe(166));if(p=wl(Dp.current),wl(ia.current),bf(i)){if(m=i.stateNode,p=i.memoizedProps,m[ra]=i,(w=m.nodeValue!==p)&&(r=Wi,r!==null))switch(r.tag){case 3:wf(m.nodeValue,p,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&wf(m.nodeValue,p,(r.mode&1)!==0)}w&&(i.flags|=4)}else m=(p.nodeType===9?p:p.ownerDocument).createTextNode(m),m[ra]=i,i.stateNode=m}return ri(i),null;case 13:if(zr(Nr),m=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Dr&&Hi!==null&&i.mode&1&&!(i.flags&128))sx(),Yu(),i.flags|=98560,w=!1;else if(w=bf(i),m!==null&&m.dehydrated!==null){if(r===null){if(!w)throw Error(Oe(318));if(w=i.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(Oe(317));w[ra]=i}else Yu(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;ri(i),w=!1}else To!==null&&(iy(To),To=null),w=!0;if(!w)return i.flags&65536?i:null}return i.flags&128?(i.lanes=p,i):(m=m!==null,m!==(r!==null&&r.memoizedState!==null)&&m&&(i.child.flags|=8192,i.mode&1&&(r===null||Nr.current&1?yn===0&&(yn=3):Xy())),i.updateQueue!==null&&(i.flags|=4),ri(i),null);case 4:return Qu(),K0(r,i),r===null&&zp(i.stateNode.containerInfo),ri(i),null;case 10:return Ay(i.type._context),ri(i),null;case 17:return Di(i.type)&&Jf(),ri(i),null;case 19:if(zr(Nr),w=i.memoizedState,w===null)return ri(i),null;if(m=(i.flags&128)!==0,c=w.rendering,c===null)if(m)sp(w,!1);else{if(yn!==0||r!==null&&r.flags&128)for(r=i.child;r!==null;){if(c=od(r),c!==null){for(i.flags|=128,sp(w,!1),m=c.updateQueue,m!==null&&(i.updateQueue=m,i.flags|=4),i.subtreeFlags=0,m=p,p=i.child;p!==null;)w=p,r=m,w.flags&=14680066,c=w.alternate,c===null?(w.childLanes=0,w.lanes=r,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=c.childLanes,w.lanes=c.lanes,w.child=c.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=c.memoizedProps,w.memoizedState=c.memoizedState,w.updateQueue=c.updateQueue,w.type=c.type,r=c.dependencies,w.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),p=p.sibling;return wr(Nr,Nr.current&1|2),i.child}r=r.sibling}w.tail!==null&&rn()>tc&&(i.flags|=128,m=!0,sp(w,!1),i.lanes=4194304)}else{if(!m)if(r=od(c),r!==null){if(i.flags|=128,m=!0,p=r.updateQueue,p!==null&&(i.updateQueue=p,i.flags|=4),sp(w,!0),w.tail===null&&w.tailMode==="hidden"&&!c.alternate&&!Dr)return ri(i),null}else 2*rn()-w.renderingStartTime>tc&&p!==1073741824&&(i.flags|=128,m=!0,sp(w,!1),i.lanes=4194304);w.isBackwards?(c.sibling=i.child,i.child=c):(p=w.last,p!==null?p.sibling=c:i.child=c,w.last=c)}return w.tail!==null?(i=w.tail,w.rendering=i,w.tail=i.sibling,w.renderingStartTime=rn(),i.sibling=null,p=Nr.current,wr(Nr,m?p&1|2:p&1),i):(ri(i),null);case 22:case 23:return Wy(),m=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==m&&(i.flags|=8192),m&&i.mode&1?Zi&1073741824&&(ri(i),i.subtreeFlags&6&&(i.flags|=8192)):ri(i),null;case 24:return null;case 25:return null}throw Error(Oe(156,i.tag))}function y4(r,i){switch(Iy(i),i.tag){case 1:return Di(i.type)&&Jf(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Qu(),zr(Li),zr(oi),Oy(),r=i.flags,r&65536&&!(r&128)?(i.flags=r&-65537|128,i):null;case 5:return Ry(i),null;case 13:if(zr(Nr),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(Oe(340));Yu()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return zr(Nr),null;case 4:return Qu(),null;case 10:return Ay(i.type._context),null;case 22:case 23:return Wy(),null;case 24:return null;default:return null}}var Tf=!1,ii=!1,g4=typeof WeakSet=="function"?WeakSet:Set,st=null;function Vu(r,i){var p=r.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(m){Hr(r,i,m)}else p.current=null}function Y0(r,i,p){try{p()}catch(m){Hr(r,i,m)}}var C_=!1;function v4(r,i){if(D0=Xf,r=X1(),Ty(r)){if("selectionStart"in r)var p={start:r.selectionStart,end:r.selectionEnd};else e:{p=(p=r.ownerDocument)&&p.defaultView||window;var m=p.getSelection&&p.getSelection();if(m&&m.rangeCount!==0){p=m.anchorNode;var _=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{p.nodeType,w.nodeType}catch{p=null;break e}var c=0,F=-1,M=-1,ee=0,oe=0,me=r,te=null;t:for(;;){for(var Pe;me!==p||_!==0&&me.nodeType!==3||(F=c+_),me!==w||m!==0&&me.nodeType!==3||(M=c+m),me.nodeType===3&&(c+=me.nodeValue.length),(Pe=me.firstChild)!==null;)te=me,me=Pe;for(;;){if(me===r)break t;if(te===p&&++ee===_&&(F=c),te===w&&++oe===m&&(M=c),(Pe=me.nextSibling)!==null)break;me=te,te=me.parentNode}me=Pe}p=F===-1||M===-1?null:{start:F,end:M}}else p=null}p=p||{start:0,end:0}}else p=null;for(R0={focusedElem:r,selectionRange:p},Xf=!1,st=i;st!==null;)if(i=st,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,st=r;else for(;st!==null;){i=st;try{var Me=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Me!==null){var ke=Me.memoizedProps,at=Me.memoizedState,ae=i.stateNode,J=ae.getSnapshotBeforeUpdate(i.elementType===i.type?ke:So(i.type,ke),at);ae.__reactInternalSnapshotBeforeUpdate=J}break;case 3:var le=i.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(xe){Hr(i,i.return,xe)}if(r=i.sibling,r!==null){r.return=i.return,st=r;break}st=i.return}return Me=C_,C_=!1,Me}function _p(r,i,p){var m=i.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var _=m=m.next;do{if((_.tag&r)===r){var w=_.destroy;_.destroy=void 0,w!==void 0&&Y0(i,p,w)}_=_.next}while(_!==m)}}function Ed(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var p=i=i.next;do{if((p.tag&r)===r){var m=p.create;p.destroy=m()}p=p.next}while(p!==i)}}function J0(r){var i=r.ref;if(i!==null){var p=r.stateNode;switch(r.tag){case 5:r=p;break;default:r=p}typeof i=="function"?i(r):i.current=r}}function Zx(r){var i=r.alternate;i!==null&&(r.alternate=null,Zx(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[ra],delete i[Mp],delete i[F0],delete i[e4],delete i[t4])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Hx(r){return r.tag===5||r.tag===3||r.tag===4}function I_(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Hx(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Q0(r,i,p){var m=r.tag;if(m===5||m===6)r=r.stateNode,i?p.nodeType===8?p.parentNode.insertBefore(r,i):p.insertBefore(r,i):(p.nodeType===8?(i=p.parentNode,i.insertBefore(r,p)):(i=p,i.appendChild(r)),p=p._reactRootContainer,p!=null||i.onclick!==null||(i.onclick=Yf));else if(m!==4&&(r=r.child,r!==null))for(Q0(r,i,p),r=r.sibling;r!==null;)Q0(r,i,p),r=r.sibling}function ey(r,i,p){var m=r.tag;if(m===5||m===6)r=r.stateNode,i?p.insertBefore(r,i):p.appendChild(r);else if(m!==4&&(r=r.child,r!==null))for(ey(r,i,p),r=r.sibling;r!==null;)ey(r,i,p),r=r.sibling}var Vn=null,Eo=!1;function fs(r,i,p){for(p=p.child;p!==null;)Wx(r,i,p),p=p.sibling}function Wx(r,i,p){if(na&&typeof na.onCommitFiberUnmount=="function")try{na.onCommitFiberUnmount(yd,p)}catch{}switch(p.tag){case 5:ii||Vu(p,i);case 6:var m=Vn,_=Eo;Vn=null,fs(r,i,p),Vn=m,Eo=_,Vn!==null&&(Eo?(r=Vn,p=p.stateNode,r.nodeType===8?r.parentNode.removeChild(p):r.removeChild(p)):Vn.removeChild(p.stateNode));break;case 18:Vn!==null&&(Eo?(r=Vn,p=p.stateNode,r.nodeType===8?Jm(r.parentNode,p):r.nodeType===1&&Jm(r,p),Ip(r)):Jm(Vn,p.stateNode));break;case 4:m=Vn,_=Eo,Vn=p.stateNode.containerInfo,Eo=!0,fs(r,i,p),Vn=m,Eo=_;break;case 0:case 11:case 14:case 15:if(!ii&&(m=p.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){_=m=m.next;do{var w=_,c=w.destroy;w=w.tag,c!==void 0&&(w&2||w&4)&&Y0(p,i,c),_=_.next}while(_!==m)}fs(r,i,p);break;case 1:if(!ii&&(Vu(p,i),m=p.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=p.memoizedProps,m.state=p.memoizedState,m.componentWillUnmount()}catch(F){Hr(p,i,F)}fs(r,i,p);break;case 21:fs(r,i,p);break;case 22:p.mode&1?(ii=(m=ii)||p.memoizedState!==null,fs(r,i,p),ii=m):fs(r,i,p);break;default:fs(r,i,p)}}function k_(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var p=r.stateNode;p===null&&(p=r.stateNode=new g4),i.forEach(function(m){var _=I4.bind(null,r,m);p.has(m)||(p.add(m),m.then(_,_))})}}function bo(r,i){var p=i.deletions;if(p!==null)for(var m=0;m<p.length;m++){var _=p[m];try{var w=r,c=i,F=c;e:for(;F!==null;){switch(F.tag){case 5:Vn=F.stateNode,Eo=!1;break e;case 3:Vn=F.stateNode.containerInfo,Eo=!0;break e;case 4:Vn=F.stateNode.containerInfo,Eo=!0;break e}F=F.return}if(Vn===null)throw Error(Oe(160));Wx(w,c,_),Vn=null,Eo=!1;var M=_.alternate;M!==null&&(M.return=null),_.return=null}catch(ee){Hr(_,i,ee)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Xx(i,r),i=i.sibling}function Xx(r,i){var p=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(bo(i,r),ea(r),m&4){try{_p(3,r,r.return),Ed(3,r)}catch(ke){Hr(r,r.return,ke)}try{_p(5,r,r.return)}catch(ke){Hr(r,r.return,ke)}}break;case 1:bo(i,r),ea(r),m&512&&p!==null&&Vu(p,p.return);break;case 5:if(bo(i,r),ea(r),m&512&&p!==null&&Vu(p,p.return),r.flags&32){var _=r.stateNode;try{Sp(_,"")}catch(ke){Hr(r,r.return,ke)}}if(m&4&&(_=r.stateNode,_!=null)){var w=r.memoizedProps,c=p!==null?p.memoizedProps:w,F=r.type,M=r.updateQueue;if(r.updateQueue=null,M!==null)try{F==="input"&&w.type==="radio"&&w.name!=null&&m1(_,w),E0(F,c);var ee=E0(F,w);for(c=0;c<M.length;c+=2){var oe=M[c],me=M[c+1];oe==="style"?x1(_,me):oe==="dangerouslySetInnerHTML"?v1(_,me):oe==="children"?Sp(_,me):hy(_,oe,me,ee)}switch(F){case"input":_0(_,w);break;case"textarea":y1(_,w);break;case"select":var te=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!w.multiple;var Pe=w.value;Pe!=null?qu(_,!!w.multiple,Pe,!1):te!==!!w.multiple&&(w.defaultValue!=null?qu(_,!!w.multiple,w.defaultValue,!0):qu(_,!!w.multiple,w.multiple?[]:"",!1))}_[Mp]=w}catch(ke){Hr(r,r.return,ke)}}break;case 6:if(bo(i,r),ea(r),m&4){if(r.stateNode===null)throw Error(Oe(162));_=r.stateNode,w=r.memoizedProps;try{_.nodeValue=w}catch(ke){Hr(r,r.return,ke)}}break;case 3:if(bo(i,r),ea(r),m&4&&p!==null&&p.memoizedState.isDehydrated)try{Ip(i.containerInfo)}catch(ke){Hr(r,r.return,ke)}break;case 4:bo(i,r),ea(r);break;case 13:bo(i,r),ea(r),_=r.child,_.flags&8192&&(w=_.memoizedState!==null,_.stateNode.isHidden=w,!w||_.alternate!==null&&_.alternate.memoizedState!==null||(Zy=rn())),m&4&&k_(r);break;case 22:if(oe=p!==null&&p.memoizedState!==null,r.mode&1?(ii=(ee=ii)||oe,bo(i,r),ii=ee):bo(i,r),ea(r),m&8192){if(ee=r.memoizedState!==null,(r.stateNode.isHidden=ee)&&!oe&&r.mode&1)for(st=r,oe=r.child;oe!==null;){for(me=st=oe;st!==null;){switch(te=st,Pe=te.child,te.tag){case 0:case 11:case 14:case 15:_p(4,te,te.return);break;case 1:Vu(te,te.return);var Me=te.stateNode;if(typeof Me.componentWillUnmount=="function"){m=te,p=te.return;try{i=m,Me.props=i.memoizedProps,Me.state=i.memoizedState,Me.componentWillUnmount()}catch(ke){Hr(m,p,ke)}}break;case 5:Vu(te,te.return);break;case 22:if(te.memoizedState!==null){z_(me);continue}}Pe!==null?(Pe.return=te,st=Pe):z_(me)}oe=oe.sibling}e:for(oe=null,me=r;;){if(me.tag===5){if(oe===null){oe=me;try{_=me.stateNode,ee?(w=_.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(F=me.stateNode,M=me.memoizedProps.style,c=M!=null&&M.hasOwnProperty("display")?M.display:null,F.style.display=_1("display",c))}catch(ke){Hr(r,r.return,ke)}}}else if(me.tag===6){if(oe===null)try{me.stateNode.nodeValue=ee?"":me.memoizedProps}catch(ke){Hr(r,r.return,ke)}}else if((me.tag!==22&&me.tag!==23||me.memoizedState===null||me===r)&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===r)break e;for(;me.sibling===null;){if(me.return===null||me.return===r)break e;oe===me&&(oe=null),me=me.return}oe===me&&(oe=null),me.sibling.return=me.return,me=me.sibling}}break;case 19:bo(i,r),ea(r),m&4&&k_(r);break;case 21:break;default:bo(i,r),ea(r)}}function ea(r){var i=r.flags;if(i&2){try{e:{for(var p=r.return;p!==null;){if(Hx(p)){var m=p;break e}p=p.return}throw Error(Oe(160))}switch(m.tag){case 5:var _=m.stateNode;m.flags&32&&(Sp(_,""),m.flags&=-33);var w=I_(r);ey(r,w,_);break;case 3:case 4:var c=m.stateNode.containerInfo,F=I_(r);Q0(r,F,c);break;default:throw Error(Oe(161))}}catch(M){Hr(r,r.return,M)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function _4(r,i,p){st=r,$x(r)}function $x(r,i,p){for(var m=(r.mode&1)!==0;st!==null;){var _=st,w=_.child;if(_.tag===22&&m){var c=_.memoizedState!==null||Tf;if(!c){var F=_.alternate,M=F!==null&&F.memoizedState!==null||ii;F=Tf;var ee=ii;if(Tf=c,(ii=M)&&!ee)for(st=_;st!==null;)c=st,M=c.child,c.tag===22&&c.memoizedState!==null?A_(_):M!==null?(M.return=c,st=M):A_(_);for(;w!==null;)st=w,$x(w),w=w.sibling;st=_,Tf=F,ii=ee}P_(r)}else _.subtreeFlags&8772&&w!==null?(w.return=_,st=w):P_(r)}}function P_(r){for(;st!==null;){var i=st;if(i.flags&8772){var p=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:ii||Ed(5,i);break;case 1:var m=i.stateNode;if(i.flags&4&&!ii)if(p===null)m.componentDidMount();else{var _=i.elementType===i.type?p.memoizedProps:So(i.type,p.memoizedProps);m.componentDidUpdate(_,p.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var w=i.updateQueue;w!==null&&h_(i,w,m);break;case 3:var c=i.updateQueue;if(c!==null){if(p=null,i.child!==null)switch(i.child.tag){case 5:p=i.child.stateNode;break;case 1:p=i.child.stateNode}h_(i,c,p)}break;case 5:var F=i.stateNode;if(p===null&&i.flags&4){p=F;var M=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&p.focus();break;case"img":M.src&&(p.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var ee=i.alternate;if(ee!==null){var oe=ee.memoizedState;if(oe!==null){var me=oe.dehydrated;me!==null&&Ip(me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}ii||i.flags&512&&J0(i)}catch(te){Hr(i,i.return,te)}}if(i===r){st=null;break}if(p=i.sibling,p!==null){p.return=i.return,st=p;break}st=i.return}}function z_(r){for(;st!==null;){var i=st;if(i===r){st=null;break}var p=i.sibling;if(p!==null){p.return=i.return,st=p;break}st=i.return}}function A_(r){for(;st!==null;){var i=st;try{switch(i.tag){case 0:case 11:case 15:var p=i.return;try{Ed(4,i)}catch(M){Hr(i,p,M)}break;case 1:var m=i.stateNode;if(typeof m.componentDidMount=="function"){var _=i.return;try{m.componentDidMount()}catch(M){Hr(i,_,M)}}var w=i.return;try{J0(i)}catch(M){Hr(i,w,M)}break;case 5:var c=i.return;try{J0(i)}catch(M){Hr(i,c,M)}}}catch(M){Hr(i,i.return,M)}if(i===r){st=null;break}var F=i.sibling;if(F!==null){F.return=i.return,st=F;break}st=i.return}}var x4=Math.ceil,ld=Ga.ReactCurrentDispatcher,qy=Ga.ReactCurrentOwner,lo=Ga.ReactCurrentBatchConfig,er=0,zn=null,cn=null,jn=0,Zi=0,ju=Ms(0),yn=0,Fp=null,Il=0,Td=0,Gy=0,xp=null,Ai=null,Zy=0,tc=1/0,Ra=null,ud=!1,ty=null,Cs=null,Cf=!1,_s=null,cd=0,wp=0,ry=null,Uf=-1,Vf=0;function mi(){return er&6?rn():Uf!==-1?Uf:Uf=rn()}function Is(r){return r.mode&1?er&2&&jn!==0?jn&-jn:n4.transition!==null?(Vf===0&&(Vf=M1()),Vf):(r=pr,r!==0||(r=window.event,r=r===void 0?16:N1(r.type)),r):1}function Io(r,i,p,m){if(50<wp)throw wp=0,ry=null,Error(Oe(185));Vp(r,p,m),(!(er&2)||r!==zn)&&(r===zn&&(!(er&2)&&(Td|=p),yn===4&&gs(r,jn)),Ri(r,m),p===1&&er===0&&!(i.mode&1)&&(tc=rn()+500,wd&&Ls()))}function Ri(r,i){var p=r.callbackNode;nb(r,i);var m=Wf(r,r===zn?jn:0);if(m===0)p!==null&&Uv(p),r.callbackNode=null,r.callbackPriority=0;else if(i=m&-m,r.callbackPriority!==i){if(p!=null&&Uv(p),i===1)r.tag===0?r4(M_.bind(null,r)):ix(M_.bind(null,r)),Jb(function(){!(er&6)&&Ls()}),p=null;else{switch(L1(m)){case 1:p=gy;break;case 4:p=z1;break;case 16:p=Hf;break;case 536870912:p=A1;break;default:p=Hf}p=n2(p,Kx.bind(null,r))}r.callbackPriority=i,r.callbackNode=p}}function Kx(r,i){if(Uf=-1,Vf=0,er&6)throw Error(Oe(327));var p=r.callbackNode;if(Xu()&&r.callbackNode!==p)return null;var m=Wf(r,r===zn?jn:0);if(m===0)return null;if(m&30||m&r.expiredLanes||i)i=pd(r,m);else{i=m;var _=er;er|=2;var w=Jx();(zn!==r||jn!==i)&&(Ra=null,tc=rn()+500,bl(r,i));do try{S4();break}catch(F){Yx(r,F)}while(!0);zy(),ld.current=w,er=_,cn!==null?i=0:(zn=null,jn=0,i=yn)}if(i!==0){if(i===2&&(_=P0(r),_!==0&&(m=_,i=ny(r,_))),i===1)throw p=Fp,bl(r,0),gs(r,m),Ri(r,rn()),p;if(i===6)gs(r,m);else{if(_=r.current.alternate,!(m&30)&&!w4(_)&&(i=pd(r,m),i===2&&(w=P0(r),w!==0&&(m=w,i=ny(r,w))),i===1))throw p=Fp,bl(r,0),gs(r,m),Ri(r,rn()),p;switch(r.finishedWork=_,r.finishedLanes=m,i){case 0:case 1:throw Error(Oe(345));case 2:vl(r,Ai,Ra);break;case 3:if(gs(r,m),(m&130023424)===m&&(i=Zy+500-rn(),10<i)){if(Wf(r,0)!==0)break;if(_=r.suspendedLanes,(_&m)!==m){mi(),r.pingedLanes|=r.suspendedLanes&_;break}r.timeoutHandle=B0(vl.bind(null,r,Ai,Ra),i);break}vl(r,Ai,Ra);break;case 4:if(gs(r,m),(m&4194240)===m)break;for(i=r.eventTimes,_=-1;0<m;){var c=31-Co(m);w=1<<c,c=i[c],c>_&&(_=c),m&=~w}if(m=_,m=rn()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*x4(m/1960))-m,10<m){r.timeoutHandle=B0(vl.bind(null,r,Ai,Ra),m);break}vl(r,Ai,Ra);break;case 5:vl(r,Ai,Ra);break;default:throw Error(Oe(329))}}}return Ri(r,rn()),r.callbackNode===p?Kx.bind(null,r):null}function ny(r,i){var p=xp;return r.current.memoizedState.isDehydrated&&(bl(r,i).flags|=256),r=pd(r,i),r!==2&&(i=Ai,Ai=p,i!==null&&iy(i)),r}function iy(r){Ai===null?Ai=r:Ai.push.apply(Ai,r)}function w4(r){for(var i=r;;){if(i.flags&16384){var p=i.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var m=0;m<p.length;m++){var _=p[m],w=_.getSnapshot;_=_.value;try{if(!ko(w(),_))return!1}catch{return!1}}}if(p=i.child,i.subtreeFlags&16384&&p!==null)p.return=i,i=p;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function gs(r,i){for(i&=~Gy,i&=~Td,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var p=31-Co(i),m=1<<p;r[p]=-1,i&=~m}}function M_(r){if(er&6)throw Error(Oe(327));Xu();var i=Wf(r,0);if(!(i&1))return Ri(r,rn()),null;var p=pd(r,i);if(r.tag!==0&&p===2){var m=P0(r);m!==0&&(i=m,p=ny(r,m))}if(p===1)throw p=Fp,bl(r,0),gs(r,i),Ri(r,rn()),p;if(p===6)throw Error(Oe(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,vl(r,Ai,Ra),Ri(r,rn()),null}function Hy(r,i){var p=er;er|=1;try{return r(i)}finally{er=p,er===0&&(tc=rn()+500,wd&&Ls())}}function kl(r){_s!==null&&_s.tag===0&&!(er&6)&&Xu();var i=er;er|=1;var p=lo.transition,m=pr;try{if(lo.transition=null,pr=1,r)return r()}finally{pr=m,lo.transition=p,er=i,!(er&6)&&Ls()}}function Wy(){Zi=ju.current,zr(ju)}function bl(r,i){r.finishedWork=null,r.finishedLanes=0;var p=r.timeoutHandle;if(p!==-1&&(r.timeoutHandle=-1,Yb(p)),cn!==null)for(p=cn.return;p!==null;){var m=p;switch(Iy(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Jf();break;case 3:Qu(),zr(Li),zr(oi),Oy();break;case 5:Ry(m);break;case 4:Qu();break;case 13:zr(Nr);break;case 19:zr(Nr);break;case 10:Ay(m.type._context);break;case 22:case 23:Wy()}p=p.return}if(zn=r,cn=r=ks(r.current,null),jn=Zi=i,yn=0,Fp=null,Gy=Td=Il=0,Ai=xp=null,xl!==null){for(i=0;i<xl.length;i++)if(p=xl[i],m=p.interleaved,m!==null){p.interleaved=null;var _=m.next,w=p.pending;if(w!==null){var c=w.next;w.next=_,m.next=c}p.pending=m}xl=null}return r}function Yx(r,i){do{var p=cn;try{if(zy(),Bf.current=sd,ad){for(var m=Ur.memoizedState;m!==null;){var _=m.queue;_!==null&&(_.pending=null),m=m.next}ad=!1}if(Cl=0,Pn=mn=Ur=null,vp=!1,Rp=0,qy.current=null,p===null||p.return===null){yn=1,Fp=i,cn=null;break}e:{var w=r,c=p.return,F=p,M=i;if(i=jn,F.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var ee=M,oe=F,me=oe.tag;if(!(oe.mode&1)&&(me===0||me===11||me===15)){var te=oe.alternate;te?(oe.updateQueue=te.updateQueue,oe.memoizedState=te.memoizedState,oe.lanes=te.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var Pe=__(c);if(Pe!==null){Pe.flags&=-257,x_(Pe,c,F,w,i),Pe.mode&1&&v_(w,ee,i),i=Pe,M=ee;var Me=i.updateQueue;if(Me===null){var ke=new Set;ke.add(M),i.updateQueue=ke}else Me.add(M);break e}else{if(!(i&1)){v_(w,ee,i),Xy();break e}M=Error(Oe(426))}}else if(Dr&&F.mode&1){var at=__(c);if(at!==null){!(at.flags&65536)&&(at.flags|=256),x_(at,c,F,w,i),ky(ec(M,F));break e}}w=M=ec(M,F),yn!==4&&(yn=2),xp===null?xp=[w]:xp.push(w),w=c;do{switch(w.tag){case 3:w.flags|=65536,i&=-i,w.lanes|=i;var ae=Dx(w,M,i);p_(w,ae);break e;case 1:F=M;var J=w.type,le=w.stateNode;if(!(w.flags&128)&&(typeof J.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(Cs===null||!Cs.has(le)))){w.flags|=65536,i&=-i,w.lanes|=i;var xe=Rx(w,F,i);p_(w,xe);break e}}w=w.return}while(w!==null)}e2(p)}catch(Ue){i=Ue,cn===p&&p!==null&&(cn=p=p.return);continue}break}while(!0)}function Jx(){var r=ld.current;return ld.current=sd,r===null?sd:r}function Xy(){(yn===0||yn===3||yn===2)&&(yn=4),zn===null||!(Il&268435455)&&!(Td&268435455)||gs(zn,jn)}function pd(r,i){var p=er;er|=2;var m=Jx();(zn!==r||jn!==i)&&(Ra=null,bl(r,i));do try{b4();break}catch(_){Yx(r,_)}while(!0);if(zy(),er=p,ld.current=m,cn!==null)throw Error(Oe(261));return zn=null,jn=0,yn}function b4(){for(;cn!==null;)Qx(cn)}function S4(){for(;cn!==null&&!X3();)Qx(cn)}function Qx(r){var i=r2(r.alternate,r,Zi);r.memoizedProps=r.pendingProps,i===null?e2(r):cn=i,qy.current=null}function e2(r){var i=r;do{var p=i.alternate;if(r=i.return,i.flags&32768){if(p=y4(p,i),p!==null){p.flags&=32767,cn=p;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{yn=6,cn=null;return}}else if(p=m4(p,i,Zi),p!==null){cn=p;return}if(i=i.sibling,i!==null){cn=i;return}cn=i=r}while(i!==null);yn===0&&(yn=5)}function vl(r,i,p){var m=pr,_=lo.transition;try{lo.transition=null,pr=1,E4(r,i,p,m)}finally{lo.transition=_,pr=m}return null}function E4(r,i,p,m){do Xu();while(_s!==null);if(er&6)throw Error(Oe(327));p=r.finishedWork;var _=r.finishedLanes;if(p===null)return null;if(r.finishedWork=null,r.finishedLanes=0,p===r.current)throw Error(Oe(177));r.callbackNode=null,r.callbackPriority=0;var w=p.lanes|p.childLanes;if(ib(r,w),r===zn&&(cn=zn=null,jn=0),!(p.subtreeFlags&2064)&&!(p.flags&2064)||Cf||(Cf=!0,n2(Hf,function(){return Xu(),null})),w=(p.flags&15990)!==0,p.subtreeFlags&15990||w){w=lo.transition,lo.transition=null;var c=pr;pr=1;var F=er;er|=4,qy.current=null,v4(r,p),Xx(p,r),Gb(R0),Xf=!!D0,R0=D0=null,r.current=p,_4(p),$3(),er=F,pr=c,lo.transition=w}else r.current=p;if(Cf&&(Cf=!1,_s=r,cd=_),w=r.pendingLanes,w===0&&(Cs=null),J3(p.stateNode),Ri(r,rn()),i!==null)for(m=r.onRecoverableError,p=0;p<i.length;p++)_=i[p],m(_.value,{componentStack:_.stack,digest:_.digest});if(ud)throw ud=!1,r=ty,ty=null,r;return cd&1&&r.tag!==0&&Xu(),w=r.pendingLanes,w&1?r===ry?wp++:(wp=0,ry=r):wp=0,Ls(),null}function Xu(){if(_s!==null){var r=L1(cd),i=lo.transition,p=pr;try{if(lo.transition=null,pr=16>r?16:r,_s===null)var m=!1;else{if(r=_s,_s=null,cd=0,er&6)throw Error(Oe(331));var _=er;for(er|=4,st=r.current;st!==null;){var w=st,c=w.child;if(st.flags&16){var F=w.deletions;if(F!==null){for(var M=0;M<F.length;M++){var ee=F[M];for(st=ee;st!==null;){var oe=st;switch(oe.tag){case 0:case 11:case 15:_p(8,oe,w)}var me=oe.child;if(me!==null)me.return=oe,st=me;else for(;st!==null;){oe=st;var te=oe.sibling,Pe=oe.return;if(Zx(oe),oe===ee){st=null;break}if(te!==null){te.return=Pe,st=te;break}st=Pe}}}var Me=w.alternate;if(Me!==null){var ke=Me.child;if(ke!==null){Me.child=null;do{var at=ke.sibling;ke.sibling=null,ke=at}while(ke!==null)}}st=w}}if(w.subtreeFlags&2064&&c!==null)c.return=w,st=c;else e:for(;st!==null;){if(w=st,w.flags&2048)switch(w.tag){case 0:case 11:case 15:_p(9,w,w.return)}var ae=w.sibling;if(ae!==null){ae.return=w.return,st=ae;break e}st=w.return}}var J=r.current;for(st=J;st!==null;){c=st;var le=c.child;if(c.subtreeFlags&2064&&le!==null)le.return=c,st=le;else e:for(c=J;st!==null;){if(F=st,F.flags&2048)try{switch(F.tag){case 0:case 11:case 15:Ed(9,F)}}catch(Ue){Hr(F,F.return,Ue)}if(F===c){st=null;break e}var xe=F.sibling;if(xe!==null){xe.return=F.return,st=xe;break e}st=F.return}}if(er=_,Ls(),na&&typeof na.onPostCommitFiberRoot=="function")try{na.onPostCommitFiberRoot(yd,r)}catch{}m=!0}return m}finally{pr=p,lo.transition=i}}return!1}function L_(r,i,p){i=ec(p,i),i=Dx(r,i,1),r=Ts(r,i,1),i=mi(),r!==null&&(Vp(r,1,i),Ri(r,i))}function Hr(r,i,p){if(r.tag===3)L_(r,r,p);else for(;i!==null;){if(i.tag===3){L_(i,r,p);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Cs===null||!Cs.has(m))){r=ec(p,r),r=Rx(i,r,1),i=Ts(i,r,1),r=mi(),i!==null&&(Vp(i,1,r),Ri(i,r));break}}i=i.return}}function T4(r,i,p){var m=r.pingCache;m!==null&&m.delete(i),i=mi(),r.pingedLanes|=r.suspendedLanes&p,zn===r&&(jn&p)===p&&(yn===4||yn===3&&(jn&130023424)===jn&&500>rn()-Zy?bl(r,0):Gy|=p),Ri(r,i)}function t2(r,i){i===0&&(r.mode&1?(i=yf,yf<<=1,!(yf&130023424)&&(yf=4194304)):i=1);var p=mi();r=ja(r,i),r!==null&&(Vp(r,i,p),Ri(r,p))}function C4(r){var i=r.memoizedState,p=0;i!==null&&(p=i.retryLane),t2(r,p)}function I4(r,i){var p=0;switch(r.tag){case 13:var m=r.stateNode,_=r.memoizedState;_!==null&&(p=_.retryLane);break;case 19:m=r.stateNode;break;default:throw Error(Oe(314))}m!==null&&m.delete(i),t2(r,p)}var r2;r2=function(r,i,p){if(r!==null)if(r.memoizedProps!==i.pendingProps||Li.current)Mi=!0;else{if(!(r.lanes&p)&&!(i.flags&128))return Mi=!1,d4(r,i,p);Mi=!!(r.flags&131072)}else Mi=!1,Dr&&i.flags&1048576&&ox(i,td,i.index);switch(i.lanes=0,i.tag){case 2:var m=i.type;Nf(r,i),r=i.pendingProps;var _=Ku(i,oi.current);Wu(i,p),_=Fy(null,i,m,r,_,p);var w=Ny();return i.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Di(m)?(w=!0,Qf(i)):w=!1,i.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Ly(i),_.updater=bd,i.stateNode=_,_._reactInternals=i,G0(i,m,r,p),i=W0(null,i,m,!0,w,p)):(i.tag=0,Dr&&w&&Cy(i),fi(null,i,_,p),i=i.child),i;case 16:m=i.elementType;e:{switch(Nf(r,i),r=i.pendingProps,_=m._init,m=_(m._payload),i.type=m,_=i.tag=P4(m),r=So(m,r),_){case 0:i=H0(null,i,m,r,p);break e;case 1:i=S_(null,i,m,r,p);break e;case 11:i=w_(null,i,m,r,p);break e;case 14:i=b_(null,i,m,So(m.type,r),p);break e}throw Error(Oe(306,m,""))}return i;case 0:return m=i.type,_=i.pendingProps,_=i.elementType===m?_:So(m,_),H0(r,i,m,_,p);case 1:return m=i.type,_=i.pendingProps,_=i.elementType===m?_:So(m,_),S_(r,i,m,_,p);case 3:e:{if(Nx(i),r===null)throw Error(Oe(387));m=i.pendingProps,w=i.memoizedState,_=w.element,ux(r,i),id(i,m,null,p);var c=i.memoizedState;if(m=c.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){_=ec(Error(Oe(423)),i),i=E_(r,i,m,p,_);break e}else if(m!==_){_=ec(Error(Oe(424)),i),i=E_(r,i,m,p,_);break e}else for(Hi=Es(i.stateNode.containerInfo.firstChild),Wi=i,Dr=!0,To=null,p=fx(i,null,m,p),i.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Yu(),m===_){i=qa(r,i,p);break e}fi(r,i,m,p)}i=i.child}return i;case 5:return dx(i),r===null&&V0(i),m=i.type,_=i.pendingProps,w=r!==null?r.memoizedProps:null,c=_.children,O0(m,_)?c=null:w!==null&&O0(m,w)&&(i.flags|=32),Fx(r,i),fi(r,i,c,p),i.child;case 6:return r===null&&V0(i),null;case 13:return Ux(r,i,p);case 4:return Dy(i,i.stateNode.containerInfo),m=i.pendingProps,r===null?i.child=Ju(i,null,m,p):fi(r,i,m,p),i.child;case 11:return m=i.type,_=i.pendingProps,_=i.elementType===m?_:So(m,_),w_(r,i,m,_,p);case 7:return fi(r,i,i.pendingProps,p),i.child;case 8:return fi(r,i,i.pendingProps.children,p),i.child;case 12:return fi(r,i,i.pendingProps.children,p),i.child;case 10:e:{if(m=i.type._context,_=i.pendingProps,w=i.memoizedProps,c=_.value,wr(rd,m._currentValue),m._currentValue=c,w!==null)if(ko(w.value,c)){if(w.children===_.children&&!Li.current){i=qa(r,i,p);break e}}else for(w=i.child,w!==null&&(w.return=i);w!==null;){var F=w.dependencies;if(F!==null){c=w.child;for(var M=F.firstContext;M!==null;){if(M.context===m){if(w.tag===1){M=Na(-1,p&-p),M.tag=2;var ee=w.updateQueue;if(ee!==null){ee=ee.shared;var oe=ee.pending;oe===null?M.next=M:(M.next=oe.next,oe.next=M),ee.pending=M}}w.lanes|=p,M=w.alternate,M!==null&&(M.lanes|=p),j0(w.return,p,i),F.lanes|=p;break}M=M.next}}else if(w.tag===10)c=w.type===i.type?null:w.child;else if(w.tag===18){if(c=w.return,c===null)throw Error(Oe(341));c.lanes|=p,F=c.alternate,F!==null&&(F.lanes|=p),j0(c,p,i),c=w.sibling}else c=w.child;if(c!==null)c.return=w;else for(c=w;c!==null;){if(c===i){c=null;break}if(w=c.sibling,w!==null){w.return=c.return,c=w;break}c=c.return}w=c}fi(r,i,_.children,p),i=i.child}return i;case 9:return _=i.type,m=i.pendingProps.children,Wu(i,p),_=uo(_),m=m(_),i.flags|=1,fi(r,i,m,p),i.child;case 14:return m=i.type,_=So(m,i.pendingProps),_=So(m.type,_),b_(r,i,m,_,p);case 15:return Ox(r,i,i.type,i.pendingProps,p);case 17:return m=i.type,_=i.pendingProps,_=i.elementType===m?_:So(m,_),Nf(r,i),i.tag=1,Di(m)?(r=!0,Qf(i)):r=!1,Wu(i,p),px(i,m,_),G0(i,m,_,p),W0(null,i,m,!0,r,p);case 19:return Vx(r,i,p);case 22:return Bx(r,i,p)}throw Error(Oe(156,i.tag))};function n2(r,i){return P1(r,i)}function k4(r,i,p,m){this.tag=r,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function so(r,i,p,m){return new k4(r,i,p,m)}function $y(r){return r=r.prototype,!(!r||!r.isReactComponent)}function P4(r){if(typeof r=="function")return $y(r)?1:0;if(r!=null){if(r=r.$$typeof,r===dy)return 11;if(r===my)return 14}return 2}function ks(r,i){var p=r.alternate;return p===null?(p=so(r.tag,i,r.key,r.mode),p.elementType=r.elementType,p.type=r.type,p.stateNode=r.stateNode,p.alternate=r,r.alternate=p):(p.pendingProps=i,p.type=r.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=r.flags&14680064,p.childLanes=r.childLanes,p.lanes=r.lanes,p.child=r.child,p.memoizedProps=r.memoizedProps,p.memoizedState=r.memoizedState,p.updateQueue=r.updateQueue,i=r.dependencies,p.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},p.sibling=r.sibling,p.index=r.index,p.ref=r.ref,p}function jf(r,i,p,m,_,w){var c=2;if(m=r,typeof r=="function")$y(r)&&(c=1);else if(typeof r=="string")c=5;else e:switch(r){case Mu:return Sl(p.children,_,w,i);case fy:c=8,_|=8;break;case d0:return r=so(12,p,i,_|2),r.elementType=d0,r.lanes=w,r;case m0:return r=so(13,p,i,_),r.elementType=m0,r.lanes=w,r;case y0:return r=so(19,p,i,_),r.elementType=y0,r.lanes=w,r;case h1:return Cd(p,_,w,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case c1:c=10;break e;case p1:c=9;break e;case dy:c=11;break e;case my:c=14;break e;case ds:c=16,m=null;break e}throw Error(Oe(130,r==null?r:typeof r,""))}return i=so(c,p,i,_),i.elementType=r,i.type=m,i.lanes=w,i}function Sl(r,i,p,m){return r=so(7,r,m,i),r.lanes=p,r}function Cd(r,i,p,m){return r=so(22,r,m,i),r.elementType=h1,r.lanes=p,r.stateNode={isHidden:!1},r}function a0(r,i,p){return r=so(6,r,null,i),r.lanes=p,r}function s0(r,i,p){return i=so(4,r.children!==null?r.children:[],r.key,i),i.lanes=p,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function z4(r,i,p,m,_){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vm(0),this.expirationTimes=Vm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vm(0),this.identifierPrefix=m,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Ky(r,i,p,m,_,w,c,F,M){return r=new z4(r,i,p,F,M),i===1?(i=1,w===!0&&(i|=8)):i=0,w=so(3,null,null,i),r.current=w,w.stateNode=r,w.memoizedState={element:m,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ly(w),r}function A4(r,i,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Au,key:m==null?null:""+m,children:r,containerInfo:i,implementation:p}}function i2(r){if(!r)return zs;r=r._reactInternals;e:{if(zl(r)!==r||r.tag!==1)throw Error(Oe(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Di(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(Oe(171))}if(r.tag===1){var p=r.type;if(Di(p))return nx(r,p,i)}return i}function o2(r,i,p,m,_,w,c,F,M){return r=Ky(p,m,!0,r,_,w,c,F,M),r.context=i2(null),p=r.current,m=mi(),_=Is(p),w=Na(m,_),w.callback=i??null,Ts(p,w,_),r.current.lanes=_,Vp(r,_,m),Ri(r,m),r}function Id(r,i,p,m){var _=i.current,w=mi(),c=Is(_);return p=i2(p),i.context===null?i.context=p:i.pendingContext=p,i=Na(w,c),i.payload={element:r},m=m===void 0?null:m,m!==null&&(i.callback=m),r=Ts(_,i,c),r!==null&&(Io(r,_,c,w),Of(r,_,c)),c}function hd(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function D_(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var p=r.retryLane;r.retryLane=p!==0&&p<i?p:i}}function Yy(r,i){D_(r,i),(r=r.alternate)&&D_(r,i)}function M4(){return null}var a2=typeof reportError=="function"?reportError:function(r){console.error(r)};function Jy(r){this._internalRoot=r}kd.prototype.render=Jy.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(Oe(409));Id(r,i,null,null)};kd.prototype.unmount=Jy.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;kl(function(){Id(null,r,null,null)}),i[Va]=null}};function kd(r){this._internalRoot=r}kd.prototype.unstable_scheduleHydration=function(r){if(r){var i=O1();r={blockedOn:null,target:r,priority:i};for(var p=0;p<ys.length&&i!==0&&i<ys[p].priority;p++);ys.splice(p,0,r),p===0&&F1(r)}};function Qy(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Pd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function R_(){}function L4(r,i,p,m,_){if(_){if(typeof m=="function"){var w=m;m=function(){var ee=hd(c);w.call(ee)}}var c=o2(i,m,r,0,null,!1,!1,"",R_);return r._reactRootContainer=c,r[Va]=c.current,zp(r.nodeType===8?r.parentNode:r),kl(),c}for(;_=r.lastChild;)r.removeChild(_);if(typeof m=="function"){var F=m;m=function(){var ee=hd(M);F.call(ee)}}var M=Ky(r,0,!1,null,null,!1,!1,"",R_);return r._reactRootContainer=M,r[Va]=M.current,zp(r.nodeType===8?r.parentNode:r),kl(function(){Id(i,M,p,m)}),M}function zd(r,i,p,m,_){var w=p._reactRootContainer;if(w){var c=w;if(typeof _=="function"){var F=_;_=function(){var M=hd(c);F.call(M)}}Id(i,c,r,_)}else c=L4(p,i,r,_,m);return hd(c)}D1=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var p=pp(i.pendingLanes);p!==0&&(vy(i,p|1),Ri(i,rn()),!(er&6)&&(tc=rn()+500,Ls()))}break;case 13:kl(function(){var m=ja(r,1);if(m!==null){var _=mi();Io(m,r,1,_)}}),Yy(r,1)}};_y=function(r){if(r.tag===13){var i=ja(r,134217728);if(i!==null){var p=mi();Io(i,r,134217728,p)}Yy(r,134217728)}};R1=function(r){if(r.tag===13){var i=Is(r),p=ja(r,i);if(p!==null){var m=mi();Io(p,r,i,m)}Yy(r,i)}};O1=function(){return pr};B1=function(r,i){var p=pr;try{return pr=r,i()}finally{pr=p}};C0=function(r,i,p){switch(i){case"input":if(_0(r,p),i=p.name,p.type==="radio"&&i!=null){for(p=r;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<p.length;i++){var m=p[i];if(m!==r&&m.form===r.form){var _=xd(m);if(!_)throw Error(Oe(90));d1(m),_0(m,_)}}}break;case"textarea":y1(r,p);break;case"select":i=p.value,i!=null&&qu(r,!!p.multiple,i,!1)}};S1=Hy;E1=kl;var D4={usingClientEntryPoint:!1,Events:[qp,Ou,xd,w1,b1,Hy]},lp={findFiberByHostInstance:_l,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},R4={bundleType:lp.bundleType,version:lp.version,rendererPackageName:lp.rendererPackageName,rendererConfig:lp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ga.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=I1(r),r===null?null:r.stateNode},findFiberByHostInstance:lp.findFiberByHostInstance||M4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var If=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!If.isDisabled&&If.supportsFiber)try{yd=If.inject(R4),na=If}catch{}}$i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D4;$i.createPortal=function(r,i){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qy(i))throw Error(Oe(200));return A4(r,i,null,p)};$i.createRoot=function(r,i){if(!Qy(r))throw Error(Oe(299));var p=!1,m="",_=a2;return i!=null&&(i.unstable_strictMode===!0&&(p=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=Ky(r,1,!1,null,null,p,!1,m,_),r[Va]=i.current,zp(r.nodeType===8?r.parentNode:r),new Jy(i)};$i.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(Oe(188)):(r=Object.keys(r).join(","),Error(Oe(268,r)));return r=I1(i),r=r===null?null:r.stateNode,r};$i.flushSync=function(r){return kl(r)};$i.hydrate=function(r,i,p){if(!Pd(i))throw Error(Oe(200));return zd(null,r,i,!0,p)};$i.hydrateRoot=function(r,i,p){if(!Qy(r))throw Error(Oe(405));var m=p!=null&&p.hydratedSources||null,_=!1,w="",c=a2;if(p!=null&&(p.unstable_strictMode===!0&&(_=!0),p.identifierPrefix!==void 0&&(w=p.identifierPrefix),p.onRecoverableError!==void 0&&(c=p.onRecoverableError)),i=o2(i,null,r,1,p??null,_,!1,w,c),r[Va]=i.current,zp(r),m)for(r=0;r<m.length;r++)p=m[r],_=p._getVersion,_=_(p._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[p,_]:i.mutableSourceEagerHydrationData.push(p,_);return new kd(i)};$i.render=function(r,i,p){if(!Pd(i))throw Error(Oe(200));return zd(null,r,i,!1,p)};$i.unmountComponentAtNode=function(r){if(!Pd(r))throw Error(Oe(40));return r._reactRootContainer?(kl(function(){zd(null,null,r,!1,function(){r._reactRootContainer=null,r[Va]=null})}),!0):!1};$i.unstable_batchedUpdates=Hy;$i.unstable_renderSubtreeIntoContainer=function(r,i,p,m){if(!Pd(p))throw Error(Oe(200));if(r==null||r._reactInternals===void 0)throw Error(Oe(38));return zd(r,i,p,!1,m)};$i.version="18.2.0-next-9e3b772b8-20220608";function s2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s2)}catch(r){console.error(r)}}s2(),o1.exports=$i;var l2=o1.exports,O_=l2;h0.createRoot=O_.createRoot,h0.hydrateRoot=O_.hydrateRoot;var u2={exports:{}};(function(r,i){(function(p,m){r.exports=m()})(p3,function(){var p,m,_;function w(c,F){if(!p)p=F;else if(!m)m=F;else{var M="var sharedChunk = {}; ("+p+")(sharedChunk); ("+m+")(sharedChunk);",ee={};p(ee),_=F(ee),typeof window<"u"&&(_.workerUrl=window.URL.createObjectURL(new Blob([M],{type:"text/javascript"})))}}return w(["exports"],function(c){function F(e,t){return e(t={exports:{}},t.exports),t.exports}var M=ee;function ee(e,t,n,l){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=l,this.p2x=n,this.p2y=l}ee.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},ee.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},ee.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},ee.prototype.solveCurveX=function(e,t){var n,l,h,f,y;for(t===void 0&&(t=1e-6),h=e,y=0;y<8;y++){if(f=this.sampleCurveX(h)-e,Math.abs(f)<t)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=f/x}if((h=e)<(n=0))return n;if(h>(l=1))return l;for(;n<l;){if(f=this.sampleCurveX(h),Math.abs(f-e)<t)return h;e>f?n=h:l=h,h=.5*(l-n)+n}return h},ee.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var oe=me;function me(e,t){this.x=e,this.y=t}me.prototype={clone:function(){return new me(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),l=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=l,this},_rotateAround:function(e,t){var n=Math.cos(e),l=Math.sin(e),h=t.y+l*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-l*(this.y-t.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},me.convert=function(e){return e instanceof me?e:Array.isArray(e)?new me(e[0],e[1]):e};var te=typeof self<"u"?self:{},Pe=Math.pow(2,53)-1;function Me(e,t,n,l){var h=new M(e,t,n,l);return function(f){return h.solve(f)}}var ke=Me(.25,.1,.25,1);function at(e,t,n){return Math.min(n,Math.max(t,e))}function ae(e,t,n){var l=n-t,h=((e-t)%l+l)%l+t;return h===t?n:h}function J(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var l=0,h=t;l<h.length;l+=1){var f=h[l];for(var y in f)e[y]=f[y]}return e}var le=1;function xe(){return le++}function Ue(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Ke(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Je(e,t){e.forEach(function(n){t[n]&&(t[n]=t[n].bind(t))})}function rt(e,t){return e.indexOf(t,e.length-t.length)!==-1}function It(e,t,n){var l={};for(var h in e)l[h]=t.call(n||this,e[h],h,e);return l}function yt(e,t,n){var l={};for(var h in e)t.call(n||this,e[h],h,e)&&(l[h]=e[h]);return l}function tr(e){return Array.isArray(e)?e.map(tr):typeof e=="object"&&e?It(e,tr):e}var Wr={};function Nt(e){Wr[e]||(typeof console<"u"&&console.warn(e),Wr[e]=!0)}function Ht(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function Gn(e){for(var t=0,n=0,l=e.length,h=l-1,f=void 0,y=void 0;n<l;h=n++)t+=((y=e[h]).x-(f=e[n]).x)*(f.y+y.y);return t}function yr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Mn(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(l,h,f,y){var x=f||y;return t[h]=!x||x.toLowerCase(),""}),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var He=null;function gt(e){if(He==null){var t=e.navigator?e.navigator.userAgent:null;He=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return He}function ft(e){try{var t=te[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}var Lt,Ot,gn,nn,pn=te.performance&&te.performance.now?te.performance.now.bind(te.performance):Date.now.bind(Date),Zn=te.requestAnimationFrame||te.mozRequestAnimationFrame||te.webkitRequestAnimationFrame||te.msRequestAnimationFrame,gr=te.cancelAnimationFrame||te.mozCancelAnimationFrame||te.webkitCancelAnimationFrame||te.msCancelAnimationFrame,vi={now:pn,frame:function(e){var t=Zn(e);return{cancel:function(){return gr(t)}}},getImageData:function(e,t){t===void 0&&(t=0);var n=te.document.createElement("canvas"),l=n.getContext("2d");if(!l)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,l.drawImage(e,0,0,e.width,e.height),l.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return Lt||(Lt=te.document.createElement("a")),Lt.href=e,Lt.href},hardwareConcurrency:te.navigator&&te.navigator.hardwareConcurrency||4,get devicePixelRatio(){return te.devicePixelRatio},get prefersReducedMotion(){return!!te.matchMedia&&(Ot==null&&(Ot=te.matchMedia("(prefers-reduced-motion: reduce)")),Ot.matches)}},Wt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ln={supported:!1,testSupport:function(e){!zo&&nn&&(Hn?bt(e):gn=e)}},zo=!1,Hn=!1;function bt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,nn),e.isContextLost())return;Ln.supported=!0}catch{}e.deleteTexture(t),zo=!0}te.document&&((nn=te.document.createElement("img")).onload=function(){gn&&bt(gn),gn=null,Hn=!0},nn.onerror=function(){zo=!0,gn=null},nn.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ai="01",on=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function vn(e){return e.indexOf("mapbox:")===0}on.prototype._createSkuToken=function(){var e=function(){for(var t="",n=0;n<10;n++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ai,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},on.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},on.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},on.prototype.normalizeStyleURL=function(e,t){if(!vn(e))return e;var n=_n(e);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},on.prototype.normalizeGlyphsURL=function(e,t){if(!vn(e))return e;var n=_n(e);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},on.prototype.normalizeSourceURL=function(e,t){if(!vn(e))return e;var n=_n(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)},on.prototype.normalizeSpriteURL=function(e,t,n,l){var h=_n(e);return vn(e)?(h.path="/styles/v1"+h.path+"/sprite"+t+n,this._makeAPIURL(h,this._customAccessToken||l)):(h.path+=""+t+n,aa(h))},on.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!vn(e))return e;var n=_n(e);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(vi.devicePixelRatio>=2||t===512?"@2x":"")+(Ln.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var l=this._customAccessToken||function(h){for(var f=0,y=h;f<y.length;f+=1){var x=y[f].match(/^access_token=(.*)$/);if(x)return x[1]}return null}(n.params)||Wt.ACCESS_TOKEN;return Wt.REQUIRE_ACCESS_TOKEN&&l&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,l)},on.prototype.canonicalizeTileURL=function(e,t){var n=_n(e);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return e;var l="mapbox://tiles/";l+=n.path.replace("/v4/","");var h=n.params;return t&&(h=h.filter(function(f){return!f.match(/^access_token=/)})),h.length&&(l+="?"+h.join("&")),l},on.prototype.canonicalizeTileset=function(e,t){for(var n=!!t&&vn(t),l=[],h=0,f=e.tiles||[];h<f.length;h+=1){var y=f[h];si(y)?l.push(this.canonicalizeTileURL(y,n)):l.push(y)}return l},on.prototype._makeAPIURL=function(e,t){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",l=_n(Wt.API_URL);if(e.protocol=l.protocol,e.authority=l.authority,e.protocol==="http"){var h=e.params.indexOf("secure");h>=0&&e.params.splice(h,1)}if(l.path!=="/"&&(e.path=""+l.path+e.path),!Wt.REQUIRE_ACCESS_TOKEN)return aa(e);if(!(t=t||Wt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if(t[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return e.params=e.params.filter(function(f){return f.indexOf("access_token")===-1}),e.params.push("access_token="+t),aa(e)};var oa=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function si(e){return oa.test(e)}var Oi=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function _n(e){var t=e.match(Oi);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function aa(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function Za(e){if(!e)return null;var t=e.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(te.atob(t[1]).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var _i=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};_i.prototype.getStorageKey=function(e){var t,n=Za(Wt.ACCESS_TOKEN);return t=n&&n.u?te.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,function(l,h){return String.fromCharCode(+("0x"+h))})):Wt.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},_i.prototype.fetchEventData=function(){var e=ft("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var l=te.localStorage.getItem(t);l&&(this.eventData=JSON.parse(l));var h=te.localStorage.getItem(n);h&&(this.anonId=h)}catch{Nt("Unable to read from LocalStorage")}},_i.prototype.saveEventData=function(){var e=ft("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{te.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&te.localStorage.setItem(t,JSON.stringify(this.eventData))}catch{Nt("Unable to write to LocalStorage")}},_i.prototype.processRequests=function(e){},_i.prototype.postEvent=function(e,t,n,l){var h=this;if(Wt.EVENTS_URL){var f=_n(Wt.EVENTS_URL);f.params.push("access_token="+(l||Wt.ACCESS_TOKEN||""));var y={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:ai,userId:this.anonId},x=t?J(y,t):y,S={url:aa(f),headers:{"Content-Type":"text/plain"},body:JSON.stringify([x])};this.pendingRequest=br(S,function(E){h.pendingRequest=null,n(E),h.saveEventData(),h.processRequests(l)})}},_i.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var xi,sa,Bi=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(n,l,h,f){this.skuToken=h;var y=!(!f&&!Wt.ACCESS_TOKEN),x=Array.isArray(n)&&n.some(function(S){return vn(S)||si(S)});Wt.EVENTS_URL&&y&&x&&this.queueRequest({id:l,timestamp:Date.now()},f)},t.prototype.processRequests=function(n){var l=this;if(!this.pendingRequest&&this.queue.length!==0){var h=this.queue.shift(),f=h.id,y=h.timestamp;f&&this.success[f]||(this.anonId||this.fetchEventData(),Ke(this.anonId)||(this.anonId=Ue()),this.postEvent(y,{skuToken:this.skuToken},function(x){x||f&&(l.success[f]=!0)},n))}},t}(_i),Al=new(function(e){function t(n){e.call(this,"appUserTurnstile"),this._customAccessToken=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(n,l){Wt.EVENTS_URL&&Wt.ACCESS_TOKEN&&Array.isArray(n)&&n.some(function(h){return vn(h)||si(h)})&&this.queueRequest(Date.now(),l)},t.prototype.processRequests=function(n){var l=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var h=Za(Wt.ACCESS_TOKEN),f=h?h.u:Wt.ACCESS_TOKEN,y=f!==this.eventData.tokenU;Ke(this.anonId)||(this.anonId=Ue(),y=!0);var x=this.queue.shift();if(this.eventData.lastSuccess){var S=new Date(this.eventData.lastSuccess),E=new Date(x),C=(x-this.eventData.lastSuccess)/864e5;y=y||C>=1||C<-1||S.getDate()!==E.getDate()}else y=!0;if(!y)return this.processRequests();this.postEvent(x,{"enabled.telemetry":!1},function(I){I||(l.eventData.lastSuccess=x,l.eventData.tokenU=f)},n)}},t}(_i)),Ml=Al.postTurnstileEvent.bind(Al),Ds=new Bi,Rs=Ds.postMapLoadEvent.bind(Ds),Ha=500,Ll=50;function Wa(){te.caches&&!xi&&(xi=te.caches.open("mapbox-tiles"))}function Os(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var la,Bs=1/0;function Fs(){return la==null&&(la=te.OffscreenCanvas&&new te.OffscreenCanvas(1,1).getContext("2d")&&typeof te.createImageBitmap=="function"),la}var Dl={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Dl);var Rl=function(e){function t(n,l,h){l===401&&si(h)&&(n+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,n),this.status=l,this.url=h,this.name=this.constructor.name,this.message=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),ua=yr()?function(){return self.worker&&self.worker.referrer}:function(){return(te.location.protocol==="blob:"?te.parent:te).location.href},po,ho,Xa=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(ua())&&!/^\w+:/.test(n))){if(te.fetch&&te.Request&&te.AbortController&&te.Request.prototype.hasOwnProperty("signal"))return function(l,h){var f,y=new te.AbortController,x=new te.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:ua(),signal:y.signal}),S=!1,E=!1,C=(f=x.url).indexOf("sku=")>0&&si(f);l.type==="json"&&x.headers.set("Accept","application/json");var I=function(D,j,q){if(!E){if(D&&D.message!=="SecurityError"&&Nt(D),j&&q)return A(j);var Y=Date.now();te.fetch(x).then(function(X){if(X.ok){var ie=C?X.clone():null;return A(X,ie,Y)}return h(new Rl(X.statusText,X.status,l.url))}).catch(function(X){X.code!==20&&h(new Error(X.message))})}},A=function(D,j,q){(l.type==="arrayBuffer"?D.arrayBuffer():l.type==="json"?D.json():D.text()).then(function(Y){E||(j&&q&&function(X,ie,ce){if(Wa(),xi){var pe={status:ie.status,statusText:ie.statusText,headers:new te.Headers};ie.headers.forEach(function(_e,Ce){return pe.headers.set(Ce,_e)});var fe=Mn(ie.headers.get("Cache-Control")||"");fe["no-store"]||(fe["max-age"]&&pe.headers.set("Expires",new Date(ce+1e3*fe["max-age"]).toUTCString()),new Date(pe.headers.get("Expires")).getTime()-ce<42e4||function(_e,Ce){if(sa===void 0)try{new Response(new ReadableStream),sa=!0}catch{sa=!1}sa?Ce(_e.body):_e.blob().then(Ce)}(ie,function(_e){var Ce=new te.Response(_e,pe);Wa(),xi&&xi.then(function(Ae){return Ae.put(Os(X.url),Ce)}).catch(function(Ae){return Nt(Ae.message)})}))}}(x,j,q),S=!0,h(null,Y,D.headers.get("Cache-Control"),D.headers.get("Expires")))}).catch(function(Y){E||h(new Error(Y.message))})};return C?function(D,j){if(Wa(),!xi)return j(null);var q=Os(D.url);xi.then(function(Y){Y.match(q).then(function(X){var ie=function(ce){if(!ce)return!1;var pe=new Date(ce.headers.get("Expires")||0),fe=Mn(ce.headers.get("Cache-Control")||"");return pe>Date.now()&&!fe["no-cache"]}(X);Y.delete(q),ie&&Y.put(q,X.clone()),j(null,X,ie)}).catch(j)}).catch(j)}(x,I):I(null,null),{cancel:function(){E=!0,S||y.abort()}}}(e,t);if(yr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(l,h){var f=new te.XMLHttpRequest;for(var y in f.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(f.responseType="arraybuffer"),l.headers)f.setRequestHeader(y,l.headers[y]);return l.type==="json"&&(f.responseType="text",f.setRequestHeader("Accept","application/json")),f.withCredentials=l.credentials==="include",f.onerror=function(){h(new Error(f.statusText))},f.onload=function(){if((f.status>=200&&f.status<300||f.status===0)&&f.response!==null){var x=f.response;if(l.type==="json")try{x=JSON.parse(f.response)}catch(S){return h(S)}h(null,x,f.getResponseHeader("Cache-Control"),f.getResponseHeader("Expires"))}else h(new Rl(f.statusText,f.status,l.url))},f.send(l.body),{cancel:function(){return f.abort()}}}(e,t)},Ns=function(e,t){return Xa(J(e,{type:"arrayBuffer"}),t)},br=function(e,t){return Xa(J(e,{method:"POST"}),t)},k="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";po=[],ho=0;var z=function(e,t){if(Ln.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),ho>=Wt.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return po.push(n),n}ho++;var l=!1,h=function(){if(!l)for(l=!0,ho--;po.length&&ho<Wt.MAX_PARALLEL_IMAGE_REQUESTS;){var y=po.shift();y.cancelled||(y.cancel=z(y.requestParameters,y.callback).cancel)}},f=Ns(e,function(y,x,S,E){h(),y?t(y):x&&(Fs()?function(C,I){var A=new te.Blob([new Uint8Array(C)],{type:"image/png"});te.createImageBitmap(A).then(function(D){I(null,D)}).catch(function(D){I(new Error("Could not load image because of "+D.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(x,t):function(C,I,A,D){var j=new te.Image,q=te.URL;j.onload=function(){I(null,j),q.revokeObjectURL(j.src),j.onload=null,te.requestAnimationFrame(function(){j.src=k})},j.onerror=function(){return I(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Y=new te.Blob([new Uint8Array(C)],{type:"image/png"});j.cacheControl=A,j.expires=D,j.src=C.byteLength?q.createObjectURL(Y):k}(x,t,S,E))});return{cancel:function(){f.cancel(),h()}}};function L(e,t,n){n[e]&&n[e].indexOf(t)!==-1||(n[e]=n[e]||[],n[e].push(t))}function U(e,t,n){if(n&&n[e]){var l=n[e].indexOf(t);l!==-1&&n[e].splice(l,1)}}var Z=function(e,t){t===void 0&&(t={}),J(this,t),this.type=e},Q=function(e){function t(n,l){l===void 0&&(l={}),e.call(this,"error",J({error:n},l))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Z),ne=function(){};ne.prototype.on=function(e,t){return this._listeners=this._listeners||{},L(e,t,this._listeners),this},ne.prototype.off=function(e,t){return U(e,t,this._listeners),U(e,t,this._oneTimeListeners),this},ne.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},L(e,t,this._oneTimeListeners),this},ne.prototype.fire=function(e,t){typeof e=="string"&&(e=new Z(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;for(var l=0,h=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];l<h.length;l+=1)h[l].call(this,e);for(var f=0,y=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];f<y.length;f+=1){var x=y[f];U(n,x,this._oneTimeListeners),x.call(this,e)}var S=this._eventedParent;S&&(J(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),S.fire(e))}else e instanceof Q&&console.error(e.error);return this},ne.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},ne.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var O={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},W=function(e,t,n,l){this.message=(e?e+": ":"")+n,l&&(this.identifier=l),t!=null&&t.__line__&&(this.line=t.__line__)};function ue(e){var t=e.value;return t?[new W(e.key,t,"constants have been deprecated as of v8")]:[]}function be(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var l=0,h=t;l<h.length;l+=1){var f=h[l];for(var y in f)e[y]=f[y]}return e}function Te(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function ge(e){if(Array.isArray(e))return e.map(ge);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=ge(e[n]);return t}return Te(e)}var Se=function(e){function t(n,l){e.call(this,l),this.message=l,this.key=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),We=function(e,t){t===void 0&&(t=[]),this.parent=e,this.bindings={};for(var n=0,l=t;n<l.length;n+=1){var h=l[n];this.bindings[h[0]]=h[1]}};We.prototype.concat=function(e){return new We(this,e)},We.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},We.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Ge={kind:"null"},ve={kind:"number"},Ve={kind:"string"},Le={kind:"boolean"},Re={kind:"color"},wt={kind:"object"},Fe={kind:"value"},Pt={kind:"collator"},Yt={kind:"formatted"},Et={kind:"resolvedImage"};function Ut(e,t){return{kind:"array",itemType:e,N:t}}function At(e){if(e.kind==="array"){var t=At(e.itemType);return typeof e.N=="number"?"array<"+t+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+t+">"}return e.kind}var xn=[Ge,ve,Ve,Le,Re,Yt,wt,Ut(Fe),Et];function qt(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!qt(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(var n=0,l=xn;n<l.length;n+=1)if(!qt(l[n],t))return null}}return"Expected "+At(e)+" but found "+At(t)+" instead."}function Sr(e,t){return t.some(function(n){return n.kind===e.kind})}function $t(e,t){return t.some(function(n){return n==="null"?e===null:n==="array"?Array.isArray(e):n==="object"?e&&!Array.isArray(e)&&typeof e=="object":n===typeof e})}var kt=F(function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l(x){return(x=Math.round(x))<0?0:x>255?255:x}function h(x){return l(x[x.length-1]==="%"?parseFloat(x)/100*255:parseInt(x))}function f(x){return(S=x[x.length-1]==="%"?parseFloat(x)/100:parseFloat(x))<0?0:S>1?1:S;var S}function y(x,S,E){return E<0?E+=1:E>1&&(E-=1),6*E<1?x+(S-x)*E*6:2*E<1?S:3*E<2?x+(S-x)*(2/3-E)*6:x}try{t.parseCSSColor=function(x){var S,E=x.replace(/ /g,"").toLowerCase();if(E in n)return n[E].slice();if(E[0]==="#")return E.length===4?(S=parseInt(E.substr(1),16))>=0&&S<=4095?[(3840&S)>>4|(3840&S)>>8,240&S|(240&S)>>4,15&S|(15&S)<<4,1]:null:E.length===7&&(S=parseInt(E.substr(1),16))>=0&&S<=16777215?[(16711680&S)>>16,(65280&S)>>8,255&S,1]:null;var C=E.indexOf("("),I=E.indexOf(")");if(C!==-1&&I+1===E.length){var A=E.substr(0,C),D=E.substr(C+1,I-(C+1)).split(","),j=1;switch(A){case"rgba":if(D.length!==4)return null;j=f(D.pop());case"rgb":return D.length!==3?null:[h(D[0]),h(D[1]),h(D[2]),j];case"hsla":if(D.length!==4)return null;j=f(D.pop());case"hsl":if(D.length!==3)return null;var q=(parseFloat(D[0])%360+360)%360/360,Y=f(D[1]),X=f(D[2]),ie=X<=.5?X*(Y+1):X+Y-X*Y,ce=2*X-ie;return[l(255*y(ce,ie,q+1/3)),l(255*y(ce,ie,q)),l(255*y(ce,ie,q-1/3)),j];default:return null}}return null}}catch{}}).parseCSSColor,Vt=function(e,t,n,l){l===void 0&&(l=1),this.r=e,this.g=t,this.b=n,this.a=l};Vt.parse=function(e){if(e){if(e instanceof Vt)return e;if(typeof e=="string"){var t=kt(e);if(t)return new Vt(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},Vt.prototype.toString=function(){var e=this.toArray(),t=e[1],n=e[2],l=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(n)+","+l+")"},Vt.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},Vt.black=new Vt(0,0,0,1),Vt.white=new Vt(1,1,1,1),Vt.transparent=new Vt(0,0,0,0),Vt.red=new Vt(1,0,0,1);var Dn=function(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Dn.prototype.compare=function(e,t){return this.collator.compare(e,t)},Dn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Us=function(e,t,n,l,h){this.text=e,this.image=t,this.scale=n,this.fontStack=l,this.textColor=h},Xr=function(e){this.sections=e};Xr.fromString=function(e){return new Xr([new Us(e,null,null,null,null)])},Xr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Xr.factory=function(e){return e instanceof Xr?e:Xr.fromString(e)},Xr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Xr.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var l=n[t];if(l.image)e.push(["image",l.image.name]);else{e.push(l.text);var h={};l.fontStack&&(h["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(h["font-scale"]=l.scale),l.textColor&&(h["text-color"]=["rgba"].concat(l.textColor.toArray())),e.push(h)}}return e};var Rn=function(e){this.name=e.name,this.available=e.available};function oc(e,t,n,l){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:"Invalid rgba value ["+[e,t,n,l].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof l=="number"?[e,t,n,l]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Vs(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof Vt||e instanceof Dn||e instanceof Xr||e instanceof Rn)return!0;if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t+=1)if(!Vs(n[t]))return!1;return!0}if(typeof e=="object"){for(var l in e)if(!Vs(e[l]))return!1;return!0}return!1}function Er(e){if(e===null)return Ge;if(typeof e=="string")return Ve;if(typeof e=="boolean")return Le;if(typeof e=="number")return ve;if(e instanceof Vt)return Re;if(e instanceof Dn)return Pt;if(e instanceof Xr)return Yt;if(e instanceof Rn)return Et;if(Array.isArray(e)){for(var t,n=e.length,l=0,h=e;l<h.length;l+=1){var f=Er(h[l]);if(t){if(t===f)continue;t=Fe;break}t=f}return Ut(t||Fe,n)}return wt}function js(e){var t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof Vt||e instanceof Xr||e instanceof Rn?e.toString():JSON.stringify(e)}Rn.prototype.toString=function(){return this.name},Rn.fromString=function(e){return e?new Rn({name:e,available:!1}):null},Rn.prototype.serialize=function(){return["image",this.name]};var wn=function(e,t){this.type=e,this.value=t};wn.parse=function(e,t){if(e.length!==2)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Vs(e[1]))return t.error("invalid value");var n=e[1],l=Er(n),h=t.expectedType;return l.kind!=="array"||l.N!==0||!h||h.kind!=="array"||typeof h.N=="number"&&h.N!==0||(l=h),new wn(l,n)},wn.prototype.evaluate=function(){return this.value},wn.prototype.eachChild=function(){},wn.prototype.outputDefined=function(){return!0},wn.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Vt?["rgba"].concat(this.value.toArray()):this.value instanceof Xr?this.value.serialize():this.value};var $r=function(e){this.name="ExpressionEvaluationError",this.message=e};$r.prototype.toJSON=function(){return this.message};var wi={string:Ve,number:ve,boolean:Le,object:wt},ar=function(e,t){this.type=e,this.args=t};ar.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n,l=1,h=e[0];if(h==="array"){var f,y;if(e.length>2){var x=e[1];if(typeof x!="string"||!(x in wi)||x==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);f=wi[x],l++}else f=Fe;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);y=e[2],l++}n=Ut(f,y)}else n=wi[h];for(var S=[];l<e.length;l++){var E=t.parse(e[l],l,Fe);if(!E)return null;S.push(E)}return new ar(n,S)},ar.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!qt(this.type,Er(n)))return n;if(t===this.args.length-1)throw new $r("Expected value to be of type "+At(this.type)+", but found "+At(Er(n))+" instead.")}return null},ar.prototype.eachChild=function(e){this.args.forEach(e)},ar.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},ar.prototype.serialize=function(){var e=this.type,t=[e.kind];if(e.kind==="array"){var n=e.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){t.push(n.kind);var l=e.N;(typeof l=="number"||this.args.length>1)&&t.push(l)}}return t.concat(this.args.map(function(h){return h.serialize()}))};var Fi=function(e){this.type=Yt,this.sections=e};Fi.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[1];if(!Array.isArray(n)&&typeof n=="object")return t.error("First argument must be an image or text section.");for(var l=[],h=!1,f=1;f<=e.length-1;++f){var y=e[f];if(h&&typeof y=="object"&&!Array.isArray(y)){h=!1;var x=null;if(y["font-scale"]&&!(x=t.parse(y["font-scale"],1,ve)))return null;var S=null;if(y["text-font"]&&!(S=t.parse(y["text-font"],1,Ut(Ve))))return null;var E=null;if(y["text-color"]&&!(E=t.parse(y["text-color"],1,Re)))return null;var C=l[l.length-1];C.scale=x,C.font=S,C.textColor=E}else{var I=t.parse(e[f],1,Fe);if(!I)return null;var A=I.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");h=!0,l.push({content:I,scale:null,font:null,textColor:null})}}return new Fi(l)},Fi.prototype.evaluate=function(e){return new Xr(this.sections.map(function(t){var n=t.content.evaluate(e);return Er(n)===Et?new Us("",n,null,null,null):new Us(js(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},Fi.prototype.eachChild=function(e){for(var t=0,n=this.sections;t<n.length;t+=1){var l=n[t];e(l.content),l.scale&&e(l.scale),l.font&&e(l.font),l.textColor&&e(l.textColor)}},Fi.prototype.outputDefined=function(){return!1},Fi.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var l=n[t];e.push(l.content.serialize());var h={};l.scale&&(h["font-scale"]=l.scale.serialize()),l.font&&(h["text-font"]=l.font.serialize()),l.textColor&&(h["text-color"]=l.textColor.serialize()),e.push(h)}return e};var li=function(e){this.type=Et,this.input=e};li.parse=function(e,t){if(e.length!==2)return t.error("Expected two arguments.");var n=t.parse(e[1],1,Ve);return n?new li(n):t.error("No image name provided.")},li.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=Rn.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n},li.prototype.eachChild=function(e){e(this.input)},li.prototype.outputDefined=function(){return!1},li.prototype.serialize=function(){return["image",this.input.serialize()]};var eh={"to-boolean":Le,"to-color":Re,"to-number":ve,"to-string":Ve},bi=function(e,t){this.type=e,this.args=t};bi.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[0];if((n==="to-boolean"||n==="to-string")&&e.length!==2)return t.error("Expected one argument.");for(var l=eh[n],h=[],f=1;f<e.length;f++){var y=t.parse(e[f],f,Fe);if(!y)return null;h.push(y)}return new bi(l,h)},bi.prototype.evaluate=function(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){for(var t,n,l=0,h=this.args;l<h.length;l+=1){if(n=null,(t=h[l].evaluate(e))instanceof Vt)return t;if(typeof t=="string"){var f=e.parseColor(t);if(f)return f}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":oc(t[0],t[1],t[2],t[3])))return new Vt(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new $r(n||"Could not parse color from value '"+(typeof t=="string"?t:String(JSON.stringify(t)))+"'")}if(this.type.kind==="number"){for(var y=null,x=0,S=this.args;x<S.length;x+=1){if((y=S[x].evaluate(e))===null)return 0;var E=Number(y);if(!isNaN(E))return E}throw new $r("Could not convert "+JSON.stringify(y)+" to number.")}return this.type.kind==="formatted"?Xr.fromString(js(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Rn.fromString(js(this.args[0].evaluate(e))):js(this.args[0].evaluate(e))},bi.prototype.eachChild=function(e){this.args.forEach(e)},bi.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},bi.prototype.serialize=function(){if(this.type.kind==="formatted")return new Fi([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new li(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var Gd=["Unknown","Point","LineString","Polygon"],fo=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};fo.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},fo.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Gd[this.feature.type]:this.feature.type:null},fo.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},fo.prototype.canonicalID=function(){return this.canonical},fo.prototype.properties=function(){return this.feature&&this.feature.properties||{}},fo.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Vt.parse(e)),t};var an=function(e,t,n,l){this.name=e,this.type=t,this._evaluate=n,this.args=l};an.prototype.evaluate=function(e){return this._evaluate(e,this.args)},an.prototype.eachChild=function(e){this.args.forEach(e)},an.prototype.outputDefined=function(){return!1},an.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},an.parse=function(e,t){var n,l=e[0],h=an.definitions[l];if(!h)return t.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0);for(var f=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,x=y.filter(function(tt){var Ne=tt[0];return!Array.isArray(Ne)||Ne.length===e.length-1}),S=null,E=0,C=x;E<C.length;E+=1){var I=C[E],A=I[0],D=I[1];S=new Do(t.registry,t.path,null,t.scope);for(var j=[],q=!1,Y=1;Y<e.length;Y++){var X=e[Y],ie=Array.isArray(A)?A[Y-1]:A.type,ce=S.parse(X,1+j.length,ie);if(!ce){q=!0;break}j.push(ce)}if(!q)if(Array.isArray(A)&&A.length!==j.length)S.error("Expected "+A.length+" arguments, but found "+j.length+" instead.");else{for(var pe=0;pe<j.length;pe++){var fe=Array.isArray(A)?A[pe]:A.type,_e=j[pe];S.concat(pe+1).checkSubtype(fe,_e.type)}if(S.errors.length===0)return new an(l,f,D,j)}}if(x.length===1)(n=t.errors).push.apply(n,S.errors);else{for(var Ce=(x.length?x:y).map(function(tt){var Ne;return Ne=tt[0],Array.isArray(Ne)?"("+Ne.map(At).join(", ")+")":"("+At(Ne.type)+"...)"}).join(" | "),Ae=[],Ye=1;Ye<e.length;Ye++){var Be=t.parse(e[Ye],1+Ae.length);if(!Be)return null;Ae.push(At(Be.type))}t.error("Expected arguments of type "+Ce+", but found ("+Ae.join(", ")+") instead.")}return null},an.register=function(e,t){for(var n in an.definitions=t,t)e[n]=an};var Ji=function(e,t,n){this.type=Pt,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t};function bn(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function ca(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Zd(e,t){var n=(180+e[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,h=Math.pow(2,t.z);return[Math.round(n*h*8192),Math.round(l*h*8192)]}function Hd(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function ac(e,t){for(var n,l,h,f,y,x,S,E=!1,C=0,I=t.length;C<I;C++)for(var A=t[C],D=0,j=A.length;D<j-1;D++){if((f=(n=e)[0]-(l=A[D])[0])*(S=n[1]-(h=A[D+1])[1])-(x=n[0]-h[0])*(y=n[1]-l[1])==0&&f*x<=0&&y*S<=0)return!1;Hd(e,A[D],A[D+1])&&(E=!E)}return E}function Wd(e,t){for(var n=0;n<t.length;n++)if(ac(e,t[n]))return!0;return!1}function th(e,t,n,l){var h=l[0]-n[0],f=l[1]-n[1],y=(e[0]-n[0])*f-h*(e[1]-n[1]),x=(t[0]-n[0])*f-h*(t[1]-n[1]);return y>0&&x<0||y<0&&x>0}function Xd(e,t,n){for(var l=0,h=n;l<h.length;l+=1)for(var f=h[l],y=0;y<f.length-1;++y)if((I=[(C=f[y+1])[0]-(E=f[y])[0],C[1]-E[1]])[0]*(A=[(S=t)[0]-(x=e)[0],S[1]-x[1]])[1]-I[1]*A[0]!=0&&th(x,S,E,C)&&th(E,C,x,S))return!0;var x,S,E,C,I,A;return!1}function rh(e,t){for(var n=0;n<e.length;++n)if(!ac(e[n],t))return!1;for(var l=0;l<e.length-1;++l)if(Xd(e[l],e[l+1],t))return!1;return!0}function nh(e,t){for(var n=0;n<t.length;n++)if(rh(e,t[n]))return!0;return!1}function $a(e,t,n){for(var l=[],h=0;h<e.length;h++){for(var f=[],y=0;y<e[h].length;y++){var x=Zd(e[h][y],n);bn(t,x),f.push(x)}l.push(f)}return l}function sc(e,t,n){for(var l=[],h=0;h<e.length;h++){var f=$a(e[h],t,n);l.push(f)}return l}function qs(e,t,n,l){if(e[0]<n[0]||e[0]>n[2]){var h=.5*l,f=e[0]-n[0]>h?-l:n[0]-e[0]>h?l:0;f===0&&(f=e[0]-n[2]>h?-l:n[2]-e[0]>h?l:0),e[0]+=f}bn(t,e)}function ih(e,t,n,l){for(var h=8192*Math.pow(2,l.z),f=[8192*l.x,8192*l.y],y=[],x=0,S=e;x<S.length;x+=1)for(var E=0,C=S[x];E<C.length;E+=1){var I=C[E],A=[I.x+f[0],I.y+f[1]];qs(A,t,n,h),y.push(A)}return y}function Ol(e,t,n,l){for(var h,f=8192*Math.pow(2,l.z),y=[8192*l.x,8192*l.y],x=[],S=0,E=e;S<E.length;S+=1){for(var C=[],I=0,A=E[S];I<A.length;I+=1){var D=A[I],j=[D.x+y[0],D.y+y[1]];bn(t,j),C.push(j)}x.push(C)}if(t[2]-t[0]<=f/2){(h=t)[0]=h[1]=1/0,h[2]=h[3]=-1/0;for(var q=0,Y=x;q<Y.length;q+=1)for(var X=0,ie=Y[q];X<ie.length;X+=1)qs(ie[X],t,n,f)}return x}Ji.parse=function(e,t){if(e.length!==2)return t.error("Expected one argument.");var n=e[1];if(typeof n!="object"||Array.isArray(n))return t.error("Collator options argument must be an object.");var l=t.parse(n["case-sensitive"]!==void 0&&n["case-sensitive"],1,Le);if(!l)return null;var h=t.parse(n["diacritic-sensitive"]!==void 0&&n["diacritic-sensitive"],1,Le);if(!h)return null;var f=null;return n.locale&&!(f=t.parse(n.locale,1,Ve))?null:new Ji(l,h,f)},Ji.prototype.evaluate=function(e){return new Dn(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},Ji.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},Ji.prototype.outputDefined=function(){return!1},Ji.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Si=function(e,t){this.type=Le,this.geojson=e,this.geometries=t};function Ao(e){if(e instanceof an&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Si)return!1;var t=!0;return e.eachChild(function(n){t&&!Ao(n)&&(t=!1)}),t}function Mo(e){if(e instanceof an&&e.name==="feature-state")return!1;var t=!0;return e.eachChild(function(n){t&&!Mo(n)&&(t=!1)}),t}function pa(e,t){if(e instanceof an&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(l){n&&!pa(l,t)&&(n=!1)}),n}Si.parse=function(e,t){if(e.length!==2)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Vs(e[1])){var n=e[1];if(n.type==="FeatureCollection")for(var l=0;l<n.features.length;++l){var h=n.features[l].geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new Si(n,n.features[l].geometry)}else if(n.type==="Feature"){var f=n.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Si(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new Si(n,n)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Si.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(t,n){var l=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],f=t.canonicalID();if(n.type==="Polygon"){var y=$a(n.coordinates,h,f),x=ih(t.geometry(),l,h,f);if(!ca(l,h))return!1;for(var S=0,E=x;S<E.length;S+=1)if(!ac(E[S],y))return!1}if(n.type==="MultiPolygon"){var C=sc(n.coordinates,h,f),I=ih(t.geometry(),l,h,f);if(!ca(l,h))return!1;for(var A=0,D=I;A<D.length;A+=1)if(!Wd(D[A],C))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(t,n){var l=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],f=t.canonicalID();if(n.type==="Polygon"){var y=$a(n.coordinates,h,f),x=Ol(t.geometry(),l,h,f);if(!ca(l,h))return!1;for(var S=0,E=x;S<E.length;S+=1)if(!rh(E[S],y))return!1}if(n.type==="MultiPolygon"){var C=sc(n.coordinates,h,f),I=Ol(t.geometry(),l,h,f);if(!ca(l,h))return!1;for(var A=0,D=I;A<D.length;A+=1)if(!nh(D[A],C))return!1}return!0}(e,this.geometries)}return!1},Si.prototype.eachChild=function(){},Si.prototype.outputDefined=function(){return!0},Si.prototype.serialize=function(){return["within",this.geojson]};var Lo=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Lo.parse=function(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new Lo(n,t.scope.get(n)):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},Lo.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Lo.prototype.eachChild=function(){},Lo.prototype.outputDefined=function(){return!1},Lo.prototype.serialize=function(){return["var",this.name]};var Do=function(e,t,n,l,h){t===void 0&&(t=[]),l===void 0&&(l=new We),h===void 0&&(h=[]),this.registry=e,this.path=t,this.key=t.map(function(f){return"["+f+"]"}).join(""),this.scope=l,this.errors=h,this.expectedType=n};function Bl(e,t){for(var n,l=e.length-1,h=0,f=l,y=0;h<=f;)if((n=e[y=Math.floor((h+f)/2)])<=t){if(y===l||t<e[y+1])return y;h=y+1}else{if(!(n>t))throw new $r("Input is not a number.");f=y-1}return 0}Do.prototype.parse=function(e,t,n,l,h){return h===void 0&&(h={}),t?this.concat(t,n,l)._parse(e,h):this._parse(e,h)},Do.prototype._parse=function(e,t){function n(E,C,I){return I==="assert"?new ar(C,[E]):I==="coerce"?new bi(C,[E]):E}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var l=e[0];if(typeof l!="string")return this.error("Expression name must be a string, but found "+typeof l+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var h=this.registry[l];if(h){var f=h.parse(e,this);if(!f)return null;if(this.expectedType){var y=this.expectedType,x=f.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||x.kind!=="value")if(y.kind!=="color"&&y.kind!=="formatted"&&y.kind!=="resolvedImage"||x.kind!=="value"&&x.kind!=="string"){if(this.checkSubtype(y,x))return null}else f=n(f,y,t.typeAnnotation||"coerce");else f=n(f,y,t.typeAnnotation||"assert")}if(!(f instanceof wn)&&f.type.kind!=="resolvedImage"&&function E(C){if(C instanceof Lo)return E(C.boundExpression);if(C instanceof an&&C.name==="error"||C instanceof Ji||C instanceof Si)return!1;var I=C instanceof bi||C instanceof ar,A=!0;return C.eachChild(function(D){A=I?A&&E(D):A&&D instanceof wn}),!!A&&Ao(C)&&pa(C,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(f)){var S=new fo;try{f=new wn(f.type,f.evaluate(S))}catch(E){return this.error(E.message),null}}return f}return this.error('Unknown expression "'+l+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Do.prototype.concat=function(e,t,n){var l=typeof e=="number"?this.path.concat(e):this.path,h=n?this.scope.concat(n):this.scope;return new Do(this.registry,l,t||null,h,this.errors)},Do.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var l=""+this.key+t.map(function(h){return"["+h+"]"}).join("");this.errors.push(new Se(l,e))},Do.prototype.checkSubtype=function(e,t){var n=qt(e,t);return n&&this.error(n),n};var Wn=function(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var l=0,h=n;l<h.length;l+=1){var f=h[l],y=f[1];this.labels.push(f[0]),this.outputs.push(y)}};function Ar(e,t,n){return e*(1-n)+t*n}Wn.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var n=t.parse(e[1],1,ve);if(!n)return null;var l=[],h=null;t.expectedType&&t.expectedType.kind!=="value"&&(h=t.expectedType);for(var f=1;f<e.length;f+=2){var y=f===1?-1/0:e[f],x=e[f+1],S=f,E=f+1;if(typeof y!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(l.length&&l[l.length-1][0]>=y)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',S);var C=t.parse(x,E,h);if(!C)return null;h=h||C.type,l.push([y,C])}return new Wn(h,n,l)},Wn.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(t.length===1)return n[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return n[0].evaluate(e);var h=t.length;return l>=t[h-1]?n[h-1].evaluate(e):n[Bl(t,l)].evaluate(e)},Wn.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},Wn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Wn.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Ka=Object.freeze({__proto__:null,number:Ar,color:function(e,t,n){return new Vt(Ar(e.r,t.r,n),Ar(e.g,t.g,n),Ar(e.b,t.b,n),Ar(e.a,t.a,n))},array:function(e,t,n){return e.map(function(l,h){return Ar(l,t[h],n)})}}),oh=6/29*3*(6/29),$d=Math.PI/180,Kd=180/Math.PI;function lc(e){return e>.008856451679035631?Math.pow(e,1/3):e/oh+4/29}function uc(e){return e>6/29?e*e*e:oh*(e-4/29)}function cc(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function pc(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ah(e){var t=pc(e.r),n=pc(e.g),l=pc(e.b),h=lc((.4124564*t+.3575761*n+.1804375*l)/.95047),f=lc((.2126729*t+.7151522*n+.072175*l)/1);return{l:116*f-16,a:500*(h-f),b:200*(f-lc((.0193339*t+.119192*n+.9503041*l)/1.08883)),alpha:e.a}}function sh(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,l=isNaN(e.b)?t:t-e.b/200;return t=1*uc(t),n=.95047*uc(n),l=1.08883*uc(l),new Vt(cc(3.2404542*n-1.5371385*t-.4985314*l),cc(-.969266*n+1.8760108*t+.041556*l),cc(.0556434*n-.2040259*t+1.0572252*l),e.alpha)}function Yd(e,t,n){var l=t-e;return e+n*(l>180||l<-180?l-360*Math.round(l/360):l)}var Gs={forward:ah,reverse:sh,interpolate:function(e,t,n){return{l:Ar(e.l,t.l,n),a:Ar(e.a,t.a,n),b:Ar(e.b,t.b,n),alpha:Ar(e.alpha,t.alpha,n)}}},Zs={forward:function(e){var t=ah(e),n=t.l,l=t.a,h=t.b,f=Math.atan2(h,l)*Kd;return{h:f<0?f+360:f,c:Math.sqrt(l*l+h*h),l:n,alpha:e.a}},reverse:function(e){var t=e.h*$d,n=e.c;return sh({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:Yd(e.h,t.h,n),c:Ar(e.c,t.c,n),l:Ar(e.l,t.l,n),alpha:Ar(e.alpha,t.alpha,n)}}},lh=Object.freeze({__proto__:null,lab:Gs,hcl:Zs}),sn=function(e,t,n,l,h){this.type=e,this.operator=t,this.interpolation=n,this.input=l,this.labels=[],this.outputs=[];for(var f=0,y=h;f<y.length;f+=1){var x=y[f],S=x[1];this.labels.push(x[0]),this.outputs.push(S)}};function hc(e,t,n,l){var h=l-n,f=e-n;return h===0?0:t===1?f/h:(Math.pow(t,f)-1)/(Math.pow(t,h)-1)}sn.interpolationFactor=function(e,t,n,l){var h=0;if(e.name==="exponential")h=hc(t,e.base,n,l);else if(e.name==="linear")h=hc(t,1,n,l);else if(e.name==="cubic-bezier"){var f=e.controlPoints;h=new M(f[0],f[1],f[2],f[3]).solve(hc(t,1,n,l))}return h},sn.parse=function(e,t){var n=e[0],l=e[1],h=e[2],f=e.slice(3);if(!Array.isArray(l)||l.length===0)return t.error("Expected an interpolation type expression.",1);if(l[0]==="linear")l={name:"linear"};else if(l[0]==="exponential"){var y=l[1];if(typeof y!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:y}}else{if(l[0]!=="cubic-bezier")return t.error("Unknown interpolation type "+String(l[0]),1,0);var x=l.slice(1);if(x.length!==4||x.some(function(Y){return typeof Y!="number"||Y<0||Y>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:x}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(h=t.parse(h,2,ve)))return null;var S=[],E=null;n==="interpolate-hcl"||n==="interpolate-lab"?E=Re:t.expectedType&&t.expectedType.kind!=="value"&&(E=t.expectedType);for(var C=0;C<f.length;C+=2){var I=f[C],A=f[C+1],D=C+3,j=C+4;if(typeof I!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(S.length&&S[S.length-1][0]>=I)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',D);var q=t.parse(A,j,E);if(!q)return null;E=E||q.type,S.push([I,q])}return E.kind==="number"||E.kind==="color"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new sn(E,n,l,h,S):t.error("Type "+At(E)+" is not interpolatable.")},sn.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(t.length===1)return n[0].evaluate(e);var l=this.input.evaluate(e);if(l<=t[0])return n[0].evaluate(e);var h=t.length;if(l>=t[h-1])return n[h-1].evaluate(e);var f=Bl(t,l),y=sn.interpolationFactor(this.interpolation,l,t[f],t[f+1]),x=n[f].evaluate(e),S=n[f+1].evaluate(e);return this.operator==="interpolate"?Ka[this.type.kind.toLowerCase()](x,S,y):this.operator==="interpolate-hcl"?Zs.reverse(Zs.interpolate(Zs.forward(x),Zs.forward(S),y)):Gs.reverse(Gs.interpolate(Gs.forward(x),Gs.forward(S),y))},sn.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},sn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},sn.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t};var Ro=function(e,t){this.type=e,this.args=t};Ro.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,l=t.expectedType;l&&l.kind!=="value"&&(n=l);for(var h=[],f=0,y=e.slice(1);f<y.length;f+=1){var x=t.parse(y[f],1+h.length,n,void 0,{typeAnnotation:"omit"});if(!x)return null;n=n||x.type,h.push(x)}var S=l&&h.some(function(E){return qt(l,E.type)});return new Ro(S?Fe:n,h)},Ro.prototype.evaluate=function(e){for(var t,n=null,l=0,h=0,f=this.args;h<f.length&&(l++,(n=f[h].evaluate(e))&&n instanceof Rn&&!n.available&&(t||(t=n.name),n=null,l===this.args.length&&(n=t)),n===null);h+=1);return n},Ro.prototype.eachChild=function(e){this.args.forEach(e)},Ro.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ro.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Oo=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};Oo.prototype.evaluate=function(e){return this.result.evaluate(e)},Oo.prototype.eachChild=function(e){for(var t=0,n=this.bindings;t<n.length;t+=1)e(n[t][1]);e(this.result)},Oo.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],l=1;l<e.length-1;l+=2){var h=e[l];if(typeof h!="string")return t.error("Expected string, but found "+typeof h+" instead.",l);if(/[^a-zA-Z0-9_]/.test(h))return t.error("Variable names must contain only alphanumeric characters or '_'.",l);var f=t.parse(e[l+1],l+1);if(!f)return null;n.push([h,f])}var y=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return y?new Oo(n,y):null},Oo.prototype.outputDefined=function(){return this.result.outputDefined()},Oo.prototype.serialize=function(){for(var e=["let"],t=0,n=this.bindings;t<n.length;t+=1){var l=n[t];e.push(l[0],l[1].serialize())}return e.push(this.result.serialize()),e};var ha=function(e,t,n){this.type=e,this.index=t,this.input=n};ha.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,ve),l=t.parse(e[2],2,Ut(t.expectedType||Fe));return n&&l?new ha(l.type.itemType,n,l):null},ha.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new $r("Array index out of bounds: "+t+" < 0.");if(t>=n.length)throw new $r("Array index out of bounds: "+t+" > "+(n.length-1)+".");if(t!==Math.floor(t))throw new $r("Array index must be an integer, but found "+t+" instead.");return n[t]},ha.prototype.eachChild=function(e){e(this.index),e(this.input)},ha.prototype.outputDefined=function(){return!1},ha.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var fa=function(e,t){this.type=Le,this.needle=e,this.haystack=t};fa.parse=function(e,t){if(e.length!==3)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Fe),l=t.parse(e[2],2,Fe);return n&&l?Sr(n.type,[Le,Ve,ve,Ge,Fe])?new fa(n,l):t.error("Expected first argument to be of type boolean, string, number or null, but found "+At(n.type)+" instead"):null},fa.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!$t(t,["boolean","string","number","null"]))throw new $r("Expected first argument to be of type boolean, string, number or null, but found "+At(Er(t))+" instead.");if(!$t(n,["string","array"]))throw new $r("Expected second argument to be of type array or string, but found "+At(Er(n))+" instead.");return n.indexOf(t)>=0},fa.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},fa.prototype.outputDefined=function(){return!0},fa.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Bo=function(e,t,n){this.type=ve,this.needle=e,this.haystack=t,this.fromIndex=n};Bo.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Fe),l=t.parse(e[2],2,Fe);if(!n||!l)return null;if(!Sr(n.type,[Le,Ve,ve,Ge,Fe]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+At(n.type)+" instead");if(e.length===4){var h=t.parse(e[3],3,ve);return h?new Bo(n,l,h):null}return new Bo(n,l)},Bo.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!$t(t,["boolean","string","number","null"]))throw new $r("Expected first argument to be of type boolean, string, number or null, but found "+At(Er(t))+" instead.");if(!$t(n,["string","array"]))throw new $r("Expected second argument to be of type array or string, but found "+At(Er(n))+" instead.");if(this.fromIndex){var l=this.fromIndex.evaluate(e);return n.indexOf(t,l)}return n.indexOf(t)},Bo.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Bo.prototype.outputDefined=function(){return!1},Bo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var da=function(e,t,n,l,h,f){this.inputType=e,this.type=t,this.input=n,this.cases=l,this.outputs=h,this.otherwise=f};da.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,l;t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(var h={},f=[],y=2;y<e.length-1;y+=2){var x=e[y],S=e[y+1];Array.isArray(x)||(x=[x]);var E=t.concat(y);if(x.length===0)return E.error("Expected at least one branch label.");for(var C=0,I=x;C<I.length;C+=1){var A=I[C];if(typeof A!="number"&&typeof A!="string")return E.error("Branch labels must be numbers or strings.");if(typeof A=="number"&&Math.abs(A)>Number.MAX_SAFE_INTEGER)return E.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof A=="number"&&Math.floor(A)!==A)return E.error("Numeric branch labels must be integer values.");if(n){if(E.checkSubtype(n,Er(A)))return null}else n=Er(A);if(h[String(A)]!==void 0)return E.error("Branch labels must be unique.");h[String(A)]=f.length}var D=t.parse(S,y,l);if(!D)return null;l=l||D.type,f.push(D)}var j=t.parse(e[1],1,Fe);if(!j)return null;var q=t.parse(e[e.length-1],e.length-1,l);return q?j.type.kind!=="value"&&t.concat(1).checkSubtype(n,j.type)?null:new da(n,l,j,h,f,q):null},da.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(Er(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},da.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},da.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},da.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],l={},h=0,f=Object.keys(this.cases).sort();h<f.length;h+=1){var y=f[h];(I=l[this.cases[y]])===void 0?(l[this.cases[y]]=n.length,n.push([this.cases[y],[y]])):n[I][1].push(y)}for(var x=function(D){return e.inputType.kind==="number"?Number(D):D},S=0,E=n;S<E.length;S+=1){var C=E[S],I=C[0],A=C[1];t.push(A.length===1?x(A[0]):A.map(x)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var ma=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};ma.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&t.expectedType.kind!=="value"&&(n=t.expectedType);for(var l=[],h=1;h<e.length-1;h+=2){var f=t.parse(e[h],h,Le);if(!f)return null;var y=t.parse(e[h+1],h+1,n);if(!y)return null;l.push([f,y]),n=n||y.type}var x=t.parse(e[e.length-1],e.length-1,n);return x?new ma(n,l,x):null},ma.prototype.evaluate=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var l=n[t],h=l[1];if(l[0].evaluate(e))return h.evaluate(e)}return this.otherwise.evaluate(e)},ma.prototype.eachChild=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var l=n[t],h=l[1];e(l[0]),e(h)}e(this.otherwise)},ma.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},ma.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Fo=function(e,t,n,l){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=l};function uh(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function ch(e,t,n,l){return l.compare(t,n)===0}function Jt(e,t,n){var l=e!=="=="&&e!=="!=";return function(){function h(f,y,x){this.type=Le,this.lhs=f,this.rhs=y,this.collator=x,this.hasUntypedArgument=f.type.kind==="value"||y.type.kind==="value"}return h.parse=function(f,y){if(f.length!==3&&f.length!==4)return y.error("Expected two or three arguments.");var x=f[0],S=y.parse(f[1],1,Fe);if(!S)return null;if(!uh(x,S.type))return y.concat(1).error('"'+x+`" comparisons are not supported for type '`+At(S.type)+"'.");var E=y.parse(f[2],2,Fe);if(!E)return null;if(!uh(x,E.type))return y.concat(2).error('"'+x+`" comparisons are not supported for type '`+At(E.type)+"'.");if(S.type.kind!==E.type.kind&&S.type.kind!=="value"&&E.type.kind!=="value")return y.error("Cannot compare types '"+At(S.type)+"' and '"+At(E.type)+"'.");l&&(S.type.kind==="value"&&E.type.kind!=="value"?S=new ar(E.type,[S]):S.type.kind!=="value"&&E.type.kind==="value"&&(E=new ar(S.type,[E])));var C=null;if(f.length===4){if(S.type.kind!=="string"&&E.type.kind!=="string"&&S.type.kind!=="value"&&E.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(!(C=y.parse(f[3],3,Pt)))return null}return new h(S,E,C)},h.prototype.evaluate=function(f){var y=this.lhs.evaluate(f),x=this.rhs.evaluate(f);if(l&&this.hasUntypedArgument){var S=Er(y),E=Er(x);if(S.kind!==E.kind||S.kind!=="string"&&S.kind!=="number")throw new $r('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+S.kind+", "+E.kind+") instead.")}if(this.collator&&!l&&this.hasUntypedArgument){var C=Er(y),I=Er(x);if(C.kind!=="string"||I.kind!=="string")return t(f,y,x)}return this.collator?n(f,y,x,this.collator.evaluate(f)):t(f,y,x)},h.prototype.eachChild=function(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)},h.prototype.outputDefined=function(){return!0},h.prototype.serialize=function(){var f=[e];return this.eachChild(function(y){f.push(y.serialize())}),f},h}()}Fo.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Fe),l=t.parse(e[2],2,ve);if(!n||!l)return null;if(!Sr(n.type,[Ut(Fe),Ve,Fe]))return t.error("Expected first argument to be of type array or string, but found "+At(n.type)+" instead");if(e.length===4){var h=t.parse(e[3],3,ve);return h?new Fo(n.type,n,l,h):null}return new Fo(n.type,n,l)},Fo.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!$t(t,["string","array"]))throw new $r("Expected first argument to be of type array or string, but found "+At(Er(t))+" instead.");if(this.endIndex){var l=this.endIndex.evaluate(e);return t.slice(n,l)}return t.slice(n)},Fo.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Fo.prototype.outputDefined=function(){return!1},Fo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Jd=Jt("==",function(e,t,n){return t===n},ch),Fl=Jt("!=",function(e,t,n){return t!==n},function(e,t,n,l){return!ch(0,t,n,l)}),ph=Jt("<",function(e,t,n){return t<n},function(e,t,n,l){return l.compare(t,n)<0}),hh=Jt(">",function(e,t,n){return t>n},function(e,t,n,l){return l.compare(t,n)>0}),fh=Jt("<=",function(e,t,n){return t<=n},function(e,t,n,l){return l.compare(t,n)<=0}),dh=Jt(">=",function(e,t,n){return t>=n},function(e,t,n,l){return l.compare(t,n)>=0}),ya=function(e,t,n,l,h){this.type=Ve,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=l,this.maxFractionDigits=h};ya.parse=function(e,t){if(e.length!==3)return t.error("Expected two arguments.");var n=t.parse(e[1],1,ve);if(!n)return null;var l=e[2];if(typeof l!="object"||Array.isArray(l))return t.error("NumberFormat options argument must be an object.");var h=null;if(l.locale&&!(h=t.parse(l.locale,1,Ve)))return null;var f=null;if(l.currency&&!(f=t.parse(l.currency,1,Ve)))return null;var y=null;if(l["min-fraction-digits"]&&!(y=t.parse(l["min-fraction-digits"],1,ve)))return null;var x=null;return l["max-fraction-digits"]&&!(x=t.parse(l["max-fraction-digits"],1,ve))?null:new ya(n,h,f,y,x)},ya.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},ya.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},ya.prototype.outputDefined=function(){return!1},ya.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var No=function(e){this.type=ve,this.input=e};No.parse=function(e,t){if(e.length!==2)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?t.error("Expected argument of type string or array, but found "+At(n.type)+" instead."):new No(n):null},No.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(typeof t=="string"||Array.isArray(t))return t.length;throw new $r("Expected value to be of type string or array, but found "+At(Er(t))+" instead.")},No.prototype.eachChild=function(e){e(this.input)},No.prototype.outputDefined=function(){return!1},No.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var ga={"==":Jd,"!=":Fl,">":hh,"<":ph,">=":dh,"<=":fh,array:ar,at:ha,boolean:ar,case:ma,coalesce:Ro,collator:Ji,format:Fi,image:li,in:fa,"index-of":Bo,interpolate:sn,"interpolate-hcl":sn,"interpolate-lab":sn,length:No,let:Oo,literal:wn,match:da,number:ar,"number-format":ya,object:ar,slice:Fo,step:Wn,string:ar,"to-boolean":bi,"to-color":bi,"to-number":bi,"to-string":bi,var:Lo,within:Si};function mh(e,t){var n=t[0],l=t[1],h=t[2],f=t[3];n=n.evaluate(e),l=l.evaluate(e),h=h.evaluate(e);var y=f?f.evaluate(e):1,x=oc(n,l,h,y);if(x)throw new $r(x);return new Vt(n/255*y,l/255*y,h/255*y,y)}function yh(e,t){return e in t}function fc(e,t){var n=t[e];return n===void 0?null:n}function va(e){return{type:e}}function gh(e){return{result:"success",value:e}}function _a(e){return{result:"error",value:e}}function xa(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function vh(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Hs(e){return!!e.expression&&e.expression.interpolated}function rr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Nl(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Qd(e){return e}function Ya(e,t,n){return e!==void 0?e:t!==void 0?t:n!==void 0?n:void 0}function _h(e,t,n,l,h){return Ya(typeof n===h?l[n]:void 0,e.default,t.default)}function em(e,t,n){if(rr(n)!=="number")return Ya(e.default,t.default);var l=e.stops.length;if(l===1||n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[l-1][0])return e.stops[l-1][1];var h=Bl(e.stops.map(function(f){return f[0]}),n);return e.stops[h][1]}function xh(e,t,n){var l=e.base!==void 0?e.base:1;if(rr(n)!=="number")return Ya(e.default,t.default);var h=e.stops.length;if(h===1||n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[h-1][0])return e.stops[h-1][1];var f=Bl(e.stops.map(function(I){return I[0]}),n),y=function(I,A,D,j){var q=j-D,Y=I-D;return q===0?0:A===1?Y/q:(Math.pow(A,Y)-1)/(Math.pow(A,q)-1)}(n,l,e.stops[f][0],e.stops[f+1][0]),x=e.stops[f][1],S=e.stops[f+1][1],E=Ka[t.type]||Qd;if(e.colorSpace&&e.colorSpace!=="rgb"){var C=lh[e.colorSpace];E=function(I,A){return C.reverse(C.interpolate(C.forward(I),C.forward(A),y))}}return typeof x.evaluate=="function"?{evaluate:function(){for(var I=[],A=arguments.length;A--;)I[A]=arguments[A];var D=x.evaluate.apply(void 0,I),j=S.evaluate.apply(void 0,I);if(D!==void 0&&j!==void 0)return E(D,j,y)}}:E(x,S,y)}function Ul(e,t,n){return t.type==="color"?n=Vt.parse(n):t.type==="formatted"?n=Xr.fromString(n.toString()):t.type==="resolvedImage"?n=Rn.fromString(n.toString()):rr(n)===t.type||t.type==="enum"&&t.values[n]||(n=void 0),Ya(n,e.default,t.default)}an.register(ga,{error:[{kind:"error"},[Ve],function(e,t){throw new $r(t[0].evaluate(e))}],typeof:[Ve,[Fe],function(e,t){return At(Er(t[0].evaluate(e)))}],"to-rgba":[Ut(ve,4),[Re],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Re,[ve,ve,ve],mh],rgba:[Re,[ve,ve,ve,ve],mh],has:{type:Le,overloads:[[[Ve],function(e,t){return yh(t[0].evaluate(e),e.properties())}],[[Ve,wt],function(e,t){var n=t[1];return yh(t[0].evaluate(e),n.evaluate(e))}]]},get:{type:Fe,overloads:[[[Ve],function(e,t){return fc(t[0].evaluate(e),e.properties())}],[[Ve,wt],function(e,t){var n=t[1];return fc(t[0].evaluate(e),n.evaluate(e))}]]},"feature-state":[Fe,[Ve],function(e,t){return fc(t[0].evaluate(e),e.featureState||{})}],properties:[wt,[],function(e){return e.properties()}],"geometry-type":[Ve,[],function(e){return e.geometryType()}],id:[Fe,[],function(e){return e.id()}],zoom:[ve,[],function(e){return e.globals.zoom}],"heatmap-density":[ve,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[ve,[],function(e){return e.globals.lineProgress||0}],accumulated:[Fe,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[ve,va(ve),function(e,t){for(var n=0,l=0,h=t;l<h.length;l+=1)n+=h[l].evaluate(e);return n}],"*":[ve,va(ve),function(e,t){for(var n=1,l=0,h=t;l<h.length;l+=1)n*=h[l].evaluate(e);return n}],"-":{type:ve,overloads:[[[ve,ve],function(e,t){var n=t[1];return t[0].evaluate(e)-n.evaluate(e)}],[[ve],function(e,t){return-t[0].evaluate(e)}]]},"/":[ve,[ve,ve],function(e,t){var n=t[1];return t[0].evaluate(e)/n.evaluate(e)}],"%":[ve,[ve,ve],function(e,t){var n=t[1];return t[0].evaluate(e)%n.evaluate(e)}],ln2:[ve,[],function(){return Math.LN2}],pi:[ve,[],function(){return Math.PI}],e:[ve,[],function(){return Math.E}],"^":[ve,[ve,ve],function(e,t){var n=t[1];return Math.pow(t[0].evaluate(e),n.evaluate(e))}],sqrt:[ve,[ve],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[ve,[ve],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[ve,[ve],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[ve,[ve],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[ve,[ve],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[ve,[ve],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[ve,[ve],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[ve,[ve],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[ve,[ve],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[ve,[ve],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[ve,va(ve),function(e,t){return Math.min.apply(Math,t.map(function(n){return n.evaluate(e)}))}],max:[ve,va(ve),function(e,t){return Math.max.apply(Math,t.map(function(n){return n.evaluate(e)}))}],abs:[ve,[ve],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[ve,[ve],function(e,t){var n=t[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[ve,[ve],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[ve,[ve],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Le,[Ve,Fe],function(e,t){var n=t[0],l=t[1];return e.properties()[n.value]===l.value}],"filter-id-==":[Le,[Fe],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[Le,[Ve],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[Le,[Ve,Fe],function(e,t){var n=t[0],l=t[1],h=e.properties()[n.value],f=l.value;return typeof h==typeof f&&h<f}],"filter-id-<":[Le,[Fe],function(e,t){var n=t[0],l=e.id(),h=n.value;return typeof l==typeof h&&l<h}],"filter->":[Le,[Ve,Fe],function(e,t){var n=t[0],l=t[1],h=e.properties()[n.value],f=l.value;return typeof h==typeof f&&h>f}],"filter-id->":[Le,[Fe],function(e,t){var n=t[0],l=e.id(),h=n.value;return typeof l==typeof h&&l>h}],"filter-<=":[Le,[Ve,Fe],function(e,t){var n=t[0],l=t[1],h=e.properties()[n.value],f=l.value;return typeof h==typeof f&&h<=f}],"filter-id-<=":[Le,[Fe],function(e,t){var n=t[0],l=e.id(),h=n.value;return typeof l==typeof h&&l<=h}],"filter->=":[Le,[Ve,Fe],function(e,t){var n=t[0],l=t[1],h=e.properties()[n.value],f=l.value;return typeof h==typeof f&&h>=f}],"filter-id->=":[Le,[Fe],function(e,t){var n=t[0],l=e.id(),h=n.value;return typeof l==typeof h&&l>=h}],"filter-has":[Le,[Fe],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Le,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[Le,[Ut(Ve)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Le,[Ut(Fe)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Le,[Ve,Ut(Fe)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[Le,[Ve,Ut(Fe)],function(e,t){var n=t[0],l=t[1];return function(h,f,y,x){for(;y<=x;){var S=y+x>>1;if(f[S]===h)return!0;f[S]>h?x=S-1:y=S+1}return!1}(e.properties()[n.value],l.value,0,l.value.length-1)}],all:{type:Le,overloads:[[[Le,Le],function(e,t){var n=t[1];return t[0].evaluate(e)&&n.evaluate(e)}],[va(Le),function(e,t){for(var n=0,l=t;n<l.length;n+=1)if(!l[n].evaluate(e))return!1;return!0}]]},any:{type:Le,overloads:[[[Le,Le],function(e,t){var n=t[1];return t[0].evaluate(e)||n.evaluate(e)}],[va(Le),function(e,t){for(var n=0,l=t;n<l.length;n+=1)if(l[n].evaluate(e))return!0;return!1}]]},"!":[Le,[Le],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Le,[Ve],function(e,t){var n=e.globals&&e.globals.isSupportedScript;return!n||n(t[0].evaluate(e))}],upcase:[Ve,[Ve],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[Ve,[Ve],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[Ve,va(Fe),function(e,t){return t.map(function(n){return js(n.evaluate(e))}).join("")}],"resolved-locale":[Ve,[Pt],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var Ja=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new fo,this._defaultValue=t?function(n){return n.type==="color"&&Nl(n.default)?new Vt(0,0,0,0):n.type==="color"?Vt.parse(n.default)||null:n.default===void 0?null:n.default}(t):null,this._enumValues=t&&t.type==="enum"?t.values:null};function Ws(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in ga}function Vl(e,t){var n=new Do(ga,[],t?function(h){var f={color:Re,string:Ve,number:ve,enum:Ve,boolean:Le,formatted:Yt,resolvedImage:Et};return h.type==="array"?Ut(f[h.value]||Fe,h.length):f[h.type]}(t):void 0),l=n.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?gh(new Ja(l,t)):_a(n.errors)}Ja.prototype.evaluateWithoutErrorHandling=function(e,t,n,l,h,f){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=l,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=f,this.expression.evaluate(this._evaluator)},Ja.prototype.evaluate=function(e,t,n,l,h,f){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=l,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=f||null;try{var y=this.expression.evaluate(this._evaluator);if(y==null||typeof y=="number"&&y!=y)return this._defaultValue;if(this._enumValues&&!(y in this._enumValues))throw new $r("Expected value to be one of "+Object.keys(this._enumValues).map(function(x){return JSON.stringify(x)}).join(", ")+", but found "+JSON.stringify(y)+" instead.");return y}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console<"u"&&console.warn(x.message)),this._defaultValue}};var Xs=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!Mo(t.expression)};Xs.prototype.evaluateWithoutErrorHandling=function(e,t,n,l,h,f){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,l,h,f)},Xs.prototype.evaluate=function(e,t,n,l,h,f){return this._styleExpression.evaluate(e,t,n,l,h,f)};var Qa=function(e,t,n,l){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!Mo(t.expression),this.interpolationType=l};function wh(e,t){if((e=Vl(e,t)).result==="error")return e;var n=e.value.expression,l=Ao(n);if(!l&&!xa(t))return _a([new Se("","data expressions not supported")]);var h=pa(n,["zoom"]);if(!h&&!vh(t))return _a([new Se("","zoom expressions not supported")]);var f=function y(x){var S=null;if(x instanceof Oo)S=y(x.result);else if(x instanceof Ro)for(var E=0,C=x.args;E<C.length&&!(S=y(C[E]));E+=1);else(x instanceof Wn||x instanceof sn)&&x.input instanceof an&&x.input.name==="zoom"&&(S=x);return S instanceof Se||x.eachChild(function(I){var A=y(I);A instanceof Se?S=A:!S&&A?S=new Se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):S&&A&&S!==A&&(S=new Se("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),S}(n);return f||h?f instanceof Se?_a([f]):f instanceof sn&&!Hs(t)?_a([new Se("",'"interpolate" expressions cannot be used with this property')]):gh(f?new Qa(l?"camera":"composite",e.value,f.labels,f instanceof sn?f.interpolation:void 0):new Xs(l?"constant":"source",e.value)):_a([new Se("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Qa.prototype.evaluateWithoutErrorHandling=function(e,t,n,l,h,f){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,l,h,f)},Qa.prototype.evaluate=function(e,t,n,l,h,f){return this._styleExpression.evaluate(e,t,n,l,h,f)},Qa.prototype.interpolationFactor=function(e,t,n){return this.interpolationType?sn.interpolationFactor(this.interpolationType,e,t,n):0};var es=function(e,t){this._parameters=e,this._specification=t,be(this,function n(l,h){var f,y,x,S=h.type==="color",E=l.stops&&typeof l.stops[0][0]=="object",C=E||!(E||l.property!==void 0),I=l.type||(Hs(h)?"exponential":"interval");if(S&&((l=be({},l)).stops&&(l.stops=l.stops.map(function(Be){return[Be[0],Vt.parse(Be[1])]})),l.default=Vt.parse(l.default?l.default:h.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!lh[l.colorSpace])throw new Error("Unknown color space: "+l.colorSpace);if(I==="exponential")f=xh;else if(I==="interval")f=em;else if(I==="categorical"){f=_h,y=Object.create(null);for(var A=0,D=l.stops;A<D.length;A+=1){var j=D[A];y[j[0]]=j[1]}x=typeof l.stops[0][0]}else{if(I!=="identity")throw new Error('Unknown function type "'+I+'"');f=Ul}if(E){for(var q={},Y=[],X=0;X<l.stops.length;X++){var ie=l.stops[X],ce=ie[0].zoom;q[ce]===void 0&&(q[ce]={zoom:ce,type:l.type,property:l.property,default:l.default,stops:[]},Y.push(ce)),q[ce].stops.push([ie[0].value,ie[1]])}for(var pe=[],fe=0,_e=Y;fe<_e.length;fe+=1){var Ce=_e[fe];pe.push([q[Ce].zoom,n(q[Ce],h)])}var Ae={name:"linear"};return{kind:"composite",interpolationType:Ae,interpolationFactor:sn.interpolationFactor.bind(void 0,Ae),zoomStops:pe.map(function(Be){return Be[0]}),evaluate:function(Be,tt){var Ne=Be.zoom;return xh({stops:pe,base:l.base},h,Ne).evaluate(Ne,tt)}}}if(C){var Ye=I==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:Ye,interpolationFactor:sn.interpolationFactor.bind(void 0,Ye),zoomStops:l.stops.map(function(Be){return Be[0]}),evaluate:function(Be){return f(l,h,Be.zoom,y,x)}}}return{kind:"source",evaluate:function(Be,tt){var Ne=tt&&tt.properties?tt.properties[l.property]:void 0;return Ne===void 0?Ya(l.default,h.default):f(l,h,Ne,y,x)}}}(this._parameters,this._specification))};function Ni(e){var t=e.key,n=e.value,l=e.valueSpec||{},h=e.objectElementValidators||{},f=e.style,y=e.styleSpec,x=[],S=rr(n);if(S!=="object")return[new W(t,n,"object expected, "+S+" found")];for(var E in n){var C=E.split(".")[0],I=l[C]||l["*"],A=void 0;if(h[C])A=h[C];else if(l[C])A=zt;else if(h["*"])A=h["*"];else{if(!l["*"]){x.push(new W(t,n[E],'unknown property "'+E+'"'));continue}A=zt}x=x.concat(A({key:(t&&t+".")+E,value:n[E],valueSpec:I,style:f,styleSpec:y,object:n,objectKey:E},n))}for(var D in l)h[D]||l[D].required&&l[D].default===void 0&&n[D]===void 0&&x.push(new W(t,n,'missing required property "'+D+'"'));return x}function bh(e){var t=e.value,n=e.valueSpec,l=e.style,h=e.styleSpec,f=e.key,y=e.arrayElementValidator||zt;if(rr(t)!=="array")return[new W(f,t,"array expected, "+rr(t)+" found")];if(n.length&&t.length!==n.length)return[new W(f,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new W(f,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var x={type:n.value,values:n.values};h.$version<7&&(x.function=n.function),rr(n.value)==="object"&&(x=n.value);for(var S=[],E=0;E<t.length;E++)S=S.concat(y({array:t,arrayIndex:E,value:t[E],valueSpec:x,style:l,styleSpec:h,key:f+"["+E+"]"}));return S}function Sh(e){var t=e.key,n=e.value,l=e.valueSpec,h=rr(n);return h==="number"&&n!=n&&(h="NaN"),h!=="number"?[new W(t,n,"number expected, "+h+" found")]:"minimum"in l&&n<l.minimum?[new W(t,n,n+" is less than the minimum value "+l.minimum)]:"maximum"in l&&n>l.maximum?[new W(t,n,n+" is greater than the maximum value "+l.maximum)]:[]}function Eh(e){var t,n,l,h=e.valueSpec,f=Te(e.value.type),y={},x=f!=="categorical"&&e.value.property===void 0,S=!x,E=rr(e.value.stops)==="array"&&rr(e.value.stops[0])==="array"&&rr(e.value.stops[0][0])==="object",C=Ni({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(D){if(f==="identity")return[new W(D.key,D.value,'identity function may not have a "stops" property')];var j=[],q=D.value;return j=j.concat(bh({key:D.key,value:q,valueSpec:D.valueSpec,style:D.style,styleSpec:D.styleSpec,arrayElementValidator:I})),rr(q)==="array"&&q.length===0&&j.push(new W(D.key,q,"array must have at least one stop")),j},default:function(D){return zt({key:D.key,value:D.value,valueSpec:h,style:D.style,styleSpec:D.styleSpec})}}});return f==="identity"&&x&&C.push(new W(e.key,e.value,'missing required property "property"')),f==="identity"||e.value.stops||C.push(new W(e.key,e.value,'missing required property "stops"')),f==="exponential"&&e.valueSpec.expression&&!Hs(e.valueSpec)&&C.push(new W(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(S&&!xa(e.valueSpec)?C.push(new W(e.key,e.value,"property functions not supported")):x&&!vh(e.valueSpec)&&C.push(new W(e.key,e.value,"zoom functions not supported"))),f!=="categorical"&&!E||e.value.property!==void 0||C.push(new W(e.key,e.value,'"property" property is required')),C;function I(D){var j=[],q=D.value,Y=D.key;if(rr(q)!=="array")return[new W(Y,q,"array expected, "+rr(q)+" found")];if(q.length!==2)return[new W(Y,q,"array length 2 expected, length "+q.length+" found")];if(E){if(rr(q[0])!=="object")return[new W(Y,q,"object expected, "+rr(q[0])+" found")];if(q[0].zoom===void 0)return[new W(Y,q,"object stop key must have zoom")];if(q[0].value===void 0)return[new W(Y,q,"object stop key must have value")];if(l&&l>Te(q[0].zoom))return[new W(Y,q[0].zoom,"stop zoom values must appear in ascending order")];Te(q[0].zoom)!==l&&(l=Te(q[0].zoom),n=void 0,y={}),j=j.concat(Ni({key:Y+"[0]",value:q[0],valueSpec:{zoom:{}},style:D.style,styleSpec:D.styleSpec,objectElementValidators:{zoom:Sh,value:A}}))}else j=j.concat(A({key:Y+"[0]",value:q[0],valueSpec:{},style:D.style,styleSpec:D.styleSpec},q));return Ws(ge(q[1]))?j.concat([new W(Y+"[1]",q[1],"expressions are not allowed in function stops.")]):j.concat(zt({key:Y+"[1]",value:q[1],valueSpec:h,style:D.style,styleSpec:D.styleSpec}))}function A(D,j){var q=rr(D.value),Y=Te(D.value),X=D.value!==null?D.value:j;if(t){if(q!==t)return[new W(D.key,X,q+" stop domain type must match previous stop domain type "+t)]}else t=q;if(q!=="number"&&q!=="string"&&q!=="boolean")return[new W(D.key,X,"stop domain value must be a number, string, or boolean")];if(q!=="number"&&f!=="categorical"){var ie="number expected, "+q+" found";return xa(h)&&f===void 0&&(ie+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new W(D.key,X,ie)]}return f!=="categorical"||q!=="number"||isFinite(Y)&&Math.floor(Y)===Y?f!=="categorical"&&q==="number"&&n!==void 0&&Y<n?[new W(D.key,X,"stop domain values must appear in ascending order")]:(n=Y,f==="categorical"&&Y in y?[new W(D.key,X,"stop domain values must be unique")]:(y[Y]=!0,[])):[new W(D.key,X,"integer expected, found "+Y)]}}function wa(e){var t=(e.expressionContext==="property"?wh:Vl)(ge(e.value),e.valueSpec);if(t.result==="error")return t.value.map(function(l){return new W(""+e.key+l.key,e.value,l.message)});var n=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!n.outputDefined())return[new W(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!Mo(n))return[new W(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!Mo(n))return[new W(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!pa(n,["zoom","feature-state"]))return[new W(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Ao(n))return[new W(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $s(e){var t=e.key,n=e.value,l=e.valueSpec,h=[];return Array.isArray(l.values)?l.values.indexOf(Te(n))===-1&&h.push(new W(t,n,"expected one of ["+l.values.join(", ")+"], "+JSON.stringify(n)+" found")):Object.keys(l.values).indexOf(Te(n))===-1&&h.push(new W(t,n,"expected one of ["+Object.keys(l.values).join(", ")+"], "+JSON.stringify(n)+" found")),h}function jl(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var l=n[t];if(!jl(l)&&typeof l!="boolean")return!1}return!0;default:return!0}}es.deserialize=function(e){return new es(e._parameters,e._specification)},es.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var dc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ql(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};jl(e)||(e=Gl(e));var t=Vl(e,dc);if(t.result==="error")throw new Error(t.value.map(function(n){return n.key+": "+n.message}).join(", "));return{filter:function(n,l,h){return t.value.evaluate(n,l,{},h)},needGeometry:function n(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(var h=1;h<l.length;h++)if(n(l[h]))return!0;return!1}(e)}}function tm(e,t){return e<t?-1:e>t?1:0}function Gl(e){if(!e)return!0;var t,n=e[0];return e.length<=1?n!=="any":n==="=="?mc(e[1],e[2],"=="):n==="!="?Zl(mc(e[1],e[2],"==")):n==="<"||n===">"||n==="<="||n===">="?mc(e[1],e[2],n):n==="any"?(t=e.slice(1),["any"].concat(t.map(Gl))):n==="all"?["all"].concat(e.slice(1).map(Gl)):n==="none"?["all"].concat(e.slice(1).map(Gl).map(Zl)):n==="in"?Th(e[1],e.slice(2)):n==="!in"?Zl(Th(e[1],e.slice(2))):n==="has"?Ch(e[1]):n==="!has"?Zl(Ch(e[1])):n!=="within"||e}function mc(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function Th(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(n){return typeof n!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(tm)]]:["filter-in-small",e,["literal",t]]}}function Ch(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Zl(e){return["!",e]}function yc(e){return jl(ge(e.value))?wa(be({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(n){var l=n.value,h=n.key;if(rr(l)!=="array")return[new W(h,l,"array expected, "+rr(l)+" found")];var f,y=n.styleSpec,x=[];if(l.length<1)return[new W(h,l,"filter array must have at least 1 element")];switch(x=x.concat($s({key:h+"[0]",value:l[0],valueSpec:y.filter_operator,style:n.style,styleSpec:n.styleSpec})),Te(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Te(l[1])==="$type"&&x.push(new W(h,l,'"$type" cannot be use with operator "'+l[0]+'"'));case"==":case"!=":l.length!==3&&x.push(new W(h,l,'filter array for operator "'+l[0]+'" must have 3 elements'));case"in":case"!in":l.length>=2&&(f=rr(l[1]))!=="string"&&x.push(new W(h+"[1]",l[1],"string expected, "+f+" found"));for(var S=2;S<l.length;S++)f=rr(l[S]),Te(l[1])==="$type"?x=x.concat($s({key:h+"["+S+"]",value:l[S],valueSpec:y.geometry_type,style:n.style,styleSpec:n.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&x.push(new W(h+"["+S+"]",l[S],"string, number, or boolean expected, "+f+" found"));break;case"any":case"all":case"none":for(var E=1;E<l.length;E++)x=x.concat(t({key:h+"["+E+"]",value:l[E],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":f=rr(l[1]),l.length!==2?x.push(new W(h,l,'filter array for "'+l[0]+'" operator must have 2 elements')):f!=="string"&&x.push(new W(h+"[1]",l[1],"string expected, "+f+" found"));break;case"within":f=rr(l[1]),l.length!==2?x.push(new W(h,l,'filter array for "'+l[0]+'" operator must have 2 elements')):f!=="object"&&x.push(new W(h+"[1]",l[1],"object expected, "+f+" found"))}return x}(e)}function gc(e,t){var n=e.key,l=e.style,h=e.styleSpec,f=e.value,y=e.objectKey,x=h[t+"_"+e.layerType];if(!x)return[];var S=y.match(/^(.*)-transition$/);if(t==="paint"&&S&&x[S[1]]&&x[S[1]].transition)return zt({key:n,value:f,valueSpec:h.transition,style:l,styleSpec:h});var E,C=e.valueSpec||x[y];if(!C)return[new W(n,f,'unknown property "'+y+'"')];if(rr(f)==="string"&&xa(C)&&!C.tokens&&(E=/^{([^}]+)}$/.exec(f)))return[new W(n,f,'"'+y+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(E[1])+" }`.")];var I=[];return e.layerType==="symbol"&&(y==="text-field"&&l&&!l.glyphs&&I.push(new W(n,f,'use of "text-field" requires a style "glyphs" property')),y==="text-font"&&Nl(ge(f))&&Te(f.type)==="identity"&&I.push(new W(n,f,'"text-font" does not support identity functions'))),I.concat(zt({key:e.key,value:f,valueSpec:C,style:l,styleSpec:h,expressionContext:"property",propertyType:t,propertyKey:y}))}function vc(e){return gc(e,"paint")}function Ks(e){return gc(e,"layout")}function Ih(e){var t=[],n=e.value,l=e.key,h=e.style,f=e.styleSpec;n.type||n.ref||t.push(new W(l,n,'either "type" or "ref" is required'));var y,x=Te(n.type),S=Te(n.ref);if(n.id)for(var E=Te(n.id),C=0;C<e.arrayIndex;C++){var I=h.layers[C];Te(I.id)===E&&t.push(new W(l,n.id,'duplicate layer id "'+n.id+'", previously used at line '+I.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(j){j in n&&t.push(new W(l,n[j],'"'+j+'" is prohibited for ref layers'))}),h.layers.forEach(function(j){Te(j.id)===S&&(y=j)}),y?y.ref?t.push(new W(l,n.ref,"ref cannot reference another ref layer")):x=Te(y.type):t.push(new W(l,n.ref,'ref layer "'+S+'" not found'));else if(x!=="background")if(n.source){var A=h.sources&&h.sources[n.source],D=A&&Te(A.type);A?D==="vector"&&x==="raster"?t.push(new W(l,n.source,'layer "'+n.id+'" requires a raster source')):D==="raster"&&x!=="raster"?t.push(new W(l,n.source,'layer "'+n.id+'" requires a vector source')):D!=="vector"||n["source-layer"]?D==="raster-dem"&&x!=="hillshade"?t.push(new W(l,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!n.paint||!n.paint["line-gradient"]||D==="geojson"&&A.lineMetrics||t.push(new W(l,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new W(l,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new W(l,n.source,'source "'+n.source+'" not found'))}else t.push(new W(l,n,'missing required property "source"'));return t=t.concat(Ni({key:l,value:n,valueSpec:f.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return zt({key:l+".type",value:n.type,valueSpec:f.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:yc,layout:function(j){return Ni({layer:n,key:j.key,value:j.value,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{"*":function(q){return Ks(be({layerType:x},q))}}})},paint:function(j){return Ni({layer:n,key:j.key,value:j.value,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{"*":function(q){return vc(be({layerType:x},q))}}})}}}))}function ba(e){var t=e.value,n=e.key,l=rr(t);return l!=="string"?[new W(n,t,"string expected, "+l+" found")]:[]}var sr={promoteId:function(e){var t=e.key,n=e.value;if(rr(n)==="string")return ba({key:t,value:n});var l=[];for(var h in n)l.push.apply(l,ba({key:t+"."+h,value:n[h]}));return l}};function Hl(e){var t=e.value,n=e.key,l=e.styleSpec,h=e.style;if(!t.type)return[new W(n,t,'"type" is required')];var f,y=Te(t.type);switch(y){case"vector":case"raster":case"raster-dem":return Ni({key:n,value:t,valueSpec:l["source_"+y.replace("-","_")],style:e.style,styleSpec:l,objectElementValidators:sr});case"geojson":if(f=Ni({key:n,value:t,valueSpec:l.source_geojson,style:h,styleSpec:l,objectElementValidators:sr}),t.cluster)for(var x in t.clusterProperties){var S=t.clusterProperties[x],E=S[0],C=typeof E=="string"?[E,["accumulated"],["get",x]]:E;f.push.apply(f,wa({key:n+"."+x+".map",value:S[1],expressionContext:"cluster-map"})),f.push.apply(f,wa({key:n+"."+x+".reduce",value:C,expressionContext:"cluster-reduce"}))}return f;case"video":return Ni({key:n,value:t,valueSpec:l.source_video,style:h,styleSpec:l});case"image":return Ni({key:n,value:t,valueSpec:l.source_image,style:h,styleSpec:l});case"canvas":return[new W(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $s({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,styleSpec:l})}}function Sa(e){var t=e.value,n=e.styleSpec,l=n.light,h=e.style,f=[],y=rr(t);if(t===void 0)return f;if(y!=="object")return f.concat([new W("light",t,"object expected, "+y+" found")]);for(var x in t){var S=x.match(/^(.*)-transition$/);f=f.concat(S&&l[S[1]]&&l[S[1]].transition?zt({key:x,value:t[x],valueSpec:n.transition,style:h,styleSpec:n}):l[x]?zt({key:x,value:t[x],valueSpec:l[x],style:h,styleSpec:n}):[new W(x,t[x],'unknown property "'+x+'"')])}return f}var Uo={"*":function(){return[]},array:bh,boolean:function(e){var t=e.value,n=e.key,l=rr(t);return l!=="boolean"?[new W(n,t,"boolean expected, "+l+" found")]:[]},number:Sh,color:function(e){var t=e.key,n=e.value,l=rr(n);return l!=="string"?[new W(t,n,"color expected, "+l+" found")]:kt(n)===null?[new W(t,n,'color expected, "'+n+'" found')]:[]},constants:ue,enum:$s,filter:yc,function:Eh,layer:Ih,object:Ni,source:Hl,light:Sa,string:ba,formatted:function(e){return ba(e).length===0?[]:wa(e)},resolvedImage:function(e){return ba(e).length===0?[]:wa(e)}};function zt(e){var t=e.value,n=e.valueSpec,l=e.styleSpec;return n.expression&&Nl(Te(t))?Eh(e):n.expression&&Ws(ge(t))?wa(e):n.type&&Uo[n.type]?Uo[n.type](e):Ni(be({},e,{valueSpec:n.type?l[n.type]:n}))}function nr(e){var t=e.value,n=e.key,l=ba(e);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new W(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new W(n,t,'"glyphs" url must include a "{range}" token'))),l}function ui(e,t){t===void 0&&(t=O);var n=[];return n=n.concat(zt({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:nr,"*":function(){return[]}}})),e.constants&&(n=n.concat(ue({key:"constants",value:e.constants,style:e,styleSpec:t}))),Ys(n)}function Ys(e){return[].concat(e).sort(function(t,n){return t.line-n.line})}function ts(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return Ys(e.apply(this,t))}}ui.source=ts(Hl),ui.light=ts(Sa),ui.layer=ts(Ih),ui.filter=ts(yc),ui.paintProperty=ts(vc),ui.layoutProperty=ts(Ks);var Js=ui,rm=Js.light,nm=Js.paintProperty,Qs=Js.layoutProperty;function el(e,t){var n=!1;if(t&&t.length)for(var l=0,h=t;l<h.length;l+=1)e.fire(new Q(new Error(h[l].message))),n=!0;return n}var mo=Rr;function Rr(e,t,n){var l=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var h=new Int32Array(this.arrayBuffer);e=h[0],this.d=(t=h[1])+2*(n=h[2]);for(var f=0;f<this.d*this.d;f++){var y=h[3+f],x=h[3+f+1];l.push(y===x?null:h.subarray(y,x))}var S=h[3+l.length+1];this.keys=h.subarray(h[3+l.length],S),this.bboxes=h.subarray(S),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var E=0;E<this.d*this.d;E++)l.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var C=n/t*e;this.min=-C,this.max=e+C}Rr.prototype.insert=function(e,t,n,l,h){this._forEachCell(t,n,l,h,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(l),this.bboxes.push(h)},Rr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Rr.prototype._insertCell=function(e,t,n,l,h,f){this.cells[h].push(f)},Rr.prototype.query=function(e,t,n,l,h){var f=this.min,y=this.max;if(e<=f&&t<=f&&y<=n&&y<=l&&!h)return Array.prototype.slice.call(this.keys);var x=[];return this._forEachCell(e,t,n,l,this._queryCell,x,{},h),x},Rr.prototype._queryCell=function(e,t,n,l,h,f,y,x){var S=this.cells[h];if(S!==null)for(var E=this.keys,C=this.bboxes,I=0;I<S.length;I++){var A=S[I];if(y[A]===void 0){var D=4*A;(x?x(C[D+0],C[D+1],C[D+2],C[D+3]):e<=C[D+2]&&t<=C[D+3]&&n>=C[D+0]&&l>=C[D+1])?(y[A]=!0,f.push(E[A])):y[A]=!1}}},Rr.prototype._forEachCell=function(e,t,n,l,h,f,y,x){for(var S=this._convertToCellCoord(e),E=this._convertToCellCoord(t),C=this._convertToCellCoord(n),I=this._convertToCellCoord(l),A=S;A<=C;A++)for(var D=E;D<=I;D++){var j=this.d*D+A;if((!x||x(this._convertFromCellCoord(A),this._convertFromCellCoord(D),this._convertFromCellCoord(A+1),this._convertFromCellCoord(D+1)))&&h.call(this,e,t,n,l,j,f,y,x))return}},Rr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Rr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Rr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,l=0;l<this.cells.length;l++)n+=this.cells[l].length;var h=new Int32Array(t+n+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var f=t,y=0;y<e.length;y++){var x=e[y];h[3+y]=f,h.set(x,f),f+=x.length}return h[3+e.length]=f,h.set(this.keys,f),h[3+e.length+1]=f+=this.keys.length,h.set(this.bboxes,f),f+=this.bboxes.length,h.buffer};var tl=te.ImageData,kh=te.ImageBitmap,Mr={};function Ze(e,t,n){n===void 0&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Mr[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(var Xn in Ze("Object",Object),mo.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},mo.deserialize=function(e){return new mo(e.buffer)},Ze("Grid",mo),Ze("Color",Vt),Ze("Error",Error),Ze("ResolvedImage",Rn),Ze("StylePropertyFunction",es),Ze("StyleExpression",Ja,{omit:["_evaluator"]}),Ze("ZoomDependentExpression",Qa),Ze("ZoomConstantExpression",Xs),Ze("CompoundExpression",an,{omit:["_evaluate"]}),ga)ga[Xn]._classRegistryKey||Ze("Expression_"+Xn,ga[Xn]);function Wl(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function rs(e){return kh&&e instanceof kh}function Ui(e,t){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Wl(e)||rs(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof tl)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var l=[],h=0,f=e;h<f.length;h+=1)l.push(Ui(f[h],t));return l}if(typeof e=="object"){var y=e.constructor,x=y._classRegistryKey;if(!x)throw new Error("can't serialize object of unregistered class");var S=y.serialize?y.serialize(e,t):{};if(!y.serialize){for(var E in e)if(e.hasOwnProperty(E)&&!(Mr[x].omit.indexOf(E)>=0)){var C=e[E];S[E]=Mr[x].shallow.indexOf(E)>=0?C:Ui(C,t)}e instanceof Error&&(S.message=e.message)}if(S.$name)throw new Error("$name property is reserved for worker serialization logic.");return x!=="Object"&&(S.$name=x),S}throw new Error("can't serialize object of type "+typeof e)}function $n(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Wl(e)||rs(e)||ArrayBuffer.isView(e)||e instanceof tl)return e;if(Array.isArray(e))return e.map($n);if(typeof e=="object"){var t=e.$name||"Object",n=Mr[t].klass;if(!n)throw new Error("can't deserialize unregistered class "+t);if(n.deserialize)return n.deserialize(e);for(var l=Object.create(n.prototype),h=0,f=Object.keys(e);h<f.length;h+=1){var y=f[h];if(y!=="$name"){var x=e[y];l[y]=Mr[t].shallow.indexOf(y)>=0?x:$n(x)}}return l}throw new Error("can't deserialize object of type "+typeof e)}var _c=function(){this.first=!0};_c.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))};var De={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function xc(e){for(var t=0,n=e;t<n.length;t+=1)if(Xl(n[t].charCodeAt(0)))return!0;return!1}function Xl(e){return!(e!==746&&e!==747&&(e<4352||!(De["Bopomofo Extended"](e)||De.Bopomofo(e)||De["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||De["CJK Compatibility Ideographs"](e)||De["CJK Compatibility"](e)||De["CJK Radicals Supplement"](e)||De["CJK Strokes"](e)||!(!De["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||De["CJK Unified Ideographs Extension A"](e)||De["CJK Unified Ideographs"](e)||De["Enclosed CJK Letters and Months"](e)||De["Hangul Compatibility Jamo"](e)||De["Hangul Jamo Extended-A"](e)||De["Hangul Jamo Extended-B"](e)||De["Hangul Jamo"](e)||De["Hangul Syllables"](e)||De.Hiragana(e)||De["Ideographic Description Characters"](e)||De.Kanbun(e)||De["Kangxi Radicals"](e)||De["Katakana Phonetic Extensions"](e)||De.Katakana(e)&&e!==12540||!(!De["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!De["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||De["Unified Canadian Aboriginal Syllabics"](e)||De["Unified Canadian Aboriginal Syllabics Extended"](e)||De["Vertical Forms"](e)||De["Yijing Hexagram Symbols"](e)||De["Yi Syllables"](e)||De["Yi Radicals"](e))))}function wc(e){return!(Xl(e)||function(t){return!!(De["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||De["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||De["Letterlike Symbols"](t)||De["Number Forms"](t)||De["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||De["Control Pictures"](t)&&t!==9251||De["Optical Character Recognition"](t)||De["Enclosed Alphanumerics"](t)||De["Geometric Shapes"](t)||De["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||De["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||De["CJK Symbols and Punctuation"](t)||De.Katakana(t)||De["Private Use Area"](t)||De["CJK Compatibility Forms"](t)||De["Small Form Variants"](t)||De["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(e))}function Ei(e){return e>=1424&&e<=2303||De["Arabic Presentation Forms-A"](e)||De["Arabic Presentation Forms-B"](e)}function Kn(e,t){return!(!t&&Ei(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||De.Khmer(e))}function $l(e){for(var t=0,n=e;t<n.length;t+=1)if(Ei(n[t].charCodeAt(0)))return!0;return!1}var Kl=null,Yn="unavailable",yo=null,Ph=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(Yn="error"),Kl&&Kl(e)};function rl(){bc.fire(new Z("pluginStateChange",{pluginStatus:Yn,pluginURL:yo}))}var bc=new ne,Sc=function(){return Yn},Vi=function(){if(Yn!=="deferred"||!yo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Yn="loading",rl(),yo&&Ns({url:yo},function(e){e?Ph(e):(Yn="loaded",rl())})},ci={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Yn==="loaded"||ci.applyArabicShaping!=null},isLoading:function(){return Yn==="loading"},setState:function(e){Yn=e.pluginStatus,yo=e.pluginURL},isParsed:function(){return ci.applyArabicShaping!=null&&ci.processBidirectionalText!=null&&ci.processStyledBidirectionalText!=null},getPluginURL:function(){return yo}},Tt=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _c,this.transition={})};Tt.prototype.isSupportedScript=function(e){return function(t,n){for(var l=0,h=t;l<h.length;l+=1)if(!Kn(h[l].charCodeAt(0),n))return!1;return!0}(e,ci.isLoaded())},Tt.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Tt.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}};var Qi=function(e,t){this.property=e,this.value=t,this.expression=function(n,l){if(Nl(n))return new es(n,l);if(Ws(n)){var h=wh(n,l);if(h.result==="error")throw new Error(h.value.map(function(y){return y.key+": "+y.message}).join(", "));return h.value}var f=n;return typeof n=="string"&&l.type==="color"&&(f=Vt.parse(n)),{kind:"constant",evaluate:function(){return f}}}(t===void 0?e.specification.default:t,e.specification)};Qi.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Qi.prototype.possiblyEvaluate=function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)};var Ti=function(e){this.property=e,this.value=new Qi(e,void 0)};Ti.prototype.transitioned=function(e,t){return new Ea(this.property,this.value,t,J({},e.transition,this.transition),e.now)},Ti.prototype.untransitioned=function(){return new Ea(this.property,this.value,null,{},0)};var ln=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};ln.prototype.getValue=function(e){return tr(this._values[e].value.value)},ln.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Ti(this._values[e].property)),this._values[e].value=new Qi(this._values[e].property,t===null?void 0:tr(t))},ln.prototype.getTransition=function(e){return tr(this._values[e].transition)},ln.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Ti(this._values[e].property)),this._values[e].transition=tr(t)||void 0},ln.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var l=n[t],h=this.getValue(l);h!==void 0&&(e[l]=h);var f=this.getTransition(l);f!==void 0&&(e[l+"-transition"]=f)}return e},ln.prototype.transitioned=function(e,t){for(var n=new Vo(this._properties),l=0,h=Object.keys(this._values);l<h.length;l+=1){var f=h[l];n._values[f]=this._values[f].transitioned(e,t._values[f])}return n},ln.prototype.untransitioned=function(){for(var e=new Vo(this._properties),t=0,n=Object.keys(this._values);t<n.length;t+=1){var l=n[t];e._values[l]=this._values[l].untransitioned()}return e};var Ea=function(e,t,n,l,h){this.property=e,this.value=t,this.begin=h+l.delay||0,this.end=this.begin+l.duration||0,e.specification.transition&&(l.delay||l.duration)&&(this.prior=n)};Ea.prototype.possiblyEvaluate=function(e,t,n){var l=e.now||0,h=this.value.possiblyEvaluate(e,t,n),f=this.prior;if(f){if(l>this.end)return this.prior=null,h;if(this.value.isDataDriven())return this.prior=null,h;if(l<this.begin)return f.possiblyEvaluate(e,t,n);var y=(l-this.begin)/(this.end-this.begin);return this.property.interpolate(f.possiblyEvaluate(e,t,n),h,function(x){if(x<=0)return 0;if(x>=1)return 1;var S=x*x,E=S*x;return 4*(x<.5?E:3*(x-S)+E-.75)}(y))}return h};var Vo=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Vo.prototype.possiblyEvaluate=function(e,t,n){for(var l=new nl(this._properties),h=0,f=Object.keys(this._values);h<f.length;h+=1){var y=f[h];l._values[y]=this._values[y].possiblyEvaluate(e,t,n)}return l},Vo.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var ji=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};ji.prototype.getValue=function(e){return tr(this._values[e].value)},ji.prototype.setValue=function(e,t){this._values[e]=new Qi(this._values[e].property,t===null?void 0:tr(t))},ji.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var l=n[t],h=this.getValue(l);h!==void 0&&(e[l]=h)}return e},ji.prototype.possiblyEvaluate=function(e,t,n){for(var l=new nl(this._properties),h=0,f=Object.keys(this._values);h<f.length;h+=1){var y=f[h];l._values[y]=this._values[y].possiblyEvaluate(e,t,n)}return l};var Sn=function(e,t,n){this.property=e,this.value=t,this.parameters=n};Sn.prototype.isConstant=function(){return this.value.kind==="constant"},Sn.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},Sn.prototype.evaluate=function(e,t,n,l){return this.property.evaluate(this.value,this.parameters,e,t,n,l)};var nl=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};nl.prototype.get=function(e){return this._values[e]};var Qe=function(e){this.specification=e};Qe.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},Qe.prototype.interpolate=function(e,t,n){var l=Ka[this.specification.type];return l?l(e,t,n):e};var Xe=function(e,t){this.specification=e,this.overrides=t};Xe.prototype.possiblyEvaluate=function(e,t,n,l){return new Sn(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(t,null,{},n,l)}:e.expression,t)},Xe.prototype.interpolate=function(e,t,n){if(e.value.kind!=="constant"||t.value.kind!=="constant")return e;if(e.value.value===void 0||t.value.value===void 0)return new Sn(this,{kind:"constant",value:void 0},e.parameters);var l=Ka[this.specification.type];return l?new Sn(this,{kind:"constant",value:l(e.value.value,t.value.value,n)},e.parameters):e},Xe.prototype.evaluate=function(e,t,n,l,h,f){return e.kind==="constant"?e.value:e.evaluate(t,n,l,h,f)};var Yl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(n,l,h,f){if(n.value===void 0)return new Sn(this,{kind:"constant",value:void 0},l);if(n.expression.kind==="constant"){var y=n.expression.evaluate(l,null,{},h,f),x=n.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,S=this._calculate(x,x,x,l);return new Sn(this,{kind:"constant",value:S},l)}if(n.expression.kind==="camera"){var E=this._calculate(n.expression.evaluate({zoom:l.zoom-1}),n.expression.evaluate({zoom:l.zoom}),n.expression.evaluate({zoom:l.zoom+1}),l);return new Sn(this,{kind:"constant",value:E},l)}return new Sn(this,n.expression,l)},t.prototype.evaluate=function(n,l,h,f,y,x){if(n.kind==="source"){var S=n.evaluate(l,h,f,y,x);return this._calculate(S,S,S,l)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(l.zoom)-1},h,f),n.evaluate({zoom:Math.floor(l.zoom)},h,f),n.evaluate({zoom:Math.floor(l.zoom)+1},h,f),l):n.value},t.prototype._calculate=function(n,l,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:h,to:l}},t.prototype.interpolate=function(n){return n},t}(Xe),En=function(e){this.specification=e};En.prototype.possiblyEvaluate=function(e,t,n,l){if(e.value!==void 0){if(e.expression.kind==="constant"){var h=e.expression.evaluate(t,null,{},n,l);return this._calculate(h,h,h,t)}return this._calculate(e.expression.evaluate(new Tt(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Tt(Math.floor(t.zoom),t)),e.expression.evaluate(new Tt(Math.floor(t.zoom+1),t)),t)}},En.prototype._calculate=function(e,t,n,l){return l.zoom>l.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},En.prototype.interpolate=function(e){return e};var qi=function(e){this.specification=e};qi.prototype.possiblyEvaluate=function(e,t,n,l){return!!e.expression.evaluate(t,null,{},n,l)},qi.prototype.interpolate=function(){return!1};var un=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var n=e[t];n.specification.overridable&&this.overridableProperties.push(t);var l=this.defaultPropertyValues[t]=new Qi(n,void 0),h=this.defaultTransitionablePropertyValues[t]=new Ti(n);this.defaultTransitioningPropertyValues[t]=h.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=l.possiblyEvaluate({})}};Ze("DataDrivenProperty",Xe),Ze("DataConstantProperty",Qe),Ze("CrossFadedDataDrivenProperty",Yl),Ze("CrossFadedProperty",En),Ze("ColorRampProperty",qi);var eo=function(e){function t(n,l){if(e.call(this),this.id=n.id,this.type=n.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},n.type!=="custom"&&(this.metadata=(n=n).metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),l.layout&&(this._unevaluatedLayout=new ji(l.layout)),l.paint)){for(var h in this._transitionablePaint=new ln(l.paint),n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(var f in n.layout)this.setLayoutProperty(f,n.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new nl(l.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)},t.prototype.setLayoutProperty=function(n,l,h){h===void 0&&(h={}),l!=null&&this._validate(Qs,"layers."+this.id+".layout."+n,n,l,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,l):this.visibility=l)},t.prototype.getPaintProperty=function(n){return rt(n,"-transition")?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)},t.prototype.setPaintProperty=function(n,l,h){if(h===void 0&&(h={}),l!=null&&this._validate(nm,"layers."+this.id+".paint."+n,n,l,h))return!1;if(rt(n,"-transition"))return this._transitionablePaint.setTransition(n.slice(0,-11),l||void 0),!1;var f=this._transitionablePaint._values[n],y=f.property.specification["property-type"]==="cross-faded-data-driven",x=f.value.isDataDriven(),S=f.value;this._transitionablePaint.setValue(n,l),this._handleSpecialPaintPropertyUpdate(n);var E=this._transitionablePaint._values[n].value;return E.isDataDriven()||x||y||this._handleOverridablePaintPropertyUpdate(n,S,E)},t.prototype._handleSpecialPaintPropertyUpdate=function(n){},t.prototype._handleOverridablePaintPropertyUpdate=function(n,l,h){return!1},t.prototype.isHidden=function(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"},t.prototype.updateTransitions=function(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(n,l){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,l)},t.prototype.serialize=function(){var n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),yt(n,function(l,h){return!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length)})},t.prototype._validate=function(n,l,h,f,y){return y===void 0&&(y={}),(!y||y.validate!==!1)&&el(this,n.call(Js,{key:l,layerType:this.type,objectKey:h,value:f,styleSpec:O,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var n in this.paint._values){var l=this.paint.get(n);if(l instanceof Sn&&xa(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1},t}(ne),Ec={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Jl=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Gt=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Kr(e,t){t===void 0&&(t=1);var n=0,l=0;return{members:e.map(function(h){var f=Ec[h.type].BYTES_PER_ELEMENT,y=n=zh(n,Math.max(t,f)),x=h.components||1;return l=Math.max(l,f),n+=f*x,{name:h.name,type:h.type,components:x,offset:y}}),size:zh(n,Math.max(l,t)),alignment:t}}function zh(e,t){return Math.ceil(e/t)*t}Gt.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Gt.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Gt.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Gt.prototype.clear=function(){this.length=0},Gt.prototype.resize=function(e){this.reserve(e),this.length=e},Gt.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Gt.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ta=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l){var h=this.length;return this.resize(h+1),this.emplace(h,n,l)},t.prototype.emplace=function(n,l,h){var f=2*n;return this.int16[f+0]=l,this.int16[f+1]=h,n},t}(Gt);Ta.prototype.bytesPerElement=4,Ze("StructArrayLayout2i4",Ta);var Tc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f){var y=this.length;return this.resize(y+1),this.emplace(y,n,l,h,f)},t.prototype.emplace=function(n,l,h,f,y){var x=4*n;return this.int16[x+0]=l,this.int16[x+1]=h,this.int16[x+2]=f,this.int16[x+3]=y,n},t}(Gt);Tc.prototype.bytesPerElement=8,Ze("StructArrayLayout4i8",Tc);var go=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,x){var S=this.length;return this.resize(S+1),this.emplace(S,n,l,h,f,y,x)},t.prototype.emplace=function(n,l,h,f,y,x,S){var E=6*n;return this.int16[E+0]=l,this.int16[E+1]=h,this.int16[E+2]=f,this.int16[E+3]=y,this.int16[E+4]=x,this.int16[E+5]=S,n},t}(Gt);go.prototype.bytesPerElement=12,Ze("StructArrayLayout2i4i12",go);var Jn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,x){var S=this.length;return this.resize(S+1),this.emplace(S,n,l,h,f,y,x)},t.prototype.emplace=function(n,l,h,f,y,x,S){var E=4*n,C=8*n;return this.int16[E+0]=l,this.int16[E+1]=h,this.uint8[C+4]=f,this.uint8[C+5]=y,this.uint8[C+6]=x,this.uint8[C+7]=S,n},t}(Gt);Jn.prototype.bytesPerElement=8,Ze("StructArrayLayout2i4ub8",Jn);var ns=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l){var h=this.length;return this.resize(h+1),this.emplace(h,n,l)},t.prototype.emplace=function(n,l,h){var f=2*n;return this.float32[f+0]=l,this.float32[f+1]=h,n},t}(Gt);ns.prototype.bytesPerElement=8,Ze("StructArrayLayout2f8",ns);var to=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,x,S,E,C,I){var A=this.length;return this.resize(A+1),this.emplace(A,n,l,h,f,y,x,S,E,C,I)},t.prototype.emplace=function(n,l,h,f,y,x,S,E,C,I,A){var D=10*n;return this.uint16[D+0]=l,this.uint16[D+1]=h,this.uint16[D+2]=f,this.uint16[D+3]=y,this.uint16[D+4]=x,this.uint16[D+5]=S,this.uint16[D+6]=E,this.uint16[D+7]=C,this.uint16[D+8]=I,this.uint16[D+9]=A,n},t}(Gt);to.prototype.bytesPerElement=20,Ze("StructArrayLayout10ui20",to);var Ql=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,x,S,E,C,I,A,D){var j=this.length;return this.resize(j+1),this.emplace(j,n,l,h,f,y,x,S,E,C,I,A,D)},t.prototype.emplace=function(n,l,h,f,y,x,S,E,C,I,A,D,j){var q=12*n;return this.int16[q+0]=l,this.int16[q+1]=h,this.int16[q+2]=f,this.int16[q+3]=y,this.uint16[q+4]=x,this.uint16[q+5]=S,this.uint16[q+6]=E,this.uint16[q+7]=C,this.int16[q+8]=I,this.int16[q+9]=A,this.int16[q+10]=D,this.int16[q+11]=j,n},t}(Gt);Ql.prototype.bytesPerElement=24,Ze("StructArrayLayout4i4ui4i24",Ql);var is=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h){var f=this.length;return this.resize(f+1),this.emplace(f,n,l,h)},t.prototype.emplace=function(n,l,h,f){var y=3*n;return this.float32[y+0]=l,this.float32[y+1]=h,this.float32[y+2]=f,n},t}(Gt);is.prototype.bytesPerElement=12,Ze("StructArrayLayout3f12",is);var il=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var l=this.length;return this.resize(l+1),this.emplace(l,n)},t.prototype.emplace=function(n,l){return this.uint32[1*n+0]=l,n},t}(Gt);il.prototype.bytesPerElement=4,Ze("StructArrayLayout1ul4",il);var Cc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,x,S,E,C){var I=this.length;return this.resize(I+1),this.emplace(I,n,l,h,f,y,x,S,E,C)},t.prototype.emplace=function(n,l,h,f,y,x,S,E,C,I){var A=10*n,D=5*n;return this.int16[A+0]=l,this.int16[A+1]=h,this.int16[A+2]=f,this.int16[A+3]=y,this.int16[A+4]=x,this.int16[A+5]=S,this.uint32[D+3]=E,this.uint16[A+8]=C,this.uint16[A+9]=I,n},t}(Gt);Cc.prototype.bytesPerElement=20,Ze("StructArrayLayout6i1ul2ui20",Cc);var os=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,x){var S=this.length;return this.resize(S+1),this.emplace(S,n,l,h,f,y,x)},t.prototype.emplace=function(n,l,h,f,y,x,S){var E=6*n;return this.int16[E+0]=l,this.int16[E+1]=h,this.int16[E+2]=f,this.int16[E+3]=y,this.int16[E+4]=x,this.int16[E+5]=S,n},t}(Gt);os.prototype.bytesPerElement=12,Ze("StructArrayLayout2i2i2i12",os);var Ca=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y){var x=this.length;return this.resize(x+1),this.emplace(x,n,l,h,f,y)},t.prototype.emplace=function(n,l,h,f,y,x){var S=4*n,E=8*n;return this.float32[S+0]=l,this.float32[S+1]=h,this.float32[S+2]=f,this.int16[E+6]=y,this.int16[E+7]=x,n},t}(Gt);Ca.prototype.bytesPerElement=16,Ze("StructArrayLayout2f1f2i16",Ca);var Ic=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f){var y=this.length;return this.resize(y+1),this.emplace(y,n,l,h,f)},t.prototype.emplace=function(n,l,h,f,y){var x=12*n,S=3*n;return this.uint8[x+0]=l,this.uint8[x+1]=h,this.float32[S+1]=f,this.float32[S+2]=y,n},t}(Gt);Ic.prototype.bytesPerElement=12,Ze("StructArrayLayout2ub2f12",Ic);var jo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h){var f=this.length;return this.resize(f+1),this.emplace(f,n,l,h)},t.prototype.emplace=function(n,l,h,f){var y=3*n;return this.uint16[y+0]=l,this.uint16[y+1]=h,this.uint16[y+2]=f,n},t}(Gt);jo.prototype.bytesPerElement=6,Ze("StructArrayLayout3ui6",jo);var qo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,x,S,E,C,I,A,D,j,q,Y,X,ie){var ce=this.length;return this.resize(ce+1),this.emplace(ce,n,l,h,f,y,x,S,E,C,I,A,D,j,q,Y,X,ie)},t.prototype.emplace=function(n,l,h,f,y,x,S,E,C,I,A,D,j,q,Y,X,ie,ce){var pe=24*n,fe=12*n,_e=48*n;return this.int16[pe+0]=l,this.int16[pe+1]=h,this.uint16[pe+2]=f,this.uint16[pe+3]=y,this.uint32[fe+2]=x,this.uint32[fe+3]=S,this.uint32[fe+4]=E,this.uint16[pe+10]=C,this.uint16[pe+11]=I,this.uint16[pe+12]=A,this.float32[fe+7]=D,this.float32[fe+8]=j,this.uint8[_e+36]=q,this.uint8[_e+37]=Y,this.uint8[_e+38]=X,this.uint32[fe+10]=ie,this.int16[pe+22]=ce,n},t}(Gt);qo.prototype.bytesPerElement=48,Ze("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",qo);var eu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f,y,x,S,E,C,I,A,D,j,q,Y,X,ie,ce,pe,fe,_e,Ce,Ae,Ye,Be,tt,Ne,xt){var ut=this.length;return this.resize(ut+1),this.emplace(ut,n,l,h,f,y,x,S,E,C,I,A,D,j,q,Y,X,ie,ce,pe,fe,_e,Ce,Ae,Ye,Be,tt,Ne,xt)},t.prototype.emplace=function(n,l,h,f,y,x,S,E,C,I,A,D,j,q,Y,X,ie,ce,pe,fe,_e,Ce,Ae,Ye,Be,tt,Ne,xt,ut){var $e=34*n,St=17*n;return this.int16[$e+0]=l,this.int16[$e+1]=h,this.int16[$e+2]=f,this.int16[$e+3]=y,this.int16[$e+4]=x,this.int16[$e+5]=S,this.int16[$e+6]=E,this.int16[$e+7]=C,this.uint16[$e+8]=I,this.uint16[$e+9]=A,this.uint16[$e+10]=D,this.uint16[$e+11]=j,this.uint16[$e+12]=q,this.uint16[$e+13]=Y,this.uint16[$e+14]=X,this.uint16[$e+15]=ie,this.uint16[$e+16]=ce,this.uint16[$e+17]=pe,this.uint16[$e+18]=fe,this.uint16[$e+19]=_e,this.uint16[$e+20]=Ce,this.uint16[$e+21]=Ae,this.uint16[$e+22]=Ye,this.uint32[St+12]=Be,this.float32[St+13]=tt,this.float32[St+14]=Ne,this.float32[St+15]=xt,this.float32[St+16]=ut,n},t}(Gt);eu.prototype.bytesPerElement=68,Ze("StructArrayLayout8i15ui1ul4f68",eu);var Go=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var l=this.length;return this.resize(l+1),this.emplace(l,n)},t.prototype.emplace=function(n,l){return this.float32[1*n+0]=l,n},t}(Gt);Go.prototype.bytesPerElement=4,Ze("StructArrayLayout1f4",Go);var Ci=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h){var f=this.length;return this.resize(f+1),this.emplace(f,n,l,h)},t.prototype.emplace=function(n,l,h,f){var y=3*n;return this.int16[y+0]=l,this.int16[y+1]=h,this.int16[y+2]=f,n},t}(Gt);Ci.prototype.bytesPerElement=6,Ze("StructArrayLayout3i6",Ci);var kc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h){var f=this.length;return this.resize(f+1),this.emplace(f,n,l,h)},t.prototype.emplace=function(n,l,h,f){var y=4*n;return this.uint32[2*n+0]=l,this.uint16[y+2]=h,this.uint16[y+3]=f,n},t}(Gt);kc.prototype.bytesPerElement=8,Ze("StructArrayLayout1ul2ui8",kc);var ol=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l){var h=this.length;return this.resize(h+1),this.emplace(h,n,l)},t.prototype.emplace=function(n,l,h){var f=2*n;return this.uint16[f+0]=l,this.uint16[f+1]=h,n},t}(Gt);ol.prototype.bytesPerElement=4,Ze("StructArrayLayout2ui4",ol);var Pc=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var l=this.length;return this.resize(l+1),this.emplace(l,n)},t.prototype.emplace=function(n,l){return this.uint16[1*n+0]=l,n},t}(Gt);Pc.prototype.bytesPerElement=2,Ze("StructArrayLayout1ui2",Pc);var tu=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,l,h,f){var y=this.length;return this.resize(y+1),this.emplace(y,n,l,h,f)},t.prototype.emplace=function(n,l,h,f,y){var x=4*n;return this.float32[x+0]=l,this.float32[x+1]=h,this.float32[x+2]=f,this.float32[x+3]=y,n},t}(Gt);tu.prototype.bytesPerElement=16,Ze("StructArrayLayout4f16",tu);var o=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new oe(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(Jl);o.prototype.size=20;var s=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new o(this,n)},t}(Cc);Ze("CollisionBoxArray",s);var a=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(l){this._structArray.uint8[this._pos1+37]=l},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(l){this._structArray.uint8[this._pos1+38]=l},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(l){this._structArray.uint32[this._pos4+10]=l},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,n),t}(Jl);a.prototype.size=48;var u=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new a(this,n)},t}(qo);Ze("PlacedSymbolArray",u);var d=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(l){this._structArray.uint32[this._pos4+12]=l},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,n),t}(Jl);d.prototype.size=68;var g=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new d(this,n)},t}(eu);Ze("SymbolInstanceArray",g);var v=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(n){return this.float32[1*n+0]},t}(Go);Ze("GlyphOffsetArray",v);var b=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(n){return this.int16[3*n+0]},t.prototype.gety=function(n){return this.int16[3*n+1]},t.prototype.gettileUnitDistanceFromAnchor=function(n){return this.int16[3*n+2]},t}(Ci);Ze("SymbolLineVertexArray",b);var T=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,n),t}(Jl);T.prototype.size=8;var P=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new T(this,n)},t}(kc);Ze("FeatureIndexArray",P);var R=Kr([{name:"a_pos",components:2,type:"Int16"}],4).members,B=function(e){e===void 0&&(e=[]),this.segments=e};function N(e,t){return 256*(e=at(Math.floor(e),0,255))+at(Math.floor(t),0,255)}B.prototype.prepareSegment=function(e,t,n,l){var h=this.segments[this.segments.length-1];return e>B.MAX_VERTEX_ARRAY_LENGTH&&Nt("Max vertices per segment is "+B.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!h||h.vertexLength+e>B.MAX_VERTEX_ARRAY_LENGTH||h.sortKey!==l)&&(h={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},l!==void 0&&(h.sortKey=l),this.segments.push(h)),h},B.prototype.get=function(){return this.segments},B.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var n=t[e];for(var l in n.vaos)n.vaos[l].destroy()}},B.simpleSegment=function(e,t,n,l){return new B([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:l,vaos:{},sortKey:0}])},B.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ze("SegmentVector",B);var H=Kr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),G=F(function(e){e.exports=function(t,n){var l,h,f,y,x,S,E,C;for(h=t.length-(l=3&t.length),f=n,x=3432918353,S=461845907,C=0;C<h;)E=255&t.charCodeAt(C)|(255&t.charCodeAt(++C))<<8|(255&t.charCodeAt(++C))<<16|(255&t.charCodeAt(++C))<<24,++C,f=27492+(65535&(y=5*(65535&(f=(f^=E=(65535&(E=(E=(65535&E)*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*S+(((E>>>16)*S&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(E=0,l){case 3:E^=(255&t.charCodeAt(C+2))<<16;case 2:E^=(255&t.charCodeAt(C+1))<<8;case 1:f^=E=(65535&(E=(E=(65535&(E^=255&t.charCodeAt(C)))*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*S+(((E>>>16)*S&65535)<<16)&4294967295}return f^=t.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0}}),K=F(function(e){e.exports=function(t,n){for(var l,h=t.length,f=n^h,y=0;h>=4;)l=1540483477*(65535&(l=255&t.charCodeAt(y)|(255&t.charCodeAt(++y))<<8|(255&t.charCodeAt(++y))<<16|(255&t.charCodeAt(++y))<<24))+((1540483477*(l>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:f^=(255&t.charCodeAt(y+2))<<16;case 2:f^=(255&t.charCodeAt(y+1))<<8;case 1:f=1540483477*(65535&(f^=255&t.charCodeAt(y)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0}}),V=G,$=K;V.murmur3=G,V.murmur2=$;var re=function(){this.ids=[],this.positions=[],this.indexed=!1};re.prototype.add=function(e,t,n,l){this.ids.push(de(e)),this.positions.push(t,n,l)},re.prototype.getPositions=function(e){for(var t=de(e),n=0,l=this.ids.length-1;n<l;){var h=n+l>>1;this.ids[h]>=t?l=h:n=h+1}for(var f=[];this.ids[n]===t;)f.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return f},re.serialize=function(e,t){var n=new Float64Array(e.ids),l=new Uint32Array(e.positions);return function h(f,y,x,S){for(;x<S;){for(var E=f[x+S>>1],C=x-1,I=S+1;;){do C++;while(f[C]<E);do I--;while(f[I]>E);if(C>=I)break;he(f,C,I),he(y,3*C,3*I),he(y,3*C+1,3*I+1),he(y,3*C+2,3*I+2)}I-x<S-I?(h(f,y,x,I),x=I+1):(h(f,y,I+1,S),S=I)}}(n,l,0,n.length-1),t&&t.push(n.buffer,l.buffer),{ids:n,positions:l}},re.deserialize=function(e){var t=new re;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var se=Math.pow(2,53)-1;function de(e){var t=+e;return!isNaN(t)&&t<=se?t:V(String(e))}function he(e,t,n){var l=e[t];e[t]=e[n],e[n]=l}Ze("FeaturePositionMap",re);var ye=function(e,t){this.gl=e.gl,this.location=t},we=function(e){function t(n,l){e.call(this,n,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))},t}(ye),ze=function(e){function t(n,l){e.call(this,n,l),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))},t}(ye),Ie=function(e){function t(n,l){e.call(this,n,l),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1]))},t}(ye),je=function(e){function t(n,l){e.call(this,n,l),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2]))},t}(ye),et=function(e){function t(n,l){e.call(this,n,l),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))},t}(ye),ot=function(e){function t(n,l){e.call(this,n,l),this.current=Vt.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))},t}(ye),it=new Float32Array(16),Dt=function(e){function t(n,l){e.call(this,n,l),this.current=it}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(var l=1;l<16;l++)if(n[l]!==this.current[l]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}},t}(ye);function qe(e){return[N(255*e.r,255*e.g),N(255*e.b,255*e.a)]}var dt=function(e,t,n){this.value=e,this.uniformNames=t.map(function(l){return"u_"+l}),this.type=n};dt.prototype.setUniform=function(e,t,n){e.set(n.constantOr(this.value))},dt.prototype.getBinding=function(e,t,n){return this.type==="color"?new ot(e,t):new ze(e,t)};var _t=function(e,t){this.uniformNames=t.map(function(n){return"u_"+n}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};_t.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},_t.prototype.setUniform=function(e,t,n,l){var h=l==="u_pattern_to"?this.patternTo:l==="u_pattern_from"?this.patternFrom:l==="u_pixel_ratio_to"?this.pixelRatioTo:l==="u_pixel_ratio_from"?this.pixelRatioFrom:null;h&&e.set(h)},_t.prototype.getBinding=function(e,t,n){return n.substr(0,9)==="u_pattern"?new et(e,t):new ze(e,t)};var ht=function(e,t,n,l){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map(function(h){return{name:"a_"+h,type:"Float32",components:n==="color"?2:1,offset:0}}),this.paintVertexArray=new l};ht.prototype.populatePaintArray=function(e,t,n,l,h){var f=this.paintVertexArray.length,y=this.expression.evaluate(new Tt(0),t,{},l,[],h);this.paintVertexArray.resize(e),this._setPaintValue(f,e,y)},ht.prototype.updatePaintArray=function(e,t,n,l){var h=this.expression.evaluate({zoom:0},n,l);this._setPaintValue(e,t,h)},ht.prototype._setPaintValue=function(e,t,n){if(this.type==="color")for(var l=qe(n),h=e;h<t;h++)this.paintVertexArray.emplace(h,l[0],l[1]);else{for(var f=e;f<t;f++)this.paintVertexArray.emplace(f,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},ht.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ht.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var pt=function(e,t,n,l,h,f){this.expression=e,this.uniformNames=t.map(function(y){return"u_"+y+"_t"}),this.type=n,this.useIntegerZoom=l,this.zoom=h,this.maxValue=0,this.paintVertexAttributes=t.map(function(y){return{name:"a_"+y,type:"Float32",components:n==="color"?4:2,offset:0}}),this.paintVertexArray=new f};pt.prototype.populatePaintArray=function(e,t,n,l,h){var f=this.expression.evaluate(new Tt(this.zoom),t,{},l,[],h),y=this.expression.evaluate(new Tt(this.zoom+1),t,{},l,[],h),x=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(x,e,f,y)},pt.prototype.updatePaintArray=function(e,t,n,l){var h=this.expression.evaluate({zoom:this.zoom},n,l),f=this.expression.evaluate({zoom:this.zoom+1},n,l);this._setPaintValue(e,t,h,f)},pt.prototype._setPaintValue=function(e,t,n,l){if(this.type==="color")for(var h=qe(n),f=qe(l),y=e;y<t;y++)this.paintVertexArray.emplace(y,h[0],h[1],f[0],f[1]);else{for(var x=e;x<t;x++)this.paintVertexArray.emplace(x,n,l);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(l))}},pt.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},pt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},pt.prototype.setUniform=function(e,t){var n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,l=at(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(l)},pt.prototype.getBinding=function(e,t,n){return new ze(e,t)};var vt=function(e,t,n,l,h,f){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=l,this.layerId=f,this.zoomInPaintVertexArray=new h,this.zoomOutPaintVertexArray=new h};vt.prototype.populatePaintArray=function(e,t,n){var l=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(l,e,t.patterns&&t.patterns[this.layerId],n)},vt.prototype.updatePaintArray=function(e,t,n,l,h){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],h)},vt.prototype._setPaintValues=function(e,t,n,l){if(l&&n){var h=l[n.min],f=l[n.mid],y=l[n.max];if(h&&f&&y)for(var x=e;x<t;x++)this.zoomInPaintVertexArray.emplace(x,f.tl[0],f.tl[1],f.br[0],f.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],f.pixelRatio,h.pixelRatio),this.zoomOutPaintVertexArray.emplace(x,f.tl[0],f.tl[1],f.br[0],f.br[1],y.tl[0],y.tl[1],y.br[0],y.br[1],f.pixelRatio,y.pixelRatio)}},vt.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,H.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,H.members,this.expression.isStateDependent))},vt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ct=function(e,t,n){this.binders={},this._buffers=[];var l=[];for(var h in e.paint._values)if(n(h)){var f=e.paint.get(h);if(f instanceof Sn&&xa(f.property.specification)){var y=jr(h,e.type),x=f.value,S=f.property.specification.type,E=f.property.useIntegerZoom,C=f.property.specification["property-type"],I=C==="cross-faded"||C==="cross-faded-data-driven";if(x.kind==="constant")this.binders[h]=I?new _t(x.value,y):new dt(x.value,y,S),l.push("/u_"+h);else if(x.kind==="source"||I){var A=vr(h,S,"source");this.binders[h]=I?new vt(x,S,E,t,A,e.id):new ht(x,y,S,A),l.push("/a_"+h)}else{var D=vr(h,S,"composite");this.binders[h]=new pt(x,y,S,E,t,D),l.push("/z_"+h)}}}this.cacheKey=l.sort().join("")};ct.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof ht||t instanceof pt?t.maxValue:0},ct.prototype.populatePaintArrays=function(e,t,n,l,h){for(var f in this.binders){var y=this.binders[f];(y instanceof ht||y instanceof pt||y instanceof vt)&&y.populatePaintArray(e,t,n,l,h)}},ct.prototype.setConstantPatternPositions=function(e,t){for(var n in this.binders){var l=this.binders[n];l instanceof _t&&l.setConstantPatternPositions(e,t)}},ct.prototype.updatePaintArrays=function(e,t,n,l,h){var f=!1;for(var y in e)for(var x=0,S=t.getPositions(y);x<S.length;x+=1){var E=S[x],C=n.feature(E.index);for(var I in this.binders){var A=this.binders[I];if((A instanceof ht||A instanceof pt||A instanceof vt)&&A.expression.isStateDependent===!0){var D=l.paint.get(I);A.expression=D.value,A.updatePaintArray(E.start,E.end,C,e[y],h),f=!0}}}return f},ct.prototype.defines=function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof dt||n instanceof _t)&&e.push.apply(e,n.uniformNames.map(function(l){return"#define HAS_UNIFORM_"+l}))}return e},ct.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof ht||n instanceof pt)for(var l=0;l<n.paintVertexAttributes.length;l++)e.push(n.paintVertexAttributes[l].name);else if(n instanceof vt)for(var h=0;h<H.members.length;h++)e.push(H.members[h].name)}return e},ct.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof dt||n instanceof _t||n instanceof pt)for(var l=0,h=n.uniformNames;l<h.length;l+=1)e.push(h[l])}return e},ct.prototype.getPaintVertexBuffers=function(){return this._buffers},ct.prototype.getUniforms=function(e,t){var n=[];for(var l in this.binders){var h=this.binders[l];if(h instanceof dt||h instanceof _t||h instanceof pt)for(var f=0,y=h.uniformNames;f<y.length;f+=1){var x=y[f];if(t[x]){var S=h.getBinding(e,t[x],x);n.push({name:x,property:l,binding:S})}}}return n},ct.prototype.setUniforms=function(e,t,n,l){for(var h=0,f=t;h<f.length;h+=1){var y=f[h],x=y.name,S=y.property;this.binders[S].setUniform(y.binding,l,n.get(S),x)}},ct.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var n=this.binders[t];if(e&&n instanceof vt){var l=e.fromScale===2?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;l&&this._buffers.push(l)}else(n instanceof ht||n instanceof pt)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},ct.prototype.upload=function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof ht||n instanceof pt||n instanceof vt)&&n.upload(e)}this.updatePaintBuffers()},ct.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof ht||t instanceof pt||t instanceof vt)&&t.destroy()}};var lt=function(e,t,n){n===void 0&&(n=function(){return!0}),this.programConfigurations={};for(var l=0,h=e;l<h.length;l+=1){var f=h[l];this.programConfigurations[f.id]=new ct(f,t,n)}this.needsUpload=!1,this._featureMap=new re,this._bufferOffset=0};function jr(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function vr(e,t,n){var l={color:{source:ns,composite:tu},number:{source:Go,composite:ns}},h=function(f){return{"line-pattern":{source:to,composite:to},"fill-pattern":{source:to,composite:to},"fill-extrusion-pattern":{source:to,composite:to}}[f]}(e);return h&&h[n]||l[t][n]}lt.prototype.populatePaintArrays=function(e,t,n,l,h,f){for(var y in this.programConfigurations)this.programConfigurations[y].populatePaintArrays(e,t,l,h,f);t.id!==void 0&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},lt.prototype.updatePaintArrays=function(e,t,n,l){for(var h=0,f=n;h<f.length;h+=1){var y=f[h];this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(e,this._featureMap,t,y,l)||this.needsUpload}},lt.prototype.get=function(e){return this.programConfigurations[e]},lt.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},lt.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},Ze("ConstantBinder",dt),Ze("CrossFadedConstantBinder",_t),Ze("SourceExpressionBinder",ht),Ze("CrossFadedCompositeBinder",vt),Ze("CompositeExpressionBinder",pt),Ze("ProgramConfiguration",ct,{omit:["_buffers"]}),Ze("ProgramConfigurationSet",lt);var hn=Math.pow(2,14)-1,Yr=-hn-1;function fr(e){for(var t=8192/e.extent,n=e.loadGeometry(),l=0;l<n.length;l++)for(var h=n[l],f=0;f<h.length;f++){var y=h[f],x=Math.round(y.x*t),S=Math.round(y.y*t);y.x=at(x,Yr,hn),y.y=at(S,Yr,hn),(x<y.x||x>y.x+1||S<y.y||S>y.y+1)&&Nt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Tr(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?fr(e):[]}}function Qn(e,t,n,l,h){e.emplaceBack(2*t+(l+1)/2,2*n+(h+1)/2)}var Tn=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ta,this.indexArray=new jo,this.segments=new B,this.programConfigurations=new lt(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Zo(e,t){for(var n=0;n<e.length;n++)if(ro(t,e[n]))return!0;for(var l=0;l<t.length;l++)if(ro(e,t[l]))return!0;return!!al(e,t)}function On(e,t,n){return!!ro(e,t)||!!Ho(t,e,n)}function Gi(e,t){if(e.length===1)return sl(t,e[0]);for(var n=0;n<t.length;n++)for(var l=t[n],h=0;h<l.length;h++)if(ro(e,l[h]))return!0;for(var f=0;f<e.length;f++)if(sl(t,e[f]))return!0;for(var y=0;y<t.length;y++)if(al(e,t[y]))return!0;return!1}function Ii(e,t,n){if(e.length>1){if(al(e,t))return!0;for(var l=0;l<t.length;l++)if(Ho(t[l],e,n))return!0}for(var h=0;h<e.length;h++)if(Ho(e[h],t,n))return!0;return!1}function al(e,t){if(e.length===0||t.length===0)return!1;for(var n=0;n<e.length-1;n++)for(var l=e[n],h=e[n+1],f=0;f<t.length-1;f++)if(as(l,h,t[f],t[f+1]))return!0;return!1}function as(e,t,n,l){return Ht(e,n,l)!==Ht(t,n,l)&&Ht(e,t,n)!==Ht(e,t,l)}function Ho(e,t,n){var l=n*n;if(t.length===1)return e.distSqr(t[0])<l;for(var h=1;h<t.length;h++)if(ss(e,t[h-1],t[h])<l)return!0;return!1}function ss(e,t,n){var l=t.distSqr(n);if(l===0)return e.distSqr(t);var h=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/l;return e.distSqr(h<0?t:h>1?n:n.sub(t)._mult(h)._add(t))}function sl(e,t){for(var n,l,h,f=!1,y=0;y<e.length;y++)for(var x=0,S=(n=e[y]).length-1;x<n.length;S=x++)(l=n[x]).y>t.y!=(h=n[S]).y>t.y&&t.x<(h.x-l.x)*(t.y-l.y)/(h.y-l.y)+l.x&&(f=!f);return f}function ro(e,t){for(var n=!1,l=0,h=e.length-1;l<e.length;h=l++){var f=e[l],y=e[h];f.y>t.y!=y.y>t.y&&t.x<(y.x-f.x)*(t.y-f.y)/(y.y-f.y)+f.x&&(n=!n)}return n}function ll(e,t,n){var l=n[0],h=n[2];if(e.x<l.x&&t.x<l.x||e.x>h.x&&t.x>h.x||e.y<l.y&&t.y<l.y||e.y>h.y&&t.y>h.y)return!1;var f=Ht(e,t,n[0]);return f!==Ht(e,t,n[1])||f!==Ht(e,t,n[2])||f!==Ht(e,t,n[3])}function no(e,t,n){var l=t.paint.get(e).value;return l.kind==="constant"?l.value:n.programConfigurations.get(t.id).getMaxValue(e)}function qr(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function vo(e,t,n,l,h){if(!t[0]&&!t[1])return e;var f=oe.convert(t)._mult(h);n==="viewport"&&f._rotate(-l);for(var y=[],x=0;x<e.length;x++)y.push(e[x].sub(f));return y}Tn.prototype.populate=function(e,t,n){var l=this.layers[0],h=[],f=null;l.type==="circle"&&(f=l.layout.get("circle-sort-key"));for(var y=0,x=e;y<x.length;y+=1){var S=x[y],E=S.feature,C=S.id,I=S.index,A=S.sourceLayerIndex,D=this.layers[0]._featureFilter.needGeometry,j=Tr(E,D);if(this.layers[0]._featureFilter.filter(new Tt(this.zoom),j,n)){var q=f?f.evaluate(j,{},n):void 0,Y={id:C,properties:E.properties,type:E.type,sourceLayerIndex:A,index:I,geometry:D?j.geometry:fr(E),patterns:{},sortKey:q};h.push(Y)}}f&&h.sort(function(Ae,Ye){return Ae.sortKey-Ye.sortKey});for(var X=0,ie=h;X<ie.length;X+=1){var ce=ie[X],pe=ce.geometry,fe=ce.index,_e=ce.sourceLayerIndex,Ce=e[fe].feature;this.addFeature(ce,pe,fe,n),t.featureIndex.insert(Ce,pe,fe,_e,this.index)}},Tn.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Tn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Tn.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Tn.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,R),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Tn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Tn.prototype.addFeature=function(e,t,n,l){for(var h=0,f=t;h<f.length;h+=1)for(var y=0,x=f[h];y<x.length;y+=1){var S=x[y],E=S.x,C=S.y;if(!(E<0||E>=8192||C<0||C>=8192)){var I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),A=I.vertexLength;Qn(this.layoutVertexArray,E,C,-1,-1),Qn(this.layoutVertexArray,E,C,1,-1),Qn(this.layoutVertexArray,E,C,1,1),Qn(this.layoutVertexArray,E,C,-1,1),this.indexArray.emplaceBack(A,A+1,A+2),this.indexArray.emplaceBack(A,A+3,A+2),I.vertexLength+=4,I.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},l)},Ze("CircleBucket",Tn,{omit:["layers"]});var Wo=new un({"circle-sort-key":new Xe(O.layout_circle["circle-sort-key"])}),Ia={paint:new un({"circle-radius":new Xe(O.paint_circle["circle-radius"]),"circle-color":new Xe(O.paint_circle["circle-color"]),"circle-blur":new Xe(O.paint_circle["circle-blur"]),"circle-opacity":new Xe(O.paint_circle["circle-opacity"]),"circle-translate":new Qe(O.paint_circle["circle-translate"]),"circle-translate-anchor":new Qe(O.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Qe(O.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Qe(O.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Xe(O.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Xe(O.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Xe(O.paint_circle["circle-stroke-opacity"])}),layout:Wo},jt=typeof Float32Array<"u"?Float32Array:Array;function pi(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Bn(e,t,n){var l=t[0],h=t[1],f=t[2],y=t[3],x=t[4],S=t[5],E=t[6],C=t[7],I=t[8],A=t[9],D=t[10],j=t[11],q=t[12],Y=t[13],X=t[14],ie=t[15],ce=n[0],pe=n[1],fe=n[2],_e=n[3];return e[0]=ce*l+pe*x+fe*I+_e*q,e[1]=ce*h+pe*S+fe*A+_e*Y,e[2]=ce*f+pe*E+fe*D+_e*X,e[3]=ce*y+pe*C+fe*j+_e*ie,e[4]=(ce=n[4])*l+(pe=n[5])*x+(fe=n[6])*I+(_e=n[7])*q,e[5]=ce*h+pe*S+fe*A+_e*Y,e[6]=ce*f+pe*E+fe*D+_e*X,e[7]=ce*y+pe*C+fe*j+_e*ie,e[8]=(ce=n[8])*l+(pe=n[9])*x+(fe=n[10])*I+(_e=n[11])*q,e[9]=ce*h+pe*S+fe*A+_e*Y,e[10]=ce*f+pe*E+fe*D+_e*X,e[11]=ce*y+pe*C+fe*j+_e*ie,e[12]=(ce=n[12])*l+(pe=n[13])*x+(fe=n[14])*I+(_e=n[15])*q,e[13]=ce*h+pe*S+fe*A+_e*Y,e[14]=ce*f+pe*E+fe*D+_e*X,e[15]=ce*y+pe*C+fe*j+_e*ie,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,n=arguments.length;n--;)t+=e[n]*e[n];return Math.sqrt(t)});var ka,im=Bn;function ru(e,t,n){var l=t[0],h=t[1],f=t[2],y=t[3];return e[0]=n[0]*l+n[4]*h+n[8]*f+n[12]*y,e[1]=n[1]*l+n[5]*h+n[9]*f+n[13]*y,e[2]=n[2]*l+n[6]*h+n[10]*f+n[14]*y,e[3]=n[3]*l+n[7]*h+n[11]*f+n[15]*y,e}ka=new jt(3),jt!=Float32Array&&(ka[0]=0,ka[1]=0,ka[2]=0),function(){var e=new jt(4);jt!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var om=(function(){var e=new jt(2);jt!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(n){e.call(this,n,Ia)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new Tn(n)},t.prototype.queryRadius=function(n){var l=n;return no("circle-radius",this,l)+no("circle-stroke-width",this,l)+qr(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(n,l,h,f,y,x,S,E){for(var C=vo(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),I=this.paint.get("circle-radius").evaluate(l,h)+this.paint.get("circle-stroke-width").evaluate(l,h),A=this.paint.get("circle-pitch-alignment")==="map",D=A?C:function(Ce,Ae){return Ce.map(function(Ye){return ul(Ye,Ae)})}(C,E),j=A?I*S:I,q=0,Y=f;q<Y.length;q+=1)for(var X=0,ie=Y[q];X<ie.length;X+=1){var ce=ie[X],pe=A?ce:ul(ce,E),fe=j,_e=ru([],[ce.x,ce.y,0,1],E);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?fe*=_e[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(fe*=x.cameraToCenterDistance/_e[3]),On(D,pe,fe))return!0}return!1},t}(eo));function ul(e,t){var n=ru([],[e.x,e.y,0,1],t);return new oe(n[0]/n[3],n[1]/n[3])}var Ah=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Tn);function ls(e,t,n,l){var h=t.width,f=t.height;if(l){if(l instanceof Uint8ClampedArray)l=new Uint8Array(l.buffer);else if(l.length!==h*f*n)throw new RangeError("mismatched image size")}else l=new Uint8Array(h*f*n);return e.width=h,e.height=f,e.data=l,e}function nu(e,t,n){var l=t.width,h=t.height;if(l!==e.width||h!==e.height){var f=ls({},{width:l,height:h},n);am(e,f,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,l),height:Math.min(e.height,h)},n),e.width=l,e.height=h,e.data=f.data}}function am(e,t,n,l,h,f){if(h.width===0||h.height===0)return t;if(h.width>e.width||h.height>e.height||n.x>e.width-h.width||n.y>e.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>t.width||h.height>t.height||l.x>t.width-h.width||l.y>t.height-h.height)throw new RangeError("out of range destination coordinates for image copy");for(var y=e.data,x=t.data,S=0;S<h.height;S++)for(var E=((n.y+S)*e.width+n.x)*f,C=((l.y+S)*t.width+l.x)*f,I=0;I<h.width*f;I++)x[C+I]=y[E+I];return t}Ze("HeatmapBucket",Ah,{omit:["layers"]});var cl=function(e,t){ls(this,e,1,t)};cl.prototype.resize=function(e){nu(this,e,1)},cl.prototype.clone=function(){return new cl({width:this.width,height:this.height},new Uint8Array(this.data))},cl.copy=function(e,t,n,l,h){am(e,t,n,l,h,1)};var ei=function(e,t){ls(this,e,4,t)};ei.prototype.resize=function(e){nu(this,e,4)},ei.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},ei.prototype.clone=function(){return new ei({width:this.width,height:this.height},new Uint8Array(this.data))},ei.copy=function(e,t,n,l,h){am(e,t,n,l,h,4)},Ze("AlphaImage",cl),Ze("RGBAImage",ei);var L2={paint:new un({"heatmap-radius":new Xe(O.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Xe(O.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Qe(O.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qi(O.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Qe(O.paint_heatmap["heatmap-opacity"])})};function lg(e){var t={},n=e.resolution||256,l=e.clips?e.clips.length:1,h=e.image||new ei({width:n,height:l}),f=function(j,q,Y){t[e.evaluationKey]=Y;var X=e.expression.evaluate(t);h.data[j+q+0]=Math.floor(255*X.r/X.a),h.data[j+q+1]=Math.floor(255*X.g/X.a),h.data[j+q+2]=Math.floor(255*X.b/X.a),h.data[j+q+3]=Math.floor(255*X.a)};if(e.clips)for(var y=0,x=0;y<l;++y,x+=4*n)for(var S=0,E=0;S<n;S++,E+=4){var C=S/(n-1),I=e.clips[y];f(x,E,I.start*(1-C)+I.end*C)}else for(var A=0,D=0;A<n;A++,D+=4)f(0,D,A/(n-1));return h}var D2=function(e){function t(n){e.call(this,n,L2),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new Ah(n)},t.prototype._handleSpecialPaintPropertyUpdate=function(n){n==="heatmap-color"&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=lg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},t}(eo),R2={paint:new un({"hillshade-illumination-direction":new Qe(O.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Qe(O.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Qe(O.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Qe(O.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Qe(O.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Qe(O.paint_hillshade["hillshade-accent-color"])})},O2=function(e){function t(n){e.call(this,n,R2)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},t}(eo),B2=Kr([{name:"a_pos",components:2,type:"Int16"}],4).members,sm=Mh,F2=Mh;function Mh(e,t,n){n=n||2;var l,h,f,y,x,S,E,C=t&&t.length,I=C?t[0]*n:e.length,A=ug(e,0,I,n,!0),D=[];if(!A||A.next===A.prev)return D;if(C&&(A=function(q,Y,X,ie){var ce,pe,fe,_e=[];for(ce=0,pe=Y.length;ce<pe;ce++)(fe=ug(q,Y[ce]*ie,ce<pe-1?Y[ce+1]*ie:q.length,ie,!1))===fe.next&&(fe.steiner=!0),_e.push(H2(fe));for(_e.sort(q2),ce=0;ce<_e.length;ce++)G2(_e[ce],X),X=us(X,X.next);return X}(e,t,A,n)),e.length>80*n){l=f=e[0],h=y=e[1];for(var j=n;j<I;j+=n)(x=e[j])<l&&(l=x),(S=e[j+1])<h&&(h=S),x>f&&(f=x),S>y&&(y=S);E=(E=Math.max(f-l,y-h))!==0?1/E:0}return zc(A,D,n,l,h,E),D}function ug(e,t,n,l,h){var f,y;if(h===cm(e,t,n,l)>0)for(f=t;f<n;f+=l)y=hg(f,e[f],e[f+1],y);else for(f=n-l;f>=t;f-=l)y=hg(f,e[f],e[f+1],y);return y&&Lh(y,y.next)&&(Mc(y),y=y.next),y}function us(e,t){if(!e)return e;t||(t=e);var n,l=e;do if(n=!1,l.steiner||!Lh(l,l.next)&&Or(l.prev,l,l.next)!==0)l=l.next;else{if(Mc(l),(l=t=l.prev)===l.next)break;n=!0}while(n||l!==t);return t}function zc(e,t,n,l,h,f,y){if(e){!y&&f&&function(C,I,A,D){var j=C;do j.z===null&&(j.z=lm(j.x,j.y,I,A,D)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==C);j.prevZ.nextZ=null,j.prevZ=null,function(q){var Y,X,ie,ce,pe,fe,_e,Ce,Ae=1;do{for(X=q,q=null,pe=null,fe=0;X;){for(fe++,ie=X,_e=0,Y=0;Y<Ae&&(_e++,ie=ie.nextZ);Y++);for(Ce=Ae;_e>0||Ce>0&&ie;)_e!==0&&(Ce===0||!ie||X.z<=ie.z)?(ce=X,X=X.nextZ,_e--):(ce=ie,ie=ie.nextZ,Ce--),pe?pe.nextZ=ce:q=ce,ce.prevZ=pe,pe=ce;X=ie}pe.nextZ=null,Ae*=2}while(fe>1)}(j)}(e,l,h,f);for(var x,S,E=e;e.prev!==e.next;)if(x=e.prev,S=e.next,f?U2(e,l,h,f):N2(e))t.push(x.i/n),t.push(e.i/n),t.push(S.i/n),Mc(e),e=S.next,E=S.next;else if((e=S)===E){y?y===1?zc(e=V2(us(e),t,n),t,n,l,h,f,2):y===2&&j2(e,t,n,l,h,f):zc(us(e),t,n,l,h,f,1);break}}}function N2(e){var t=e.prev,n=e,l=e.next;if(Or(t,n,l)>=0)return!1;for(var h=e.next.next;h!==e.prev;){if(iu(t.x,t.y,n.x,n.y,l.x,l.y,h.x,h.y)&&Or(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function U2(e,t,n,l){var h=e.prev,f=e,y=e.next;if(Or(h,f,y)>=0)return!1;for(var x=h.x>f.x?h.x>y.x?h.x:y.x:f.x>y.x?f.x:y.x,S=h.y>f.y?h.y>y.y?h.y:y.y:f.y>y.y?f.y:y.y,E=lm(h.x<f.x?h.x<y.x?h.x:y.x:f.x<y.x?f.x:y.x,h.y<f.y?h.y<y.y?h.y:y.y:f.y<y.y?f.y:y.y,t,n,l),C=lm(x,S,t,n,l),I=e.prevZ,A=e.nextZ;I&&I.z>=E&&A&&A.z<=C;){if(I!==e.prev&&I!==e.next&&iu(h.x,h.y,f.x,f.y,y.x,y.y,I.x,I.y)&&Or(I.prev,I,I.next)>=0||(I=I.prevZ,A!==e.prev&&A!==e.next&&iu(h.x,h.y,f.x,f.y,y.x,y.y,A.x,A.y)&&Or(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;I&&I.z>=E;){if(I!==e.prev&&I!==e.next&&iu(h.x,h.y,f.x,f.y,y.x,y.y,I.x,I.y)&&Or(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;A&&A.z<=C;){if(A!==e.prev&&A!==e.next&&iu(h.x,h.y,f.x,f.y,y.x,y.y,A.x,A.y)&&Or(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function V2(e,t,n){var l=e;do{var h=l.prev,f=l.next.next;!Lh(h,f)&&cg(h,l,l.next,f)&&Ac(h,f)&&Ac(f,h)&&(t.push(h.i/n),t.push(l.i/n),t.push(f.i/n),Mc(l),Mc(l.next),l=e=f),l=l.next}while(l!==e);return us(l)}function j2(e,t,n,l,h,f){var y=e;do{for(var x=y.next.next;x!==y.prev;){if(y.i!==x.i&&W2(y,x)){var S=pg(y,x);return y=us(y,y.next),S=us(S,S.next),zc(y,t,n,l,h,f),void zc(S,t,n,l,h,f)}x=x.next}y=y.next}while(y!==e)}function q2(e,t){return e.x-t.x}function G2(e,t){if(t=function(l,h){var f,y=h,x=l.x,S=l.y,E=-1/0;do{if(S<=y.y&&S>=y.next.y&&y.next.y!==y.y){var C=y.x+(S-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(C<=x&&C>E){if(E=C,C===x){if(S===y.y)return y;if(S===y.next.y)return y.next}f=y.x<y.next.x?y:y.next}}y=y.next}while(y!==h);if(!f)return null;if(x===E)return f;var I,A=f,D=f.x,j=f.y,q=1/0;y=f;do x>=y.x&&y.x>=D&&x!==y.x&&iu(S<j?x:E,S,D,j,S<j?E:x,S,y.x,y.y)&&(I=Math.abs(S-y.y)/(x-y.x),Ac(y,l)&&(I<q||I===q&&(y.x>f.x||y.x===f.x&&Z2(f,y)))&&(f=y,q=I)),y=y.next;while(y!==A);return f}(e,t)){var n=pg(t,e);us(t,t.next),us(n,n.next)}}function Z2(e,t){return Or(e.prev,e,t.prev)<0&&Or(t.next,e,e.next)<0}function lm(e,t,n,l,h){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*h)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-l)*h)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function H2(e){var t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function iu(e,t,n,l,h,f,y,x){return(h-y)*(t-x)-(e-y)*(f-x)>=0&&(e-y)*(l-x)-(n-y)*(t-x)>=0&&(n-y)*(f-x)-(h-y)*(l-x)>=0}function W2(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(n,l){var h=n;do{if(h.i!==n.i&&h.next.i!==n.i&&h.i!==l.i&&h.next.i!==l.i&&cg(h,h.next,n,l))return!0;h=h.next}while(h!==n);return!1}(e,t)&&(Ac(e,t)&&Ac(t,e)&&function(n,l){var h=n,f=!1,y=(n.x+l.x)/2,x=(n.y+l.y)/2;do h.y>x!=h.next.y>x&&h.next.y!==h.y&&y<(h.next.x-h.x)*(x-h.y)/(h.next.y-h.y)+h.x&&(f=!f),h=h.next;while(h!==n);return f}(e,t)&&(Or(e.prev,e,t.prev)||Or(e,t.prev,t))||Lh(e,t)&&Or(e.prev,e,e.next)>0&&Or(t.prev,t,t.next)>0)}function Or(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Lh(e,t){return e.x===t.x&&e.y===t.y}function cg(e,t,n,l){var h=Rh(Or(e,t,n)),f=Rh(Or(e,t,l)),y=Rh(Or(n,l,e)),x=Rh(Or(n,l,t));return h!==f&&y!==x||!(h!==0||!Dh(e,n,t))||!(f!==0||!Dh(e,l,t))||!(y!==0||!Dh(n,e,l))||!(x!==0||!Dh(n,t,l))}function Dh(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Rh(e){return e>0?1:e<0?-1:0}function Ac(e,t){return Or(e.prev,e,e.next)<0?Or(e,t,e.next)>=0&&Or(e,e.prev,t)>=0:Or(e,t,e.prev)<0||Or(e,e.next,t)<0}function pg(e,t){var n=new um(e.i,e.x,e.y),l=new um(t.i,t.x,t.y),h=e.next,f=t.prev;return e.next=t,t.prev=e,n.next=h,h.prev=n,l.next=n,n.prev=l,f.next=l,l.prev=f,l}function hg(e,t,n,l){var h=new um(e,t,n);return l?(h.next=l.next,h.prev=l,l.next.prev=h,l.next=h):(h.prev=h,h.next=h),h}function Mc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function um(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function cm(e,t,n,l){for(var h=0,f=t,y=n-l;f<n;f+=l)h+=(e[y]-e[f])*(e[f+1]+e[y+1]),y=f;return h}function X2(e,t,n,l,h){(function f(y,x,S,E,C){for(;E>S;){if(E-S>600){var I=E-S+1,A=x-S+1,D=Math.log(I),j=.5*Math.exp(2*D/3),q=.5*Math.sqrt(D*j*(I-j)/I)*(A-I/2<0?-1:1);f(y,x,Math.max(S,Math.floor(x-A*j/I+q)),Math.min(E,Math.floor(x+(I-A)*j/I+q)),C)}var Y=y[x],X=S,ie=E;for(Lc(y,S,x),C(y[E],Y)>0&&Lc(y,S,E);X<ie;){for(Lc(y,X,ie),X++,ie--;C(y[X],Y)<0;)X++;for(;C(y[ie],Y)>0;)ie--}C(y[S],Y)===0?Lc(y,S,ie):Lc(y,++ie,E),ie<=x&&(S=ie+1),x<=ie&&(E=ie-1)}})(e,t,n||0,l||e.length-1,h||$2)}function Lc(e,t,n){var l=e[t];e[t]=e[n],e[n]=l}function $2(e,t){return e<t?-1:e>t?1:0}function pm(e,t){var n=e.length;if(n<=1)return[e];for(var l,h,f=[],y=0;y<n;y++){var x=Gn(e[y]);x!==0&&(e[y].area=Math.abs(x),h===void 0&&(h=x<0),h===x<0?(l&&f.push(l),l=[e[y]]):l.push(e[y]))}if(l&&f.push(l),t>1)for(var S=0;S<f.length;S++)f[S].length<=t||(X2(f[S],t,1,f[S].length-1,K2),f[S]=f[S].slice(0,t));return f}function K2(e,t){return t.area-e.area}function hm(e,t,n){for(var l=n.patternDependencies,h=!1,f=0,y=t;f<y.length;f+=1){var x=y[f].paint.get(e+"-pattern");x.isConstant()||(h=!0);var S=x.constantOr(null);S&&(h=!0,l[S.to]=!0,l[S.from]=!0)}return h}function fm(e,t,n,l,h){for(var f=h.patternDependencies,y=0,x=t;y<x.length;y+=1){var S=x[y],E=S.paint.get(e+"-pattern").value;if(E.kind!=="constant"){var C=E.evaluate({zoom:l-1},n,{},h.availableImages),I=E.evaluate({zoom:l},n,{},h.availableImages),A=E.evaluate({zoom:l+1},n,{},h.availableImages);I=I&&I.name?I.name:I,A=A&&A.name?A.name:A,f[C=C&&C.name?C.name:C]=!0,f[I]=!0,f[A]=!0,n.patterns[S.id]={min:C,mid:I,max:A}}}return n}Mh.deviation=function(e,t,n,l){var h=t&&t.length,f=Math.abs(cm(e,0,h?t[0]*n:e.length,n));if(h)for(var y=0,x=t.length;y<x;y++)f-=Math.abs(cm(e,t[y]*n,y<x-1?t[y+1]*n:e.length,n));var S=0;for(y=0;y<l.length;y+=3){var E=l[y]*n,C=l[y+1]*n,I=l[y+2]*n;S+=Math.abs((e[E]-e[I])*(e[C+1]-e[E+1])-(e[E]-e[C])*(e[I+1]-e[E+1]))}return f===0&&S===0?0:Math.abs((S-f)/f)},Mh.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},l=0,h=0;h<e.length;h++){for(var f=0;f<e[h].length;f++)for(var y=0;y<t;y++)n.vertices.push(e[h][f][y]);h>0&&n.holes.push(l+=e[h-1].length)}return n},sm.default=F2;var _o=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ta,this.indexArray=new jo,this.indexArray2=new ol,this.programConfigurations=new lt(e.layers,e.zoom),this.segments=new B,this.segments2=new B,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};_o.prototype.populate=function(e,t,n){this.hasPattern=hm("fill",this.layers,t);for(var l=this.layers[0].layout.get("fill-sort-key"),h=[],f=0,y=e;f<y.length;f+=1){var x=y[f],S=x.feature,E=x.id,C=x.index,I=x.sourceLayerIndex,A=this.layers[0]._featureFilter.needGeometry,D=Tr(S,A);if(this.layers[0]._featureFilter.filter(new Tt(this.zoom),D,n)){var j=l?l.evaluate(D,{},n,t.availableImages):void 0,q={id:E,properties:S.properties,type:S.type,sourceLayerIndex:I,index:C,geometry:A?D.geometry:fr(S),patterns:{},sortKey:j};h.push(q)}}l&&h.sort(function(Ce,Ae){return Ce.sortKey-Ae.sortKey});for(var Y=0,X=h;Y<X.length;Y+=1){var ie=X[Y],ce=ie.geometry,pe=ie.index,fe=ie.sourceLayerIndex;if(this.hasPattern){var _e=fm("fill",this.layers,ie,this.zoom,t);this.patternFeatures.push(_e)}else this.addFeature(ie,ce,pe,n,{});t.featureIndex.insert(e[pe].feature,ce,pe,fe,this.index)}},_o.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},_o.prototype.addFeatures=function(e,t,n){for(var l=0,h=this.patternFeatures;l<h.length;l+=1){var f=h[l];this.addFeature(f,f.geometry,f.index,t,n)}},_o.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},_o.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},_o.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,B2),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},_o.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},_o.prototype.addFeature=function(e,t,n,l,h){for(var f=0,y=pm(t,500);f<y.length;f+=1){for(var x=y[f],S=0,E=0,C=x;E<C.length;E+=1)S+=C[E].length;for(var I=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),A=I.vertexLength,D=[],j=[],q=0,Y=x;q<Y.length;q+=1){var X=Y[q];if(X.length!==0){X!==x[0]&&j.push(D.length/2);var ie=this.segments2.prepareSegment(X.length,this.layoutVertexArray,this.indexArray2),ce=ie.vertexLength;this.layoutVertexArray.emplaceBack(X[0].x,X[0].y),this.indexArray2.emplaceBack(ce+X.length-1,ce),D.push(X[0].x),D.push(X[0].y);for(var pe=1;pe<X.length;pe++)this.layoutVertexArray.emplaceBack(X[pe].x,X[pe].y),this.indexArray2.emplaceBack(ce+pe-1,ce+pe),D.push(X[pe].x),D.push(X[pe].y);ie.vertexLength+=X.length,ie.primitiveLength+=X.length}}for(var fe=sm(D,j),_e=0;_e<fe.length;_e+=3)this.indexArray.emplaceBack(A+fe[_e],A+fe[_e+1],A+fe[_e+2]);I.vertexLength+=S,I.primitiveLength+=fe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,h,l)},Ze("FillBucket",_o,{omit:["layers","patternFeatures"]});var Y2=new un({"fill-sort-key":new Xe(O.layout_fill["fill-sort-key"])}),J2={paint:new un({"fill-antialias":new Qe(O.paint_fill["fill-antialias"]),"fill-opacity":new Xe(O.paint_fill["fill-opacity"]),"fill-color":new Xe(O.paint_fill["fill-color"]),"fill-outline-color":new Xe(O.paint_fill["fill-outline-color"]),"fill-translate":new Qe(O.paint_fill["fill-translate"]),"fill-translate-anchor":new Qe(O.paint_fill["fill-translate-anchor"]),"fill-pattern":new Yl(O.paint_fill["fill-pattern"])}),layout:Y2},Q2=function(e){function t(n){e.call(this,n,J2)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(n,l){e.prototype.recalculate.call(this,n,l);var h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(n){return new _o(n)},t.prototype.queryRadius=function(){return qr(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(n,l,h,f,y,x,S){return Gi(vo(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),f)},t.prototype.isTileClipped=function(){return!0},t}(eo),ew=Kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,fg=ou;function ou(e,t,n,l,h){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=h,e.readFields(tw,this,t)}function tw(e,t,n){e==1?t.id=n.readVarint():e==2?function(l,h){for(var f=l.readVarint()+l.pos;l.pos<f;){var y=h._keys[l.readVarint()],x=h._values[l.readVarint()];h.properties[y]=x}}(n,t):e==3?t.type=n.readVarint():e==4&&(t._geometry=n.pos)}function rw(e){for(var t,n,l=0,h=0,f=e.length,y=f-1;h<f;y=h++)l+=((n=e[y]).x-(t=e[h]).x)*(t.y+n.y);return l}ou.types=["Unknown","Point","LineString","Polygon"],ou.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,l=1,h=0,f=0,y=0,x=[];e.pos<n;){if(h<=0){var S=e.readVarint();l=7&S,h=S>>3}if(h--,l===1||l===2)f+=e.readSVarint(),y+=e.readSVarint(),l===1&&(t&&x.push(t),t=[]),t.push(new oe(f,y));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&x.push(t),x},ou.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,l=0,h=0,f=0,y=1/0,x=-1/0,S=1/0,E=-1/0;e.pos<t;){if(l<=0){var C=e.readVarint();n=7&C,l=C>>3}if(l--,n===1||n===2)(h+=e.readSVarint())<y&&(y=h),h>x&&(x=h),(f+=e.readSVarint())<S&&(S=f),f>E&&(E=f);else if(n!==7)throw new Error("unknown command "+n)}return[y,S,x,E]},ou.prototype.toGeoJSON=function(e,t,n){var l,h,f=this.extent*Math.pow(2,n),y=this.extent*e,x=this.extent*t,S=this.loadGeometry(),E=ou.types[this.type];function C(D){for(var j=0;j<D.length;j++){var q=D[j];D[j]=[360*(q.x+y)/f-180,360/Math.PI*Math.atan(Math.exp((180-360*(q.y+x)/f)*Math.PI/180))-90]}}switch(this.type){case 1:var I=[];for(l=0;l<S.length;l++)I[l]=S[l][0];C(S=I);break;case 2:for(l=0;l<S.length;l++)C(S[l]);break;case 3:for(S=function(D){var j=D.length;if(j<=1)return[D];for(var q,Y,X=[],ie=0;ie<j;ie++){var ce=rw(D[ie]);ce!==0&&(Y===void 0&&(Y=ce<0),Y===ce<0?(q&&X.push(q),q=[D[ie]]):q.push(D[ie]))}return q&&X.push(q),X}(S),l=0;l<S.length;l++)for(h=0;h<S[l].length;h++)C(S[l][h])}S.length===1?S=S[0]:E="Multi"+E;var A={type:"Feature",geometry:{type:E,coordinates:S},properties:this.properties};return"id"in this&&(A.id=this.id),A};var dg=mg;function mg(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(nw,this,t),this.length=this._features.length}function nw(e,t,n){e===15?t.version=n.readVarint():e===1?t.name=n.readString():e===5?t.extent=n.readVarint():e===2?t._features.push(n.pos):e===3?t._keys.push(n.readString()):e===4&&t._values.push(function(l){for(var h=null,f=l.readVarint()+l.pos;l.pos<f;){var y=l.readVarint()>>3;h=y===1?l.readString():y===2?l.readFloat():y===3?l.readDouble():y===4?l.readVarint64():y===5?l.readVarint():y===6?l.readSVarint():y===7?l.readBoolean():null}return h}(n))}function iw(e,t,n){if(e===3){var l=new dg(n,n.readVarint()+n.pos);l.length&&(t[l.name]=l)}}mg.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new fg(this._pbf,t,this.extent,this._keys,this._values)};var au={VectorTile:function(e,t){this.layers=e.readFields(iw,{},t)},VectorTileFeature:fg,VectorTileLayer:dg},ow=au.VectorTileFeature.types,dm=Math.pow(2,13);function Dc(e,t,n,l,h,f,y,x){e.emplaceBack(t,n,2*Math.floor(l*dm)+y,h*dm*2,f*dm*2,Math.round(x))}var xo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new go,this.indexArray=new jo,this.programConfigurations=new lt(e.layers,e.zoom),this.segments=new B,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function aw(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}xo.prototype.populate=function(e,t,n){this.features=[],this.hasPattern=hm("fill-extrusion",this.layers,t);for(var l=0,h=e;l<h.length;l+=1){var f=h[l],y=f.feature,x=f.id,S=f.index,E=f.sourceLayerIndex,C=this.layers[0]._featureFilter.needGeometry,I=Tr(y,C);if(this.layers[0]._featureFilter.filter(new Tt(this.zoom),I,n)){var A={id:x,sourceLayerIndex:E,index:S,geometry:C?I.geometry:fr(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(fm("fill-extrusion",this.layers,A,this.zoom,t)):this.addFeature(A,A.geometry,S,n,{}),t.featureIndex.insert(y,A.geometry,S,E,this.index,!0)}}},xo.prototype.addFeatures=function(e,t,n){for(var l=0,h=this.features;l<h.length;l+=1){var f=h[l];this.addFeature(f,f.geometry,f.index,t,n)}},xo.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},xo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},xo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},xo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ew),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},xo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},xo.prototype.addFeature=function(e,t,n,l,h){for(var f=0,y=pm(t,500);f<y.length;f+=1){for(var x=y[f],S=0,E=0,C=x;E<C.length;E+=1)S+=C[E].length;for(var I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),A=0,D=x;A<D.length;A+=1){var j=D[A];if(j.length!==0&&!((St=j).every(function(mt){return mt.x<0})||St.every(function(mt){return mt.x>8192})||St.every(function(mt){return mt.y<0})||St.every(function(mt){return mt.y>8192})))for(var q=0,Y=0;Y<j.length;Y++){var X=j[Y];if(Y>=1){var ie=j[Y-1];if(!aw(X,ie)){I.vertexLength+4>B.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ce=X.sub(ie)._perp()._unit(),pe=ie.dist(X);q+pe>32768&&(q=0),Dc(this.layoutVertexArray,X.x,X.y,ce.x,ce.y,0,0,q),Dc(this.layoutVertexArray,X.x,X.y,ce.x,ce.y,0,1,q),Dc(this.layoutVertexArray,ie.x,ie.y,ce.x,ce.y,0,0,q+=pe),Dc(this.layoutVertexArray,ie.x,ie.y,ce.x,ce.y,0,1,q);var fe=I.vertexLength;this.indexArray.emplaceBack(fe,fe+2,fe+1),this.indexArray.emplaceBack(fe+1,fe+2,fe+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+S>B.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray)),ow[e.type]==="Polygon"){for(var _e=[],Ce=[],Ae=I.vertexLength,Ye=0,Be=x;Ye<Be.length;Ye+=1){var tt=Be[Ye];if(tt.length!==0){tt!==x[0]&&Ce.push(_e.length/2);for(var Ne=0;Ne<tt.length;Ne++){var xt=tt[Ne];Dc(this.layoutVertexArray,xt.x,xt.y,0,0,1,1,0),_e.push(xt.x),_e.push(xt.y)}}}for(var ut=sm(_e,Ce),$e=0;$e<ut.length;$e+=3)this.indexArray.emplaceBack(Ae+ut[$e],Ae+ut[$e+2],Ae+ut[$e+1]);I.primitiveLength+=ut.length/3,I.vertexLength+=S}}var St;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,h,l)},Ze("FillExtrusionBucket",xo,{omit:["layers","features"]});var sw={paint:new un({"fill-extrusion-opacity":new Qe(O["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Xe(O["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Qe(O["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Qe(O["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Yl(O["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Xe(O["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Xe(O["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Qe(O["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},lw=function(e){function t(n){e.call(this,n,sw)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new xo(n)},t.prototype.queryRadius=function(){return qr(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(n,l,h,f,y,x,S,E){var C=vo(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),I=this.paint.get("fill-extrusion-height").evaluate(l,h),A=this.paint.get("fill-extrusion-base").evaluate(l,h),D=function(q,Y,X,ie){for(var ce=[],pe=0,fe=q;pe<fe.length;pe+=1){var _e=fe[pe],Ce=[_e.x,_e.y,0,1];ru(Ce,Ce,Y),ce.push(new oe(Ce[0]/Ce[3],Ce[1]/Ce[3]))}return ce}(C,E),j=function(q,Y,X,ie){for(var ce=[],pe=[],fe=ie[8]*Y,_e=ie[9]*Y,Ce=ie[10]*Y,Ae=ie[11]*Y,Ye=ie[8]*X,Be=ie[9]*X,tt=ie[10]*X,Ne=ie[11]*X,xt=0,ut=q;xt<ut.length;xt+=1){for(var $e=[],St=[],mt=0,Mt=ut[xt];mt<Mt.length;mt+=1){var nt=Mt[mt],Bt=nt.x,ur=nt.y,_r=ie[0]*Bt+ie[4]*ur+ie[12],dr=ie[1]*Bt+ie[5]*ur+ie[13],cr=ie[2]*Bt+ie[6]*ur+ie[14],xr=ie[3]*Bt+ie[7]*ur+ie[15],Gr=cr+Ce,Zr=xr+Ae,In=_r+Ye,Qr=dr+Be,kn=cr+tt,Cr=xr+Ne,en=new oe((_r+fe)/Zr,(dr+_e)/Zr);en.z=Gr/Zr,$e.push(en);var Ct=new oe(In/Cr,Qr/Cr);Ct.z=kn/Cr,St.push(Ct)}ce.push($e),pe.push(St)}return[ce,pe]}(f,A,I,E);return function(q,Y,X){var ie=1/0;Gi(X,Y)&&(ie=yg(X,Y[0]));for(var ce=0;ce<Y.length;ce++)for(var pe=Y[ce],fe=q[ce],_e=0;_e<pe.length-1;_e++){var Ce=pe[_e],Ae=[Ce,pe[_e+1],fe[_e+1],fe[_e],Ce];Zo(X,Ae)&&(ie=Math.min(ie,yg(X,Ae)))}return ie!==1/0&&ie}(j[0],j[1],D)},t}(eo);function Rc(e,t){return e.x*t.x+e.y*t.y}function yg(e,t){if(e.length===1){for(var n,l=0,h=t[l++];!n||h.equals(n);)if(!(n=t[l++]))return 1/0;for(;l<t.length;l++){var f=t[l],y=e[0],x=n.sub(h),S=f.sub(h),E=y.sub(h),C=Rc(x,x),I=Rc(x,S),A=Rc(S,S),D=Rc(E,x),j=Rc(E,S),q=C*A-I*I,Y=(A*D-I*j)/q,X=(C*j-I*D)/q,ie=h.z*(1-Y-X)+n.z*Y+f.z*X;if(isFinite(ie))return ie}return 1/0}for(var ce=1/0,pe=0,fe=t;pe<fe.length;pe+=1)ce=Math.min(ce,fe[pe].z);return ce}var uw=Kr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,cw=Kr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,pw=au.VectorTileFeature.types,hw=Math.cos(Math.PI/180*37.5),gg=Math.pow(2,14)/.5,Fn=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(n){return n.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(n){t.gradients[n.id]={}}),this.layoutVertexArray=new Jn,this.layoutVertexArray2=new ns,this.indexArray=new jo,this.programConfigurations=new lt(e.layers,e.zoom),this.segments=new B,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(n){return n.isStateDependent()}).map(function(n){return n.id})};Fn.prototype.populate=function(e,t,n){this.hasPattern=hm("line",this.layers,t);for(var l=this.layers[0].layout.get("line-sort-key"),h=[],f=0,y=e;f<y.length;f+=1){var x=y[f],S=x.feature,E=x.id,C=x.index,I=x.sourceLayerIndex,A=this.layers[0]._featureFilter.needGeometry,D=Tr(S,A);if(this.layers[0]._featureFilter.filter(new Tt(this.zoom),D,n)){var j=l?l.evaluate(D,{},n):void 0,q={id:E,properties:S.properties,type:S.type,sourceLayerIndex:I,index:C,geometry:A?D.geometry:fr(S),patterns:{},sortKey:j};h.push(q)}}l&&h.sort(function(Ce,Ae){return Ce.sortKey-Ae.sortKey});for(var Y=0,X=h;Y<X.length;Y+=1){var ie=X[Y],ce=ie.geometry,pe=ie.index,fe=ie.sourceLayerIndex;if(this.hasPattern){var _e=fm("line",this.layers,ie,this.zoom,t);this.patternFeatures.push(_e)}else this.addFeature(ie,ce,pe,n,{});t.featureIndex.insert(e[pe].feature,ce,pe,fe,this.index)}},Fn.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Fn.prototype.addFeatures=function(e,t,n){for(var l=0,h=this.patternFeatures;l<h.length;l+=1){var f=h[l];this.addFeature(f,f.geometry,f.index,t,n)}},Fn.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Fn.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fn.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,cw)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,uw),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Fn.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Fn.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Fn.prototype.addFeature=function(e,t,n,l,h){var f=this.layers[0].layout,y=f.get("line-join").evaluate(e,{}),x=f.get("line-cap"),S=f.get("line-miter-limit"),E=f.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var C=0,I=t;C<I.length;C+=1)this.addLine(I[C],e,y,x,S,E);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,h,l)},Fn.prototype.addLine=function(e,t,n,l,h,f){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var y=0;y<e.length-1;y++)this.totalDistance+=e[y].dist(e[y+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var x=pw[t.type]==="Polygon",S=e.length;S>=2&&e[S-1].equals(e[S-2]);)S--;for(var E=0;E<S-1&&e[E].equals(e[E+1]);)E++;if(!(S<(x?3:2))){n==="bevel"&&(h=1.05);var C,I=this.overscaling<=16?122880/(512*this.overscaling):0,A=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray),D=void 0,j=void 0,q=void 0,Y=void 0;this.e1=this.e2=-1,x&&(Y=e[E].sub(C=e[S-2])._unit()._perp());for(var X=E;X<S;X++)if(!(j=X===S-1?x?e[E+1]:void 0:e[X+1])||!e[X].equals(j)){Y&&(q=Y),C&&(D=C),C=e[X],Y=j?j.sub(C)._unit()._perp():q;var ie=(q=q||Y).add(Y);ie.x===0&&ie.y===0||ie._unit();var ce=q.x*Y.x+q.y*Y.y,pe=ie.x*Y.x+ie.y*Y.y,fe=pe!==0?1/pe:1/0,_e=2*Math.sqrt(2-2*pe),Ce=pe<hw&&D&&j,Ae=q.x*Y.y-q.y*Y.x>0;if(Ce&&X>E){var Ye=C.dist(D);if(Ye>2*I){var Be=C.sub(C.sub(D)._mult(I/Ye)._round());this.updateDistance(D,Be),this.addCurrentVertex(Be,q,0,0,A),D=Be}}var tt=D&&j,Ne=tt?n:x?"butt":l;if(tt&&Ne==="round"&&(fe<f?Ne="miter":fe<=2&&(Ne="fakeround")),Ne==="miter"&&fe>h&&(Ne="bevel"),Ne==="bevel"&&(fe>2&&(Ne="flipbevel"),fe<h&&(Ne="miter")),D&&this.updateDistance(D,C),Ne==="miter")ie._mult(fe),this.addCurrentVertex(C,ie,0,0,A);else if(Ne==="flipbevel"){if(fe>100)ie=Y.mult(-1);else{var xt=fe*q.add(Y).mag()/q.sub(Y).mag();ie._perp()._mult(xt*(Ae?-1:1))}this.addCurrentVertex(C,ie,0,0,A),this.addCurrentVertex(C,ie.mult(-1),0,0,A)}else if(Ne==="bevel"||Ne==="fakeround"){var ut=-Math.sqrt(fe*fe-1),$e=Ae?ut:0,St=Ae?0:ut;if(D&&this.addCurrentVertex(C,q,$e,St,A),Ne==="fakeround")for(var mt=Math.round(180*_e/Math.PI/20),Mt=1;Mt<mt;Mt++){var nt=Mt/mt;if(nt!==.5){var Bt=nt-.5;nt+=nt*Bt*(nt-1)*((1.0904+ce*(ce*(3.55645-1.43519*ce)-3.2452))*Bt*Bt+(.848013+ce*(.215638*ce-1.06021)))}var ur=Y.sub(q)._mult(nt)._add(q)._unit()._mult(Ae?-1:1);this.addHalfVertex(C,ur.x,ur.y,!1,Ae,0,A)}j&&this.addCurrentVertex(C,Y,-$e,-St,A)}else if(Ne==="butt")this.addCurrentVertex(C,ie,0,0,A);else if(Ne==="square"){var _r=D?1:-1;this.addCurrentVertex(C,ie,_r,_r,A)}else Ne==="round"&&(D&&(this.addCurrentVertex(C,q,0,0,A),this.addCurrentVertex(C,q,1,1,A,!0)),j&&(this.addCurrentVertex(C,Y,-1,-1,A,!0),this.addCurrentVertex(C,Y,0,0,A)));if(Ce&&X<S-1){var dr=C.dist(j);if(dr>2*I){var cr=C.add(j.sub(C)._mult(I/dr)._round());this.updateDistance(C,cr),this.addCurrentVertex(cr,Y,0,0,A),C=cr}}}}},Fn.prototype.addCurrentVertex=function(e,t,n,l,h,f){f===void 0&&(f=!1);var y=t.y*l-t.x,x=-t.y-t.x*l;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,f,!1,n,h),this.addHalfVertex(e,y,x,f,!0,-l,h),this.distance>gg/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,t,n,l,h,f))},Fn.prototype.addHalfVertex=function(e,t,n,l,h,f,y){var x=.5*(this.lineClips?this.scaledDistance*(gg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(l?1:0),(e.y<<1)+(h?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(f===0?0:f<0?-1:1)|(63&x)<<2,x>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var S=y.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,S),y.primitiveLength++),h?this.e2=S:this.e1=S},Fn.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Fn.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},Ze("LineBucket",Fn,{omit:["layers","patternFeatures"]});var fw=new un({"line-cap":new Qe(O.layout_line["line-cap"]),"line-join":new Xe(O.layout_line["line-join"]),"line-miter-limit":new Qe(O.layout_line["line-miter-limit"]),"line-round-limit":new Qe(O.layout_line["line-round-limit"]),"line-sort-key":new Xe(O.layout_line["line-sort-key"])}),vg={paint:new un({"line-opacity":new Xe(O.paint_line["line-opacity"]),"line-color":new Xe(O.paint_line["line-color"]),"line-translate":new Qe(O.paint_line["line-translate"]),"line-translate-anchor":new Qe(O.paint_line["line-translate-anchor"]),"line-width":new Xe(O.paint_line["line-width"]),"line-gap-width":new Xe(O.paint_line["line-gap-width"]),"line-offset":new Xe(O.paint_line["line-offset"]),"line-blur":new Xe(O.paint_line["line-blur"]),"line-dasharray":new En(O.paint_line["line-dasharray"]),"line-pattern":new Yl(O.paint_line["line-pattern"]),"line-gradient":new qi(O.paint_line["line-gradient"])}),layout:fw},_g=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(n,l){return l=new Tt(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),e.prototype.possiblyEvaluate.call(this,n,l)},t.prototype.evaluate=function(n,l,h,f){return l=J({},l,{zoom:Math.floor(l.zoom)}),e.prototype.evaluate.call(this,n,l,h,f)},t}(Xe))(vg.paint.properties["line-width"].specification);_g.useIntegerZoom=!0;var dw=function(e){function t(n){e.call(this,n,vg),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(n){n==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Wn,this.gradientVersion=(this.gradientVersion+1)%Pe)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(n,l){e.prototype.recalculate.call(this,n,l),this.paint._values["line-floorwidth"]=_g.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)},t.prototype.createBucket=function(n){return new Fn(n)},t.prototype.queryRadius=function(n){var l=n,h=xg(no("line-width",this,l),no("line-gap-width",this,l)),f=no("line-offset",this,l);return h/2+Math.abs(f)+qr(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(n,l,h,f,y,x,S){var E=vo(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),C=S/2*xg(this.paint.get("line-width").evaluate(l,h),this.paint.get("line-gap-width").evaluate(l,h)),I=this.paint.get("line-offset").evaluate(l,h);return I&&(f=function(A,D){for(var j=[],q=new oe(0,0),Y=0;Y<A.length;Y++){for(var X=A[Y],ie=[],ce=0;ce<X.length;ce++){var pe=X[ce],fe=X[ce+1],_e=ce===0?q:pe.sub(X[ce-1])._unit()._perp(),Ce=ce===X.length-1?q:fe.sub(pe)._unit()._perp(),Ae=_e._add(Ce)._unit();Ae._mult(1/(Ae.x*Ce.x+Ae.y*Ce.y)),ie.push(Ae._mult(D)._add(pe))}j.push(ie)}return j}(f,I*S)),function(A,D,j){for(var q=0;q<D.length;q++){var Y=D[q];if(A.length>=3){for(var X=0;X<Y.length;X++)if(ro(A,Y[X]))return!0}if(Ii(A,Y,j))return!0}return!1}(E,f,C)},t.prototype.isTileClipped=function(){return!0},t}(eo);function xg(e,t){return t>0?t+2*e:e}var mw=Kr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),yw=Kr([{name:"a_projected_pos",components:3,type:"Float32"}],4),gw=(Kr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Kr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),wg=(Kr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),vw=Kr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function _w(e,t,n){return e.sections.forEach(function(l){l.text=function(h,f,y){var x=f.layout.get("text-transform").evaluate(y,{});return x==="uppercase"?h=h.toLocaleUpperCase():x==="lowercase"&&(h=h.toLocaleLowerCase()),ci.applyArabicShaping&&(h=ci.applyArabicShaping(h)),h}(l.text,t,n)}),e}Kr([{name:"triangle",components:3,type:"Uint16"}]),Kr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Kr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Kr([{type:"Float32",name:"offsetX"}]),Kr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Oc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},bg=function(e,t,n,l,h){var f,y,x=8*h-l-1,S=(1<<x)-1,E=S>>1,C=-7,I=n?h-1:0,A=n?-1:1,D=e[t+I];for(I+=A,f=D&(1<<-C)-1,D>>=-C,C+=x;C>0;f=256*f+e[t+I],I+=A,C-=8);for(y=f&(1<<-C)-1,f>>=-C,C+=l;C>0;y=256*y+e[t+I],I+=A,C-=8);if(f===0)f=1-E;else{if(f===S)return y?NaN:1/0*(D?-1:1);y+=Math.pow(2,l),f-=E}return(D?-1:1)*y*Math.pow(2,f-l)},Sg=function(e,t,n,l,h,f){var y,x,S,E=8*f-h-1,C=(1<<E)-1,I=C>>1,A=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=l?0:f-1,j=l?1:-1,q=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(x=isNaN(t)?1:0,y=C):(y=Math.floor(Math.log(t)/Math.LN2),t*(S=Math.pow(2,-y))<1&&(y--,S*=2),(t+=y+I>=1?A/S:A*Math.pow(2,1-I))*S>=2&&(y++,S/=2),y+I>=C?(x=0,y=C):y+I>=1?(x=(t*S-1)*Math.pow(2,h),y+=I):(x=t*Math.pow(2,I-1)*Math.pow(2,h),y=0));h>=8;e[n+D]=255&x,D+=j,x/=256,h-=8);for(y=y<<h|x,E+=h;E>0;e[n+D]=255&y,D+=j,y/=256,E-=8);e[n+D-j]|=128*q},Oh=ir;function ir(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}ir.Varint=0,ir.Fixed64=1,ir.Bytes=2,ir.Fixed32=5;var Eg=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Pa(e){return e.type===ir.Bytes?e.readVarint()+e.pos:e.pos+1}function su(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Tg(e,t,n){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(l);for(var h=n.pos-1;h>=e;h--)n.buf[h+l]=n.buf[h]}function xw(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function ww(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function bw(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Sw(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Ew(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Tw(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Cw(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Iw(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function kw(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Bh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function lu(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Cg(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Pw(e,t,n){e===1&&n.readMessage(zw,t)}function zw(e,t,n){if(e===3){var l=n.readMessage(Aw,{}),h=l.width,f=l.height,y=l.left,x=l.top,S=l.advance;t.push({id:l.id,bitmap:new cl({width:h+6,height:f+6},l.bitmap),metrics:{width:h,height:f,left:y,top:x,advance:S}})}}function Aw(e,t,n){e===1?t.id=n.readVarint():e===2?t.bitmap=n.readBytes():e===3?t.width=n.readVarint():e===4?t.height=n.readVarint():e===5?t.left=n.readSVarint():e===6?t.top=n.readSVarint():e===7&&(t.advance=n.readVarint())}function Ig(e){for(var t=0,n=0,l=0,h=e;l<h.length;l+=1){var f=h[l];t+=f.w*f.h,n=Math.max(n,f.w)}e.sort(function(q,Y){return Y.h-q.h});for(var y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}],x=0,S=0,E=0,C=e;E<C.length;E+=1)for(var I=C[E],A=y.length-1;A>=0;A--){var D=y[A];if(!(I.w>D.w||I.h>D.h)){if(I.x=D.x,I.y=D.y,S=Math.max(S,I.y+I.h),x=Math.max(x,I.x+I.w),I.w===D.w&&I.h===D.h){var j=y.pop();A<y.length&&(y[A]=j)}else I.h===D.h?(D.x+=I.w,D.w-=I.w):I.w===D.w?(D.y+=I.h,D.h-=I.h):(y.push({x:D.x+I.w,y:D.y,w:D.w-I.w,h:I.h}),D.y+=I.h,D.h-=I.h);break}}return{w:x,h:S,fill:t/(x*S)||0}}ir.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var l=this.readVarint(),h=l>>3,f=this.pos;this.type=7&l,e(h,t,this),this.pos===f&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Bh(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Cg(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Bh(this.buf,this.pos)+4294967296*Bh(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Bh(this.buf,this.pos)+4294967296*Cg(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=bg(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=bg(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,l=this.buf;return t=127&(n=l[this.pos++]),n<128?t:(t|=(127&(n=l[this.pos++]))<<7,n<128?t:(t|=(127&(n=l[this.pos++]))<<14,n<128?t:(t|=(127&(n=l[this.pos++]))<<21,n<128?t:function(h,f,y){var x,S,E=y.buf;if(x=(112&(S=E[y.pos++]))>>4,S<128||(x|=(127&(S=E[y.pos++]))<<3,S<128)||(x|=(127&(S=E[y.pos++]))<<10,S<128)||(x|=(127&(S=E[y.pos++]))<<17,S<128)||(x|=(127&(S=E[y.pos++]))<<24,S<128)||(x|=(1&(S=E[y.pos++]))<<31,S<128))return su(h,x,f);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=l[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Eg?function(n,l,h){return Eg.decode(n.subarray(l,h))}(this.buf,t,e):function(n,l,h){for(var f="",y=l;y<h;){var x,S,E,C=n[y],I=null,A=C>239?4:C>223?3:C>191?2:1;if(y+A>h)break;A===1?C<128&&(I=C):A===2?(192&(x=n[y+1]))==128&&(I=(31&C)<<6|63&x)<=127&&(I=null):A===3?(S=n[y+2],(192&(x=n[y+1]))==128&&(192&S)==128&&((I=(15&C)<<12|(63&x)<<6|63&S)<=2047||I>=55296&&I<=57343)&&(I=null)):A===4&&(S=n[y+2],E=n[y+3],(192&(x=n[y+1]))==128&&(192&S)==128&&(192&E)==128&&((I=(15&C)<<18|(63&x)<<12|(63&S)<<6|63&E)<=65535||I>=1114112)&&(I=null)),I===null?(I=65533,A=1):I>65535&&(I-=65536,f+=String.fromCharCode(I>>>10&1023|55296),I=56320|1023&I),f+=String.fromCharCode(I),y+=A}return f}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==ir.Bytes)return e.push(this.readVarint(t));var n=Pa(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==ir.Bytes)return e.push(this.readSVarint());var t=Pa(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==ir.Bytes)return e.push(this.readBoolean());var t=Pa(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==ir.Bytes)return e.push(this.readFloat());var t=Pa(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==ir.Bytes)return e.push(this.readDouble());var t=Pa(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==ir.Bytes)return e.push(this.readFixed32());var t=Pa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==ir.Bytes)return e.push(this.readSFixed32());var t=Pa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==ir.Bytes)return e.push(this.readFixed64());var t=Pa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==ir.Bytes)return e.push(this.readSFixed64());var t=Pa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===ir.Varint)for(;this.buf[this.pos++]>127;);else if(t===ir.Bytes)this.pos=this.readVarint()+this.pos;else if(t===ir.Fixed32)this.pos+=4;else{if(t!==ir.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),lu(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),lu(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),lu(this.buf,-1&e,this.pos),lu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),lu(this.buf,-1&e,this.pos),lu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,n){var l,h;if(t>=0?(l=t%4294967296|0,h=t/4294967296|0):(h=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,h=h+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(f,y,x){x.buf[x.pos++]=127&f|128,f>>>=7,x.buf[x.pos++]=127&f|128,f>>>=7,x.buf[x.pos++]=127&f|128,f>>>=7,x.buf[x.pos++]=127&f|128,x.buf[x.pos]=127&(f>>>=7)}(l,0,n),function(f,y){var x=(7&f)<<4;y.buf[y.pos++]|=x|((f>>>=3)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f)))))}(h,n)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(l,h,f){for(var y,x,S=0;S<h.length;S++){if((y=h.charCodeAt(S))>55295&&y<57344){if(!x){y>56319||S+1===h.length?(l[f++]=239,l[f++]=191,l[f++]=189):x=y;continue}if(y<56320){l[f++]=239,l[f++]=191,l[f++]=189,x=y;continue}y=x-55296<<10|y-56320|65536,x=null}else x&&(l[f++]=239,l[f++]=191,l[f++]=189,x=null);y<128?l[f++]=y:(y<2048?l[f++]=y>>6|192:(y<65536?l[f++]=y>>12|224:(l[f++]=y>>18|240,l[f++]=y>>12&63|128),l[f++]=y>>6&63|128),l[f++]=63&y|128)}return f}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Tg(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Sg(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Sg(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var l=this.pos-n;l>=128&&Tg(n,l,this),this.pos=n-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,n){this.writeTag(e,ir.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,xw,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,ww,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Ew,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,bw,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Sw,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Tw,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Cw,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Iw,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,kw,t)},writeBytesField:function(e,t){this.writeTag(e,ir.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,ir.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,ir.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,ir.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,ir.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,ir.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,ir.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,ir.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,ir.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,ir.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};var Fh=function(e,t){var n=t.pixelRatio,l=t.version,h=t.stretchX,f=t.stretchY,y=t.content;this.paddedRect=e,this.pixelRatio=n,this.stretchX=h,this.stretchY=f,this.content=y,this.version=l},Bc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Bc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Bc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Bc.tlbr.get=function(){return this.tl.concat(this.br)},Bc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Fh.prototype,Bc);var Fc=function(e,t){var n={},l={};this.haveRenderCallbacks=[];var h=[];this.addImages(e,n,h),this.addImages(t,l,h);var f=Ig(h),y=new ei({width:f.w||1,height:f.h||1});for(var x in e){var S=e[x],E=n[x].paddedRect;ei.copy(S.data,y,{x:0,y:0},{x:E.x+1,y:E.y+1},S.data)}for(var C in t){var I=t[C],A=l[C].paddedRect,D=A.x+1,j=A.y+1,q=I.data.width,Y=I.data.height;ei.copy(I.data,y,{x:0,y:0},{x:D,y:j},I.data),ei.copy(I.data,y,{x:0,y:Y-1},{x:D,y:j-1},{width:q,height:1}),ei.copy(I.data,y,{x:0,y:0},{x:D,y:j+Y},{width:q,height:1}),ei.copy(I.data,y,{x:q-1,y:0},{x:D-1,y:j},{width:1,height:Y}),ei.copy(I.data,y,{x:0,y:0},{x:D+q,y:j},{width:1,height:Y})}this.image=y,this.iconPositions=n,this.patternPositions=l};Fc.prototype.addImages=function(e,t,n){for(var l in e){var h=e[l],f={x:0,y:0,w:h.data.width+2,h:h.data.height+2};n.push(f),t[l]=new Fh(f,h),h.hasRenderCallback&&this.haveRenderCallbacks.push(l)}},Fc.prototype.patchUpdatedImages=function(e,t){for(var n in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)},Fc.prototype.patchUpdatedImage=function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var l=e.tl;n.update(t.data,void 0,{x:l[0],y:l[1]})}},Ze("ImagePosition",Fh),Ze("ImageAtlas",Fc);var ki={horizontal:1,vertical:2,horizontalOnly:3},uu=function(){this.scale=1,this.fontStack="",this.imageName=null};uu.forText=function(e,t){var n=new uu;return n.scale=e||1,n.fontStack=t,n},uu.forImage=function(e){var t=new uu;return t.imageName=e,t};var Cn=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Nh(e,t,n,l,h,f,y,x,S,E,C,I,A,D,j,q){var Y,X=Cn.fromFeature(e,h);I===ki.vertical&&X.verticalizePunctuation();var ie=ci.processBidirectionalText,ce=ci.processStyledBidirectionalText;if(ie&&X.sections.length===1){Y=[];for(var pe=0,fe=ie(X.toString(),mm(X,E,f,t,l,D,j));pe<fe.length;pe+=1){var _e=fe[pe],Ce=new Cn;Ce.text=_e,Ce.sections=X.sections;for(var Ae=0;Ae<_e.length;Ae++)Ce.sectionIndex.push(0);Y.push(Ce)}}else if(ce){Y=[];for(var Ye=0,Be=ce(X.text,X.sectionIndex,mm(X,E,f,t,l,D,j));Ye<Be.length;Ye+=1){var tt=Be[Ye],Ne=new Cn;Ne.text=tt[0],Ne.sectionIndex=tt[1],Ne.sections=X.sections,Y.push(Ne)}}else Y=function($e,St){for(var mt=[],Mt=$e.text,nt=0,Bt=0,ur=St;Bt<ur.length;Bt+=1){var _r=ur[Bt];mt.push($e.substring(nt,_r)),nt=_r}return nt<Mt.length&&mt.push($e.substring(nt,Mt.length)),mt}(X,mm(X,E,f,t,l,D,j));var xt=[],ut={positionedLines:xt,text:X.toString(),top:C[1],bottom:C[1],left:C[0],right:C[0],writingMode:I,iconsInText:!1,verticalizable:!1};return function($e,St,mt,Mt,nt,Bt,ur,_r,dr,cr,xr,Gr){for(var Zr=0,In=-17,Qr=0,kn=0,Cr=_r==="right"?1:_r==="left"?0:.5,en=0,Ct=0,Qt=nt;Ct<Qt.length;Ct+=1){var Xt=Qt[Ct];Xt.trim();var Rt=Xt.getMaxScale(),Nn=24*(Rt-1),fn={positionedGlyphs:[],lineOffset:0};$e.positionedLines[en]=fn;var or=fn.positionedGlyphs,Lr=0;if(Xt.length()){for(var dn=0;dn<Xt.length();dn++){var Ft=Xt.getSection(dn),Xo=Xt.getSectionIndex(dn),Pi=Xt.getCharCode(dn),$o=0,Ir=null,Ko=null,io=null,gu=24,dl=!(dr===ki.horizontal||!xr&&!Xl(Pi)||xr&&(Uh[Pi]||(La=Pi,De.Arabic(La)||De["Arabic Supplement"](La)||De["Arabic Extended-A"](La)||De["Arabic Presentation Forms-A"](La)||De["Arabic Presentation Forms-B"](La))));if(Ft.imageName){var vu=Mt[Ft.imageName];if(!vu)continue;io=Ft.imageName,$e.iconsInText=$e.iconsInText||!0,Ko=vu.paddedRect;var Ma=vu.displaySize;Ft.scale=24*Ft.scale/Gr,$o=Nn+(24-Ma[1]*Ft.scale),gu=(Ir={width:Ma[0],height:Ma[1],left:1,top:-3,advance:dl?Ma[1]:Ma[0]}).advance;var _u=dl?Ma[0]*Ft.scale-24*Rt:Ma[1]*Ft.scale-24*Rt;_u>0&&_u>Lr&&(Lr=_u)}else{var $h=mt[Ft.fontStack],xu=$h&&$h[Pi];if(xu&&xu.rect)Ko=xu.rect,Ir=xu.metrics;else{var Vc=St[Ft.fontStack],Kh=Vc&&Vc[Pi];if(!Kh)continue;Ir=Kh.metrics}$o=24*(Rt-Ft.scale)}dl?($e.verticalizable=!0,or.push({glyph:Pi,imageName:io,x:Zr,y:In+$o,vertical:dl,scale:Ft.scale,fontStack:Ft.fontStack,sectionIndex:Xo,metrics:Ir,rect:Ko}),Zr+=gu*Ft.scale+cr):(or.push({glyph:Pi,imageName:io,x:Zr,y:In+$o,vertical:dl,scale:Ft.scale,fontStack:Ft.fontStack,sectionIndex:Xo,metrics:Ir,rect:Ko}),Zr+=Ir.advance*Ft.scale+cr)}or.length!==0&&(Qr=Math.max(Zr-cr,Qr),Lw(or,0,or.length-1,Cr,Lr)),Zr=0;var Yh=Bt*Rt+Lr;fn.lineOffset=Math.max(Lr,Nn),In+=Yh,kn=Math.max(Yh,kn),++en}else In+=Bt,++en}var La,jc=In- -17,wu=ym(ur),ps=wu.horizontalAlign,bu=wu.verticalAlign;(function(Jh,Qh,qc,Gc,ef,Zc,Hc,Wc,tf){var Su,rf=(Qh-qc)*ef;Su=Zc!==Hc?-Wc*Gc- -17:(-Gc*tf+.5)*Hc;for(var Eu=0,Xc=Jh;Eu<Xc.length;Eu+=1)for(var ml=0,$c=Xc[Eu].positionedGlyphs;ml<$c.length;ml+=1){var Tu=$c[ml];Tu.x+=rf,Tu.y+=Su}})($e.positionedLines,Cr,ps,bu,Qr,kn,Bt,jc,nt.length),$e.top+=-bu*jc,$e.bottom=$e.top+jc,$e.left+=-ps*Qr,$e.right=$e.left+Qr}(ut,t,n,l,Y,y,x,S,I,E,A,q),!function($e){for(var St=0,mt=$e;St<mt.length;St+=1)if(mt[St].positionedGlyphs.length!==0)return!1;return!0}(xt)&&ut}Cn.fromFeature=function(e,t){for(var n=new Cn,l=0;l<e.sections.length;l++){var h=e.sections[l];h.image?n.addImageSection(h):n.addTextSection(h,t)}return n},Cn.prototype.length=function(){return this.text.length},Cn.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},Cn.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},Cn.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},Cn.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",n=0;n<e.length;n++){var l=e.charCodeAt(n+1)||null,h=e.charCodeAt(n-1)||null;t+=l&&wc(l)&&!Oc[e[n+1]]||h&&wc(h)&&!Oc[e[n-1]]||!Oc[e[n]]?e[n]:Oc[e[n]]}return t}(this.text)},Cn.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&Uh[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,l=this.text.length-1;l>=0&&l>=e&&Uh[this.text.charCodeAt(l)];l--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)},Cn.prototype.substring=function(e,t){var n=new Cn;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n},Cn.prototype.toString=function(){return this.text},Cn.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,n){return Math.max(t,e.sections[n].scale)},0)},Cn.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(uu.forText(e.scale,e.fontStack||t));for(var n=this.sections.length-1,l=0;l<e.text.length;++l)this.sectionIndex.push(n)},Cn.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(t.length!==0){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(uu.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Nt("Reached maximum number of images 6401")}else Nt("Can't add FormattedSection with an empty image.")},Cn.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Uh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},hi={};function kg(e,t,n,l,h,f){if(t.imageName){var y=l[t.imageName];return y?y.displaySize[0]*t.scale*24/f+h:0}var x=n[t.fontStack],S=x&&x[e];return S?S.metrics.advance*t.scale+h:0}function Pg(e,t,n,l){var h=Math.pow(e-t,2);return l?e<t?h/2:2*h:h+Math.abs(n)*n}function Mw(e,t,n){var l=0;return e===10&&(l-=1e4),n&&(l+=150),e!==40&&e!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function zg(e,t,n,l,h,f){for(var y=null,x=Pg(t,n,h,f),S=0,E=l;S<E.length;S+=1){var C=E[S],I=Pg(t-C.x,n,h,f)+C.badness;I<=x&&(y=C,x=I)}return{index:e,x:t,priorBreak:y,badness:x}}function mm(e,t,n,l,h,f,y){if(f!=="point")return[];if(!e)return[];for(var x,S=[],E=function(Y,X,ie,ce,pe,fe){for(var _e=0,Ce=0;Ce<Y.length();Ce++){var Ae=Y.getSection(Ce);_e+=kg(Y.getCharCode(Ce),Ae,ce,pe,X,fe)}return _e/Math.max(1,Math.ceil(_e/ie))}(e,t,n,l,h,y),C=e.text.indexOf("​")>=0,I=0,A=0;A<e.length();A++){var D=e.getSection(A),j=e.getCharCode(A);if(Uh[j]||(I+=kg(j,D,l,h,t,y)),A<e.length()-1){var q=!((x=j)<11904||!(De["Bopomofo Extended"](x)||De.Bopomofo(x)||De["CJK Compatibility Forms"](x)||De["CJK Compatibility Ideographs"](x)||De["CJK Compatibility"](x)||De["CJK Radicals Supplement"](x)||De["CJK Strokes"](x)||De["CJK Symbols and Punctuation"](x)||De["CJK Unified Ideographs Extension A"](x)||De["CJK Unified Ideographs"](x)||De["Enclosed CJK Letters and Months"](x)||De["Halfwidth and Fullwidth Forms"](x)||De.Hiragana(x)||De["Ideographic Description Characters"](x)||De["Kangxi Radicals"](x)||De["Katakana Phonetic Extensions"](x)||De.Katakana(x)||De["Vertical Forms"](x)||De["Yi Radicals"](x)||De["Yi Syllables"](x)));(hi[j]||q||D.imageName)&&S.push(zg(A+1,I,E,S,Mw(j,e.getCharCode(A+1),q&&C),!1))}}return function Y(X){return X?Y(X.priorBreak).concat(X.index):[]}(zg(e.length(),I,E,S,0,!0))}function ym(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Lw(e,t,n,l,h){if(l||h)for(var f=e[n],y=(e[n].x+f.metrics.advance*f.scale)*l,x=t;x<=n;x++)e[x].x-=y,e[x].y+=h}function Ag(e,t,n,l,h,f){var y,x=e.image;if(x.content){var S=x.content,E=x.pixelRatio||1;y=[S[0]/E,S[1]/E,x.displaySize[0]-S[2]/E,x.displaySize[1]-S[3]/E]}var C,I,A,D,j=t.left*f,q=t.right*f;n==="width"||n==="both"?(D=h[0]+j-l[3],I=h[0]+q+l[1]):I=(D=h[0]+(j+q-x.displaySize[0])/2)+x.displaySize[0];var Y=t.top*f,X=t.bottom*f;return n==="height"||n==="both"?(C=h[1]+Y-l[0],A=h[1]+X+l[2]):A=(C=h[1]+(Y+X-x.displaySize[1])/2)+x.displaySize[1],{image:x,top:C,right:I,bottom:A,left:D,collisionPadding:y}}hi[10]=!0,hi[32]=!0,hi[38]=!0,hi[40]=!0,hi[41]=!0,hi[43]=!0,hi[45]=!0,hi[47]=!0,hi[173]=!0,hi[183]=!0,hi[8203]=!0,hi[8208]=!0,hi[8211]=!0,hi[8231]=!0;var cu=function(e){function t(n,l,h,f){e.call(this,n,l),this.angle=h,f!==void 0&&(this.segment=f)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(oe);function gm(e,t){var n=t.expression;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new Tt(e+1))};if(n.kind==="source")return{kind:"source"};for(var l=n.zoomStops,h=n.interpolationType,f=0;f<l.length&&l[f]<=e;)f++;for(var y=f=Math.max(0,f-1);y<l.length&&l[y]<e+1;)y++;y=Math.min(l.length-1,y);var x=l[f],S=l[y];return n.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:h}:{kind:"camera",minZoom:x,maxZoom:S,minSize:n.evaluate(new Tt(x)),maxSize:n.evaluate(new Tt(S)),interpolationType:h}}function Mg(e,t,n){var l=t.uSize,h=n.lowerSize;return e.kind==="source"?h/128:e.kind==="composite"?Ar(h/128,n.upperSize/128,t.uSizeT):l}function Lg(e,t){var n=0,l=0;if(e.kind==="constant")l=e.layoutSize;else if(e.kind!=="source"){var h=e.interpolationType,f=h?at(sn.interpolationFactor(h,t,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?l=Ar(e.minSize,e.maxSize,f):n=f}return{uSizeT:n,uSize:l}}Ze("Anchor",cu);var Dw=Object.freeze({__proto__:null,getSizeData:gm,evaluateSizeForFeature:Mg,evaluateSizeForZoom:Lg,SIZE_PACK_FACTOR:128});function Dg(e,t,n,l,h){if(t.segment===void 0)return!0;for(var f=t,y=t.segment+1,x=0;x>-n/2;){if(--y<0)return!1;x-=e[y].dist(f),f=e[y]}x+=e[y].dist(e[y+1]),y++;for(var S=[],E=0;x<n/2;){var C=e[y],I=e[y+1];if(!I)return!1;var A=e[y-1].angleTo(C)-C.angleTo(I);for(A=Math.abs((A+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:x,angleDelta:A}),E+=A;x-S[0].distance>l;)E-=S.shift().angleDelta;if(E>h)return!1;y++,x+=C.dist(I)}return!0}function Rg(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function Og(e,t,n){return e?.6*t*n:0}function Bg(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Rw(e,t,n,l,h,f){for(var y=Og(n,h,f),x=Bg(n,l)*f,S=0,E=Rg(e)/2,C=0;C<e.length-1;C++){var I=e[C],A=e[C+1],D=I.dist(A);if(S+D>E){var j=(E-S)/D,q=Ar(I.x,A.x,j),Y=Ar(I.y,A.y,j),X=new cu(q,Y,A.angleTo(I),C);return X._round(),!y||Dg(e,X,x,y,t)?X:void 0}S+=D}}function Ow(e,t,n,l,h,f,y,x,S){var E=Og(l,f,y),C=Bg(l,h),I=C*y,A=e[0].x===0||e[0].x===S||e[0].y===0||e[0].y===S;return t-I<t/4&&(t=I+t/4),function D(j,q,Y,X,ie,ce,pe,fe,_e){for(var Ce=ce/2,Ae=Rg(j),Ye=0,Be=q-Y,tt=[],Ne=0;Ne<j.length-1;Ne++){for(var xt=j[Ne],ut=j[Ne+1],$e=xt.dist(ut),St=ut.angleTo(xt);Be+Y<Ye+$e;){var mt=((Be+=Y)-Ye)/$e,Mt=Ar(xt.x,ut.x,mt),nt=Ar(xt.y,ut.y,mt);if(Mt>=0&&Mt<_e&&nt>=0&&nt<_e&&Be-Ce>=0&&Be+Ce<=Ae){var Bt=new cu(Mt,nt,St,Ne);Bt._round(),X&&!Dg(j,Bt,ce,X,ie)||tt.push(Bt)}}Ye+=$e}return fe||tt.length||pe||(tt=D(j,Ye/2,Y,X,ie,ce,pe,!0,_e)),tt}(e,A?t/2*x%t:(C/2+2*f)*y*x%t,t,E,n,I,A,!1,S)}function Fg(e,t,n,l,h){for(var f=[],y=0;y<e.length;y++)for(var x=e[y],S=void 0,E=0;E<x.length-1;E++){var C=x[E],I=x[E+1];C.x<t&&I.x<t||(C.x<t?C=new oe(t,C.y+(t-C.x)/(I.x-C.x)*(I.y-C.y))._round():I.x<t&&(I=new oe(t,C.y+(t-C.x)/(I.x-C.x)*(I.y-C.y))._round()),C.y<n&&I.y<n||(C.y<n?C=new oe(C.x+(n-C.y)/(I.y-C.y)*(I.x-C.x),n)._round():I.y<n&&(I=new oe(C.x+(n-C.y)/(I.y-C.y)*(I.x-C.x),n)._round()),C.x>=l&&I.x>=l||(C.x>=l?C=new oe(l,C.y+(l-C.x)/(I.x-C.x)*(I.y-C.y))._round():I.x>=l&&(I=new oe(l,C.y+(l-C.x)/(I.x-C.x)*(I.y-C.y))._round()),C.y>=h&&I.y>=h||(C.y>=h?C=new oe(C.x+(h-C.y)/(I.y-C.y)*(I.x-C.x),h)._round():I.y>=h&&(I=new oe(C.x+(h-C.y)/(I.y-C.y)*(I.x-C.x),h)._round()),S&&C.equals(S[S.length-1])||f.push(S=[C]),S.push(I)))))}return f}function Ng(e,t,n,l){var h=[],f=e.image,y=f.pixelRatio,x=f.paddedRect.w-2,S=f.paddedRect.h-2,E=e.right-e.left,C=e.bottom-e.top,I=f.stretchX||[[0,x]],A=f.stretchY||[[0,S]],D=function(Mt,nt){return Mt+nt[1]-nt[0]},j=I.reduce(D,0),q=A.reduce(D,0),Y=x-j,X=S-q,ie=0,ce=j,pe=0,fe=q,_e=0,Ce=Y,Ae=0,Ye=X;if(f.content&&l){var Be=f.content;ie=Vh(I,0,Be[0]),pe=Vh(A,0,Be[1]),ce=Vh(I,Be[0],Be[2]),fe=Vh(A,Be[1],Be[3]),_e=Be[0]-ie,Ae=Be[1]-pe,Ce=Be[2]-Be[0]-ce,Ye=Be[3]-Be[1]-fe}var tt=function(Mt,nt,Bt,ur){var _r=jh(Mt.stretch-ie,ce,E,e.left),dr=qh(Mt.fixed-_e,Ce,Mt.stretch,j),cr=jh(nt.stretch-pe,fe,C,e.top),xr=qh(nt.fixed-Ae,Ye,nt.stretch,q),Gr=jh(Bt.stretch-ie,ce,E,e.left),Zr=qh(Bt.fixed-_e,Ce,Bt.stretch,j),In=jh(ur.stretch-pe,fe,C,e.top),Qr=qh(ur.fixed-Ae,Ye,ur.stretch,q),kn=new oe(_r,cr),Cr=new oe(Gr,cr),en=new oe(Gr,In),Ct=new oe(_r,In),Qt=new oe(dr/y,xr/y),Xt=new oe(Zr/y,Qr/y),Rt=t*Math.PI/180;if(Rt){var Nn=Math.sin(Rt),fn=Math.cos(Rt),or=[fn,-Nn,Nn,fn];kn._matMult(or),Cr._matMult(or),Ct._matMult(or),en._matMult(or)}var Lr=Mt.stretch+Mt.fixed,dn=nt.stretch+nt.fixed;return{tl:kn,tr:Cr,bl:Ct,br:en,tex:{x:f.paddedRect.x+1+Lr,y:f.paddedRect.y+1+dn,w:Bt.stretch+Bt.fixed-Lr,h:ur.stretch+ur.fixed-dn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Qt,pixelOffsetBR:Xt,minFontScaleX:Ce/y/E,minFontScaleY:Ye/y/C,isSDF:n}};if(l&&(f.stretchX||f.stretchY))for(var Ne=Ug(I,Y,j),xt=Ug(A,X,q),ut=0;ut<Ne.length-1;ut++)for(var $e=Ne[ut],St=Ne[ut+1],mt=0;mt<xt.length-1;mt++)h.push(tt($e,xt[mt],St,xt[mt+1]));else h.push(tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:S+1}));return h}function Vh(e,t,n){for(var l=0,h=0,f=e;h<f.length;h+=1){var y=f[h];l+=Math.max(t,Math.min(n,y[1]))-Math.max(t,Math.min(n,y[0]))}return l}function Ug(e,t,n){for(var l=[{fixed:-1,stretch:0}],h=0,f=e;h<f.length;h+=1){var y=f[h],x=y[0],S=y[1],E=l[l.length-1];l.push({fixed:x-E.stretch,stretch:E.stretch}),l.push({fixed:x-E.stretch,stretch:E.stretch+(S-x)})}return l.push({fixed:t+1,stretch:n}),l}function jh(e,t,n,l){return e/t*n+l}function qh(e,t,n,l){return e-t*n/l}var Gh=function(e,t,n,l,h,f,y,x,S,E){if(this.boxStartIndex=e.length,S){var C=f.top,I=f.bottom,A=f.collisionPadding;A&&(C-=A[1],I+=A[3]);var D=I-C;D>0&&(D=Math.max(10,D),this.circleDiameter=D)}else{var j=f.top*y-x,q=f.bottom*y+x,Y=f.left*y-x,X=f.right*y+x,ie=f.collisionPadding;if(ie&&(Y-=ie[0]*y,j-=ie[1]*y,X+=ie[2]*y,q+=ie[3]*y),E){var ce=new oe(Y,j),pe=new oe(X,j),fe=new oe(Y,q),_e=new oe(X,q),Ce=E*Math.PI/180;ce._rotate(Ce),pe._rotate(Ce),fe._rotate(Ce),_e._rotate(Ce),Y=Math.min(ce.x,pe.x,fe.x,_e.x),X=Math.max(ce.x,pe.x,fe.x,_e.x),j=Math.min(ce.y,pe.y,fe.y,_e.y),q=Math.max(ce.y,pe.y,fe.y,_e.y)}e.emplaceBack(t.x,t.y,Y,j,X,q,n,l,h)}this.boxEndIndex=e.length},pu=function(e,t){if(e===void 0&&(e=[]),t===void 0&&(t=Bw),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function Bw(e,t){return e<t?-1:e>t?1:0}function Fw(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!1);for(var l=1/0,h=1/0,f=-1/0,y=-1/0,x=e[0],S=0;S<x.length;S++){var E=x[S];(!S||E.x<l)&&(l=E.x),(!S||E.y<h)&&(h=E.y),(!S||E.x>f)&&(f=E.x),(!S||E.y>y)&&(y=E.y)}var C=Math.min(f-l,y-h),I=C/2,A=new pu([],Nw);if(C===0)return new oe(l,h);for(var D=l;D<f;D+=C)for(var j=h;j<y;j+=C)A.push(new hu(D+I,j+I,I,e));for(var q=function(ie){for(var ce=0,pe=0,fe=0,_e=ie[0],Ce=0,Ae=_e.length,Ye=Ae-1;Ce<Ae;Ye=Ce++){var Be=_e[Ce],tt=_e[Ye],Ne=Be.x*tt.y-tt.x*Be.y;pe+=(Be.x+tt.x)*Ne,fe+=(Be.y+tt.y)*Ne,ce+=3*Ne}return new hu(pe/ce,fe/ce,0,ie)}(e),Y=A.length;A.length;){var X=A.pop();(X.d>q.d||!q.d)&&(q=X,n&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,Y)),X.max-q.d<=t||(A.push(new hu(X.p.x-(I=X.h/2),X.p.y-I,I,e)),A.push(new hu(X.p.x+I,X.p.y-I,I,e)),A.push(new hu(X.p.x-I,X.p.y+I,I,e)),A.push(new hu(X.p.x+I,X.p.y+I,I,e)),Y+=4)}return n&&(console.log("num probes: "+Y),console.log("best distance: "+q.d)),q.p}function Nw(e,t){return t.max-e.max}function hu(e,t,n,l){this.p=new oe(e,t),this.h=n,this.d=function(h,f){for(var y=!1,x=1/0,S=0;S<f.length;S++)for(var E=f[S],C=0,I=E.length,A=I-1;C<I;A=C++){var D=E[C],j=E[A];D.y>h.y!=j.y>h.y&&h.x<(j.x-D.x)*(h.y-D.y)/(j.y-D.y)+D.x&&(y=!y),x=Math.min(x,ss(h,D,j))}return(y?1:-1)*Math.sqrt(x)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}pu.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},pu.prototype.pop=function(){if(this.length!==0){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},pu.prototype.peek=function(){return this.data[0]},pu.prototype._up=function(e){for(var t=this.data,n=this.compare,l=t[e];e>0;){var h=e-1>>1,f=t[h];if(n(l,f)>=0)break;t[e]=f,e=h}t[e]=l},pu.prototype._down=function(e){for(var t=this.data,n=this.compare,l=this.length>>1,h=t[e];e<l;){var f=1+(e<<1),y=t[f],x=f+1;if(x<this.length&&n(t[x],y)<0&&(f=x,y=t[x]),n(y,h)>=0)break;t[e]=y,e=f}t[e]=h};var vm=Number.POSITIVE_INFINITY;function Vg(e,t){return t[1]!==vm?function(n,l,h){var f=0,y=0;switch(l=Math.abs(l),h=Math.abs(h),n){case"top-right":case"top-left":case"top":y=h-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-h}switch(n){case"top-right":case"bottom-right":case"right":f=-l;break;case"top-left":case"bottom-left":case"left":f=l}return[f,y]}(e,t[0],t[1]):function(n,l){var h=0,f=0;l<0&&(l=0);var y=l/Math.sqrt(2);switch(n){case"top-right":case"top-left":f=y-7;break;case"bottom-right":case"bottom-left":f=7-y;break;case"bottom":f=7-l;break;case"top":f=l-7}switch(n){case"top-right":case"bottom-right":h=-y;break;case"top-left":case"bottom-left":h=y;break;case"left":h=l;break;case"right":h=-l}return[h,f]}(e,t[0])}function _m(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function jg(e,t,n,l,h,f,y,x,S,E,C,I,A,D,j){var q=function(pe,fe,_e,Ce,Ae,Ye,Be,tt){for(var Ne=Ce.layout.get("text-rotate").evaluate(Ye,{})*Math.PI/180,xt=[],ut=0,$e=fe.positionedLines;ut<$e.length;ut+=1)for(var St=$e[ut],mt=0,Mt=St.positionedGlyphs;mt<Mt.length;mt+=1){var nt=Mt[mt];if(nt.rect){var Bt=nt.rect||{},ur=4,_r=!0,dr=1,cr=0,xr=(Ae||tt)&&nt.vertical,Gr=nt.metrics.advance*nt.scale/2;if(tt&&fe.verticalizable&&(cr=St.lineOffset/2-(nt.imageName?-(24-nt.metrics.width*nt.scale)/2:24*(nt.scale-1))),nt.imageName){var Zr=Be[nt.imageName];_r=Zr.sdf,ur=1/(dr=Zr.pixelRatio)}var In=Ae?[nt.x+Gr,nt.y]:[0,0],Qr=Ae?[0,0]:[nt.x+Gr+_e[0],nt.y+_e[1]-cr],kn=[0,0];xr&&(kn=Qr,Qr=[0,0]);var Cr=(nt.metrics.left-ur)*nt.scale-Gr+Qr[0],en=(-nt.metrics.top-ur)*nt.scale+Qr[1],Ct=Cr+Bt.w*nt.scale/dr,Qt=en+Bt.h*nt.scale/dr,Xt=new oe(Cr,en),Rt=new oe(Ct,en),Nn=new oe(Cr,Qt),fn=new oe(Ct,Qt);if(xr){var or=new oe(-Gr,Gr- -17),Lr=-Math.PI/2,dn=12-Gr,Ft=new oe(22-dn,-(nt.imageName?dn:0)),Xo=new(Function.prototype.bind.apply(oe,[null].concat(kn)));Xt._rotateAround(Lr,or)._add(Ft)._add(Xo),Rt._rotateAround(Lr,or)._add(Ft)._add(Xo),Nn._rotateAround(Lr,or)._add(Ft)._add(Xo),fn._rotateAround(Lr,or)._add(Ft)._add(Xo)}if(Ne){var Pi=Math.sin(Ne),$o=Math.cos(Ne),Ir=[$o,-Pi,Pi,$o];Xt._matMult(Ir),Rt._matMult(Ir),Nn._matMult(Ir),fn._matMult(Ir)}var Ko=new oe(0,0),io=new oe(0,0);xt.push({tl:Xt,tr:Rt,bl:Nn,br:fn,tex:Bt,writingMode:fe.writingMode,glyphOffset:In,sectionIndex:nt.sectionIndex,isSDF:_r,pixelOffsetTL:Ko,pixelOffsetBR:io,minFontScaleX:0,minFontScaleY:0})}}return xt}(0,n,x,h,f,y,l,e.allowVerticalPlacement),Y=e.textSizeData,X=null;Y.kind==="source"?(X=[128*h.layout.get("text-size").evaluate(y,{})])[0]>32640&&Nt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Y.kind==="composite"&&((X=[128*D.compositeTextSizes[0].evaluate(y,{},j),128*D.compositeTextSizes[1].evaluate(y,{},j)])[0]>32640||X[1]>32640)&&Nt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,q,X,x,f,y,E,t,S.lineStartIndex,S.lineLength,A,j);for(var ie=0,ce=C;ie<ce.length;ie+=1)I[ce[ie]]=e.text.placedSymbolArray.length-1;return 4*q.length}function qg(e){for(var t in e)return e[t];return null}function Uw(e,t,n,l){var h=e.compareText;if(t in h){for(var f=h[t],y=f.length-1;y>=0;y--)if(l.dist(f[y])<n)return!0}else h[t]=[];return h[t].push(l),!1}var Vw=au.VectorTileFeature.types,jw=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Zh(e,t,n,l,h,f,y,x,S,E,C,I,A){var D=x?Math.min(32640,Math.round(x[0])):0,j=x?Math.min(32640,Math.round(x[1])):0;e.emplaceBack(t,n,Math.round(32*l),Math.round(32*h),f,y,(D<<1)+(S?1:0),j,16*E,16*C,256*I,256*A)}function xm(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function qw(e){for(var t=0,n=e.sections;t<n.length;t+=1)if($l(n[t].text))return!0;return!1}var fu=function(e){this.layoutVertexArray=new Ql,this.indexArray=new jo,this.programConfigurations=e,this.segments=new B,this.dynamicLayoutVertexArray=new is,this.opacityVertexArray=new il,this.placedSymbolArray=new u};fu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},fu.prototype.upload=function(e,t,n,l){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,mw.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,yw.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,jw,!0),this.opacityVertexBuffer.itemSize=1),(n||l)&&this.programConfigurations.upload(e))},fu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ze("SymbolBuffers",fu);var Nc=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new B,this.collisionVertexArray=new Ic};Nc.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,gw.members,!0)},Nc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ze("CollisionBuffers",Nc);var Kt=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(f){return f.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=pi([]),this.placementViewportMatrix=pi([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=gm(this.zoom,t["text-size"]),this.iconSizeData=gm(this.zoom,t["icon-size"]);var n=this.layers[0].layout,l=n.get("symbol-sort-key"),h=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey=h!=="viewport-y"&&l.constantOr(1)!==void 0,this.sortFeaturesByY=(h==="viewport-y"||h==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,n.get("symbol-placement")==="point"&&(this.writingModes=n.get("text-writing-mode").map(function(f){return ki[f]})),this.stateDependentLayerIds=this.layers.filter(function(f){return f.isStateDependent()}).map(function(f){return f.id}),this.sourceID=e.sourceID};Kt.prototype.createArrays=function(){this.text=new fu(new lt(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new fu(new lt(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new v,this.lineVertexArray=new b,this.symbolInstances=new g},Kt.prototype.calculateGlyphDependencies=function(e,t,n,l,h){for(var f=0;f<e.length;f++)if(t[e.charCodeAt(f)]=!0,(n||l)&&h){var y=Oc[e.charAt(f)];y&&(t[y.charCodeAt(0)]=!0)}},Kt.prototype.populate=function(e,t,n){var l=this.layers[0],h=l.layout,f=h.get("text-font"),y=h.get("text-field"),x=h.get("icon-image"),S=(y.value.kind!=="constant"||y.value.value instanceof Xr&&!y.value.value.isEmpty()||y.value.value.toString().length>0)&&(f.value.kind!=="constant"||f.value.value.length>0),E=x.value.kind!=="constant"||!!x.value.value||Object.keys(x.parameters).length>0,C=h.get("symbol-sort-key");if(this.features=[],S||E){for(var I=t.iconDependencies,A=t.glyphDependencies,D=t.availableImages,j=new Tt(this.zoom),q=0,Y=e;q<Y.length;q+=1){var X=Y[q],ie=X.feature,ce=X.id,pe=X.index,fe=X.sourceLayerIndex,_e=l._featureFilter.needGeometry,Ce=Tr(ie,_e);if(l._featureFilter.filter(j,Ce,n)){_e||(Ce.geometry=fr(ie));var Ae=void 0;if(S){var Ye=l.getValueAndResolveTokens("text-field",Ce,n,D),Be=Xr.factory(Ye);qw(Be)&&(this.hasRTLText=!0),(!this.hasRTLText||Sc()==="unavailable"||this.hasRTLText&&ci.isParsed())&&(Ae=_w(Be,l,Ce))}var tt=void 0;if(E){var Ne=l.getValueAndResolveTokens("icon-image",Ce,n,D);tt=Ne instanceof Rn?Ne:Rn.fromString(Ne)}if(Ae||tt){var xt=this.sortFeaturesByKey?C.evaluate(Ce,{},n):void 0;if(this.features.push({id:ce,text:Ae,icon:tt,index:pe,sourceLayerIndex:fe,geometry:Ce.geometry,properties:ie.properties,type:Vw[ie.type],sortKey:xt}),tt&&(I[tt.name]=!0),Ae){var ut=f.evaluate(Ce,{},n).join(","),$e=h.get("text-rotation-alignment")==="map"&&h.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ki.vertical)>=0;for(var St=0,mt=Ae.sections;St<mt.length;St+=1){var Mt=mt[St];if(Mt.image)I[Mt.image.name]=!0;else{var nt=xc(Ae.toString()),Bt=Mt.fontStack||ut,ur=A[Bt]=A[Bt]||{};this.calculateGlyphDependencies(Mt.text,ur,$e,this.allowVerticalPlacement,nt)}}}}}}h.get("symbol-placement")==="line"&&(this.features=function(_r){var dr={},cr={},xr=[],Gr=0;function Zr(or){xr.push(_r[or]),Gr++}function In(or,Lr,dn){var Ft=cr[or];return delete cr[or],cr[Lr]=Ft,xr[Ft].geometry[0].pop(),xr[Ft].geometry[0]=xr[Ft].geometry[0].concat(dn[0]),Ft}function Qr(or,Lr,dn){var Ft=dr[Lr];return delete dr[Lr],dr[or]=Ft,xr[Ft].geometry[0].shift(),xr[Ft].geometry[0]=dn[0].concat(xr[Ft].geometry[0]),Ft}function kn(or,Lr,dn){var Ft=dn?Lr[0][Lr[0].length-1]:Lr[0][0];return or+":"+Ft.x+":"+Ft.y}for(var Cr=0;Cr<_r.length;Cr++){var en=_r[Cr],Ct=en.geometry,Qt=en.text?en.text.toString():null;if(Qt){var Xt=kn(Qt,Ct),Rt=kn(Qt,Ct,!0);if(Xt in cr&&Rt in dr&&cr[Xt]!==dr[Rt]){var Nn=Qr(Xt,Rt,Ct),fn=In(Xt,Rt,xr[Nn].geometry);delete dr[Xt],delete cr[Rt],cr[kn(Qt,xr[fn].geometry,!0)]=fn,xr[Nn].geometry=null}else Xt in cr?In(Xt,Rt,Ct):Rt in dr?Qr(Xt,Rt,Ct):(Zr(Cr),dr[Xt]=Gr-1,cr[Rt]=Gr-1)}else Zr(Cr)}return xr.filter(function(or){return or.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(_r,dr){return _r.sortKey-dr.sortKey})}},Kt.prototype.update=function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))},Kt.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Kt.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Kt.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Kt.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Kt.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Kt.prototype.addToLineVertexArray=function(e,t){var n=this.lineVertexArray.length;if(e.segment!==void 0){for(var l=e.dist(t[e.segment+1]),h=e.dist(t[e.segment]),f={},y=e.segment+1;y<t.length;y++)f[y]={x:t[y].x,y:t[y].y,tileUnitDistanceFromAnchor:l},y<t.length-1&&(l+=t[y+1].dist(t[y]));for(var x=e.segment||0;x>=0;x--)f[x]={x:t[x].x,y:t[x].y,tileUnitDistanceFromAnchor:h},x>0&&(h+=t[x-1].dist(t[x]));for(var S=0;S<t.length;S++){var E=f[S];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},Kt.prototype.addSymbols=function(e,t,n,l,h,f,y,x,S,E,C,I){for(var A=e.indexArray,D=e.layoutVertexArray,j=e.segments.prepareSegment(4*t.length,D,A,this.canOverlap?f.sortKey:void 0),q=this.glyphOffsetArray.length,Y=j.vertexLength,X=this.allowVerticalPlacement&&y===ki.vertical?Math.PI/2:0,ie=f.text&&f.text.sections,ce=0;ce<t.length;ce++){var pe=t[ce],fe=pe.tl,_e=pe.tr,Ce=pe.bl,Ae=pe.br,Ye=pe.tex,Be=pe.pixelOffsetTL,tt=pe.pixelOffsetBR,Ne=pe.minFontScaleX,xt=pe.minFontScaleY,ut=pe.glyphOffset,$e=pe.isSDF,St=pe.sectionIndex,mt=j.vertexLength,Mt=ut[1];Zh(D,x.x,x.y,fe.x,Mt+fe.y,Ye.x,Ye.y,n,$e,Be.x,Be.y,Ne,xt),Zh(D,x.x,x.y,_e.x,Mt+_e.y,Ye.x+Ye.w,Ye.y,n,$e,tt.x,Be.y,Ne,xt),Zh(D,x.x,x.y,Ce.x,Mt+Ce.y,Ye.x,Ye.y+Ye.h,n,$e,Be.x,tt.y,Ne,xt),Zh(D,x.x,x.y,Ae.x,Mt+Ae.y,Ye.x+Ye.w,Ye.y+Ye.h,n,$e,tt.x,tt.y,Ne,xt),xm(e.dynamicLayoutVertexArray,x,X),A.emplaceBack(mt,mt+1,mt+2),A.emplaceBack(mt+1,mt+2,mt+3),j.vertexLength+=4,j.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ut[0]),ce!==t.length-1&&St===t[ce+1].sectionIndex||e.programConfigurations.populatePaintArrays(D.length,f,f.index,{},I,ie&&ie[St])}e.placedSymbolArray.emplaceBack(x.x,x.y,q,this.glyphOffsetArray.length-q,Y,S,E,x.segment,n?n[0]:0,n?n[1]:0,l[0],l[1],y,0,!1,0,C)},Kt.prototype._addCollisionDebugVertex=function(e,t,n,l,h,f){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,l,h,Math.round(f.x),Math.round(f.y))},Kt.prototype.addCollisionDebugVertices=function(e,t,n,l,h,f,y){var x=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),S=x.vertexLength,E=h.layoutVertexArray,C=h.collisionVertexArray,I=y.anchorX,A=y.anchorY;this._addCollisionDebugVertex(E,C,f,I,A,new oe(e,t)),this._addCollisionDebugVertex(E,C,f,I,A,new oe(n,t)),this._addCollisionDebugVertex(E,C,f,I,A,new oe(n,l)),this._addCollisionDebugVertex(E,C,f,I,A,new oe(e,l)),x.vertexLength+=4;var D=h.indexArray;D.emplaceBack(S,S+1),D.emplaceBack(S+1,S+2),D.emplaceBack(S+2,S+3),D.emplaceBack(S+3,S),x.primitiveLength+=4},Kt.prototype.addDebugCollisionBoxes=function(e,t,n,l){for(var h=e;h<t;h++){var f=this.collisionBoxArray.get(h);this.addCollisionDebugVertices(f.x1,f.y1,f.x2,f.y2,l?this.textCollisionBox:this.iconCollisionBox,f.anchorPoint,n)}},Kt.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Nc(os,wg.members,ol),this.iconCollisionBox=new Nc(os,wg.members,ol);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},Kt.prototype._deserializeCollisionBoxesForSymbol=function(e,t,n,l,h,f,y,x,S){for(var E={},C=t;C<n;C++){var I=e.get(C);E.textBox={x1:I.x1,y1:I.y1,x2:I.x2,y2:I.y2,anchorPointX:I.anchorPointX,anchorPointY:I.anchorPointY},E.textFeatureIndex=I.featureIndex;break}for(var A=l;A<h;A++){var D=e.get(A);E.verticalTextBox={x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,anchorPointX:D.anchorPointX,anchorPointY:D.anchorPointY},E.verticalTextFeatureIndex=D.featureIndex;break}for(var j=f;j<y;j++){var q=e.get(j);E.iconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},E.iconFeatureIndex=q.featureIndex;break}for(var Y=x;Y<S;Y++){var X=e.get(Y);E.verticalIconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},E.verticalIconFeatureIndex=X.featureIndex;break}return E},Kt.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},Kt.prototype.hasTextData=function(){return this.text.segments.get().length>0},Kt.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Kt.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Kt.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Kt.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Kt.prototype.addIndicesForPlacedSymbol=function(e,t){for(var n=e.placedSymbolArray.get(t),l=n.vertexStartIndex+4*n.numGlyphs,h=n.vertexStartIndex;h<l;h+=4)e.indexArray.emplaceBack(h,h+1,h+2),e.indexArray.emplaceBack(h+1,h+2,h+3)},Kt.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),l=[],h=[],f=[],y=0;y<this.symbolInstances.length;++y){f.push(y);var x=this.symbolInstances.get(y);l.push(0|Math.round(t*x.anchorX+n*x.anchorY)),h.push(x.featureIndex)}return f.sort(function(S,E){return l[S]-l[E]||h[E]-h[S]}),f},Kt.prototype.addToSortKeyRanges=function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},Kt.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,l=this.symbolInstanceIndexes;n<l.length;n+=1){var h=this.symbolInstances.get(l[n]);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach(function(f,y,x){f>=0&&x.indexOf(f)===y&&t.addIndicesForPlacedSymbol(t.text,f)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ze("SymbolBucket",Kt,{omit:["layers","collisionBoxArray","features","compareText"]}),Kt.MAX_GLYPHS=65535,Kt.addDynamicAttributes=xm;var Gw=new un({"symbol-placement":new Qe(O.layout_symbol["symbol-placement"]),"symbol-spacing":new Qe(O.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Qe(O.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Xe(O.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Qe(O.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Qe(O.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Qe(O.layout_symbol["icon-ignore-placement"]),"icon-optional":new Qe(O.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Qe(O.layout_symbol["icon-rotation-alignment"]),"icon-size":new Xe(O.layout_symbol["icon-size"]),"icon-text-fit":new Qe(O.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Qe(O.layout_symbol["icon-text-fit-padding"]),"icon-image":new Xe(O.layout_symbol["icon-image"]),"icon-rotate":new Xe(O.layout_symbol["icon-rotate"]),"icon-padding":new Qe(O.layout_symbol["icon-padding"]),"icon-keep-upright":new Qe(O.layout_symbol["icon-keep-upright"]),"icon-offset":new Xe(O.layout_symbol["icon-offset"]),"icon-anchor":new Xe(O.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Qe(O.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Qe(O.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Qe(O.layout_symbol["text-rotation-alignment"]),"text-field":new Xe(O.layout_symbol["text-field"]),"text-font":new Xe(O.layout_symbol["text-font"]),"text-size":new Xe(O.layout_symbol["text-size"]),"text-max-width":new Xe(O.layout_symbol["text-max-width"]),"text-line-height":new Qe(O.layout_symbol["text-line-height"]),"text-letter-spacing":new Xe(O.layout_symbol["text-letter-spacing"]),"text-justify":new Xe(O.layout_symbol["text-justify"]),"text-radial-offset":new Xe(O.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Qe(O.layout_symbol["text-variable-anchor"]),"text-anchor":new Xe(O.layout_symbol["text-anchor"]),"text-max-angle":new Qe(O.layout_symbol["text-max-angle"]),"text-writing-mode":new Qe(O.layout_symbol["text-writing-mode"]),"text-rotate":new Xe(O.layout_symbol["text-rotate"]),"text-padding":new Qe(O.layout_symbol["text-padding"]),"text-keep-upright":new Qe(O.layout_symbol["text-keep-upright"]),"text-transform":new Xe(O.layout_symbol["text-transform"]),"text-offset":new Xe(O.layout_symbol["text-offset"]),"text-allow-overlap":new Qe(O.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Qe(O.layout_symbol["text-ignore-placement"]),"text-optional":new Qe(O.layout_symbol["text-optional"])}),wm={paint:new un({"icon-opacity":new Xe(O.paint_symbol["icon-opacity"]),"icon-color":new Xe(O.paint_symbol["icon-color"]),"icon-halo-color":new Xe(O.paint_symbol["icon-halo-color"]),"icon-halo-width":new Xe(O.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Xe(O.paint_symbol["icon-halo-blur"]),"icon-translate":new Qe(O.paint_symbol["icon-translate"]),"icon-translate-anchor":new Qe(O.paint_symbol["icon-translate-anchor"]),"text-opacity":new Xe(O.paint_symbol["text-opacity"]),"text-color":new Xe(O.paint_symbol["text-color"],{runtimeType:Re,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new Xe(O.paint_symbol["text-halo-color"]),"text-halo-width":new Xe(O.paint_symbol["text-halo-width"]),"text-halo-blur":new Xe(O.paint_symbol["text-halo-blur"]),"text-translate":new Qe(O.paint_symbol["text-translate"]),"text-translate-anchor":new Qe(O.paint_symbol["text-translate-anchor"])}),layout:Gw},du=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Ge,this.defaultValue=e};du.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},du.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},du.prototype.outputDefined=function(){return!1},du.prototype.serialize=function(){return null},Ze("FormatSectionOverride",du,{omit:["defaultValue"]});var Zw=function(e){function t(n){e.call(this,n,wm)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(n,l){if(e.prototype.recalculate.call(this,n,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var h=this.layout.get("text-writing-mode");if(h){for(var f=[],y=0,x=h;y<x.length;y+=1){var S=x[y];f.indexOf(S)<0&&f.push(S)}this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(n,l,h,f){var y=this.layout.get(n).evaluate(l,{},h,f),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Ws(x.value)||!y?y:function(S,E){return E.replace(/{([^{}]+)}/g,function(C,I){return I in S?String(S[I]):""})}(l.properties,y)},t.prototype.createBucket=function(n){return new Kt(n)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var n=0,l=wm.paint.overridableProperties;n<l.length;n+=1){var h=l[n];if(t.hasPaintOverride(this.layout,h)){var f,y=this.paint.get(h),x=new du(y),S=new Ja(x,y.property.specification);f=y.value.kind==="constant"||y.value.kind==="source"?new Xs("source",S):new Qa("composite",S,y.value.zoomStops,y.value._interpolationType),this.paint._values[h]=new Sn(y.property,f,y.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(n,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&t.hasPaintOverride(this.layout,n)},t.hasPaintOverride=function(n,l){var h=n.get("text-field"),f=wm.paint.properties[l],y=!1,x=function(C){for(var I=0,A=C;I<A.length;I+=1)if(f.overrides&&f.overrides.hasOverride(A[I]))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Xr)x(h.value.value.sections);else if(h.value.kind==="source"){var S=function(C){y||(C instanceof wn&&Er(C.value)===Yt?x(C.value.sections):C instanceof Fi?x(C.sections):C.eachChild(S))},E=h.value;E._styleExpression&&S(E._styleExpression.expression)}return y},t}(eo),Hw={paint:new un({"background-color":new Qe(O.paint_background["background-color"]),"background-pattern":new En(O.paint_background["background-pattern"]),"background-opacity":new Qe(O.paint_background["background-opacity"])})},Ww=function(e){function t(n){e.call(this,n,Hw)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(eo),Xw={paint:new un({"raster-opacity":new Qe(O.paint_raster["raster-opacity"]),"raster-hue-rotate":new Qe(O.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Qe(O.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Qe(O.paint_raster["raster-brightness-max"]),"raster-saturation":new Qe(O.paint_raster["raster-saturation"]),"raster-contrast":new Qe(O.paint_raster["raster-contrast"]),"raster-resampling":new Qe(O.paint_raster["raster-resampling"]),"raster-fade-duration":new Qe(O.paint_raster["raster-fade-duration"])})},$w=function(e){function t(n){e.call(this,n,Xw)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(eo),Kw=function(e){function t(n){e.call(this,n,{}),this.implementation=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},t.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)},t.prototype.onRemove=function(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)},t}(eo),Yw={circle:om,heatmap:D2,hillshade:O2,fill:Q2,"fill-extrusion":lw,line:dw,symbol:Zw,background:Ww,raster:$w},Gg=te.HTMLImageElement,Zg=te.HTMLCanvasElement,Hg=te.HTMLVideoElement,Wg=te.ImageData,Hh=te.ImageBitmap,pl=function(e,t,n,l){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,l)};pl.prototype.update=function(e,t,n){var l=e.width,h=e.height,f=!(this.size&&this.size[0]===l&&this.size[1]===h||n),y=this.context,x=y.gl;if(this.useMipmap=!!(t&&t.useMipmap),x.bindTexture(x.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA&&(!t||t.premultiply!==!1)),f)this.size=[l,h],e instanceof Gg||e instanceof Zg||e instanceof Hg||e instanceof Wg||Hh&&e instanceof Hh?x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,x.UNSIGNED_BYTE,e):x.texImage2D(x.TEXTURE_2D,0,this.format,l,h,0,this.format,x.UNSIGNED_BYTE,e.data);else{var S=n||{x:0,y:0},E=S.x,C=S.y;e instanceof Gg||e instanceof Zg||e instanceof Hg||e instanceof Wg||Hh&&e instanceof Hh?x.texSubImage2D(x.TEXTURE_2D,0,E,C,x.RGBA,x.UNSIGNED_BYTE,e):x.texSubImage2D(x.TEXTURE_2D,0,E,C,l,h,x.RGBA,x.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&x.generateMipmap(x.TEXTURE_2D)},pl.prototype.bind=function(e,t,n){var l=this.context.gl;l.bindTexture(l.TEXTURE_2D,this.texture),n!==l.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=l.LINEAR),e!==this.filter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,t),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,t),this.wrap=t)},pl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},pl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var bm=function(e){var t=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};bm.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},bm.prototype.remove=function(){delete this._channel,this._callback=function(){}};var mu=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Je(["receive","process"],this),this.invoker=new bm(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=yr()?e:te};function Xg(e,t,n){var l=2*Math.PI*6378137/256/Math.pow(2,n);return[e*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}mu.prototype.send=function(e,t,n,l,h){var f=this;h===void 0&&(h=!1);var y=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[y]=n);var x=gt(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:e,hasCallback:!!n,targetMapId:l,mustQueue:h,sourceMapId:this.mapId,data:Ui(t,x)},x),{cancel:function(){n&&delete f.callbacks[y],f.target.postMessage({id:y,type:"<cancel>",targetMapId:l,sourceMapId:f.mapId})}}},mu.prototype.receive=function(e){var t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[n];var l=this.cancelCallbacks[n];delete this.cancelCallbacks[n],l&&l()}else yr()||t.mustQueue?(this.tasks[n]=t,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,t)},mu.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},mu.prototype.processTask=function(e,t){var n=this;if(t.type==="<response>"){var l=this.callbacks[e];delete this.callbacks[e],l&&(t.error?l($n(t.error)):l(null,$n(t.data)))}else{var h=!1,f=gt(this.globalScope)?void 0:[],y=t.hasCallback?function(C,I){h=!0,delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:C?Ui(C):null,data:Ui(I,f)},f)}:function(C){h=!0},x=null,S=$n(t.data);if(this.parent[t.type])x=this.parent[t.type](t.sourceMapId,S,y);else if(this.parent.getWorkerSource){var E=t.type.split(".");x=this.parent.getWorkerSource(t.sourceMapId,E[0],S.source)[E[1]](S,y)}else y(new Error("Could not find function "+t.type));!h&&x&&x.cancel&&(this.cancelCallbacks[e]=x.cancel)}},mu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Br=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Br.prototype.setNorthEast=function(e){return this._ne=e instanceof lr?new lr(e.lng,e.lat):lr.convert(e),this},Br.prototype.setSouthWest=function(e){return this._sw=e instanceof lr?new lr(e.lng,e.lat):lr.convert(e),this},Br.prototype.extend=function(e){var t,n,l=this._sw,h=this._ne;if(e instanceof lr)t=e,n=e;else{if(!(e instanceof Br))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Br.convert(e)):this.extend(lr.convert(e)):this;if(n=e._ne,!(t=e._sw)||!n)return this}return l||h?(l.lng=Math.min(t.lng,l.lng),l.lat=Math.min(t.lat,l.lat),h.lng=Math.max(n.lng,h.lng),h.lat=Math.max(n.lat,h.lat)):(this._sw=new lr(t.lng,t.lat),this._ne=new lr(n.lng,n.lat)),this},Br.prototype.getCenter=function(){return new lr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Br.prototype.getSouthWest=function(){return this._sw},Br.prototype.getNorthEast=function(){return this._ne},Br.prototype.getNorthWest=function(){return new lr(this.getWest(),this.getNorth())},Br.prototype.getSouthEast=function(){return new lr(this.getEast(),this.getSouth())},Br.prototype.getWest=function(){return this._sw.lng},Br.prototype.getSouth=function(){return this._sw.lat},Br.prototype.getEast=function(){return this._ne.lng},Br.prototype.getNorth=function(){return this._ne.lat},Br.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Br.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Br.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Br.prototype.contains=function(e){var t=lr.convert(e),n=t.lng,l=t.lat,h=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&h},Br.convert=function(e){return!e||e instanceof Br?e:new Br(e)};var lr=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};lr.prototype.wrap=function(){return new lr(ae(this.lng,-180,180),this.lat)},lr.prototype.toArray=function(){return[this.lng,this.lat]},lr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},lr.prototype.distanceTo=function(e){var t=Math.PI/180,n=this.lat*t,l=e.lat*t,h=Math.sin(n)*Math.sin(l)+Math.cos(n)*Math.cos(l)*Math.cos((e.lng-this.lng)*t);return 63710088e-1*Math.acos(Math.min(h,1))},lr.prototype.toBounds=function(e){e===void 0&&(e=0);var t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new Br(new lr(this.lng-n,this.lat-t),new lr(this.lng+n,this.lat+t))},lr.convert=function(e){if(e instanceof lr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new lr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new lr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var $g=2*Math.PI*63710088e-1;function Kg(e){return $g*Math.cos(e*Math.PI/180)}function Yg(e){return(180+e)/360}function Jg(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Qg(e,t){return e/Kg(t)}function Sm(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var hl=function(e,t,n){n===void 0&&(n=0),this.x=+e,this.y=+t,this.z=+n};hl.fromLngLat=function(e,t){t===void 0&&(t=0);var n=lr.convert(e);return new hl(Yg(n.lng),Jg(n.lat),Qg(t,n.lat))},hl.prototype.toLngLat=function(){return new lr(360*this.x-180,Sm(this.y))},hl.prototype.toAltitude=function(){return this.z*Kg(Sm(this.y))},hl.prototype.meterInMercatorCoordinateUnits=function(){return 1/$g*(e=Sm(this.y),1/Math.cos(e*Math.PI/180));var e};var fl=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=Uc(0,e,e,t,n)};fl.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},fl.prototype.url=function(e,t){var n,l,h,f,y,x=(l=this.y,h=this.z,f=Xg(256*(n=this.x),256*(l=Math.pow(2,h)-l-1),h),y=Xg(256*(n+1),256*(l+1),h),f[0]+","+f[1]+","+y[0]+","+y[1]),S=function(E,C,I){for(var A,D="",j=E;j>0;j--)D+=(C&(A=1<<j-1)?1:0)+(I&A?2:0);return D}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(t==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",S).replace("{bbox-epsg-3857}",x)},fl.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new oe(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},fl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var ev=function(e,t){this.wrap=e,this.canonical=t,this.key=Uc(e,t.z,t.z,t.x,t.y)},Fr=function(e,t,n,l,h){this.overscaledZ=e,this.wrap=t,this.canonical=new fl(n,+l,+h),this.key=Uc(t,e,n,l,h)};function Uc(e,t,n,l,h){(e*=2)<0&&(e=-1*e-1);var f=1<<n;return(f*f*e+f*h+l).toString(36)+n.toString(36)+t.toString(36)}Fr.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Fr.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Fr(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Fr(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Fr.prototype.calculateScaledKey=function(e,t){var n=this.canonical.z-e;return e>this.canonical.z?Uc(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Uc(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)},Fr.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Fr.prototype.children=function(e){if(this.overscaledZ>=e)return[new Fr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,l=2*this.canonical.y;return[new Fr(t,this.wrap,t,n,l),new Fr(t,this.wrap,t,n+1,l),new Fr(t,this.wrap,t,n,l+1),new Fr(t,this.wrap,t,n+1,l+1)]},Fr.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Fr.prototype.wrapped=function(){return new Fr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Fr.prototype.unwrapTo=function(e){return new Fr(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Fr.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Fr.prototype.toUnwrapped=function(){return new ev(this.wrap,this.canonical)},Fr.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Fr.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new hl(e.x-this.wrap,e.y))},Ze("CanonicalTileID",fl),Ze("OverscaledTileID",Fr,{omit:["posMatrix"]});var za=function(e,t,n){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&n!=="mapbox"&&n!=="terrarium")return Nt('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var l=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=n||"mapbox";for(var h=0;h<l;h++)this.data[this._idx(-1,h)]=this.data[this._idx(0,h)],this.data[this._idx(l,h)]=this.data[this._idx(l-1,h)],this.data[this._idx(h,-1)]=this.data[this._idx(h,0)],this.data[this._idx(h,l)]=this.data[this._idx(h,l-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(l,-1)]=this.data[this._idx(l-1,0)],this.data[this._idx(-1,l)]=this.data[this._idx(0,l-1)],this.data[this._idx(l,l)]=this.data[this._idx(l-1,l-1)]};za.prototype.get=function(e,t){var n=new Uint8Array(this.data.buffer),l=4*this._idx(e,t);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(n[l],n[l+1],n[l+2])},za.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},za.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},za.prototype._unpackMapbox=function(e,t,n){return(256*e*256+256*t+n)/10-1e4},za.prototype._unpackTerrarium=function(e,t,n){return 256*e+t+n/256-32768},za.prototype.getPixels=function(){return new ei({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},za.prototype.backfillBorder=function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var l=t*this.dim,h=t*this.dim+this.dim,f=n*this.dim,y=n*this.dim+this.dim;switch(t){case-1:l=h-1;break;case 1:h=l+1}switch(n){case-1:f=y-1;break;case 1:y=f+1}for(var x=-t*this.dim,S=-n*this.dim,E=f;E<y;E++)for(var C=l;C<h;C++)this.data[this._idx(C,E)]=e.data[this._idx(C+x,E+S)]},Ze("DEMData",za);var Wh=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}};Wh.prototype.encode=function(e){return this._stringToNumber[e]},Wh.prototype.decode=function(e){return this._numberToString[e]};var Xh=function(e,t,n,l,h){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=l,this.properties=e.properties,this.id=h},Em={geometry:{configurable:!0}};Em.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Em.geometry.set=function(e){this._geometry=e},Xh.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)t!=="_geometry"&&t!=="_vectorTileFeature"&&(e[t]=this[t]);return e},Object.defineProperties(Xh.prototype,Em);var yu=function(){this.state={},this.stateChanges={},this.deletedStates={}};yu.prototype.updateState=function(e,t,n){var l=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][l]=this.stateChanges[e][l]||{},J(this.stateChanges[e][l],n),this.deletedStates[e]===null)for(var h in this.deletedStates[e]={},this.state[e])h!==l&&(this.deletedStates[e][h]=null);else if(this.deletedStates[e]&&this.deletedStates[e][l]===null)for(var f in this.deletedStates[e][l]={},this.state[e][l])n[f]||(this.deletedStates[e][l][f]=null);else for(var y in n)this.deletedStates[e]&&this.deletedStates[e][l]&&this.deletedStates[e][l][y]===null&&delete this.deletedStates[e][l][y]},yu.prototype.removeFeatureState=function(e,t,n){if(this.deletedStates[e]!==null){var l=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&t!==void 0)this.deletedStates[e][l]!==null&&(this.deletedStates[e][l]=this.deletedStates[e][l]||{},this.deletedStates[e][l][n]=null);else if(t!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][l])for(n in this.deletedStates[e][l]={},this.stateChanges[e][l])this.deletedStates[e][l][n]=null;else this.deletedStates[e][l]=null;else this.deletedStates[e]=null}},yu.prototype.getState=function(e,t){var n=String(t),l=J({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var h=this.deletedStates[e][t];if(h===null)return{};for(var f in h)delete l[f]}return l},yu.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},yu.prototype.coalesceChanges=function(e,t){var n={};for(var l in this.stateChanges){this.state[l]=this.state[l]||{};var h={};for(var f in this.stateChanges[l])this.state[l][f]||(this.state[l][f]={}),J(this.state[l][f],this.stateChanges[l][f]),h[f]=this.state[l][f];n[l]=h}for(var y in this.deletedStates){this.state[y]=this.state[y]||{};var x={};if(this.deletedStates[y]===null)for(var S in this.state[y])x[S]={},this.state[y][S]={};else for(var E in this.deletedStates[y]){if(this.deletedStates[y][E]===null)this.state[y][E]={};else for(var C=0,I=Object.keys(this.deletedStates[y][E]);C<I.length;C+=1)delete this.state[y][E][I[C]];x[E]=this.state[y][E]}n[y]=n[y]||{},J(n[y],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(n).length!==0)for(var A in e)e[A].setFeatureState(n,t)};var Aa=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new mo(8192,16,0),this.grid3D=new mo(8192,16,0),this.featureIndexArray=new P,this.promoteId=t};function tv(e,t,n,l,h){return It(e,function(f,y){var x=t instanceof nl?t.get(y):null;return x&&x.evaluate?x.evaluate(n,l,h):x})}function rv(e){for(var t=1/0,n=1/0,l=-1/0,h=-1/0,f=0,y=e;f<y.length;f+=1){var x=y[f];t=Math.min(t,x.x),n=Math.min(n,x.y),l=Math.max(l,x.x),h=Math.max(h,x.y)}return{minX:t,minY:n,maxX:l,maxY:h}}function Jw(e,t){return t-e}Aa.prototype.insert=function(e,t,n,l,h,f){var y=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,l,h);for(var x=f?this.grid3D:this.grid,S=0;S<t.length;S++){for(var E=t[S],C=[1/0,1/0,-1/0,-1/0],I=0;I<E.length;I++){var A=E[I];C[0]=Math.min(C[0],A.x),C[1]=Math.min(C[1],A.y),C[2]=Math.max(C[2],A.x),C[3]=Math.max(C[3],A.y)}C[0]<8192&&C[1]<8192&&C[2]>=0&&C[3]>=0&&x.insert(y,C[0],C[1],C[2],C[3])}},Aa.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new au.VectorTile(new Oh(this.rawTileData)).layers,this.sourceLayerCoder=new Wh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Aa.prototype.query=function(e,t,n,l){var h=this;this.loadVTLayers();for(var f=e.params||{},y=8192/e.tileSize/e.scale,x=ql(f.filter),S=e.queryGeometry,E=e.queryPadding*y,C=rv(S),I=this.grid.query(C.minX-E,C.minY-E,C.maxX+E,C.maxY+E),A=rv(e.cameraQueryGeometry),D=this.grid3D.query(A.minX-E,A.minY-E,A.maxX+E,A.maxY+E,function(pe,fe,_e,Ce){return function(Ae,Ye,Be,tt,Ne){for(var xt=0,ut=Ae;xt<ut.length;xt+=1){var $e=ut[xt];if(Ye<=$e.x&&Be<=$e.y&&tt>=$e.x&&Ne>=$e.y)return!0}var St=[new oe(Ye,Be),new oe(Ye,Ne),new oe(tt,Ne),new oe(tt,Be)];if(Ae.length>2){for(var mt=0,Mt=St;mt<Mt.length;mt+=1)if(ro(Ae,Mt[mt]))return!0}for(var nt=0;nt<Ae.length-1;nt++)if(ll(Ae[nt],Ae[nt+1],St))return!0;return!1}(e.cameraQueryGeometry,pe-E,fe-E,_e+E,Ce+E)}),j=0,q=D;j<q.length;j+=1)I.push(q[j]);I.sort(Jw);for(var Y,X={},ie=function(pe){var fe=I[pe];if(fe!==Y){Y=fe;var _e=h.featureIndexArray.get(fe),Ce=null;h.loadMatchingFeature(X,_e.bucketIndex,_e.sourceLayerIndex,_e.featureIndex,x,f.layers,f.availableImages,t,n,l,function(Ae,Ye,Be){return Ce||(Ce=fr(Ae)),Ye.queryIntersectsFeature(S,Ae,Be,Ce,h.z,e.transform,y,e.pixelPosMatrix)})}},ce=0;ce<I.length;ce++)ie(ce);return X},Aa.prototype.loadMatchingFeature=function(e,t,n,l,h,f,y,x,S,E,C){var I=this.bucketLayerIDs[t];if(!f||function(Ae,Ye){for(var Be=0;Be<Ae.length;Be++)if(Ye.indexOf(Ae[Be])>=0)return!0;return!1}(f,I)){var A=this.sourceLayerCoder.decode(n),D=this.vtLayers[A].feature(l);if(h.needGeometry){var j=Tr(D,!0);if(!h.filter(new Tt(this.tileID.overscaledZ),j,this.tileID.canonical))return}else if(!h.filter(new Tt(this.tileID.overscaledZ),D))return;for(var q=this.getId(D,A),Y=0;Y<I.length;Y++){var X=I[Y];if(!(f&&f.indexOf(X)<0)){var ie=x[X];if(ie){var ce={};q!==void 0&&E&&(ce=E.getState(ie.sourceLayer||"_geojsonTileLayer",q));var pe=J({},S[X]);pe.paint=tv(pe.paint,ie.paint,D,ce,y),pe.layout=tv(pe.layout,ie.layout,D,ce,y);var fe=!C||C(D,ie,ce);if(fe){var _e=new Xh(D,this.z,this.x,this.y,q);_e.layer=pe;var Ce=e[X];Ce===void 0&&(Ce=e[X]=[]),Ce.push({featureIndex:l,feature:_e,intersectionZ:fe})}}}}}},Aa.prototype.lookupSymbolFeatures=function(e,t,n,l,h,f,y,x){var S={};this.loadVTLayers();for(var E=ql(h),C=0,I=e;C<I.length;C+=1)this.loadMatchingFeature(S,n,l,I[C],E,f,y,x,t);return S},Aa.prototype.hasLayer=function(e){for(var t=0,n=this.bucketLayerIDs;t<n.length;t+=1)for(var l=0,h=n[t];l<h.length;l+=1)if(e===h[l])return!0;return!1},Aa.prototype.getId=function(e,t){var n=e.id;return this.promoteId&&typeof(n=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[t]])=="boolean"&&(n=Number(n)),n},Ze("FeatureIndex",Aa,{omit:["rawTileData","sourceLayerCoder"]});var Jr=function(e,t){this.tileID=e,this.uid=xe(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Jr.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<vi.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Jr.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Jr.prototype.loadVectorData=function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var l in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(E,C){var I={};if(!C)return I;for(var A=function(){var q=j[D],Y=q.layerIds.map(function(ce){return C.getLayer(ce)}).filter(Boolean);if(Y.length!==0){q.layers=Y,q.stateDependentLayerIds&&(q.stateDependentLayers=q.stateDependentLayerIds.map(function(ce){return Y.filter(function(pe){return pe.id===ce})[0]}));for(var X=0,ie=Y;X<ie.length;X+=1)I[ie[X].id]=q}},D=0,j=E;D<j.length;D+=1)A();return I}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var h=this.buckets[l];if(h instanceof Kt){if(this.hasSymbolBuckets=!0,!n)break;h.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var f in this.buckets){var y=this.buckets[f];if(y instanceof Kt&&y.hasRTLText){this.hasRTLText=!0,ci.isLoading()||ci.isLoaded()||Sc()!=="deferred"||Vi();break}}for(var x in this.queryPadding=0,this.buckets){var S=this.buckets[x];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(x).queryRadius(S))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new s},Jr.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Jr.prototype.getBucket=function(e){return this.buckets[e.id]},Jr.prototype.upload=function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var l=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new pl(e,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new pl(e,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)},Jr.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Jr.prototype.queryRenderedFeatures=function(e,t,n,l,h,f,y,x,S,E){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:l,cameraQueryGeometry:h,scale:f,tileSize:this.tileSize,pixelPosMatrix:E,transform:x,params:y,queryPadding:this.queryPadding*S},e,t,n):{}},Jr.prototype.querySourceFeatures=function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var l=n.loadVTLayers(),h=t?t.sourceLayer:"",f=l._geojsonTileLayer||l[h];if(f)for(var y=ql(t&&t.filter),x=this.tileID.canonical,S=x.z,E=x.x,C=x.y,I={z:S,x:E,y:C},A=0;A<f.length;A++){var D=f.feature(A);if(y.needGeometry){var j=Tr(D,!0);if(!y.filter(new Tt(this.tileID.overscaledZ),j,this.tileID.canonical))continue}else if(!y.filter(new Tt(this.tileID.overscaledZ),D))continue;var q=n.getId(D,h),Y=new Xh(D,S,E,C,q);Y.tile=I,e.push(Y)}}},Jr.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Jr.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Jr.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=Mn(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var l=Date.now(),h=!1;if(this.expirationTime>l)h=!1;else if(t)if(this.expirationTime<t)h=!0;else{var f=this.expirationTime-t;f?this.expirationTime=l+Math.max(f,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Jr.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Jr.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var n=this.latestFeatureIndex.loadVTLayers();for(var l in this.buckets)if(t.style.hasLayer(l)){var h=this.buckets[l],f=h.layers[0].sourceLayer||"_geojsonTileLayer",y=n[f],x=e[f];if(y&&x&&Object.keys(x).length!==0){h.update(x,y,this.imageAtlas&&this.imageAtlas.patternPositions||{});var S=t&&t.style&&t.style.getLayer(l);S&&(this.queryPadding=Math.max(this.queryPadding,S.queryRadius(h)))}}}},Jr.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Jr.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<vi.now()},Jr.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Jr.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=vi.now()+e},Jr.prototype.setDependencies=function(e,t){for(var n={},l=0,h=t;l<h.length;l+=1)n[h[l]]=!0;this.dependencies[e]=n},Jr.prototype.hasDependency=function(e,t){for(var n=0,l=e;n<l.length;n+=1){var h=this.dependencies[l[n]];if(h){for(var f=0,y=t;f<y.length;f+=1)if(h[y[f]])return!0}}return!1};var cs=te.performance,nv=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},cs.mark(this._marks.start)};nv.prototype.finish=function(){cs.mark(this._marks.end);var e=cs.getEntriesByName(this._marks.measure);return e.length===0&&(cs.measure(this._marks.measure,this._marks.start,this._marks.end),e=cs.getEntriesByName(this._marks.measure),cs.clearMarks(this._marks.start),cs.clearMarks(this._marks.end),cs.clearMeasures(this._marks.measure)),e},c.Actor=mu,c.AlphaImage=cl,c.CanonicalTileID=fl,c.CollisionBoxArray=s,c.Color=Vt,c.DEMData=za,c.DataConstantProperty=Qe,c.DictionaryCoder=Wh,c.EXTENT=8192,c.ErrorEvent=Q,c.EvaluationParameters=Tt,c.Event=Z,c.Evented=ne,c.FeatureIndex=Aa,c.FillBucket=_o,c.FillExtrusionBucket=xo,c.ImageAtlas=Fc,c.ImagePosition=Fh,c.LineBucket=Fn,c.LngLat=lr,c.LngLatBounds=Br,c.MercatorCoordinate=hl,c.ONE_EM=24,c.OverscaledTileID=Fr,c.Point=oe,c.Point$1=oe,c.Properties=un,c.Protobuf=Oh,c.RGBAImage=ei,c.RequestManager=on,c.RequestPerformance=nv,c.ResourceType=Dl,c.SegmentVector=B,c.SourceFeatureState=yu,c.StructArrayLayout1ui2=Pc,c.StructArrayLayout2f1f2i16=Ca,c.StructArrayLayout2i4=Ta,c.StructArrayLayout3ui6=jo,c.StructArrayLayout4i8=Tc,c.SymbolBucket=Kt,c.Texture=pl,c.Tile=Jr,c.Transitionable=ln,c.Uniform1f=ze,c.Uniform1i=we,c.Uniform2f=Ie,c.Uniform3f=je,c.Uniform4f=et,c.UniformColor=ot,c.UniformMatrix4f=Dt,c.UnwrappedTileID=ev,c.ValidationError=W,c.WritingMode=ki,c.ZoomHistory=_c,c.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},c.addDynamicAttributes=xm,c.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var l=e.length,h=new Array(e.length),f=null;e.forEach(function(y,x){t(y,function(S,E){S&&(f=S),h[x]=E,--l==0&&n(f,h)})})},c.bezier=Me,c.bindAll=Je,c.browser=vi,c.cacheEntryPossiblyAdded=function(e){++Bs>Ll&&(e.getActor().send("enforceCacheSizeLimit",Ha),Bs=0)},c.clamp=at,c.clearTileCache=function(e){var t=te.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},c.clipLine=Fg,c.clone=function(e){var t=new jt(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},c.clone$1=tr,c.clone$2=function(e){var t=new jt(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},c.collisionCircleLayout=vw,c.config=Wt,c.create=function(){var e=new jt(16);return jt!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},c.create$1=function(){var e=new jt(9);return jt!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},c.create$2=function(){var e=new jt(4);return jt!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},c.createCommonjsModule=F,c.createExpression=Vl,c.createLayout=Kr,c.createStyleLayer=function(e){return e.type==="custom"?new Kw(e):new Yw[e.type](e)},c.cross=function(e,t,n){var l=t[0],h=t[1],f=t[2],y=n[0],x=n[1],S=n[2];return e[0]=h*S-f*x,e[1]=f*y-l*S,e[2]=l*x-h*y,e},c.deepEqual=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],n[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&n!==null){if(typeof n!="object"||Object.keys(t).length!==Object.keys(n).length)return!1;for(var h in t)if(!e(t[h],n[h]))return!1;return!0}return t===n},c.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},c.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},c.ease=ke,c.emitValidationErrors=el,c.endsWith=rt,c.enforceCacheSizeLimit=function(e){Wa(),xi&&xi.then(function(t){t.keys().then(function(n){for(var l=0;l<n.length-e;l++)t.delete(n[l])})})},c.evaluateSizeForFeature=Mg,c.evaluateSizeForZoom=Lg,c.evaluateVariableOffset=Vg,c.evented=bc,c.extend=J,c.featureFilter=ql,c.filterObject=yt,c.fromRotation=function(e,t){var n=Math.sin(t),l=Math.cos(t);return e[0]=l,e[1]=n,e[2]=0,e[3]=-n,e[4]=l,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},c.getAnchorAlignment=ym,c.getAnchorJustification=_m,c.getArrayBuffer=Ns,c.getImage=z,c.getJSON=function(e,t){return Xa(J(e,{type:"json"}),t)},c.getRTLTextPluginStatus=Sc,c.getReferrer=ua,c.getVideo=function(e,t){var n,l,h=te.document.createElement("video");h.muted=!0,h.onloadstart=function(){t(null,h)};for(var f=0;f<e.length;f++){var y=te.document.createElement("source");n=e[f],l=void 0,(l=te.document.createElement("a")).href=n,(l.protocol!==te.document.location.protocol||l.host!==te.document.location.host)&&(h.crossOrigin="Anonymous"),y.src=e[f],h.appendChild(y)}return{cancel:function(){}}},c.identity=pi,c.invert=function(e,t){var n=t[0],l=t[1],h=t[2],f=t[3],y=t[4],x=t[5],S=t[6],E=t[7],C=t[8],I=t[9],A=t[10],D=t[11],j=t[12],q=t[13],Y=t[14],X=t[15],ie=n*x-l*y,ce=n*S-h*y,pe=n*E-f*y,fe=l*S-h*x,_e=l*E-f*x,Ce=h*E-f*S,Ae=C*q-I*j,Ye=C*Y-A*j,Be=C*X-D*j,tt=I*Y-A*q,Ne=I*X-D*q,xt=A*X-D*Y,ut=ie*xt-ce*Ne+pe*tt+fe*Be-_e*Ye+Ce*Ae;return ut?(e[0]=(x*xt-S*Ne+E*tt)*(ut=1/ut),e[1]=(h*Ne-l*xt-f*tt)*ut,e[2]=(q*Ce-Y*_e+X*fe)*ut,e[3]=(A*_e-I*Ce-D*fe)*ut,e[4]=(S*Be-y*xt-E*Ye)*ut,e[5]=(n*xt-h*Be+f*Ye)*ut,e[6]=(Y*pe-j*Ce-X*ce)*ut,e[7]=(C*Ce-A*pe+D*ce)*ut,e[8]=(y*Ne-x*Be+E*Ae)*ut,e[9]=(l*Be-n*Ne-f*Ae)*ut,e[10]=(j*_e-q*pe+X*ie)*ut,e[11]=(I*pe-C*_e-D*ie)*ut,e[12]=(x*Ye-y*tt-S*Ae)*ut,e[13]=(n*tt-l*Ye+h*Ae)*ut,e[14]=(q*ce-j*fe-Y*ie)*ut,e[15]=(C*fe-I*ce+A*ie)*ut,e):null},c.isChar=De,c.isMapboxURL=vn,c.keysDifference=function(e,t){var n=[];for(var l in e)l in t||n.push(l);return n},c.makeRequest=Xa,c.mapObject=It,c.mercatorXfromLng=Yg,c.mercatorYfromLat=Jg,c.mercatorZfromAltitude=Qg,c.mul=im,c.multiply=Bn,c.mvt=au,c.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},c.normalize=function(e,t){var n=t[0],l=t[1],h=t[2],f=n*n+l*l+h*h;return f>0&&(f=1/Math.sqrt(f)),e[0]=t[0]*f,e[1]=t[1]*f,e[2]=t[2]*f,e},c.number=Ar,c.offscreenCanvasSupported=Fs,c.ortho=function(e,t,n,l,h,f,y){var x=1/(t-n),S=1/(l-h),E=1/(f-y);return e[0]=-2*x,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*S,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*E,e[11]=0,e[12]=(t+n)*x,e[13]=(h+l)*S,e[14]=(y+f)*E,e[15]=1,e},c.parseGlyphPBF=function(e){return new Oh(e).readFields(Pw,[])},c.pbf=Oh,c.performSymbolLayout=function(e,t,n,l,h,f,y){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var x=e.layers[0].layout,S=e.layers[0]._unevaluatedLayout._values,E={};if(e.textSizeData.kind==="composite"){var C=e.textSizeData,I=C.maxZoom;E.compositeTextSizes=[S["text-size"].possiblyEvaluate(new Tt(C.minZoom),y),S["text-size"].possiblyEvaluate(new Tt(I),y)]}if(e.iconSizeData.kind==="composite"){var A=e.iconSizeData,D=A.maxZoom;E.compositeIconSizes=[S["icon-size"].possiblyEvaluate(new Tt(A.minZoom),y),S["icon-size"].possiblyEvaluate(new Tt(D),y)]}E.layoutTextSize=S["text-size"].possiblyEvaluate(new Tt(e.zoom+1),y),E.layoutIconSize=S["icon-size"].possiblyEvaluate(new Tt(e.zoom+1),y),E.textMaxSize=S["text-size"].possiblyEvaluate(new Tt(18));for(var j=24*x.get("text-line-height"),q=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point",Y=x.get("text-keep-upright"),X=x.get("text-size"),ie=function(){var fe=pe[ce],_e=x.get("text-font").evaluate(fe,{},y).join(","),Ce=X.evaluate(fe,{},y),Ae=E.layoutTextSize.evaluate(fe,{},y),Ye=E.layoutIconSize.evaluate(fe,{},y),Be={horizontal:{},vertical:void 0},tt=fe.text,Ne=[0,0];if(tt){var xt=tt.toString(),ut=24*x.get("text-letter-spacing").evaluate(fe,{},y),$e=function(Ct){for(var Qt=0,Xt=Ct;Qt<Xt.length;Qt+=1)if(Rt=Xt[Qt].charCodeAt(0),De.Arabic(Rt)||De["Arabic Supplement"](Rt)||De["Arabic Extended-A"](Rt)||De["Arabic Presentation Forms-A"](Rt)||De["Arabic Presentation Forms-B"](Rt))return!1;var Rt;return!0}(xt)?ut:0,St=x.get("text-anchor").evaluate(fe,{},y),mt=x.get("text-variable-anchor");if(!mt){var Mt=x.get("text-radial-offset").evaluate(fe,{},y);Ne=Mt?Vg(St,[24*Mt,vm]):x.get("text-offset").evaluate(fe,{},y).map(function(Ct){return 24*Ct})}var nt=q?"center":x.get("text-justify").evaluate(fe,{},y),Bt=x.get("symbol-placement"),ur=Bt==="point"?24*x.get("text-max-width").evaluate(fe,{},y):0,_r=function(){e.allowVerticalPlacement&&xc(xt)&&(Be.vertical=Nh(tt,t,n,h,_e,ur,j,St,"left",$e,Ne,ki.vertical,!0,Bt,Ae,Ce))};if(!q&&mt){for(var dr=nt==="auto"?mt.map(function(Ct){return _m(Ct)}):[nt],cr=!1,xr=0;xr<dr.length;xr++){var Gr=dr[xr];if(!Be.horizontal[Gr])if(cr)Be.horizontal[Gr]=Be.horizontal[0];else{var Zr=Nh(tt,t,n,h,_e,ur,j,"center",Gr,$e,Ne,ki.horizontal,!1,Bt,Ae,Ce);Zr&&(Be.horizontal[Gr]=Zr,cr=Zr.positionedLines.length===1)}}_r()}else{nt==="auto"&&(nt=_m(St));var In=Nh(tt,t,n,h,_e,ur,j,St,nt,$e,Ne,ki.horizontal,!1,Bt,Ae,Ce);In&&(Be.horizontal[nt]=In),_r(),xc(xt)&&q&&Y&&(Be.vertical=Nh(tt,t,n,h,_e,ur,j,St,nt,$e,Ne,ki.vertical,!1,Bt,Ae,Ce))}}var Qr=void 0,kn=!1;if(fe.icon&&fe.icon.name){var Cr=l[fe.icon.name];Cr&&(Qr=function(Ct,Qt,Xt){var Rt=ym(Xt),Nn=Qt[0]-Ct.displaySize[0]*Rt.horizontalAlign,fn=Qt[1]-Ct.displaySize[1]*Rt.verticalAlign;return{image:Ct,top:fn,bottom:fn+Ct.displaySize[1],left:Nn,right:Nn+Ct.displaySize[0]}}(h[fe.icon.name],x.get("icon-offset").evaluate(fe,{},y),x.get("icon-anchor").evaluate(fe,{},y)),kn=Cr.sdf,e.sdfIcons===void 0?e.sdfIcons=Cr.sdf:e.sdfIcons!==Cr.sdf&&Nt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Cr.pixelRatio!==e.pixelRatio||x.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var en=qg(Be.horizontal)||Be.vertical;e.iconsInText=!!en&&en.iconsInText,(en||Qr)&&function(Ct,Qt,Xt,Rt,Nn,fn,or,Lr,dn,Ft,Xo){var Pi=fn.textMaxSize.evaluate(Qt,{});Pi===void 0&&(Pi=or);var $o,Ir=Ct.layers[0].layout,Ko=Ir.get("icon-offset").evaluate(Qt,{},Xo),io=qg(Xt.horizontal),gu=or/24,dl=Ct.tilePixelRatio*gu,vu=Ct.tilePixelRatio*Pi/24,Ma=Ct.tilePixelRatio*Lr,_u=Ct.tilePixelRatio*Ir.get("symbol-spacing"),$h=Ir.get("text-padding")*Ct.tilePixelRatio,xu=Ir.get("icon-padding")*Ct.tilePixelRatio,Vc=Ir.get("text-max-angle")/180*Math.PI,Kh=Ir.get("text-rotation-alignment")==="map"&&Ir.get("symbol-placement")!=="point",Yh=Ir.get("icon-rotation-alignment")==="map"&&Ir.get("symbol-placement")!=="point",La=Ir.get("symbol-placement"),jc=_u/2,wu=Ir.get("icon-text-fit");Rt&&wu!=="none"&&(Ct.allowVerticalPlacement&&Xt.vertical&&($o=Ag(Rt,Xt.vertical,wu,Ir.get("icon-text-fit-padding"),Ko,gu)),io&&(Rt=Ag(Rt,io,wu,Ir.get("icon-text-fit-padding"),Ko,gu)));var ps=function(Qw,Kc){Kc.x<0||Kc.x>=8192||Kc.y<0||Kc.y>=8192||function(kr,wo,e3,hs,km,av,nf,Yo,of,Yc,af,sf,Pm,sv,Jc,lv,uv,cv,pv,hv,zi,lf,fv,Jo,t3){var dv,yl,Cu,Iu,ku,Pu=kr.addToLineVertexArray(wo,e3),mv=0,yv=0,gv=0,vv=0,zm=-1,Am=-1,Da={},_v=V(""),Mm=0,Lm=0;if(Yo._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Mm=(dv=Yo.layout.get("text-offset").evaluate(zi,{},Jo).map(function(ep){return 24*ep}))[0],Lm=dv[1]):(Mm=24*Yo.layout.get("text-radial-offset").evaluate(zi,{},Jo),Lm=vm),kr.allowVerticalPlacement&&hs.vertical){var xv=Yo.layout.get("text-rotate").evaluate(zi,{},Jo)+90;Iu=new Gh(of,wo,Yc,af,sf,hs.vertical,Pm,sv,Jc,xv),nf&&(ku=new Gh(of,wo,Yc,af,sf,nf,uv,cv,Jc,xv))}if(km){var Dm=Yo.layout.get("icon-rotate").evaluate(zi,{}),wv=Yo.layout.get("icon-text-fit")!=="none",bv=Ng(km,Dm,fv,wv),Rm=nf?Ng(nf,Dm,fv,wv):void 0;Cu=new Gh(of,wo,Yc,af,sf,km,uv,cv,!1,Dm),mv=4*bv.length;var Sv=kr.iconSizeData,Qc=null;Sv.kind==="source"?(Qc=[128*Yo.layout.get("icon-size").evaluate(zi,{})])[0]>32640&&Nt(kr.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Sv.kind==="composite"&&((Qc=[128*lf.compositeIconSizes[0].evaluate(zi,{},Jo),128*lf.compositeIconSizes[1].evaluate(zi,{},Jo)])[0]>32640||Qc[1]>32640)&&Nt(kr.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),kr.addSymbols(kr.icon,bv,Qc,hv,pv,zi,!1,wo,Pu.lineStartIndex,Pu.lineLength,-1,Jo),zm=kr.icon.placedSymbolArray.length-1,Rm&&(yv=4*Rm.length,kr.addSymbols(kr.icon,Rm,Qc,hv,pv,zi,ki.vertical,wo,Pu.lineStartIndex,Pu.lineLength,-1,Jo),Am=kr.icon.placedSymbolArray.length-1)}for(var Ev in hs.horizontal){var uf=hs.horizontal[Ev];if(!yl){_v=V(uf.text);var r3=Yo.layout.get("text-rotate").evaluate(zi,{},Jo);yl=new Gh(of,wo,Yc,af,sf,uf,Pm,sv,Jc,r3)}var Tv=uf.positionedLines.length===1;if(gv+=jg(kr,wo,uf,av,Yo,Jc,zi,lv,Pu,hs.vertical?ki.horizontal:ki.horizontalOnly,Tv?Object.keys(hs.horizontal):[Ev],Da,zm,lf,Jo),Tv)break}hs.vertical&&(vv+=jg(kr,wo,hs.vertical,av,Yo,Jc,zi,lv,Pu,ki.vertical,["vertical"],Da,Am,lf,Jo));var n3=yl?yl.boxStartIndex:kr.collisionBoxArray.length,i3=yl?yl.boxEndIndex:kr.collisionBoxArray.length,o3=Iu?Iu.boxStartIndex:kr.collisionBoxArray.length,a3=Iu?Iu.boxEndIndex:kr.collisionBoxArray.length,s3=Cu?Cu.boxStartIndex:kr.collisionBoxArray.length,l3=Cu?Cu.boxEndIndex:kr.collisionBoxArray.length,u3=ku?ku.boxStartIndex:kr.collisionBoxArray.length,c3=ku?ku.boxEndIndex:kr.collisionBoxArray.length,Qo=-1,cf=function(ep,Iv){return ep&&ep.circleDiameter?Math.max(ep.circleDiameter,Iv):Iv};Qo=cf(yl,Qo),Qo=cf(Iu,Qo),Qo=cf(Cu,Qo);var Cv=(Qo=cf(ku,Qo))>-1?1:0;Cv&&(Qo*=t3/24),kr.glyphOffsetArray.length>=Kt.MAX_GLYPHS&&Nt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zi.sortKey!==void 0&&kr.addToSortKeyRanges(kr.symbolInstances.length,zi.sortKey),kr.symbolInstances.emplaceBack(wo.x,wo.y,Da.right>=0?Da.right:-1,Da.center>=0?Da.center:-1,Da.left>=0?Da.left:-1,Da.vertical||-1,zm,Am,_v,n3,i3,o3,a3,s3,l3,u3,c3,Yc,gv,vv,mv,yv,Cv,0,Pm,Mm,Lm,Qo)}(Ct,Kc,Qw,Xt,Rt,Nn,$o,Ct.layers[0],Ct.collisionBoxArray,Qt.index,Qt.sourceLayerIndex,Ct.index,dl,$h,Kh,dn,Ma,xu,Yh,Ko,Qt,fn,Ft,Xo,or)};if(La==="line")for(var bu=0,Jh=Fg(Qt.geometry,0,0,8192,8192);bu<Jh.length;bu+=1)for(var Qh=Jh[bu],qc=0,Gc=Ow(Qh,_u,Vc,Xt.vertical||io,Rt,24,vu,Ct.overscaling,8192);qc<Gc.length;qc+=1){var ef=Gc[qc];io&&Uw(Ct,io.text,jc,ef)||ps(Qh,ef)}else if(La==="line-center")for(var Zc=0,Hc=Qt.geometry;Zc<Hc.length;Zc+=1){var Wc=Hc[Zc];if(Wc.length>1){var tf=Rw(Wc,Vc,Xt.vertical||io,Rt,24,vu);tf&&ps(Wc,tf)}}else if(Qt.type==="Polygon")for(var Su=0,rf=pm(Qt.geometry,0);Su<rf.length;Su+=1){var Eu=rf[Su],Xc=Fw(Eu,16);ps(Eu[0],new cu(Xc.x,Xc.y,0))}else if(Qt.type==="LineString")for(var ml=0,$c=Qt.geometry;ml<$c.length;ml+=1){var Tu=$c[ml];ps(Tu,new cu(Tu[0].x,Tu[0].y,0))}else if(Qt.type==="Point")for(var Tm=0,iv=Qt.geometry;Tm<iv.length;Tm+=1)for(var Cm=0,ov=iv[Tm];Cm<ov.length;Cm+=1){var Im=ov[Cm];ps([Im],new cu(Im.x,Im.y,0))}}(e,fe,Be,Qr,l,E,Ae,Ye,Ne,kn,y)},ce=0,pe=e.features;ce<pe.length;ce+=1)ie();f&&e.generateCollisionDebugBuffers()},c.perspective=function(e,t,n,l,h){var f,y=1/Math.tan(t/2);return e[0]=y/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,h!=null&&h!==1/0?(e[10]=(h+l)*(f=1/(l-h)),e[14]=2*h*l*f):(e[10]=-1,e[14]=-2*l),e},c.pick=function(e,t){for(var n={},l=0;l<t.length;l++){var h=t[l];h in e&&(n[h]=e[h])}return n},c.plugin=ci,c.polygonIntersectsPolygon=Zo,c.postMapLoadEvent=Rs,c.postTurnstileEvent=Ml,c.potpack=Ig,c.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],c.register=Ze,c.registerForPluginStateChange=function(e){return e({pluginStatus:Yn,pluginURL:yo}),bc.on("pluginStateChange",e),e},c.renderColorRamp=lg,c.rotate=function(e,t,n){var l=t[0],h=t[1],f=t[2],y=t[3],x=Math.sin(n),S=Math.cos(n);return e[0]=l*S+f*x,e[1]=h*S+y*x,e[2]=l*-x+f*S,e[3]=h*-x+y*S,e},c.rotateX=function(e,t,n){var l=Math.sin(n),h=Math.cos(n),f=t[4],y=t[5],x=t[6],S=t[7],E=t[8],C=t[9],I=t[10],A=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=f*h+E*l,e[5]=y*h+C*l,e[6]=x*h+I*l,e[7]=S*h+A*l,e[8]=E*h-f*l,e[9]=C*h-y*l,e[10]=I*h-x*l,e[11]=A*h-S*l,e},c.rotateZ=function(e,t,n){var l=Math.sin(n),h=Math.cos(n),f=t[0],y=t[1],x=t[2],S=t[3],E=t[4],C=t[5],I=t[6],A=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=f*h+E*l,e[1]=y*h+C*l,e[2]=x*h+I*l,e[3]=S*h+A*l,e[4]=E*h-f*l,e[5]=C*h-y*l,e[6]=I*h-x*l,e[7]=A*h-S*l,e},c.scale=function(e,t,n){var l=n[0],h=n[1],f=n[2];return e[0]=t[0]*l,e[1]=t[1]*l,e[2]=t[2]*l,e[3]=t[3]*l,e[4]=t[4]*h,e[5]=t[5]*h,e[6]=t[6]*h,e[7]=t[7]*h,e[8]=t[8]*f,e[9]=t[9]*f,e[10]=t[10]*f,e[11]=t[11]*f,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},c.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},c.scale$2=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},c.setCacheLimits=function(e,t){Ha=e,Ll=t},c.setRTLTextPlugin=function(e,t,n){if(n===void 0&&(n=!1),Yn==="deferred"||Yn==="loading"||Yn==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");yo=vi.resolveURL(e),Yn="deferred",Kl=t,rl(),n||Vi()},c.sphericalToCartesian=function(e){var t=e[0],n=e[1],l=e[2];return n+=90,n*=Math.PI/180,l*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(l),y:t*Math.sin(n)*Math.sin(l),z:t*Math.cos(l)}},c.sqrLen=function(e){var t=e[0],n=e[1];return t*t+n*n},c.styleSpec=O,c.sub=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},c.symbolSize=Dw,c.transformMat3=function(e,t,n){var l=t[0],h=t[1],f=t[2];return e[0]=l*n[0]+h*n[3]+f*n[6],e[1]=l*n[1]+h*n[4]+f*n[7],e[2]=l*n[2]+h*n[5]+f*n[8],e},c.transformMat4=ru,c.translate=function(e,t,n){var l,h,f,y,x,S,E,C,I,A,D,j,q=n[0],Y=n[1],X=n[2];return t===e?(e[12]=t[0]*q+t[4]*Y+t[8]*X+t[12],e[13]=t[1]*q+t[5]*Y+t[9]*X+t[13],e[14]=t[2]*q+t[6]*Y+t[10]*X+t[14],e[15]=t[3]*q+t[7]*Y+t[11]*X+t[15]):(h=t[1],f=t[2],y=t[3],x=t[4],S=t[5],E=t[6],C=t[7],I=t[8],A=t[9],D=t[10],j=t[11],e[0]=l=t[0],e[1]=h,e[2]=f,e[3]=y,e[4]=x,e[5]=S,e[6]=E,e[7]=C,e[8]=I,e[9]=A,e[10]=D,e[11]=j,e[12]=l*q+x*Y+I*X+t[12],e[13]=h*q+S*Y+A*X+t[13],e[14]=f*q+E*Y+D*X+t[14],e[15]=y*q+C*Y+j*X+t[15]),e},c.triggerPluginCompletionEvent=Ph,c.uniqueId=xe,c.validateCustomStyleLayer=function(e){var t=[],n=e.id;return n===void 0&&t.push({message:"layers."+n+': missing required property "id"'}),e.render===void 0&&t.push({message:"layers."+n+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&t.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),t},c.validateLight=rm,c.validateStyle=Js,c.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},c.vectorTile=au,c.version="1.13.3",c.warnOnce=Nt,c.webpSupported=Ln,c.window=te,c.wrap=ae}),w(["./shared"],function(c){function F(k){var z=typeof k;if(z==="number"||z==="boolean"||z==="string"||k==null)return JSON.stringify(k);if(Array.isArray(k)){for(var L="[",U=0,Z=k;U<Z.length;U+=1)L+=F(Z[U])+",";return L+"]"}for(var Q=Object.keys(k).sort(),ne="{",O=0;O<Q.length;O++)ne+=JSON.stringify(Q[O])+":"+F(k[Q[O]])+",";return ne+"}"}function M(k){for(var z="",L=0,U=c.refProperties;L<U.length;L+=1)z+="/"+F(k[U[L]]);return z}var ee=function(k){this.keyCache={},k&&this.replace(k)};ee.prototype.replace=function(k){this._layerConfigs={},this._layers={},this.update(k,[])},ee.prototype.update=function(k,z){for(var L=this,U=0,Z=k;U<Z.length;U+=1){var Q=Z[U];this._layerConfigs[Q.id]=Q;var ne=this._layers[Q.id]=c.createStyleLayer(Q);ne._featureFilter=c.featureFilter(ne.filter),this.keyCache[Q.id]&&delete this.keyCache[Q.id]}for(var O=0,W=z;O<W.length;O+=1){var ue=W[O];delete this.keyCache[ue],delete this._layerConfigs[ue],delete this._layers[ue]}this.familiesBySource={};for(var be=0,Te=function(Le,Re){for(var wt={},Fe=0;Fe<Le.length;Fe++){var Pt=Re&&Re[Le[Fe].id]||M(Le[Fe]);Re&&(Re[Le[Fe].id]=Pt);var Yt=wt[Pt];Yt||(Yt=wt[Pt]=[]),Yt.push(Le[Fe])}var Et=[];for(var Ut in wt)Et.push(wt[Ut]);return Et}(c.values(this._layerConfigs),this.keyCache);be<Te.length;be+=1){var ge=Te[be].map(function(Le){return L._layers[Le.id]}),Se=ge[0];if(Se.visibility!=="none"){var We=Se.source||"",Ge=this.familiesBySource[We];Ge||(Ge=this.familiesBySource[We]={});var ve=Se.sourceLayer||"_geojsonTileLayer",Ve=Ge[ve];Ve||(Ve=Ge[ve]=[]),Ve.push(ge)}}};var oe=function(k){var z={},L=[];for(var U in k){var Z=k[U],Q=z[U]={};for(var ne in Z){var O=Z[+ne];if(O&&O.bitmap.width!==0&&O.bitmap.height!==0){var W={x:0,y:0,w:O.bitmap.width+2,h:O.bitmap.height+2};L.push(W),Q[ne]={rect:W,metrics:O.metrics}}}}var ue=c.potpack(L),be=new c.AlphaImage({width:ue.w||1,height:ue.h||1});for(var Te in k){var ge=k[Te];for(var Se in ge){var We=ge[+Se];if(We&&We.bitmap.width!==0&&We.bitmap.height!==0){var Ge=z[Te][Se].rect;c.AlphaImage.copy(We.bitmap,be,{x:0,y:0},{x:Ge.x+1,y:Ge.y+1},We.bitmap)}}}this.image=be,this.positions=z};c.register("GlyphAtlas",oe);var me=function(k){this.tileID=new c.OverscaledTileID(k.tileID.overscaledZ,k.tileID.wrap,k.tileID.canonical.z,k.tileID.canonical.x,k.tileID.canonical.y),this.uid=k.uid,this.zoom=k.zoom,this.pixelRatio=k.pixelRatio,this.tileSize=k.tileSize,this.source=k.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=k.showCollisionBoxes,this.collectResourceTiming=!!k.collectResourceTiming,this.returnDependencies=!!k.returnDependencies,this.promoteId=k.promoteId};function te(k,z,L){for(var U=new c.EvaluationParameters(z),Z=0,Q=k;Z<Q.length;Z+=1)Q[Z].recalculate(U,L)}function Pe(k,z){var L=c.getArrayBuffer(k.request,function(U,Z,Q,ne){U?z(U):Z&&z(null,{vectorTile:new c.vectorTile.VectorTile(new c.pbf(Z)),rawData:Z,cacheControl:Q,expires:ne})});return function(){L.cancel(),z()}}me.prototype.parse=function(k,z,L,U,Z){var Q=this;this.status="parsing",this.data=k,this.collisionBoxArray=new c.CollisionBoxArray;var ne=new c.DictionaryCoder(Object.keys(k.layers).sort()),O=new c.FeatureIndex(this.tileID,this.promoteId);O.bucketLayerIDs=[];var W,ue,be,Te,ge={},Se={featureIndex:O,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:L},We=z.familiesBySource[this.source];for(var Ge in We){var ve=k.layers[Ge];if(ve){ve.version===1&&c.warnOnce('Vector tile source "'+this.source+'" layer "'+Ge+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ve=ne.encode(Ge),Le=[],Re=0;Re<ve.length;Re++){var wt=ve.feature(Re),Fe=O.getId(wt,Ge);Le.push({feature:wt,id:Fe,index:Re,sourceLayerIndex:Ve})}for(var Pt=0,Yt=We[Ge];Pt<Yt.length;Pt+=1){var Et=Yt[Pt],Ut=Et[0];Ut.minzoom&&this.zoom<Math.floor(Ut.minzoom)||Ut.maxzoom&&this.zoom>=Ut.maxzoom||Ut.visibility!=="none"&&(te(Et,this.zoom,L),(ge[Ut.id]=Ut.createBucket({index:O.bucketLayerIDs.length,layers:Et,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ve,sourceID:this.source})).populate(Le,Se,this.tileID.canonical),O.bucketLayerIDs.push(Et.map(function($t){return $t.id})))}}}var At=c.mapObject(Se.glyphDependencies,function($t){return Object.keys($t).map(Number)});Object.keys(At).length?U.send("getGlyphs",{uid:this.uid,stacks:At},function($t,kt){W||(W=$t,ue=kt,Sr.call(Q))}):ue={};var xn=Object.keys(Se.iconDependencies);xn.length?U.send("getImages",{icons:xn,source:this.source,tileID:this.tileID,type:"icons"},function($t,kt){W||(W=$t,be=kt,Sr.call(Q))}):be={};var qt=Object.keys(Se.patternDependencies);function Sr(){if(W)return Z(W);if(ue&&be&&Te){var $t=new oe(ue),kt=new c.ImageAtlas(be,Te);for(var Vt in ge){var Dn=ge[Vt];Dn instanceof c.SymbolBucket?(te(Dn.layers,this.zoom,L),c.performSymbolLayout(Dn,ue,$t.positions,be,kt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Dn.hasPattern&&(Dn instanceof c.LineBucket||Dn instanceof c.FillBucket||Dn instanceof c.FillExtrusionBucket)&&(te(Dn.layers,this.zoom,L),Dn.addFeatures(Se,this.tileID.canonical,kt.patternPositions))}this.status="done",Z(null,{buckets:c.values(ge).filter(function(Us){return!Us.isEmpty()}),featureIndex:O,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:$t.image,imageAtlas:kt,glyphMap:this.returnDependencies?ue:null,iconMap:this.returnDependencies?be:null,glyphPositions:this.returnDependencies?$t.positions:null})}}qt.length?U.send("getImages",{icons:qt,source:this.source,tileID:this.tileID,type:"patterns"},function($t,kt){W||(W=$t,Te=kt,Sr.call(Q))}):Te={},Sr.call(this)};var Me=function(k,z,L,U){this.actor=k,this.layerIndex=z,this.availableImages=L,this.loadVectorData=U||Pe,this.loading={},this.loaded={}};Me.prototype.loadTile=function(k,z){var L=this,U=k.uid;this.loading||(this.loading={});var Z=!!(k&&k.request&&k.request.collectResourceTiming)&&new c.RequestPerformance(k.request),Q=this.loading[U]=new me(k);Q.abort=this.loadVectorData(k,function(ne,O){if(delete L.loading[U],ne||!O)return Q.status="done",L.loaded[U]=Q,z(ne);var W=O.rawData,ue={};O.expires&&(ue.expires=O.expires),O.cacheControl&&(ue.cacheControl=O.cacheControl);var be={};if(Z){var Te=Z.finish();Te&&(be.resourceTiming=JSON.parse(JSON.stringify(Te)))}Q.vectorTile=O.vectorTile,Q.parse(O.vectorTile,L.layerIndex,L.availableImages,L.actor,function(ge,Se){if(ge||!Se)return z(ge);z(null,c.extend({rawTileData:W.slice(0)},Se,ue,be))}),L.loaded=L.loaded||{},L.loaded[U]=Q})},Me.prototype.reloadTile=function(k,z){var L=this,U=this.loaded,Z=k.uid,Q=this;if(U&&U[Z]){var ne=U[Z];ne.showCollisionBoxes=k.showCollisionBoxes;var O=function(W,ue){var be=ne.reloadCallback;be&&(delete ne.reloadCallback,ne.parse(ne.vectorTile,Q.layerIndex,L.availableImages,Q.actor,be)),z(W,ue)};ne.status==="parsing"?ne.reloadCallback=O:ne.status==="done"&&(ne.vectorTile?ne.parse(ne.vectorTile,this.layerIndex,this.availableImages,this.actor,O):O())}},Me.prototype.abortTile=function(k,z){var L=this.loading,U=k.uid;L&&L[U]&&L[U].abort&&(L[U].abort(),delete L[U]),z()},Me.prototype.removeTile=function(k,z){var L=this.loaded,U=k.uid;L&&L[U]&&delete L[U],z()};var ke=c.window.ImageBitmap,at=function(){this.loaded={}};function ae(k,z){if(k.length!==0){J(k[0],z);for(var L=1;L<k.length;L++)J(k[L],!z)}}function J(k,z){for(var L=0,U=0,Z=0,Q=k.length,ne=Q-1;Z<Q;ne=Z++){var O=(k[Z][0]-k[ne][0])*(k[ne][1]+k[Z][1]),W=L+O;U+=Math.abs(L)>=Math.abs(O)?L-W+O:O-W+L,L=W}L+U>=0!=!!z&&k.reverse()}at.prototype.loadTile=function(k,z){var L=k.uid,U=k.encoding,Z=k.rawImageData,Q=ke&&Z instanceof ke?this.getImageData(Z):Z,ne=new c.DEMData(L,Q,U);this.loaded=this.loaded||{},this.loaded[L]=ne,z(null,ne)},at.prototype.getImageData=function(k){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(k.width,k.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=k.width,this.offscreenCanvas.height=k.height,this.offscreenCanvasContext.drawImage(k,0,0,k.width,k.height);var z=this.offscreenCanvasContext.getImageData(-1,-1,k.width+2,k.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new c.RGBAImage({width:z.width,height:z.height},z.data)},at.prototype.removeTile=function(k){var z=this.loaded,L=k.uid;z&&z[L]&&delete z[L]};var le=c.vectorTile.VectorTileFeature.prototype.toGeoJSON,xe=function(k){this._feature=k,this.extent=c.EXTENT,this.type=k.type,this.properties=k.tags,"id"in k&&!isNaN(k.id)&&(this.id=parseInt(k.id,10))};xe.prototype.loadGeometry=function(){if(this._feature.type===1){for(var k=[],z=0,L=this._feature.geometry;z<L.length;z+=1){var U=L[z];k.push([new c.Point$1(U[0],U[1])])}return k}for(var Z=[],Q=0,ne=this._feature.geometry;Q<ne.length;Q+=1){for(var O=[],W=0,ue=ne[Q];W<ue.length;W+=1){var be=ue[W];O.push(new c.Point$1(be[0],be[1]))}Z.push(O)}return Z},xe.prototype.toGeoJSON=function(k,z,L){return le.call(this,k,z,L)};var Ue=function(k){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.EXTENT,this.length=k.length,this._features=k};Ue.prototype.feature=function(k){return new xe(this._features[k])};var Ke=c.vectorTile.VectorTileFeature,Je=rt;function rt(k,z){this.options=z||{},this.features=k,this.length=k.length}function It(k,z){this.id=typeof k.id=="number"?k.id:void 0,this.type=k.type,this.rawGeometry=k.type===1?[k.geometry]:k.geometry,this.properties=k.tags,this.extent=z||4096}rt.prototype.feature=function(k){return new It(this.features[k],this.options.extent)},It.prototype.loadGeometry=function(){var k=this.rawGeometry;this.geometry=[];for(var z=0;z<k.length;z++){for(var L=k[z],U=[],Z=0;Z<L.length;Z++)U.push(new c.Point$1(L[Z][0],L[Z][1]));this.geometry.push(U)}return this.geometry},It.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var k=this.geometry,z=1/0,L=-1/0,U=1/0,Z=-1/0,Q=0;Q<k.length;Q++)for(var ne=k[Q],O=0;O<ne.length;O++){var W=ne[O];z=Math.min(z,W.x),L=Math.max(L,W.x),U=Math.min(U,W.y),Z=Math.max(Z,W.y)}return[z,U,L,Z]},It.prototype.toGeoJSON=Ke.prototype.toGeoJSON;var yt=Wr,tr=Je;function Wr(k){var z=new c.pbf;return function(L,U){for(var Z in L.layers)U.writeMessage(3,Nt,L.layers[Z])}(k,z),z.finish()}function Nt(k,z){var L;z.writeVarintField(15,k.version||1),z.writeStringField(1,k.name||""),z.writeVarintField(5,k.extent||4096);var U={keys:[],values:[],keycache:{},valuecache:{}};for(L=0;L<k.length;L++)U.feature=k.feature(L),z.writeMessage(2,Ht,U);var Z=U.keys;for(L=0;L<Z.length;L++)z.writeStringField(3,Z[L]);var Q=U.values;for(L=0;L<Q.length;L++)z.writeMessage(4,gt,Q[L])}function Ht(k,z){var L=k.feature;L.id!==void 0&&z.writeVarintField(1,L.id),z.writeMessage(2,Gn,k),z.writeVarintField(3,L.type),z.writeMessage(4,He,L)}function Gn(k,z){var L=k.feature,U=k.keys,Z=k.values,Q=k.keycache,ne=k.valuecache;for(var O in L.properties){var W=Q[O];W===void 0&&(U.push(O),Q[O]=W=U.length-1),z.writeVarint(W);var ue=L.properties[O],be=typeof ue;be!=="string"&&be!=="boolean"&&be!=="number"&&(ue=JSON.stringify(ue));var Te=be+":"+ue,ge=ne[Te];ge===void 0&&(Z.push(ue),ne[Te]=ge=Z.length-1),z.writeVarint(ge)}}function yr(k,z){return(z<<3)+(7&k)}function Mn(k){return k<<1^k>>31}function He(k,z){for(var L=k.loadGeometry(),U=k.type,Z=0,Q=0,ne=L.length,O=0;O<ne;O++){var W=L[O],ue=1;U===1&&(ue=W.length),z.writeVarint(yr(1,ue));for(var be=U===3?W.length-1:W.length,Te=0;Te<be;Te++){Te===1&&U!==1&&z.writeVarint(yr(2,be-1));var ge=W[Te].x-Z,Se=W[Te].y-Q;z.writeVarint(Mn(ge)),z.writeVarint(Mn(Se)),Z+=ge,Q+=Se}U===3&&z.writeVarint(yr(7,1))}}function gt(k,z){var L=typeof k;L==="string"?z.writeStringField(1,k):L==="boolean"?z.writeBooleanField(7,k):L==="number"&&(k%1!=0?z.writeDoubleField(3,k):k<0?z.writeSVarintField(6,k):z.writeVarintField(5,k))}function ft(k,z,L,U){Lt(k,L,U),Lt(z,2*L,2*U),Lt(z,2*L+1,2*U+1)}function Lt(k,z,L){var U=k[z];k[z]=k[L],k[L]=U}function Ot(k,z,L,U){var Z=k-L,Q=z-U;return Z*Z+Q*Q}yt.fromVectorTileJs=Wr,yt.fromGeojsonVt=function(k,z){z=z||{};var L={};for(var U in k)L[U]=new Je(k[U].features,z),L[U].name=U,L[U].version=z.version,L[U].extent=z.extent;return Wr({layers:L})},yt.GeoJSONWrapper=tr;var gn=function(k){return k[0]},nn=function(k){return k[1]},pn=function(k,z,L,U,Z){z===void 0&&(z=gn),L===void 0&&(L=nn),U===void 0&&(U=64),Z===void 0&&(Z=Float64Array),this.nodeSize=U,this.points=k;for(var Q=k.length<65536?Uint16Array:Uint32Array,ne=this.ids=new Q(k.length),O=this.coords=new Z(2*k.length),W=0;W<k.length;W++)ne[W]=W,O[2*W]=z(k[W]),O[2*W+1]=L(k[W]);(function ue(be,Te,ge,Se,We,Ge){if(!(We-Se<=ge)){var ve=Se+We>>1;(function Ve(Le,Re,wt,Fe,Pt,Yt){for(;Pt>Fe;){if(Pt-Fe>600){var Et=Pt-Fe+1,Ut=wt-Fe+1,At=Math.log(Et),xn=.5*Math.exp(2*At/3),qt=.5*Math.sqrt(At*xn*(Et-xn)/Et)*(Ut-Et/2<0?-1:1);Ve(Le,Re,wt,Math.max(Fe,Math.floor(wt-Ut*xn/Et+qt)),Math.min(Pt,Math.floor(wt+(Et-Ut)*xn/Et+qt)),Yt)}var Sr=Re[2*wt+Yt],$t=Fe,kt=Pt;for(ft(Le,Re,Fe,wt),Re[2*Pt+Yt]>Sr&&ft(Le,Re,Fe,Pt);$t<kt;){for(ft(Le,Re,$t,kt),$t++,kt--;Re[2*$t+Yt]<Sr;)$t++;for(;Re[2*kt+Yt]>Sr;)kt--}Re[2*Fe+Yt]===Sr?ft(Le,Re,Fe,kt):ft(Le,Re,++kt,Pt),kt<=wt&&(Fe=kt+1),wt<=kt&&(Pt=kt-1)}})(be,Te,ve,Se,We,Ge%2),ue(be,Te,ge,Se,ve-1,Ge+1),ue(be,Te,ge,ve+1,We,Ge+1)}})(ne,O,U,0,ne.length-1,0)};pn.prototype.range=function(k,z,L,U){return function(Z,Q,ne,O,W,ue,be){for(var Te,ge,Se=[0,Z.length-1,0],We=[];Se.length;){var Ge=Se.pop(),ve=Se.pop(),Ve=Se.pop();if(ve-Ve<=be)for(var Le=Ve;Le<=ve;Le++)ge=Q[2*Le+1],(Te=Q[2*Le])>=ne&&Te<=W&&ge>=O&&ge<=ue&&We.push(Z[Le]);else{var Re=Math.floor((Ve+ve)/2);ge=Q[2*Re+1],(Te=Q[2*Re])>=ne&&Te<=W&&ge>=O&&ge<=ue&&We.push(Z[Re]);var wt=(Ge+1)%2;(Ge===0?ne<=Te:O<=ge)&&(Se.push(Ve),Se.push(Re-1),Se.push(wt)),(Ge===0?W>=Te:ue>=ge)&&(Se.push(Re+1),Se.push(ve),Se.push(wt))}}return We}(this.ids,this.coords,k,z,L,U,this.nodeSize)},pn.prototype.within=function(k,z,L){return function(U,Z,Q,ne,O,W){for(var ue=[0,U.length-1,0],be=[],Te=O*O;ue.length;){var ge=ue.pop(),Se=ue.pop(),We=ue.pop();if(Se-We<=W)for(var Ge=We;Ge<=Se;Ge++)Ot(Z[2*Ge],Z[2*Ge+1],Q,ne)<=Te&&be.push(U[Ge]);else{var ve=Math.floor((We+Se)/2),Ve=Z[2*ve],Le=Z[2*ve+1];Ot(Ve,Le,Q,ne)<=Te&&be.push(U[ve]);var Re=(ge+1)%2;(ge===0?Q-O<=Ve:ne-O<=Le)&&(ue.push(We),ue.push(ve-1),ue.push(Re)),(ge===0?Q+O>=Ve:ne+O>=Le)&&(ue.push(ve+1),ue.push(Se),ue.push(Re))}}return be}(this.ids,this.coords,k,z,L,this.nodeSize)};var Zn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(k){return k}},gr=function(k){this.options=ai(Object.create(Zn),k),this.trees=new Array(this.options.maxZoom+1)};function vi(k,z,L,U,Z){return{x:k,y:z,zoom:1/0,id:L,parentId:-1,numPoints:U,properties:Z}}function Wt(k,z){var L=k.geometry.coordinates,U=L[1];return{x:Hn(L[0]),y:bt(U),zoom:1/0,index:z,parentId:-1}}function Ln(k){return{type:"Feature",id:k.id,properties:zo(k),geometry:{type:"Point",coordinates:[(U=k.x,360*(U-.5)),(z=k.y,L=(180-360*z)*Math.PI/180,360*Math.atan(Math.exp(L))/Math.PI-90)]}};var z,L,U}function zo(k){var z=k.numPoints,L=z>=1e4?Math.round(z/1e3)+"k":z>=1e3?Math.round(z/100)/10+"k":z;return ai(ai({},k.properties),{cluster:!0,cluster_id:k.id,point_count:z,point_count_abbreviated:L})}function Hn(k){return k/360+.5}function bt(k){var z=Math.sin(k*Math.PI/180),L=.5-.25*Math.log((1+z)/(1-z))/Math.PI;return L<0?0:L>1?1:L}function ai(k,z){for(var L in z)k[L]=z[L];return k}function on(k){return k.x}function vn(k){return k.y}function oa(k,z,L,U,Z,Q){var ne=Z-L,O=Q-U;if(ne!==0||O!==0){var W=((k-L)*ne+(z-U)*O)/(ne*ne+O*O);W>1?(L=Z,U=Q):W>0&&(L+=ne*W,U+=O*W)}return(ne=k-L)*ne+(O=z-U)*O}function si(k,z,L,U){var Z={id:k===void 0?null:k,type:z,geometry:L,tags:U,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Q){var ne=Q.geometry,O=Q.type;if(O==="Point"||O==="MultiPoint"||O==="LineString")Oi(Q,ne);else if(O==="Polygon"||O==="MultiLineString")for(var W=0;W<ne.length;W++)Oi(Q,ne[W]);else if(O==="MultiPolygon")for(W=0;W<ne.length;W++)for(var ue=0;ue<ne[W].length;ue++)Oi(Q,ne[W][ue])}(Z),Z}function Oi(k,z){for(var L=0;L<z.length;L+=3)k.minX=Math.min(k.minX,z[L]),k.minY=Math.min(k.minY,z[L+1]),k.maxX=Math.max(k.maxX,z[L]),k.maxY=Math.max(k.maxY,z[L+1])}function _n(k,z,L,U){if(z.geometry){var Z=z.geometry.coordinates,Q=z.geometry.type,ne=Math.pow(L.tolerance/((1<<L.maxZoom)*L.extent),2),O=[],W=z.id;if(L.promoteId?W=z.properties[L.promoteId]:L.generateId&&(W=U||0),Q==="Point")aa(Z,O);else if(Q==="MultiPoint")for(var ue=0;ue<Z.length;ue++)aa(Z[ue],O);else if(Q==="LineString")Za(Z,O,ne,!1);else if(Q==="MultiLineString"){if(L.lineMetrics){for(ue=0;ue<Z.length;ue++)Za(Z[ue],O=[],ne,!1),k.push(si(W,"LineString",O,z.properties));return}_i(Z,O,ne,!1)}else if(Q==="Polygon")_i(Z,O,ne,!0);else{if(Q!=="MultiPolygon"){if(Q==="GeometryCollection"){for(ue=0;ue<z.geometry.geometries.length;ue++)_n(k,{id:W,geometry:z.geometry.geometries[ue],properties:z.properties},L,U);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ue=0;ue<Z.length;ue++){var be=[];_i(Z[ue],be,ne,!0),O.push(be)}}k.push(si(W,Q,O,z.properties))}}function aa(k,z){z.push(xi(k[0])),z.push(sa(k[1])),z.push(0)}function Za(k,z,L,U){for(var Z,Q,ne=0,O=0;O<k.length;O++){var W=xi(k[O][0]),ue=sa(k[O][1]);z.push(W),z.push(ue),z.push(0),O>0&&(ne+=U?(Z*ue-W*Q)/2:Math.sqrt(Math.pow(W-Z,2)+Math.pow(ue-Q,2))),Z=W,Q=ue}var be=z.length-3;z[2]=1,function Te(ge,Se,We,Ge){for(var ve,Ve=Ge,Le=We-Se>>1,Re=We-Se,wt=ge[Se],Fe=ge[Se+1],Pt=ge[We],Yt=ge[We+1],Et=Se+3;Et<We;Et+=3){var Ut=oa(ge[Et],ge[Et+1],wt,Fe,Pt,Yt);if(Ut>Ve)ve=Et,Ve=Ut;else if(Ut===Ve){var At=Math.abs(Et-Le);At<Re&&(ve=Et,Re=At)}}Ve>Ge&&(ve-Se>3&&Te(ge,Se,ve,Ge),ge[ve+2]=Ve,We-ve>3&&Te(ge,ve,We,Ge))}(z,0,be,L),z[be+2]=1,z.size=Math.abs(ne),z.start=0,z.end=z.size}function _i(k,z,L,U){for(var Z=0;Z<k.length;Z++){var Q=[];Za(k[Z],Q,L,U),z.push(Q)}}function xi(k){return k/360+.5}function sa(k){var z=Math.sin(k*Math.PI/180),L=.5-.25*Math.log((1+z)/(1-z))/Math.PI;return L<0?0:L>1?1:L}function Bi(k,z,L,U,Z,Q,ne,O){if(U/=z,Q>=(L/=z)&&ne<U)return k;if(ne<L||Q>=U)return null;for(var W=[],ue=0;ue<k.length;ue++){var be=k[ue],Te=be.geometry,ge=be.type,Se=Z===0?be.minX:be.minY,We=Z===0?be.maxX:be.maxY;if(Se>=L&&We<U)W.push(be);else if(!(We<L||Se>=U)){var Ge=[];if(ge==="Point"||ge==="MultiPoint")Al(Te,Ge,L,U,Z);else if(ge==="LineString")Ml(Te,Ge,L,U,Z,!1,O.lineMetrics);else if(ge==="MultiLineString")Rs(Te,Ge,L,U,Z,!1);else if(ge==="Polygon")Rs(Te,Ge,L,U,Z,!0);else if(ge==="MultiPolygon")for(var ve=0;ve<Te.length;ve++){var Ve=[];Rs(Te[ve],Ve,L,U,Z,!0),Ve.length&&Ge.push(Ve)}if(Ge.length){if(O.lineMetrics&&ge==="LineString"){for(ve=0;ve<Ge.length;ve++)W.push(si(be.id,ge,Ge[ve],be.tags));continue}ge!=="LineString"&&ge!=="MultiLineString"||(Ge.length===1?(ge="LineString",Ge=Ge[0]):ge="MultiLineString"),ge!=="Point"&&ge!=="MultiPoint"||(ge=Ge.length===3?"Point":"MultiPoint"),W.push(si(be.id,ge,Ge,be.tags))}}}return W.length?W:null}function Al(k,z,L,U,Z){for(var Q=0;Q<k.length;Q+=3){var ne=k[Q+Z];ne>=L&&ne<=U&&(z.push(k[Q]),z.push(k[Q+1]),z.push(k[Q+2]))}}function Ml(k,z,L,U,Z,Q,ne){for(var O,W,ue=Ds(k),be=Z===0?Ll:Wa,Te=k.start,ge=0;ge<k.length-3;ge+=3){var Se=k[ge],We=k[ge+1],Ge=k[ge+2],ve=k[ge+3],Ve=k[ge+4],Le=Z===0?Se:We,Re=Z===0?ve:Ve,wt=!1;ne&&(O=Math.sqrt(Math.pow(Se-ve,2)+Math.pow(We-Ve,2))),Le<L?Re>L&&(W=be(ue,Se,We,ve,Ve,L),ne&&(ue.start=Te+O*W)):Le>U?Re<U&&(W=be(ue,Se,We,ve,Ve,U),ne&&(ue.start=Te+O*W)):Ha(ue,Se,We,Ge),Re<L&&Le>=L&&(W=be(ue,Se,We,ve,Ve,L),wt=!0),Re>U&&Le<=U&&(W=be(ue,Se,We,ve,Ve,U),wt=!0),!Q&&wt&&(ne&&(ue.end=Te+O*W),z.push(ue),ue=Ds(k)),ne&&(Te+=O)}var Fe=k.length-3;Se=k[Fe],We=k[Fe+1],Ge=k[Fe+2],(Le=Z===0?Se:We)>=L&&Le<=U&&Ha(ue,Se,We,Ge),Fe=ue.length-3,Q&&Fe>=3&&(ue[Fe]!==ue[0]||ue[Fe+1]!==ue[1])&&Ha(ue,ue[0],ue[1],ue[2]),ue.length&&z.push(ue)}function Ds(k){var z=[];return z.size=k.size,z.start=k.start,z.end=k.end,z}function Rs(k,z,L,U,Z,Q){for(var ne=0;ne<k.length;ne++)Ml(k[ne],z,L,U,Z,Q,!1)}function Ha(k,z,L,U){k.push(z),k.push(L),k.push(U)}function Ll(k,z,L,U,Z,Q){var ne=(Q-z)/(U-z);return k.push(Q),k.push(L+(Z-L)*ne),k.push(1),ne}function Wa(k,z,L,U,Z,Q){var ne=(Q-L)/(Z-L);return k.push(z+(U-z)*ne),k.push(Q),k.push(1),ne}function Os(k,z){for(var L=[],U=0;U<k.length;U++){var Z,Q=k[U],ne=Q.type;if(ne==="Point"||ne==="MultiPoint"||ne==="LineString")Z=la(Q.geometry,z);else if(ne==="MultiLineString"||ne==="Polygon"){Z=[];for(var O=0;O<Q.geometry.length;O++)Z.push(la(Q.geometry[O],z))}else if(ne==="MultiPolygon")for(Z=[],O=0;O<Q.geometry.length;O++){for(var W=[],ue=0;ue<Q.geometry[O].length;ue++)W.push(la(Q.geometry[O][ue],z));Z.push(W)}L.push(si(Q.id,ne,Z,Q.tags))}return L}function la(k,z){var L=[];L.size=k.size,k.start!==void 0&&(L.start=k.start,L.end=k.end);for(var U=0;U<k.length;U+=3)L.push(k[U]+z,k[U+1],k[U+2]);return L}function Bs(k,z){if(k.transformed)return k;var L,U,Z,Q=1<<k.z,ne=k.x,O=k.y;for(L=0;L<k.features.length;L++){var W=k.features[L],ue=W.geometry,be=W.type;if(W.geometry=[],be===1)for(U=0;U<ue.length;U+=2)W.geometry.push(Fs(ue[U],ue[U+1],z,Q,ne,O));else for(U=0;U<ue.length;U++){var Te=[];for(Z=0;Z<ue[U].length;Z+=2)Te.push(Fs(ue[U][Z],ue[U][Z+1],z,Q,ne,O));W.geometry.push(Te)}}return k.transformed=!0,k}function Fs(k,z,L,U,Z,Q){return[Math.round(L*(k*U-Z)),Math.round(L*(z*U-Q))]}function Dl(k,z,L,U,Z){for(var Q=z===Z.maxZoom?0:Z.tolerance/((1<<z)*Z.extent),ne={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:L,y:U,z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},O=0;O<k.length;O++){ne.numFeatures++,Rl(ne,k[O],Q,Z);var W=k[O].minX,ue=k[O].minY,be=k[O].maxX,Te=k[O].maxY;W<ne.minX&&(ne.minX=W),ue<ne.minY&&(ne.minY=ue),be>ne.maxX&&(ne.maxX=be),Te>ne.maxY&&(ne.maxY=Te)}return ne}function Rl(k,z,L,U){var Z=z.geometry,Q=z.type,ne=[];if(Q==="Point"||Q==="MultiPoint")for(var O=0;O<Z.length;O+=3)ne.push(Z[O]),ne.push(Z[O+1]),k.numPoints++,k.numSimplified++;else if(Q==="LineString")ua(ne,Z,k,L,!1,!1);else if(Q==="MultiLineString"||Q==="Polygon")for(O=0;O<Z.length;O++)ua(ne,Z[O],k,L,Q==="Polygon",O===0);else if(Q==="MultiPolygon")for(var W=0;W<Z.length;W++){var ue=Z[W];for(O=0;O<ue.length;O++)ua(ne,ue[O],k,L,!0,O===0)}if(ne.length){var be=z.tags||null;if(Q==="LineString"&&U.lineMetrics){for(var Te in be={},z.tags)be[Te]=z.tags[Te];be.mapbox_clip_start=Z.start/Z.size,be.mapbox_clip_end=Z.end/Z.size}var ge={geometry:ne,type:Q==="Polygon"||Q==="MultiPolygon"?3:Q==="LineString"||Q==="MultiLineString"?2:1,tags:be};z.id!==null&&(ge.id=z.id),k.features.push(ge)}}function ua(k,z,L,U,Z,Q){var ne=U*U;if(U>0&&z.size<(Z?ne:U))L.numPoints+=z.length/3;else{for(var O=[],W=0;W<z.length;W+=3)(U===0||z[W+2]>ne)&&(L.numSimplified++,O.push(z[W]),O.push(z[W+1])),L.numPoints++;Z&&function(ue,be){for(var Te=0,ge=0,Se=ue.length,We=Se-2;ge<Se;We=ge,ge+=2)Te+=(ue[ge]-ue[We])*(ue[ge+1]+ue[We+1]);if(Te>0===be)for(ge=0,Se=ue.length;ge<Se/2;ge+=2){var Ge=ue[ge],ve=ue[ge+1];ue[ge]=ue[Se-2-ge],ue[ge+1]=ue[Se-1-ge],ue[Se-2-ge]=Ge,ue[Se-1-ge]=ve}}(O,Q),k.push(O)}}function po(k,z){var L=(z=this.options=function(Z,Q){for(var ne in Q)Z[ne]=Q[ne];return Z}(Object.create(this.options),z)).debug;if(L&&console.time("preprocess data"),z.maxZoom<0||z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(z.promoteId&&z.generateId)throw new Error("promoteId and generateId cannot be used together.");var U=function(Z,Q){var ne=[];if(Z.type==="FeatureCollection")for(var O=0;O<Z.features.length;O++)_n(ne,Z.features[O],Q,O);else _n(ne,Z.type==="Feature"?Z:{geometry:Z},Q);return ne}(k,z);this.tiles={},this.tileCoords=[],L&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",z.indexMaxZoom,z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(U=function(Z,Q){var ne=Q.buffer/Q.extent,O=Z,W=Bi(Z,1,-1-ne,ne,0,-1,2,Q),ue=Bi(Z,1,1-ne,2+ne,0,-1,2,Q);return(W||ue)&&(O=Bi(Z,1,-ne,1+ne,0,-1,2,Q)||[],W&&(O=Os(W,1).concat(O)),ue&&(O=O.concat(Os(ue,-1)))),O}(U,z)).length&&this.splitTile(U,0,0,0),L&&(U.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ho(k,z,L){return 32*((1<<k)*L+z)+k}function Xa(k,z){var L=k.tileID.canonical;if(!this._geoJSONIndex)return z(null,null);var U=this._geoJSONIndex.getTile(L.z,L.x,L.y);if(!U)return z(null,null);var Z=new Ue(U.features),Q=yt(Z);Q.byteOffset===0&&Q.byteLength===Q.buffer.byteLength||(Q=new Uint8Array(Q)),z(null,{vectorTile:Z,rawData:Q.buffer})}gr.prototype.load=function(k){var z=this.options,L=z.log,U=z.minZoom,Z=z.maxZoom,Q=z.nodeSize;L&&console.time("total time");var ne="prepare "+k.length+" points";L&&console.time(ne),this.points=k;for(var O=[],W=0;W<k.length;W++)k[W].geometry&&O.push(Wt(k[W],W));this.trees[Z+1]=new pn(O,on,vn,Q,Float32Array),L&&console.timeEnd(ne);for(var ue=Z;ue>=U;ue--){var be=+Date.now();O=this._cluster(O,ue),this.trees[ue]=new pn(O,on,vn,Q,Float32Array),L&&console.log("z%d: %d clusters in %dms",ue,O.length,+Date.now()-be)}return L&&console.timeEnd("total time"),this},gr.prototype.getClusters=function(k,z){var L=((k[0]+180)%360+360)%360-180,U=Math.max(-90,Math.min(90,k[1])),Z=k[2]===180?180:((k[2]+180)%360+360)%360-180,Q=Math.max(-90,Math.min(90,k[3]));if(k[2]-k[0]>=360)L=-180,Z=180;else if(L>Z){var ne=this.getClusters([L,U,180,Q],z),O=this.getClusters([-180,U,Z,Q],z);return ne.concat(O)}for(var W=this.trees[this._limitZoom(z)],ue=[],be=0,Te=W.range(Hn(L),bt(Q),Hn(Z),bt(U));be<Te.length;be+=1){var ge=W.points[Te[be]];ue.push(ge.numPoints?Ln(ge):this.points[ge.index])}return ue},gr.prototype.getChildren=function(k){var z=this._getOriginId(k),L=this._getOriginZoom(k),U="No cluster with the specified id.",Z=this.trees[L];if(!Z)throw new Error(U);var Q=Z.points[z];if(!Q)throw new Error(U);for(var ne=this.options.radius/(this.options.extent*Math.pow(2,L-1)),O=[],W=0,ue=Z.within(Q.x,Q.y,ne);W<ue.length;W+=1){var be=Z.points[ue[W]];be.parentId===k&&O.push(be.numPoints?Ln(be):this.points[be.index])}if(O.length===0)throw new Error(U);return O},gr.prototype.getLeaves=function(k,z,L){var U=[];return this._appendLeaves(U,k,z=z||10,L=L||0,0),U},gr.prototype.getTile=function(k,z,L){var U=this.trees[this._limitZoom(k)],Z=Math.pow(2,k),Q=this.options,ne=Q.radius/Q.extent,O=(L-ne)/Z,W=(L+1+ne)/Z,ue={features:[]};return this._addTileFeatures(U.range((z-ne)/Z,O,(z+1+ne)/Z,W),U.points,z,L,Z,ue),z===0&&this._addTileFeatures(U.range(1-ne/Z,O,1,W),U.points,Z,L,Z,ue),z===Z-1&&this._addTileFeatures(U.range(0,O,ne/Z,W),U.points,-1,L,Z,ue),ue.features.length?ue:null},gr.prototype.getClusterExpansionZoom=function(k){for(var z=this._getOriginZoom(k)-1;z<=this.options.maxZoom;){var L=this.getChildren(k);if(z++,L.length!==1)break;k=L[0].properties.cluster_id}return z},gr.prototype._appendLeaves=function(k,z,L,U,Z){for(var Q=0,ne=this.getChildren(z);Q<ne.length;Q+=1){var O=ne[Q],W=O.properties;if(W&&W.cluster?Z+W.point_count<=U?Z+=W.point_count:Z=this._appendLeaves(k,W.cluster_id,L,U,Z):Z<U?Z++:k.push(O),k.length===L)break}return Z},gr.prototype._addTileFeatures=function(k,z,L,U,Z,Q){for(var ne=0,O=k;ne<O.length;ne+=1){var W=z[O[ne]],ue=W.numPoints,be={type:1,geometry:[[Math.round(this.options.extent*(W.x*Z-L)),Math.round(this.options.extent*(W.y*Z-U))]],tags:ue?zo(W):this.points[W.index].properties},Te=void 0;ue?Te=W.id:this.options.generateId?Te=W.index:this.points[W.index].id&&(Te=this.points[W.index].id),Te!==void 0&&(be.id=Te),Q.features.push(be)}},gr.prototype._limitZoom=function(k){return Math.max(this.options.minZoom,Math.min(+k,this.options.maxZoom+1))},gr.prototype._cluster=function(k,z){for(var L=[],U=this.options,Z=U.reduce,Q=U.minPoints,ne=U.radius/(U.extent*Math.pow(2,z)),O=0;O<k.length;O++){var W=k[O];if(!(W.zoom<=z)){W.zoom=z;for(var ue=this.trees[z+1],be=ue.within(W.x,W.y,ne),Te=W.numPoints||1,ge=Te,Se=0,We=be;Se<We.length;Se+=1){var Ge=ue.points[We[Se]];Ge.zoom>z&&(ge+=Ge.numPoints||1)}if(ge>=Q){for(var ve=W.x*Te,Ve=W.y*Te,Le=Z&&Te>1?this._map(W,!0):null,Re=(O<<5)+(z+1)+this.points.length,wt=0,Fe=be;wt<Fe.length;wt+=1){var Pt=ue.points[Fe[wt]];if(!(Pt.zoom<=z)){Pt.zoom=z;var Yt=Pt.numPoints||1;ve+=Pt.x*Yt,Ve+=Pt.y*Yt,Pt.parentId=Re,Z&&(Le||(Le=this._map(W,!0)),Z(Le,this._map(Pt)))}}W.parentId=Re,L.push(vi(ve/ge,Ve/ge,Re,ge,Le))}else if(L.push(W),ge>1)for(var Et=0,Ut=be;Et<Ut.length;Et+=1){var At=ue.points[Ut[Et]];At.zoom<=z||(At.zoom=z,L.push(At))}}}return L},gr.prototype._getOriginId=function(k){return k-this.points.length>>5},gr.prototype._getOriginZoom=function(k){return(k-this.points.length)%32},gr.prototype._map=function(k,z){if(k.numPoints)return z?ai({},k.properties):k.properties;var L=this.points[k.index].properties,U=this.options.map(L);return z&&U===L?ai({},U):U},po.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},po.prototype.splitTile=function(k,z,L,U,Z,Q,ne){for(var O=[k,z,L,U],W=this.options,ue=W.debug;O.length;){U=O.pop(),L=O.pop(),z=O.pop(),k=O.pop();var be=1<<z,Te=ho(z,L,U),ge=this.tiles[Te];if(!ge&&(ue>1&&console.time("creation"),ge=this.tiles[Te]=Dl(k,z,L,U,W),this.tileCoords.push({z,x:L,y:U}),ue)){ue>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",z,L,U,ge.numFeatures,ge.numPoints,ge.numSimplified),console.timeEnd("creation"));var Se="z"+z;this.stats[Se]=(this.stats[Se]||0)+1,this.total++}if(ge.source=k,Z){if(z===W.maxZoom||z===Z)continue;var We=1<<Z-z;if(L!==Math.floor(Q/We)||U!==Math.floor(ne/We))continue}else if(z===W.indexMaxZoom||ge.numPoints<=W.indexMaxPoints)continue;if(ge.source=null,k.length!==0){ue>1&&console.time("clipping");var Ge,ve,Ve,Le,Re,wt,Fe=.5*W.buffer/W.extent,Pt=.5-Fe,Yt=.5+Fe,Et=1+Fe;Ge=ve=Ve=Le=null,Re=Bi(k,be,L-Fe,L+Yt,0,ge.minX,ge.maxX,W),wt=Bi(k,be,L+Pt,L+Et,0,ge.minX,ge.maxX,W),k=null,Re&&(Ge=Bi(Re,be,U-Fe,U+Yt,1,ge.minY,ge.maxY,W),ve=Bi(Re,be,U+Pt,U+Et,1,ge.minY,ge.maxY,W),Re=null),wt&&(Ve=Bi(wt,be,U-Fe,U+Yt,1,ge.minY,ge.maxY,W),Le=Bi(wt,be,U+Pt,U+Et,1,ge.minY,ge.maxY,W),wt=null),ue>1&&console.timeEnd("clipping"),O.push(Ge||[],z+1,2*L,2*U),O.push(ve||[],z+1,2*L,2*U+1),O.push(Ve||[],z+1,2*L+1,2*U),O.push(Le||[],z+1,2*L+1,2*U+1)}}},po.prototype.getTile=function(k,z,L){var U=this.options,Z=U.extent,Q=U.debug;if(k<0||k>24)return null;var ne=1<<k,O=ho(k,z=(z%ne+ne)%ne,L);if(this.tiles[O])return Bs(this.tiles[O],Z);Q>1&&console.log("drilling down to z%d-%d-%d",k,z,L);for(var W,ue=k,be=z,Te=L;!W&&ue>0;)ue--,be=Math.floor(be/2),Te=Math.floor(Te/2),W=this.tiles[ho(ue,be,Te)];return W&&W.source?(Q>1&&console.log("found parent tile z%d-%d-%d",ue,be,Te),Q>1&&console.time("drilling down"),this.splitTile(W.source,ue,be,Te,k,z,L),Q>1&&console.timeEnd("drilling down"),this.tiles[O]?Bs(this.tiles[O],Z):null):null};var Ns=function(k){function z(L,U,Z,Q){k.call(this,L,U,Z,Xa),Q&&(this.loadGeoJSON=Q)}return k&&(z.__proto__=k),(z.prototype=Object.create(k&&k.prototype)).constructor=z,z.prototype.loadData=function(L,U){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=U,this._pendingLoadDataParams=L,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},z.prototype._loadData=function(){var L=this;if(this._pendingCallback&&this._pendingLoadDataParams){var U=this._pendingCallback,Z=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Q=!!(Z&&Z.request&&Z.request.collectResourceTiming)&&new c.RequestPerformance(Z.request);this.loadGeoJSON(Z,function(ne,O){if(ne||!O)return U(ne);if(typeof O!="object")return U(new Error("Input data given to '"+Z.source+"' is not a valid GeoJSON object."));(function ge(Se,We){var Ge,ve=Se&&Se.type;if(ve==="FeatureCollection")for(Ge=0;Ge<Se.features.length;Ge++)ge(Se.features[Ge],We);else if(ve==="GeometryCollection")for(Ge=0;Ge<Se.geometries.length;Ge++)ge(Se.geometries[Ge],We);else if(ve==="Feature")ge(Se.geometry,We);else if(ve==="Polygon")ae(Se.coordinates,We);else if(ve==="MultiPolygon")for(Ge=0;Ge<Se.coordinates.length;Ge++)ae(Se.coordinates[Ge],We);return Se})(O,!0);try{if(Z.filter){var W=c.createExpression(Z.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(W.result==="error")throw new Error(W.value.map(function(ge){return ge.key+": "+ge.message}).join(", "));var ue=O.features.filter(function(ge){return W.value.evaluate({zoom:0},ge)});O={type:"FeatureCollection",features:ue}}L._geoJSONIndex=Z.cluster?new gr(function(ge){var Se=ge.superclusterOptions,We=ge.clusterProperties;if(!We||!Se)return Se;for(var Ge={},ve={},Ve={accumulated:null,zoom:0},Le={properties:null},Re=Object.keys(We),wt=0,Fe=Re;wt<Fe.length;wt+=1){var Pt=Fe[wt],Yt=We[Pt],Et=Yt[0],Ut=c.createExpression(Yt[1]),At=c.createExpression(typeof Et=="string"?[Et,["accumulated"],["get",Pt]]:Et);Ge[Pt]=Ut.value,ve[Pt]=At.value}return Se.map=function(xn){Le.properties=xn;for(var qt={},Sr=0,$t=Re;Sr<$t.length;Sr+=1){var kt=$t[Sr];qt[kt]=Ge[kt].evaluate(Ve,Le)}return qt},Se.reduce=function(xn,qt){Le.properties=qt;for(var Sr=0,$t=Re;Sr<$t.length;Sr+=1){var kt=$t[Sr];Ve.accumulated=xn[kt],xn[kt]=ve[kt].evaluate(Ve,Le)}},Se}(Z)).load(O.features):function(ge,Se){return new po(ge,Se)}(O,Z.geojsonVtOptions)}catch(ge){return U(ge)}L.loaded={};var be={};if(Q){var Te=Q.finish();Te&&(be.resourceTiming={},be.resourceTiming[Z.source]=JSON.parse(JSON.stringify(Te)))}U(null,be)})}},z.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},z.prototype.reloadTile=function(L,U){var Z=this.loaded;return Z&&Z[L.uid]?k.prototype.reloadTile.call(this,L,U):this.loadTile(L,U)},z.prototype.loadGeoJSON=function(L,U){if(L.request)c.getJSON(L.request,U);else{if(typeof L.data!="string")return U(new Error("Input data given to '"+L.source+"' is not a valid GeoJSON object."));try{return U(null,JSON.parse(L.data))}catch{return U(new Error("Input data given to '"+L.source+"' is not a valid GeoJSON object."))}}},z.prototype.removeSource=function(L,U){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),U()},z.prototype.getClusterExpansionZoom=function(L,U){try{U(null,this._geoJSONIndex.getClusterExpansionZoom(L.clusterId))}catch(Z){U(Z)}},z.prototype.getClusterChildren=function(L,U){try{U(null,this._geoJSONIndex.getChildren(L.clusterId))}catch(Z){U(Z)}},z.prototype.getClusterLeaves=function(L,U){try{U(null,this._geoJSONIndex.getLeaves(L.clusterId,L.limit,L.offset))}catch(Z){U(Z)}},z}(Me),br=function(k){var z=this;this.self=k,this.actor=new c.Actor(k,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Me,geojson:Ns},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(L,U){if(z.workerSourceTypes[L])throw new Error('Worker source with name "'+L+'" already registered.');z.workerSourceTypes[L]=U},this.self.registerRTLTextPlugin=function(L){if(c.plugin.isParsed())throw new Error("RTL text plugin already registered.");c.plugin.applyArabicShaping=L.applyArabicShaping,c.plugin.processBidirectionalText=L.processBidirectionalText,c.plugin.processStyledBidirectionalText=L.processStyledBidirectionalText}};return br.prototype.setReferrer=function(k,z){this.referrer=z},br.prototype.setImages=function(k,z,L){for(var U in this.availableImages[k]=z,this.workerSources[k]){var Z=this.workerSources[k][U];for(var Q in Z)Z[Q].availableImages=z}L()},br.prototype.setLayers=function(k,z,L){this.getLayerIndex(k).replace(z),L()},br.prototype.updateLayers=function(k,z,L){this.getLayerIndex(k).update(z.layers,z.removedIds),L()},br.prototype.loadTile=function(k,z,L){this.getWorkerSource(k,z.type,z.source).loadTile(z,L)},br.prototype.loadDEMTile=function(k,z,L){this.getDEMWorkerSource(k,z.source).loadTile(z,L)},br.prototype.reloadTile=function(k,z,L){this.getWorkerSource(k,z.type,z.source).reloadTile(z,L)},br.prototype.abortTile=function(k,z,L){this.getWorkerSource(k,z.type,z.source).abortTile(z,L)},br.prototype.removeTile=function(k,z,L){this.getWorkerSource(k,z.type,z.source).removeTile(z,L)},br.prototype.removeDEMTile=function(k,z){this.getDEMWorkerSource(k,z.source).removeTile(z)},br.prototype.removeSource=function(k,z,L){if(this.workerSources[k]&&this.workerSources[k][z.type]&&this.workerSources[k][z.type][z.source]){var U=this.workerSources[k][z.type][z.source];delete this.workerSources[k][z.type][z.source],U.removeSource!==void 0?U.removeSource(z,L):L()}},br.prototype.loadWorkerSource=function(k,z,L){try{this.self.importScripts(z.url),L()}catch(U){L(U.toString())}},br.prototype.syncRTLPluginState=function(k,z,L){try{c.plugin.setState(z);var U=c.plugin.getPluginURL();if(c.plugin.isLoaded()&&!c.plugin.isParsed()&&U!=null){this.self.importScripts(U);var Z=c.plugin.isParsed();L(Z?void 0:new Error("RTL Text Plugin failed to import scripts from "+U),Z)}}catch(Q){L(Q.toString())}},br.prototype.getAvailableImages=function(k){var z=this.availableImages[k];return z||(z=[]),z},br.prototype.getLayerIndex=function(k){var z=this.layerIndexes[k];return z||(z=this.layerIndexes[k]=new ee),z},br.prototype.getWorkerSource=function(k,z,L){var U=this;return this.workerSources[k]||(this.workerSources[k]={}),this.workerSources[k][z]||(this.workerSources[k][z]={}),this.workerSources[k][z][L]||(this.workerSources[k][z][L]=new this.workerSourceTypes[z]({send:function(Z,Q,ne){U.actor.send(Z,Q,ne,k)}},this.getLayerIndex(k),this.getAvailableImages(k))),this.workerSources[k][z][L]},br.prototype.getDEMWorkerSource=function(k,z){return this.demWorkerSources[k]||(this.demWorkerSources[k]={}),this.demWorkerSources[k][z]||(this.demWorkerSources[k][z]=new at),this.demWorkerSources[k][z]},br.prototype.enforceCacheSizeLimit=function(k,z){c.enforceCacheSizeLimit(z)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new br(self)),br}),w(["./shared"],function(c){var F=c.createCommonjsModule(function(o){function s(d){return!a(d)}function a(d){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var v,b,T=new Blob([""],{type:"text/javascript"}),P=URL.createObjectURL(T);try{b=new Worker(P),v=!0}catch{v=!1}return b&&b.terminate(),URL.revokeObjectURL(P),v}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var v=document.createElement("canvas");v.width=v.height=1;var b=v.getContext("2d");if(!b)return!1;var T=b.getImageData(0,0,1,1);return T&&T.width===v.width}()?(u[g=d&&d.failIfMajorPerformanceCaveat]===void 0&&(u[g]=function(v){var b=function(P){var R=document.createElement("canvas"),B=Object.create(s.webGLContextAttributes);return B.failIfMajorPerformanceCaveat=P,R.probablySupportsContext?R.probablySupportsContext("webgl",B)||R.probablySupportsContext("experimental-webgl",B):R.supportsContext?R.supportsContext("webgl",B)||R.supportsContext("experimental-webgl",B):R.getContext("webgl",B)||R.getContext("experimental-webgl",B)}(v);if(!b)return!1;var T=b.createShader(b.VERTEX_SHADER);return!(!T||b.isContextLost())&&(b.shaderSource(T,"void main() {}"),b.compileShader(T),b.getShaderParameter(T,b.COMPILE_STATUS)===!0)}(g)),u[g]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var g}o.exports?o.exports=s:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=s,window.mapboxgl.notSupportedReason=a);var u={};s.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),M={create:function(o,s,a){var u=c.window.document.createElement(o);return s!==void 0&&(u.className=s),a&&a.appendChild(u),u},createNS:function(o,s){return c.window.document.createElementNS(o,s)}},ee=c.window.document&&c.window.document.documentElement.style;function oe(o){if(!ee)return o[0];for(var s=0;s<o.length;s++)if(o[s]in ee)return o[s];return o[0]}var me,te=oe(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);M.disableDrag=function(){ee&&te&&(me=ee[te],ee[te]="none")},M.enableDrag=function(){ee&&te&&(ee[te]=me)};var Pe=oe(["transform","WebkitTransform"]);M.setTransform=function(o,s){o.style[Pe]=s};var Me=!1;try{var ke=Object.defineProperty({},"passive",{get:function(){Me=!0}});c.window.addEventListener("test",ke,ke),c.window.removeEventListener("test",ke,ke)}catch{Me=!1}M.addEventListener=function(o,s,a,u){u===void 0&&(u={}),o.addEventListener(s,a,"passive"in u&&Me?u:u.capture)},M.removeEventListener=function(o,s,a,u){u===void 0&&(u={}),o.removeEventListener(s,a,"passive"in u&&Me?u:u.capture)};var at=function(o){o.preventDefault(),o.stopPropagation(),c.window.removeEventListener("click",at,!0)};function ae(o){var s=o.userImage;return!!(s&&s.render&&s.render())&&(o.data.replace(new Uint8Array(s.data.buffer)),!0)}M.suppressClick=function(){c.window.addEventListener("click",at,!0),c.window.setTimeout(function(){c.window.removeEventListener("click",at,!0)},0)},M.mousePos=function(o,s){var a=o.getBoundingClientRect();return new c.Point(s.clientX-a.left-o.clientLeft,s.clientY-a.top-o.clientTop)},M.touchPos=function(o,s){for(var a=o.getBoundingClientRect(),u=[],d=0;d<s.length;d++)u.push(new c.Point(s[d].clientX-a.left-o.clientLeft,s[d].clientY-a.top-o.clientTop));return u},M.mouseButton=function(o){return c.window.InstallTrigger!==void 0&&o.button===2&&o.ctrlKey&&c.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:o.button},M.remove=function(o){o.parentNode&&o.parentNode.removeChild(o)};var J=function(o){function s(){o.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.RGBAImage({width:1,height:1}),this.dirty=!0}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(a){if(this.loaded!==a&&(this.loaded=a,a)){for(var u=0,d=this.requestors;u<d.length;u+=1){var g=d[u];this._notify(g.ids,g.callback)}this.requestors=[]}},s.prototype.getImage=function(a){return this.images[a]},s.prototype.addImage=function(a,u){this._validate(a,u)&&(this.images[a]=u)},s.prototype._validate=function(a,u){var d=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new c.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchX" value'))),d=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new c.ErrorEvent(new Error('Image "'+a+'" has invalid "stretchY" value'))),d=!1),this._validateContent(u.content,u)||(this.fire(new c.ErrorEvent(new Error('Image "'+a+'" has invalid "content" value'))),d=!1),d},s.prototype._validateStretch=function(a,u){if(!a)return!0;for(var d=0,g=0,v=a;g<v.length;g+=1){var b=v[g];if(b[0]<d||b[1]<b[0]||u<b[1])return!1;d=b[1]}return!0},s.prototype._validateContent=function(a,u){return!(a&&(a.length!==4||a[0]<0||u.data.width<a[0]||a[1]<0||u.data.height<a[1]||a[2]<0||u.data.width<a[2]||a[3]<0||u.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))},s.prototype.updateImage=function(a,u){u.version=this.images[a].version+1,this.images[a]=u,this.updatedImages[a]=!0},s.prototype.removeImage=function(a){var u=this.images[a];delete this.images[a],delete this.patterns[a],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()},s.prototype.listImages=function(){return Object.keys(this.images)},s.prototype.getImages=function(a,u){var d=!0;if(!this.isLoaded())for(var g=0,v=a;g<v.length;g+=1)this.images[v[g]]||(d=!1);this.isLoaded()||d?this._notify(a,u):this.requestors.push({ids:a,callback:u})},s.prototype._notify=function(a,u){for(var d={},g=0,v=a;g<v.length;g+=1){var b=v[g];this.images[b]||this.fire(new c.Event("styleimagemissing",{id:b}));var T=this.images[b];T?d[b]={data:T.data.clone(),pixelRatio:T.pixelRatio,sdf:T.sdf,version:T.version,stretchX:T.stretchX,stretchY:T.stretchY,content:T.content,hasRenderCallback:!!(T.userImage&&T.userImage.render)}:c.warnOnce('Image "'+b+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}u(null,d)},s.prototype.getPixelSize=function(){var a=this.atlasImage;return{width:a.width,height:a.height}},s.prototype.getPattern=function(a){var u=this.patterns[a],d=this.getImage(a);if(!d)return null;if(u&&u.position.version===d.version)return u.position;if(u)u.position.version=d.version;else{var g={w:d.data.width+2,h:d.data.height+2,x:0,y:0},v=new c.ImagePosition(g,d);this.patterns[a]={bin:g,position:v}}return this._updatePatternAtlas(),this.patterns[a].position},s.prototype.bind=function(a){var u=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.Texture(a,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)},s.prototype._updatePatternAtlas=function(){var a=[];for(var u in this.patterns)a.push(this.patterns[u].bin);var d=c.potpack(a),g=d.w,v=d.h,b=this.atlasImage;for(var T in b.resize({width:g||1,height:v||1}),this.patterns){var P=this.patterns[T].bin,R=P.x+1,B=P.y+1,N=this.images[T].data,H=N.width,G=N.height;c.RGBAImage.copy(N,b,{x:0,y:0},{x:R,y:B},{width:H,height:G}),c.RGBAImage.copy(N,b,{x:0,y:G-1},{x:R,y:B-1},{width:H,height:1}),c.RGBAImage.copy(N,b,{x:0,y:0},{x:R,y:B+G},{width:H,height:1}),c.RGBAImage.copy(N,b,{x:H-1,y:0},{x:R-1,y:B},{width:1,height:G}),c.RGBAImage.copy(N,b,{x:0,y:0},{x:R+H,y:B},{width:1,height:G})}this.dirty=!0},s.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},s.prototype.dispatchRenderCallbacks=function(a){for(var u=0,d=a;u<d.length;u+=1){var g=d[u];if(!this.callbackDispatchedThisFrame[g]){this.callbackDispatchedThisFrame[g]=!0;var v=this.images[g];ae(v)&&this.updateImage(g,v)}}},s}(c.Evented),le=Ke,xe=Ke,Ue=1e20;function Ke(o,s,a,u,d,g){this.fontSize=o||24,this.buffer=s===void 0?3:s,this.cutoff=u||.25,this.fontFamily=d||"sans-serif",this.fontWeight=g||"normal",this.radius=a||8;var v=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=v,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(v*v),this.gridInner=new Float64Array(v*v),this.f=new Float64Array(v),this.d=new Float64Array(v),this.z=new Float64Array(v+1),this.v=new Int16Array(v),this.middle=Math.round(v/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Je(o,s,a,u,d,g,v){for(var b=0;b<s;b++){for(var T=0;T<a;T++)u[T]=o[T*s+b];for(rt(u,d,g,v,a),T=0;T<a;T++)o[T*s+b]=d[T]}for(T=0;T<a;T++){for(b=0;b<s;b++)u[b]=o[T*s+b];for(rt(u,d,g,v,s),b=0;b<s;b++)o[T*s+b]=Math.sqrt(d[b])}}function rt(o,s,a,u,d){a[0]=0,u[0]=-Ue,u[1]=+Ue;for(var g=1,v=0;g<d;g++){for(var b=(o[g]+g*g-(o[a[v]]+a[v]*a[v]))/(2*g-2*a[v]);b<=u[v];)v--,b=(o[g]+g*g-(o[a[v]]+a[v]*a[v]))/(2*g-2*a[v]);a[++v]=g,u[v]=b,u[v+1]=+Ue}for(g=0,v=0;g<d;g++){for(;u[v+1]<g;)v++;s[g]=(g-a[v])*(g-a[v])+o[a[v]]}}Ke.prototype.draw=function(o){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(o,this.buffer,this.middle);for(var s=this.ctx.getImageData(0,0,this.size,this.size),a=new Uint8ClampedArray(this.size*this.size),u=0;u<this.size*this.size;u++){var d=s.data[4*u+3]/255;this.gridOuter[u]=d===1?0:d===0?Ue:Math.pow(Math.max(0,.5-d),2),this.gridInner[u]=d===1?Ue:d===0?0:Math.pow(Math.max(0,d-.5),2)}for(Je(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Je(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),u=0;u<this.size*this.size;u++)a[u]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[u]-this.gridInner[u])/this.radius+this.cutoff))));return a},le.default=xe;var It=function(o,s){this.requestManager=o,this.localIdeographFontFamily=s,this.entries={}};It.prototype.setURL=function(o){this.url=o},It.prototype.getGlyphs=function(o,s){var a=this,u=[];for(var d in o)for(var g=0,v=o[d];g<v.length;g+=1)u.push({stack:d,id:v[g]});c.asyncAll(u,function(b,T){var P=b.stack,R=b.id,B=a.entries[P];B||(B=a.entries[P]={glyphs:{},requests:{},ranges:{}});var N=B.glyphs[R];if(N===void 0){if(N=a._tinySDF(B,P,R))return B.glyphs[R]=N,void T(null,{stack:P,id:R,glyph:N});var H=Math.floor(R/256);if(256*H>65535)T(new Error("glyphs > 65535 not supported"));else if(B.ranges[H])T(null,{stack:P,id:R,glyph:N});else{var G=B.requests[H];G||(G=B.requests[H]=[],It.loadGlyphRange(P,H,a.url,a.requestManager,function(K,V){if(V){for(var $ in V)a._doesCharSupportLocalGlyph(+$)||(B.glyphs[+$]=V[+$]);B.ranges[H]=!0}for(var re=0,se=G;re<se.length;re+=1)(0,se[re])(K,V);delete B.requests[H]})),G.push(function(K,V){K?T(K):V&&T(null,{stack:P,id:R,glyph:V[R]||null})})}}else T(null,{stack:P,id:R,glyph:N})},function(b,T){if(b)s(b);else if(T){for(var P={},R=0,B=T;R<B.length;R+=1){var N=B[R],H=N.stack,G=N.id,K=N.glyph;(P[H]||(P[H]={}))[G]=K&&{id:K.id,bitmap:K.bitmap.clone(),metrics:K.metrics}}s(null,P)}})},It.prototype._doesCharSupportLocalGlyph=function(o){return!!this.localIdeographFontFamily&&(c.isChar["CJK Unified Ideographs"](o)||c.isChar["Hangul Syllables"](o)||c.isChar.Hiragana(o)||c.isChar.Katakana(o))},It.prototype._tinySDF=function(o,s,a){var u=this.localIdeographFontFamily;if(u&&this._doesCharSupportLocalGlyph(a)){var d=o.tinySDF;if(!d){var g="400";/bold/i.test(s)?g="900":/medium/i.test(s)?g="500":/light/i.test(s)&&(g="200"),d=o.tinySDF=new It.TinySDF(24,3,8,.25,u,g)}return{id:a,bitmap:new c.AlphaImage({width:30,height:30},d.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},It.loadGlyphRange=function(o,s,a,u,d){var g=256*s,v=g+255,b=u.transformRequest(u.normalizeGlyphsURL(a).replace("{fontstack}",o).replace("{range}",g+"-"+v),c.ResourceType.Glyphs);c.getArrayBuffer(b,function(T,P){if(T)d(T);else if(P){for(var R={},B=0,N=c.parseGlyphPBF(P);B<N.length;B+=1){var H=N[B];R[H.id]=H}d(null,R)}})},It.TinySDF=le;var yt=function(){this.specification=c.styleSpec.light.position};yt.prototype.possiblyEvaluate=function(o,s){return c.sphericalToCartesian(o.expression.evaluate(s))},yt.prototype.interpolate=function(o,s,a){return{x:c.number(o.x,s.x,a),y:c.number(o.y,s.y,a),z:c.number(o.z,s.z,a)}};var tr=new c.Properties({anchor:new c.DataConstantProperty(c.styleSpec.light.anchor),position:new yt,color:new c.DataConstantProperty(c.styleSpec.light.color),intensity:new c.DataConstantProperty(c.styleSpec.light.intensity)}),Wr=function(o){function s(a){o.call(this),this._transitionable=new c.Transitionable(tr),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getLight=function(){return this._transitionable.serialize()},s.prototype.setLight=function(a,u){if(u===void 0&&(u={}),!this._validate(c.validateLight,a,u))for(var d in a){var g=a[d];c.endsWith(d,"-transition")?this._transitionable.setTransition(d.slice(0,-11),g):this._transitionable.setValue(d,g)}},s.prototype.updateTransitions=function(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)},s.prototype.hasTransition=function(){return this._transitioning.hasTransition()},s.prototype.recalculate=function(a){this.properties=this._transitioning.possiblyEvaluate(a)},s.prototype._validate=function(a,u,d){return(!d||d.validate!==!1)&&c.emitValidationErrors(this,a.call(c.validateStyle,c.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.styleSpec})))},s}(c.Evented),Nt=function(o,s){this.width=o,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Nt.prototype.getDash=function(o,s){var a=o.join(",")+String(s);return this.dashEntry[a]||(this.dashEntry[a]=this.addDash(o,s)),this.dashEntry[a]},Nt.prototype.getDashRanges=function(o,s,a){var u=[],d=o.length%2==1?-o[o.length-1]*a:0,g=o[0]*a,v=!0;u.push({left:d,right:g,isDash:v,zeroLength:o[0]===0});for(var b=o[0],T=1;T<o.length;T++){var P=o[T];u.push({left:d=b*a,right:g=(b+=P)*a,isDash:v=!v,zeroLength:P===0})}return u},Nt.prototype.addRoundDash=function(o,s,a){for(var u=s/2,d=-a;d<=a;d++)for(var g=this.width*(this.nextRow+a+d),v=0,b=o[v],T=0;T<this.width;T++){T/b.right>1&&(b=o[++v]);var P=Math.abs(T-b.left),R=Math.abs(T-b.right),B=Math.min(P,R),N=void 0,H=d/a*(u+1);if(b.isDash){var G=u-Math.abs(H);N=Math.sqrt(B*B+G*G)}else N=u-Math.sqrt(B*B+H*H);this.data[g+T]=Math.max(0,Math.min(255,N+128))}},Nt.prototype.addRegularDash=function(o){for(var s=o.length-1;s>=0;--s){var a=o[s],u=o[s+1];a.zeroLength?o.splice(s,1):u&&u.isDash===a.isDash&&(u.left=a.left,o.splice(s,1))}var d=o[0],g=o[o.length-1];d.isDash===g.isDash&&(d.left=g.left-this.width,g.right=d.right+this.width);for(var v=this.width*this.nextRow,b=0,T=o[b],P=0;P<this.width;P++){P/T.right>1&&(T=o[++b]);var R=Math.abs(P-T.left),B=Math.abs(P-T.right),N=Math.min(R,B);this.data[v+P]=Math.max(0,Math.min(255,(T.isDash?N:-N)+128))}},Nt.prototype.addDash=function(o,s){var a=s?7:0,u=2*a+1;if(this.nextRow+u>this.height)return c.warnOnce("LineAtlas out of space"),null;for(var d=0,g=0;g<o.length;g++)d+=o[g];if(d!==0){var v=this.width/d,b=this.getDashRanges(o,this.width,v);s?this.addRoundDash(b,v,a):this.addRegularDash(b)}var T={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:d};return this.nextRow+=u,this.dirty=!0,T},Nt.prototype.bind=function(o){var s=o.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))};var Ht=function o(s,a){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=c.uniqueId();for(var u=this.workerPool.acquire(this.id),d=0;d<u.length;d++){var g=new o.Actor(u[d],a,this.id);g.name="Worker "+d,this.actors.push(g)}};function Gn(o,s,a){var u=function(d,g){if(d)return a(d);if(g){var v=c.pick(c.extend(g,o),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);g.vector_layers&&(v.vectorLayers=g.vector_layers,v.vectorLayerIds=v.vectorLayers.map(function(b){return b.id})),v.tiles=s.canonicalizeTileset(v,o.url),a(null,v)}};return o.url?c.getJSON(s.transformRequest(s.normalizeSourceURL(o.url),c.ResourceType.Source),u):c.browser.frame(function(){return u(null,o)})}Ht.prototype.broadcast=function(o,s,a){c.asyncAll(this.actors,function(u,d){u.send(o,s,d)},a=a||function(){})},Ht.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Ht.prototype.remove=function(){this.actors.forEach(function(o){o.remove()}),this.actors=[],this.workerPool.release(this.id)},Ht.Actor=c.Actor;var yr=function(o,s,a){this.bounds=c.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=s||0,this.maxzoom=a||24};yr.prototype.validateBounds=function(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]},yr.prototype.contains=function(o){var s=Math.pow(2,o.z),a=Math.floor(c.mercatorXfromLng(this.bounds.getWest())*s),u=Math.floor(c.mercatorYfromLat(this.bounds.getNorth())*s),d=Math.ceil(c.mercatorXfromLng(this.bounds.getEast())*s),g=Math.ceil(c.mercatorYfromLat(this.bounds.getSouth())*s);return o.x>=a&&o.x<d&&o.y>=u&&o.y<g};var Mn=function(o){function s(a,u,d,g){if(o.call(this),this.id=a,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.extend(this,c.pick(u,["url","scheme","tileSize","promoteId"])),this._options=c.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Gn(this._options,this.map._requestManager,function(u,d){a._tileJSONRequest=null,a._loaded=!0,u?a.fire(new c.ErrorEvent(u)):d&&(c.extend(a,d),d.bounds&&(a.tileBounds=new yr(d.bounds,a.minzoom,a.maxzoom)),c.postTurnstileEvent(d.tiles,a.map._requestManager._customAccessToken),c.postMapLoadEvent(d.tiles,a.map._getMapId(),a.map._requestManager._skuToken,a.map._requestManager._customAccessToken),a.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setSourceProperty=function(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},s.prototype.setTiles=function(a){var u=this;return this.setSourceProperty(function(){u._options.tiles=a}),this},s.prototype.setUrl=function(a){var u=this;return this.setSourceProperty(function(){u.url=a,u._options.url=a}),this},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return c.extend({},this._options)},s.prototype.loadTile=function(a,u){var d=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(d,c.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:c.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function v(b,T){return delete a.request,a.aborted?u(null):b&&b.status!==404?u(b):(T&&T.resourceTiming&&(a.resourceTiming=T.resourceTiming),this.map._refreshExpiredTiles&&T&&a.setExpiryData(T),a.loadVectorData(T,this.map.painter),c.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=u:a.request=a.actor.send("reloadTile",g,v.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",g,v.bind(this)))},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.unloadTile=function(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)},s.prototype.hasTransition=function(){return!1},s}(c.Evented),He=function(o){function s(a,u,d,g){o.call(this),this.id=a,this.dispatcher=d,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.extend({type:"raster"},u),c.extend(this,c.pick(u,["url","scheme","tileSize"]))}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Gn(this._options,this.map._requestManager,function(u,d){a._tileJSONRequest=null,a._loaded=!0,u?a.fire(new c.ErrorEvent(u)):d&&(c.extend(a,d),d.bounds&&(a.tileBounds=new yr(d.bounds,a.minzoom,a.maxzoom)),c.postTurnstileEvent(d.tiles),c.postMapLoadEvent(d.tiles,a.map._getMapId(),a.map._requestManager._skuToken),a.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})},s.prototype.loaded=function(){return this._loaded},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},s.prototype.serialize=function(){return c.extend({},this._options)},s.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},s.prototype.loadTile=function(a,u){var d=this,g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);a.request=c.getImage(this.map._requestManager.transformRequest(g,c.ResourceType.Tile),function(v,b){if(delete a.request,a.aborted)a.state="unloaded",u(null);else if(v)a.state="errored",u(v);else if(b){d.map._refreshExpiredTiles&&a.setExpiryData(b),delete b.cacheControl,delete b.expires;var T=d.map.painter.context,P=T.gl;a.texture=d.map.painter.getTileTexture(b.width),a.texture?a.texture.update(b,{useMipmap:!0}):(a.texture=new c.Texture(T,b,P.RGBA,{useMipmap:!0}),a.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),T.extTextureFilterAnisotropic&&P.texParameterf(P.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax)),a.state="loaded",c.cacheEntryPossiblyAdded(d.dispatcher),u(null)}})},s.prototype.abortTile=function(a,u){a.request&&(a.request.cancel(),delete a.request),u()},s.prototype.unloadTile=function(a,u){a.texture&&this.map.painter.saveTileTexture(a.texture),u()},s.prototype.hasTransition=function(){return!1},s}(c.Evented),gt=function(o){function s(a,u,d,g){o.call(this,a,u,d,g),this.type="raster-dem",this.maxzoom=22,this._options=c.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},s.prototype.loadTile=function(a,u){var d=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function g(v,b){v&&(a.state="errored",u(v)),b&&(a.dem=b,a.needsHillshadePrepare=!0,a.state="loaded",u(null))}a.request=c.getImage(this.map._requestManager.transformRequest(d,c.ResourceType.Tile),(function(v,b){if(delete a.request,a.aborted)a.state="unloaded",u(null);else if(v)a.state="errored",u(v);else if(b){this.map._refreshExpiredTiles&&a.setExpiryData(b),delete b.cacheControl,delete b.expires;var T=c.window.ImageBitmap&&b instanceof c.window.ImageBitmap&&c.offscreenCanvasSupported()?b:c.browser.getImageData(b,1),P={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:T,encoding:this.encoding};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",P,g.bind(this)))}}).bind(this)),a.neighboringTiles=this._getNeighboringTiles(a.tileID)},s.prototype._getNeighboringTiles=function(a){var u=a.canonical,d=Math.pow(2,u.z),g=(u.x-1+d)%d,v=u.x===0?a.wrap-1:a.wrap,b=(u.x+1+d)%d,T=u.x+1===d?a.wrap+1:a.wrap,P={};return P[new c.OverscaledTileID(a.overscaledZ,v,u.z,g,u.y).key]={backfilled:!1},P[new c.OverscaledTileID(a.overscaledZ,T,u.z,b,u.y).key]={backfilled:!1},u.y>0&&(P[new c.OverscaledTileID(a.overscaledZ,v,u.z,g,u.y-1).key]={backfilled:!1},P[new c.OverscaledTileID(a.overscaledZ,a.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},P[new c.OverscaledTileID(a.overscaledZ,T,u.z,b,u.y-1).key]={backfilled:!1}),u.y+1<d&&(P[new c.OverscaledTileID(a.overscaledZ,v,u.z,g,u.y+1).key]={backfilled:!1},P[new c.OverscaledTileID(a.overscaledZ,a.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},P[new c.OverscaledTileID(a.overscaledZ,T,u.z,b,u.y+1).key]={backfilled:!1}),P},s.prototype.unloadTile=function(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})},s}(He),ft=function(o){function s(a,u,d,g){o.call(this),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(g),this._data=u.data,this._options=c.extend({},u),this._collectResourceTiming=u.collectResourceTiming,this._resourceTiming=[],u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;var v=c.EXTENT/this.tileSize;this.workerOptions=c.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*v,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*v,extent:c.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?Math.min(u.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:c.EXTENT,radius:(u.clusterRadius||50)*v,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this.fire(new c.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(u){if(u)a.fire(new c.ErrorEvent(u));else{var d={dataType:"source",sourceDataType:"metadata"};a._collectResourceTiming&&a._resourceTiming&&a._resourceTiming.length>0&&(d.resourceTiming=a._resourceTiming,a._resourceTiming=[]),a.fire(new c.Event("data",d))}})},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setData=function(a){var u=this;return this._data=a,this.fire(new c.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(d){if(d)u.fire(new c.ErrorEvent(d));else{var g={dataType:"source",sourceDataType:"content"};u._collectResourceTiming&&u._resourceTiming&&u._resourceTiming.length>0&&(g.resourceTiming=u._resourceTiming,u._resourceTiming=[]),u.fire(new c.Event("data",g))}}),this},s.prototype.getClusterExpansionZoom=function(a,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},u),this},s.prototype.getClusterChildren=function(a,u){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},u),this},s.prototype.getClusterLeaves=function(a,u,d,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:u,offset:d},g),this},s.prototype._updateWorkerData=function(a){var u=this;this._loaded=!1;var d=c.extend({},this.workerOptions),g=this._data;typeof g=="string"?(d.request=this.map._requestManager.transformRequest(c.browser.resolveURL(g),c.ResourceType.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(g),this.actor.send(this.type+".loadData",d,function(v,b){u._removed||b&&b.abandoned||(u._loaded=!0,b&&b.resourceTiming&&b.resourceTiming[u.id]&&(u._resourceTiming=b.resourceTiming[u.id].slice(0)),u.actor.send(u.type+".coalesce",{source:d.source},null),a(v))})},s.prototype.loaded=function(){return this._loaded},s.prototype.loadTile=function(a,u){var d=this,g=a.actor?"reloadTile":"loadTile";a.actor=this.actor,a.request=this.actor.send(g,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:c.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(v,b){return delete a.request,a.unloadVectorData(),a.aborted?u(null):v?u(v):(a.loadVectorData(b,d.map.painter,g==="reloadTile"),u(null))})},s.prototype.abortTile=function(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0},s.prototype.unloadTile=function(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})},s.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},s.prototype.serialize=function(){return c.extend({},this._options,{type:this.type,data:this._data})},s.prototype.hasTransition=function(){return!1},s}(c.Evented),Lt=c.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ot=function(o){function s(a,u,d,g){o.call(this),this.id=a,this.dispatcher=d,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(a,u){var d=this;this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this.url=this.options.url,c.getImage(this.map._requestManager.transformRequest(this.url,c.ResourceType.Image),function(g,v){d._loaded=!0,g?d.fire(new c.ErrorEvent(g)):v&&(d.image=v,a&&(d.coordinates=a),u&&u(),d._finishLoading())})},s.prototype.loaded=function(){return this._loaded},s.prototype.updateImage=function(a){var u=this;return this.image&&a.url?(this.options.url=a.url,this.load(a.coordinates,function(){u.texture=null}),this):this},s.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})))},s.prototype.onAdd=function(a){this.map=a,this.load()},s.prototype.setCoordinates=function(a){var u=this;this.coordinates=a;var d=a.map(c.MercatorCoordinate.fromLngLat);this.tileID=function(v){for(var b=1/0,T=1/0,P=-1/0,R=-1/0,B=0,N=v;B<N.length;B+=1){var H=N[B];b=Math.min(b,H.x),T=Math.min(T,H.y),P=Math.max(P,H.x),R=Math.max(R,H.y)}var G=Math.max(P-b,R-T),K=Math.max(0,Math.floor(-Math.log(G)/Math.LN2)),V=Math.pow(2,K);return new c.CanonicalTileID(K,Math.floor((b+P)/2*V),Math.floor((T+R)/2*V))}(d),this.minzoom=this.maxzoom=this.tileID.z;var g=d.map(function(v){return u.tileID.getTilePoint(v)._round()});return this._boundsArray=new c.StructArrayLayout4i8,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,c.EXTENT,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,c.EXTENT),this._boundsArray.emplaceBack(g[2].x,g[2].y,c.EXTENT,c.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})),this},s.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var a=this.map.painter.context,u=a.gl;for(var d in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Lt.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new c.Texture(a,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this.tiles){var g=this.tiles[d];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}},s.prototype.loadTile=function(a,u){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},u(null)):(a.state="errored",u(null))},s.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return!1},s}(c.Evented),gn=function(o){function s(a,u,d,g){o.call(this,a,u,d,g),this.roundZoom=!0,this.type="video",this.options=u}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){var a=this;this._loaded=!1;var u=this.options;this.urls=[];for(var d=0,g=u.urls;d<g.length;d+=1)this.urls.push(this.map._requestManager.transformRequest(g[d],c.ResourceType.Source).url);c.getVideo(this.urls,function(v,b){a._loaded=!0,v?a.fire(new c.ErrorEvent(v)):b&&(a.video=b,a.video.loop=!0,a.video.setAttribute("playsinline",""),a.video.addEventListener("playing",function(){a.map.triggerRepaint()}),a.map&&a.video.play(),a._finishLoading())})},s.prototype.pause=function(){this.video&&this.video.pause()},s.prototype.play=function(){this.video&&this.video.play()},s.prototype.seek=function(a){if(this.video){var u=this.video.seekable;a<u.start(0)||a>u.end(0)?this.fire(new c.ErrorEvent(new c.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+u.start(0)+" and "+u.end(0)+"-second mark."))):this.video.currentTime=a}},s.prototype.getVideo=function(){return this.video},s.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},s.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var a=this.map.painter.context,u=a.gl;for(var d in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Lt.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new c.Texture(a,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this.tiles){var g=this.tiles[d];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this.video&&!this.video.paused},s}(Ot),nn=function(o){function s(a,u,d,g){o.call(this,a,u,d,g),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(function(v){return!Array.isArray(v)||v.length!==2||v.some(function(b){return typeof b!="number"})})||this.fire(new c.ErrorEvent(new c.ValidationError("sources."+a,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.ErrorEvent(new c.ValidationError("sources."+a,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new c.ErrorEvent(new c.ValidationError("sources."+a,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof c.window.HTMLCanvasElement||this.fire(new c.ErrorEvent(new c.ValidationError("sources."+a,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.ErrorEvent(new c.ValidationError("sources."+a,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof c.window.HTMLCanvasElement?this.options.canvas:c.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},s.prototype.getCanvas=function(){return this.canvas},s.prototype.onAdd=function(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()},s.prototype.onRemove=function(){this.pause()},s.prototype.prepare=function(){var a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var u=this.map.painter.context,d=u.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Lt.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new c.Texture(u,this.canvas,d.RGBA,{premultiply:!0}),this.tiles){var v=this.tiles[g];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}},s.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},s.prototype.hasTransition=function(){return this._playing},s.prototype._hasInvalidDimensions=function(){for(var a=0,u=[this.canvas.width,this.canvas.height];a<u.length;a+=1){var d=u[a];if(isNaN(d)||d<=0)return!0}return!1},s}(Ot),pn={vector:Mn,raster:He,"raster-dem":gt,geojson:ft,video:gn,image:Ot,canvas:nn};function Zn(o,s){var a=c.identity([]);return c.translate(a,a,[1,1,0]),c.scale(a,a,[.5*o.width,.5*o.height,1]),c.multiply(a,a,o.calculatePosMatrix(s.toUnwrapped()))}function gr(o,s,a,u,d,g){var v=function(K,V,$){if(K)for(var re=0,se=K;re<se.length;re+=1){var de=V[se[re]];if(de&&de.source===$&&de.type==="fill-extrusion")return!0}else for(var he in V){var ye=V[he];if(ye.source===$&&ye.type==="fill-extrusion")return!0}return!1}(d&&d.layers,s,o.id),b=g.maxPitchScaleFactor(),T=o.tilesIn(u,b,v);T.sort(vi);for(var P=[],R=0,B=T;R<B.length;R+=1){var N=B[R];P.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(s,a,o._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,d,g,b,Zn(o.transform,N.tileID))})}var H=function(K){for(var V={},$={},re=0,se=K;re<se.length;re+=1){var de=se[re],he=de.queryResults,ye=de.wrappedTileID,we=$[ye]=$[ye]||{};for(var ze in he)for(var Ie=he[ze],je=we[ze]=we[ze]||{},et=V[ze]=V[ze]||[],ot=0,it=Ie;ot<it.length;ot+=1){var Dt=it[ot];je[Dt.featureIndex]||(je[Dt.featureIndex]=!0,et.push(Dt))}}return V}(P);for(var G in H)H[G].forEach(function(K){var V=K.feature,$=o.getFeatureState(V.layer["source-layer"],V.id);V.source=V.layer.source,V.layer["source-layer"]&&(V.sourceLayer=V.layer["source-layer"]),V.state=$});return H}function vi(o,s){var a=o.tileID,u=s.tileID;return a.overscaledZ-u.overscaledZ||a.canonical.y-u.canonical.y||a.wrap-u.wrap||a.canonical.x-u.canonical.x}var Wt=function(o,s){this.max=o,this.onRemove=s,this.reset()};Wt.prototype.reset=function(){for(var o in this.data)for(var s=0,a=this.data[o];s<a.length;s+=1){var u=a[s];u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value)}return this.data={},this.order=[],this},Wt.prototype.add=function(o,s,a){var u=this,d=o.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);var g={value:s,timeout:void 0};if(a!==void 0&&(g.timeout=setTimeout(function(){u.remove(o,g)},a)),this.data[d].push(g),this.order.push(d),this.order.length>this.max){var v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this},Wt.prototype.has=function(o){return o.wrapped().key in this.data},Wt.prototype.getAndRemove=function(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null},Wt.prototype._getAndRemoveByKey=function(o){var s=this.data[o].shift();return s.timeout&&clearTimeout(s.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),s.value},Wt.prototype.getByKey=function(o){var s=this.data[o];return s?s[0].value:null},Wt.prototype.get=function(o){return this.has(o)?this.data[o.wrapped().key][0].value:null},Wt.prototype.remove=function(o,s){if(!this.has(o))return this;var a=o.wrapped().key,u=s===void 0?0:this.data[a].indexOf(s),d=this.data[a][u];return this.data[a].splice(u,1),d.timeout&&clearTimeout(d.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(d.value),this.order.splice(this.order.indexOf(a),1),this},Wt.prototype.setMaxSize=function(o){for(this.max=o;this.order.length>this.max;){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},Wt.prototype.filter=function(o){var s=[];for(var a in this.data)for(var u=0,d=this.data[a];u<d.length;u+=1){var g=d[u];o(g.value)||s.push(g)}for(var v=0,b=s;v<b.length;v+=1){var T=b[v];this.remove(T.value.tileID,T)}};var Ln=function(o,s,a){this.context=o;var u=o.gl;this.buffer=u.createBuffer(),this.dynamicDraw=!!a,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),u.bufferData(u.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?u.DYNAMIC_DRAW:u.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Ln.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ln.prototype.updateData=function(o){var s=this.context.gl;this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)},Ln.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var zo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Hn=function(o,s,a,u){this.length=s.length,this.attributes=a,this.itemSize=s.bytesPerElement,this.dynamicDraw=u,this.context=o;var d=o.gl;this.buffer=d.createBuffer(),o.bindVertexBuffer.set(this.buffer),d.bufferData(d.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer};Hn.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Hn.prototype.updateData=function(o){var s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,o.arrayBuffer)},Hn.prototype.enableAttributes=function(o,s){for(var a=0;a<this.attributes.length;a++){var u=s.attributes[this.attributes[a].name];u!==void 0&&o.enableVertexAttribArray(u)}},Hn.prototype.setVertexAttribPointers=function(o,s,a){for(var u=0;u<this.attributes.length;u++){var d=this.attributes[u],g=s.attributes[d.name];g!==void 0&&o.vertexAttribPointer(g,d.components,o[zo[d.type]],!1,this.itemSize,d.offset+this.itemSize*(a||0))}},Hn.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var bt=function(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};bt.prototype.get=function(){return this.current},bt.prototype.set=function(o){},bt.prototype.getDefault=function(){return this.default},bt.prototype.setDefault=function(){this.set(this.default)};var ai=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return c.Color.transparent},s.prototype.set=function(a){var u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(bt),on=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 1},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)},s}(bt),vn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)},s}(bt),oa=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return[!0,!0,!0,!0]},s.prototype.set=function(a){var u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(bt),si=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)},s}(bt),Oi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 255},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)},s}(bt),_n=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},s.prototype.set=function(a){var u=this.current;(a.func!==u.func||a.ref!==u.ref||a.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)},s}(bt),aa=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]},s.prototype.set=function(a){var u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)},s}(bt),Za=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;a?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=a,this.dirty=!1}},s}(bt),_i=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return[0,1]},s.prototype.set=function(a){var u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)},s}(bt),xi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;a?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=a,this.dirty=!1}},s}(bt),sa=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.LESS},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)},s}(bt),Bi=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;a?u.enable(u.BLEND):u.disable(u.BLEND),this.current=a,this.dirty=!1}},s}(bt),Al=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[a.ONE,a.ZERO]},s.prototype.set=function(a){var u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)},s}(bt),Ml=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return c.Color.transparent},s.prototype.set=function(a){var u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)},s}(bt),Ds=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.FUNC_ADD},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)},s}(bt),Rs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;a?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=a,this.dirty=!1}},s}(bt),Ha=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.BACK},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)},s}(bt),Ll=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.CCW},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)},s}(bt),Wa=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)},s}(bt),Os=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return this.gl.TEXTURE0},s.prototype.set=function(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)},s}(bt),la=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){var a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]},s.prototype.set=function(a){var u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)},s}(bt),Bs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,a),this.current=a,this.dirty=!1}},s}(bt),Fs=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(bt),Dl=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;u.bindTexture(u.TEXTURE_2D,a),this.current=a,this.dirty=!1}},s}(bt),Rl=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}},s}(bt),ua=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){var u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1},s}(bt),po=function(o){function s(a){o.call(this,a),this.vao=a.extVertexArrayObject}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s.prototype.set=function(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)},s}(bt),ho=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return 4},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}},s}(bt),Xa=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}},s}(bt),Ns=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return!1},s.prototype.set=function(a){if(a!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}},s}(bt),br=function(o){function s(a,u){o.call(this,a),this.context=a,this.parent=u}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getDefault=function(){return null},s}(bt),k=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.setDirty=function(){this.dirty=!0},s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}},s}(br),z=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.set=function(a){if(a!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,a),this.current=a,this.dirty=!1}},s}(br),L=function(o,s,a,u){this.context=o,this.width=s,this.height=a;var d=this.framebuffer=o.gl.createFramebuffer();this.colorAttachment=new k(o,d),u&&(this.depthAttachment=new z(o,d))};L.prototype.destroy=function(){var o=this.context.gl,s=this.colorAttachment.get();if(s&&o.deleteTexture(s),this.depthAttachment){var a=this.depthAttachment.get();a&&o.deleteRenderbuffer(a)}o.deleteFramebuffer(this.framebuffer)};var U=function(o,s,a){this.func=o,this.mask=s,this.range=a};U.ReadOnly=!1,U.ReadWrite=!0,U.disabled=new U(519,U.ReadOnly,[0,1]);var Z=function(o,s,a,u,d,g){this.test=o,this.ref=s,this.mask=a,this.fail=u,this.depthFail=d,this.pass=g};Z.disabled=new Z({func:519,mask:0},0,0,7680,7680,7680);var Q=function(o,s,a){this.blendFunction=o,this.blendColor=s,this.mask=a};Q.disabled=new Q(Q.Replace=[1,0],c.Color.transparent,[!1,!1,!1,!1]),Q.unblended=new Q(Q.Replace,c.Color.transparent,[!0,!0,!0,!0]),Q.alphaBlended=new Q([1,771],c.Color.transparent,[!0,!0,!0,!0]);var ne=function(o,s,a){this.enable=o,this.mode=s,this.frontFace=a};ne.disabled=new ne(!1,1029,2305),ne.backCCW=new ne(!0,1029,2305);var O=function(o){this.gl=o,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ai(this),this.clearDepth=new on(this),this.clearStencil=new vn(this),this.colorMask=new oa(this),this.depthMask=new si(this),this.stencilMask=new Oi(this),this.stencilFunc=new _n(this),this.stencilOp=new aa(this),this.stencilTest=new Za(this),this.depthRange=new _i(this),this.depthTest=new xi(this),this.depthFunc=new sa(this),this.blend=new Bi(this),this.blendFunc=new Al(this),this.blendColor=new Ml(this),this.blendEquation=new Ds(this),this.cullFace=new Rs(this),this.cullFaceSide=new Ha(this),this.frontFace=new Ll(this),this.program=new Wa(this),this.activeTexture=new Os(this),this.viewport=new la(this),this.bindFramebuffer=new Bs(this),this.bindRenderbuffer=new Fs(this),this.bindTexture=new Dl(this),this.bindVertexBuffer=new Rl(this),this.bindElementBuffer=new ua(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new po(this),this.pixelStoreUnpack=new ho(this),this.pixelStoreUnpackPremultiplyAlpha=new Xa(this),this.pixelStoreUnpackFlipY=new Ns(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=o.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(o.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)};O.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},O.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},O.prototype.createIndexBuffer=function(o,s){return new Ln(this,o,s)},O.prototype.createVertexBuffer=function(o,s,a){return new Hn(this,o,s,a)},O.prototype.createRenderbuffer=function(o,s,a){var u=this.gl,d=u.createRenderbuffer();return this.bindRenderbuffer.set(d),u.renderbufferStorage(u.RENDERBUFFER,o,s,a),this.bindRenderbuffer.set(null),d},O.prototype.createFramebuffer=function(o,s,a){return new L(this,o,s,a)},O.prototype.clear=function(o){var s=o.color,a=o.depth,u=this.gl,d=0;s&&(d|=u.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(d|=u.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),u.clear(d)},O.prototype.setCullFace=function(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))},O.prototype.setDepthMode=function(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)},O.prototype.setStencilMode=function(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)},O.prototype.setColorMode=function(o){c.deepEqual(o.blendFunction,Q.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)},O.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var W=function(o){function s(a,u,d){var g=this;o.call(this),this.id=a,this.dispatcher=d,this.on("data",function(v){v.dataType==="source"&&v.sourceDataType==="metadata"&&(g._sourceLoaded=!0),g._sourceLoaded&&!g._paused&&v.dataType==="source"&&v.sourceDataType==="content"&&(g.reload(),g.transform&&g.update(g.transform))}),this.on("error",function(){g._sourceErrored=!0}),this._source=function(v,b,T,P){var R=new pn[b.type](v,b,T,P);if(R.id!==v)throw new Error("Expected Source id to be "+v+" instead of "+R.id);return c.bindAll(["load","abort","unload","serialize","prepare"],R),R}(a,u,d,this),this._tiles={},this._cache=new Wt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new c.SourceFeatureState}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.onAdd=function(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(a)},s.prototype.onRemove=function(a){this._source&&this._source.onRemove&&this._source.onRemove(a)},s.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var a in this._tiles){var u=this._tiles[a];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0},s.prototype.getSource=function(){return this._source},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){if(this._paused){var a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}},s.prototype._loadTile=function(a,u){return this._source.loadTile(a,u)},s.prototype._unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a,function(){})},s.prototype._abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a,function(){})},s.prototype.serialize=function(){return this._source.serialize()},s.prototype.prepare=function(a){for(var u in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var d=this._tiles[u];d.upload(a),d.prepare(this.map.style.imageManager)}},s.prototype.getIds=function(){return c.values(this._tiles).map(function(a){return a.tileID}).sort(ue).map(function(a){return a.key})},s.prototype.getRenderableIds=function(a){var u=this,d=[];for(var g in this._tiles)this._isIdRenderable(g,a)&&d.push(this._tiles[g]);return a?d.sort(function(v,b){var T=v.tileID,P=b.tileID,R=new c.Point(T.canonical.x,T.canonical.y)._rotate(u.transform.angle),B=new c.Point(P.canonical.x,P.canonical.y)._rotate(u.transform.angle);return T.overscaledZ-P.overscaledZ||B.y-R.y||B.x-R.x}).map(function(v){return v.tileID.key}):d.map(function(v){return v.tileID}).sort(ue).map(function(v){return v.key})},s.prototype.hasRenderableParent=function(a){var u=this.findLoadedParent(a,0);return!!u&&this._isIdRenderable(u.tileID.key)},s.prototype._isIdRenderable=function(a,u){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(u||!this._tiles[a].holdingForFade())},s.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var a in this._cache.reset(),this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")},s.prototype._reloadTile=function(a,u){var d=this._tiles[a];d&&(d.state!=="loading"&&(d.state=u),this._loadTile(d,this._tileLoaded.bind(this,d,a,u)))},s.prototype._tileLoaded=function(a,u,d,g){if(g)return a.state="errored",void(g.status!==404?this._source.fire(new c.ErrorEvent(g,{tile:a})):this.update(this.transform));a.timeAdded=c.browser.now(),d==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(u,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new c.Event("data",{dataType:"source",tile:a,coord:a.tileID}))},s.prototype._backfillDEM=function(a){for(var u=this.getRenderableIds(),d=0;d<u.length;d++){var g=u[d];if(a.neighboringTiles&&a.neighboringTiles[g]){var v=this.getTileByID(g);b(a,v),b(v,a)}}function b(T,P){T.needsHillshadePrepare=!0;var R=P.tileID.canonical.x-T.tileID.canonical.x,B=P.tileID.canonical.y-T.tileID.canonical.y,N=Math.pow(2,T.tileID.canonical.z),H=P.tileID.key;R===0&&B===0||Math.abs(B)>1||(Math.abs(R)>1&&(Math.abs(R+N)===1?R+=N:Math.abs(R-N)===1&&(R-=N)),P.dem&&T.dem&&(T.dem.backfillBorder(P.dem,R,B),T.neighboringTiles&&T.neighboringTiles[H]&&(T.neighboringTiles[H].backfilled=!0)))}},s.prototype.getTile=function(a){return this.getTileByID(a.key)},s.prototype.getTileByID=function(a){return this._tiles[a]},s.prototype._retainLoadedChildren=function(a,u,d,g){for(var v in this._tiles){var b=this._tiles[v];if(!(g[v]||!b.hasData()||b.tileID.overscaledZ<=u||b.tileID.overscaledZ>d)){for(var T=b.tileID;b&&b.tileID.overscaledZ>u+1;){var P=b.tileID.scaledTo(b.tileID.overscaledZ-1);(b=this._tiles[P.key])&&b.hasData()&&(T=P)}for(var R=T;R.overscaledZ>u;)if(a[(R=R.scaledTo(R.overscaledZ-1)).key]){g[T.key]=T;break}}}},s.prototype.findLoadedParent=function(a,u){if(a.key in this._loadedParentTiles){var d=this._loadedParentTiles[a.key];return d&&d.tileID.overscaledZ>=u?d:null}for(var g=a.overscaledZ-1;g>=u;g--){var v=a.scaledTo(g),b=this._getLoadedTile(v);if(b)return b}},s.prototype._getLoadedTile=function(a){var u=this._tiles[a.key];return u&&u.hasData()?u:this._cache.getByKey(a.wrapped().key)},s.prototype.updateCacheSize=function(a){var u=Math.ceil(a.width/this._source.tileSize)+1,d=Math.ceil(a.height/this._source.tileSize)+1,g=Math.floor(u*d*5),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(v)},s.prototype.handleWrapJump=function(a){var u=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,u){var d={};for(var g in this._tiles){var v=this._tiles[g];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+u),d[v.tileID.key]=v}for(var b in this._tiles=d,this._timers)clearTimeout(this._timers[b]),delete this._timers[b];for(var T in this._tiles)this._setTileReloadTimer(T,this._tiles[T])}},s.prototype.update=function(a){var u=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var d;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?d=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(we){return new c.OverscaledTileID(we.canonical.z,we.wrap,we.canonical.z,we.canonical.x,we.canonical.y)}):(d=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(d=d.filter(function(we){return u._source.hasTile(we)}))):d=[];var g=a.coveringZoomLevel(this._source),v=Math.max(g-s.maxOverzooming,this._source.minzoom),b=Math.max(g+s.maxUnderzooming,this._source.minzoom),T=this._updateRetainedTiles(d,g);if(be(this._source.type)){for(var P={},R={},B=0,N=Object.keys(T);B<N.length;B+=1){var H=N[B],G=T[H],K=this._tiles[H];if(K&&!(K.fadeEndTime&&K.fadeEndTime<=c.browser.now())){var V=this.findLoadedParent(G,v);V&&(this._addTile(V.tileID),P[V.tileID.key]=V.tileID),R[H]=G}}for(var $ in this._retainLoadedChildren(R,g,b,T),P)T[$]||(this._coveredTiles[$]=!0,T[$]=P[$])}for(var re in T)this._tiles[re].clearFadeHold();for(var se=0,de=c.keysDifference(this._tiles,T);se<de.length;se+=1){var he=de[se],ye=this._tiles[he];ye.hasSymbolBuckets&&!ye.holdingForFade()?ye.setHoldDuration(this.map._fadeDuration):ye.hasSymbolBuckets&&!ye.symbolFadeFinished()||this._removeTile(he)}this._updateLoadedParentTileCache()}},s.prototype.releaseSymbolFadeTiles=function(){for(var a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)},s.prototype._updateRetainedTiles=function(a,u){for(var d={},g={},v=Math.max(u-s.maxOverzooming,this._source.minzoom),b=Math.max(u+s.maxUnderzooming,this._source.minzoom),T={},P=0,R=a;P<R.length;P+=1){var B=R[P],N=this._addTile(B);d[B.key]=B,N.hasData()||u<this._source.maxzoom&&(T[B.key]=B)}this._retainLoadedChildren(T,u,b,d);for(var H=0,G=a;H<G.length;H+=1){var K=G[H],V=this._tiles[K.key];if(!V.hasData()){if(u+1>this._source.maxzoom){var $=K.children(this._source.maxzoom)[0],re=this.getTile($);if(re&&re.hasData()){d[$.key]=$;continue}}else{var se=K.children(this._source.maxzoom);if(d[se[0].key]&&d[se[1].key]&&d[se[2].key]&&d[se[3].key])continue}for(var de=V.wasRequested(),he=K.overscaledZ-1;he>=v;--he){var ye=K.scaledTo(he);if(g[ye.key]||(g[ye.key]=!0,!(V=this.getTile(ye))&&de&&(V=this._addTile(ye)),V&&(d[ye.key]=ye,de=V.wasRequested(),V.hasData())))break}}}return d},s.prototype._updateLoadedParentTileCache=function(){for(var a in this._loadedParentTiles={},this._tiles){for(var u=[],d=void 0,g=this._tiles[a].tileID;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){d=this._loadedParentTiles[g.key];break}u.push(g.key);var v=g.scaledTo(g.overscaledZ-1);if(d=this._getLoadedTile(v))break;g=v}for(var b=0,T=u;b<T.length;b+=1)this._loadedParentTiles[T[b]]=d}},s.prototype._addTile=function(a){var u=this._tiles[a.key];if(u)return u;(u=this._cache.getAndRemove(a))&&(this._setTileReloadTimer(a.key,u),u.tileID=a,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,u)));var d=!!u;return d||(u=new c.Tile(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,a.key,u.state))),u?(u.uses++,this._tiles[a.key]=u,d||this._source.fire(new c.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null},s.prototype._setTileReloadTimer=function(a,u){var d=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);var g=u.getExpiryTimeout();g&&(this._timers[a]=setTimeout(function(){d._reloadTile(a,"expired"),delete d._timers[a]},g))},s.prototype._removeTile=function(a){var u=this._tiles[a];u&&(u.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))},s.prototype.clearTiles=function(){for(var a in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(a);this._cache.reset()},s.prototype.tilesIn=function(a,u,d){var g=this,v=[],b=this.transform;if(!b)return v;for(var T=d?b.getCameraQueryGeometry(a):a,P=a.map(function(he){return b.pointCoordinate(he)}),R=T.map(function(he){return b.pointCoordinate(he)}),B=this.getIds(),N=1/0,H=1/0,G=-1/0,K=-1/0,V=0,$=R;V<$.length;V+=1){var re=$[V];N=Math.min(N,re.x),H=Math.min(H,re.y),G=Math.max(G,re.x),K=Math.max(K,re.y)}for(var se=function(he){var ye=g._tiles[B[he]];if(!ye.holdingForFade()){var we=ye.tileID,ze=Math.pow(2,b.zoom-ye.tileID.overscaledZ),Ie=u*ye.queryPadding*c.EXTENT/ye.tileSize/ze,je=[we.getTilePoint(new c.MercatorCoordinate(N,H)),we.getTilePoint(new c.MercatorCoordinate(G,K))];if(je[0].x-Ie<c.EXTENT&&je[0].y-Ie<c.EXTENT&&je[1].x+Ie>=0&&je[1].y+Ie>=0){var et=P.map(function(it){return we.getTilePoint(it)}),ot=R.map(function(it){return we.getTilePoint(it)});v.push({tile:ye,tileID:we,queryGeometry:et,cameraQueryGeometry:ot,scale:ze})}}},de=0;de<B.length;de++)se(de);return v},s.prototype.getVisibleCoordinates=function(a){for(var u=this,d=this.getRenderableIds(a).map(function(T){return u._tiles[T].tileID}),g=0,v=d;g<v.length;g+=1){var b=v[g];b.posMatrix=this.transform.calculatePosMatrix(b.toUnwrapped())}return d},s.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(be(this._source.type))for(var a in this._tiles){var u=this._tiles[a];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=c.browser.now())return!0}return!1},s.prototype.setFeatureState=function(a,u,d){this._state.updateState(a=a||"_geojsonTileLayer",u,d)},s.prototype.removeFeatureState=function(a,u,d){this._state.removeFeatureState(a=a||"_geojsonTileLayer",u,d)},s.prototype.getFeatureState=function(a,u){return this._state.getState(a=a||"_geojsonTileLayer",u)},s.prototype.setDependencies=function(a,u,d){var g=this._tiles[a];g&&g.setDependencies(u,d)},s.prototype.reloadTilesForDependencies=function(a,u){for(var d in this._tiles)this._tiles[d].hasDependency(a,u)&&this._reloadTile(d,"reloading");this._cache.filter(function(g){return!g.hasDependency(a,u)})},s}(c.Evented);function ue(o,s){var a=Math.abs(2*o.wrap)-+(o.wrap<0),u=Math.abs(2*s.wrap)-+(s.wrap<0);return o.overscaledZ-s.overscaledZ||u-a||s.canonical.y-o.canonical.y||s.canonical.x-o.canonical.x}function be(o){return o==="raster"||o==="image"||o==="video"}function Te(){return new c.window.Worker(tu.workerUrl)}W.maxOverzooming=10,W.maxUnderzooming=3;var ge="mapboxgl_preloaded_worker_pool",Se=function(){this.active={}};Se.prototype.acquire=function(o){if(!this.workers)for(this.workers=[];this.workers.length<Se.workerCount;)this.workers.push(new Te);return this.active[o]=!0,this.workers.slice()},Se.prototype.release=function(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(function(s){s.terminate()}),this.workers=null)},Se.prototype.isPreloaded=function(){return!!this.active[ge]},Se.prototype.numActive=function(){return Object.keys(this.active).length};var We,Ge=Math.floor(c.browser.hardwareConcurrency/2);function ve(){return We||(We=new Se),We}function Ve(o,s){var a={};for(var u in o)u!=="ref"&&(a[u]=o[u]);return c.refProperties.forEach(function(d){d in s&&(a[d]=s[d])}),a}function Le(o){o=o.slice();for(var s=Object.create(null),a=0;a<o.length;a++)s[o[a].id]=o[a];for(var u=0;u<o.length;u++)"ref"in o[u]&&(o[u]=Ve(o[u],s[o[u].ref]));return o}Se.workerCount=Math.max(Math.min(Ge,6),1);var Re={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function wt(o,s,a){a.push({command:Re.addSource,args:[o,s[o]]})}function Fe(o,s,a){s.push({command:Re.removeSource,args:[o]}),a[o]=!0}function Pt(o,s,a,u){Fe(o,a,u),wt(o,s,a)}function Yt(o,s,a){var u;for(u in o[a])if(o[a].hasOwnProperty(u)&&u!=="data"&&!c.deepEqual(o[a][u],s[a][u]))return!1;for(u in s[a])if(s[a].hasOwnProperty(u)&&u!=="data"&&!c.deepEqual(o[a][u],s[a][u]))return!1;return!0}function Et(o,s,a,u,d,g){var v;for(v in s=s||{},o=o||{})o.hasOwnProperty(v)&&(c.deepEqual(o[v],s[v])||a.push({command:g,args:[u,v,s[v],d]}));for(v in s)s.hasOwnProperty(v)&&!o.hasOwnProperty(v)&&(c.deepEqual(o[v],s[v])||a.push({command:g,args:[u,v,s[v],d]}))}function Ut(o){return o.id}function At(o,s){return o[s.id]=s,o}var xn=function(o,s){this.reset(o,s)};xn.prototype.reset=function(o,s){this.points=o||[],this._distances=[0];for(var a=1;a<this.points.length;a++)this._distances[a]=this._distances[a-1]+this.points[a].dist(this.points[a-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding},xn.prototype.lerp=function(o){if(this.points.length===1)return this.points[0];o=c.clamp(o,0,1);for(var s=1,a=this._distances[s],u=o*this.paddedLength+this.padding;a<u&&s<this._distances.length;)a=this._distances[++s];var d=s-1,g=this._distances[d],v=a-g,b=v>0?(u-g)/v:0;return this.points[d].mult(1-b).add(this.points[s].mult(b))};var qt=function(o,s,a){var u=this.boxCells=[],d=this.circleCells=[];this.xCellCount=Math.ceil(o/a),this.yCellCount=Math.ceil(s/a);for(var g=0;g<this.xCellCount*this.yCellCount;g++)u.push([]),d.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=s,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0};function Sr(o,s,a,u,d){var g=c.create();return s?(c.scale(g,g,[1/d,1/d,1]),a||c.rotateZ(g,g,u.angle)):c.multiply(g,u.labelPlaneMatrix,o),g}function $t(o,s,a,u,d){if(s){var g=c.clone(o);return c.scale(g,g,[d,d,1]),a||c.rotateZ(g,g,-u.angle),g}return u.glCoordMatrix}function kt(o,s){var a=[o.x,o.y,0,1];$r(a,a,s);var u=a[3];return{point:new c.Point(a[0]/u,a[1]/u),signedDistanceFromCamera:u}}function Vt(o,s){return .5+o/s*.5}function Dn(o,s){var a=o[0]/o[3],u=o[1]/o[3];return a>=-s[0]&&a<=s[0]&&u>=-s[1]&&u<=s[1]}function Us(o,s,a,u,d,g,v,b){var T=u?o.textSizeData:o.iconSizeData,P=c.evaluateSizeForZoom(T,a.transform.zoom),R=[256/a.width*2+1,256/a.height*2+1],B=u?o.text.dynamicLayoutVertexArray:o.icon.dynamicLayoutVertexArray;B.clear();for(var N=o.lineVertexArray,H=u?o.text.placedSymbolArray:o.icon.placedSymbolArray,G=a.transform.width/a.transform.height,K=!1,V=0;V<H.length;V++){var $=H.get(V);if($.hidden||$.writingMode===c.WritingMode.vertical&&!K)wn($.numGlyphs,B);else{K=!1;var re=[$.anchorX,$.anchorY,0,1];if(c.transformMat4(re,re,s),Dn(re,R)){var se=Vt(a.transform.cameraToCenterDistance,re[3]),de=c.evaluateSizeForFeature(T,P,$),he=v?de/se:de*se,ye=new c.Point($.anchorX,$.anchorY),we=kt(ye,d).point,ze={},Ie=oc($,he,!1,b,s,d,g,o.glyphOffsetArray,N,B,we,ye,ze,G);K=Ie.useVertical,(Ie.notEnoughRoom||K||Ie.needsFlipping&&oc($,he,!0,b,s,d,g,o.glyphOffsetArray,N,B,we,ye,ze,G).notEnoughRoom)&&wn($.numGlyphs,B)}else wn($.numGlyphs,B)}}u?o.text.dynamicLayoutVertexBuffer.updateData(B):o.icon.dynamicLayoutVertexBuffer.updateData(B)}function Xr(o,s,a,u,d,g,v,b,T,P,R){var B=b.glyphStartIndex+b.numGlyphs,N=b.lineStartIndex,H=b.lineStartIndex+b.lineLength,G=s.getoffsetX(b.glyphStartIndex),K=s.getoffsetX(B-1),V=Er(o*G,a,u,d,g,v,b.segment,N,H,T,P,R);if(!V)return null;var $=Er(o*K,a,u,d,g,v,b.segment,N,H,T,P,R);return $?{first:V,last:$}:null}function Rn(o,s,a,u){return o===c.WritingMode.horizontal&&Math.abs(a.y-s.y)>Math.abs(a.x-s.x)*u?{useVertical:!0}:(o===c.WritingMode.vertical?s.y<a.y:s.x>a.x)?{needsFlipping:!0}:null}function oc(o,s,a,u,d,g,v,b,T,P,R,B,N,H){var G,K=s/24,V=o.lineOffsetX*K,$=o.lineOffsetY*K;if(o.numGlyphs>1){var re=o.glyphStartIndex+o.numGlyphs,se=o.lineStartIndex,de=o.lineStartIndex+o.lineLength,he=Xr(K,b,V,$,a,R,B,o,T,g,N);if(!he)return{notEnoughRoom:!0};var ye=kt(he.first.point,v).point,we=kt(he.last.point,v).point;if(u&&!a){var ze=Rn(o.writingMode,ye,we,H);if(ze)return ze}G=[he.first];for(var Ie=o.glyphStartIndex+1;Ie<re-1;Ie++)G.push(Er(K*b.getoffsetX(Ie),V,$,a,R,B,o.segment,se,de,T,g,N));G.push(he.last)}else{if(u&&!a){var je=kt(B,d).point,et=o.lineStartIndex+o.segment+1,ot=new c.Point(T.getx(et),T.gety(et)),it=kt(ot,d),Dt=it.signedDistanceFromCamera>0?it.point:Vs(B,ot,je,1,d),qe=Rn(o.writingMode,je,Dt,H);if(qe)return qe}var dt=Er(K*b.getoffsetX(o.glyphStartIndex),V,$,a,R,B,o.segment,o.lineStartIndex,o.lineStartIndex+o.lineLength,T,g,N);if(!dt)return{notEnoughRoom:!0};G=[dt]}for(var _t=0,ht=G;_t<ht.length;_t+=1){var pt=ht[_t];c.addDynamicAttributes(P,pt.point,pt.angle)}return{}}function Vs(o,s,a,u,d){var g=kt(o.add(o.sub(s)._unit()),d).point,v=a.sub(g);return a.add(v._mult(u/v.mag()))}function Er(o,s,a,u,d,g,v,b,T,P,R,B){var N=u?o-s:o+s,H=N>0?1:-1,G=0;u&&(H*=-1,G=Math.PI),H<0&&(G+=Math.PI);for(var K=H>0?b+v:b+v+1,V=d,$=d,re=0,se=0,de=Math.abs(N),he=[];re+se<=de;){if((K+=H)<b||K>=T)return null;if($=V,he.push(V),(V=B[K])===void 0){var ye=new c.Point(P.getx(K),P.gety(K)),we=kt(ye,R);if(we.signedDistanceFromCamera>0)V=B[K]=we.point;else{var ze=K-H;V=Vs(re===0?g:new c.Point(P.getx(ze),P.gety(ze)),ye,$,de-re+1,R)}}re+=se,se=$.dist(V)}var Ie=(de-re)/se,je=V.sub($),et=je.mult(Ie)._add($);et._add(je._unit()._perp()._mult(a*H));var ot=G+Math.atan2(V.y-$.y,V.x-$.x);return he.push(et),{point:et,angle:ot,path:he}}qt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},qt.prototype.insert=function(o,s,a,u,d){this._forEachCell(s,a,u,d,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(s),this.bboxes.push(a),this.bboxes.push(u),this.bboxes.push(d)},qt.prototype.insertCircle=function(o,s,a,u){this._forEachCell(s-u,a-u,s+u,a+u,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(s),this.circles.push(a),this.circles.push(u)},qt.prototype._insertBoxCell=function(o,s,a,u,d,g){this.boxCells[d].push(g)},qt.prototype._insertCircleCell=function(o,s,a,u,d,g){this.circleCells[d].push(g)},qt.prototype._query=function(o,s,a,u,d,g){if(a<0||o>this.width||u<0||s>this.height)return!d&&[];var v=[];if(o<=0&&s<=0&&this.width<=a&&this.height<=u){if(d)return!0;for(var b=0;b<this.boxKeys.length;b++)v.push({key:this.boxKeys[b],x1:this.bboxes[4*b],y1:this.bboxes[4*b+1],x2:this.bboxes[4*b+2],y2:this.bboxes[4*b+3]});for(var T=0;T<this.circleKeys.length;T++){var P=this.circles[3*T],R=this.circles[3*T+1],B=this.circles[3*T+2];v.push({key:this.circleKeys[T],x1:P-B,y1:R-B,x2:P+B,y2:R+B})}return g?v.filter(g):v}return this._forEachCell(o,s,a,u,this._queryCell,v,{hitTest:d,seenUids:{box:{},circle:{}}},g),d?v.length>0:v},qt.prototype._queryCircle=function(o,s,a,u,d){var g=o-a,v=o+a,b=s-a,T=s+a;if(v<0||g>this.width||T<0||b>this.height)return!u&&[];var P=[];return this._forEachCell(g,b,v,T,this._queryCellCircle,P,{hitTest:u,circle:{x:o,y:s,radius:a},seenUids:{box:{},circle:{}}},d),u?P.length>0:P},qt.prototype.query=function(o,s,a,u,d){return this._query(o,s,a,u,!1,d)},qt.prototype.hitTest=function(o,s,a,u,d){return this._query(o,s,a,u,!0,d)},qt.prototype.hitTestCircle=function(o,s,a,u){return this._queryCircle(o,s,a,!0,u)},qt.prototype._queryCell=function(o,s,a,u,d,g,v,b){var T=v.seenUids,P=this.boxCells[d];if(P!==null)for(var R=this.bboxes,B=0,N=P;B<N.length;B+=1){var H=N[B];if(!T.box[H]){T.box[H]=!0;var G=4*H;if(o<=R[G+2]&&s<=R[G+3]&&a>=R[G+0]&&u>=R[G+1]&&(!b||b(this.boxKeys[H]))){if(v.hitTest)return g.push(!0),!0;g.push({key:this.boxKeys[H],x1:R[G],y1:R[G+1],x2:R[G+2],y2:R[G+3]})}}}var K=this.circleCells[d];if(K!==null)for(var V=this.circles,$=0,re=K;$<re.length;$+=1){var se=re[$];if(!T.circle[se]){T.circle[se]=!0;var de=3*se;if(this._circleAndRectCollide(V[de],V[de+1],V[de+2],o,s,a,u)&&(!b||b(this.circleKeys[se]))){if(v.hitTest)return g.push(!0),!0;var he=V[de],ye=V[de+1],we=V[de+2];g.push({key:this.circleKeys[se],x1:he-we,y1:ye-we,x2:he+we,y2:ye+we})}}}},qt.prototype._queryCellCircle=function(o,s,a,u,d,g,v,b){var T=v.circle,P=v.seenUids,R=this.boxCells[d];if(R!==null)for(var B=this.bboxes,N=0,H=R;N<H.length;N+=1){var G=H[N];if(!P.box[G]){P.box[G]=!0;var K=4*G;if(this._circleAndRectCollide(T.x,T.y,T.radius,B[K+0],B[K+1],B[K+2],B[K+3])&&(!b||b(this.boxKeys[G])))return g.push(!0),!0}}var V=this.circleCells[d];if(V!==null)for(var $=this.circles,re=0,se=V;re<se.length;re+=1){var de=se[re];if(!P.circle[de]){P.circle[de]=!0;var he=3*de;if(this._circlesCollide($[he],$[he+1],$[he+2],T.x,T.y,T.radius)&&(!b||b(this.circleKeys[de])))return g.push(!0),!0}}},qt.prototype._forEachCell=function(o,s,a,u,d,g,v,b){for(var T=this._convertToXCellCoord(o),P=this._convertToYCellCoord(s),R=this._convertToXCellCoord(a),B=this._convertToYCellCoord(u),N=T;N<=R;N++)for(var H=P;H<=B;H++)if(d.call(this,o,s,a,u,this.xCellCount*H+N,g,v,b))return},qt.prototype._convertToXCellCoord=function(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))},qt.prototype._convertToYCellCoord=function(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))},qt.prototype._circlesCollide=function(o,s,a,u,d,g){var v=u-o,b=d-s,T=a+g;return T*T>v*v+b*b},qt.prototype._circleAndRectCollide=function(o,s,a,u,d,g,v){var b=(g-u)/2,T=Math.abs(o-(u+b));if(T>b+a)return!1;var P=(v-d)/2,R=Math.abs(s-(d+P));if(R>P+a)return!1;if(T<=b||R<=P)return!0;var B=T-b,N=R-P;return B*B+N*N<=a*a};var js=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function wn(o,s){for(var a=0;a<o;a++){var u=s.length;s.resize(u+4),s.float32.set(js,3*u)}}function $r(o,s,a){var u=s[0],d=s[1];return o[0]=a[0]*u+a[4]*d+a[12],o[1]=a[1]*u+a[5]*d+a[13],o[3]=a[3]*u+a[7]*d+a[15],o}var wi=function(o,s,a){s===void 0&&(s=new qt(o.width+200,o.height+200,25)),a===void 0&&(a=new qt(o.width+200,o.height+200,25)),this.transform=o,this.grid=s,this.ignoredGrid=a,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+100,this.screenBottomBoundary=o.height+100,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200};function ar(o,s,a){return s*(c.EXTENT/(o.tileSize*Math.pow(2,a-o.tileID.overscaledZ)))}wi.prototype.placeCollisionBox=function(o,s,a,u,d){var g=this.projectAndGetPerspectiveRatio(u,o.anchorPointX,o.anchorPointY),v=a*g.perspectiveRatio,b=o.x1*v+g.point.x,T=o.y1*v+g.point.y,P=o.x2*v+g.point.x,R=o.y2*v+g.point.y;return!this.isInsideGrid(b,T,P,R)||!s&&this.grid.hitTest(b,T,P,R,d)?{box:[],offscreen:!1}:{box:[b,T,P,R],offscreen:this.isOffscreen(b,T,P,R)}},wi.prototype.placeCollisionCircles=function(o,s,a,u,d,g,v,b,T,P,R,B,N){var H=[],G=new c.Point(s.anchorX,s.anchorY),K=kt(G,g),V=Vt(this.transform.cameraToCenterDistance,K.signedDistanceFromCamera),$=(P?d/V:d*V)/c.ONE_EM,re=kt(G,v).point,se=Xr($,u,s.lineOffsetX*$,s.lineOffsetY*$,!1,re,G,s,a,v,{}),de=!1,he=!1,ye=!0;if(se){for(var we=.5*B*V+N,ze=new c.Point(-100,-100),Ie=new c.Point(this.screenRightBoundary,this.screenBottomBoundary),je=new xn,et=se.first,ot=se.last,it=[],Dt=et.path.length-1;Dt>=1;Dt--)it.push(et.path[Dt]);for(var qe=1;qe<ot.path.length;qe++)it.push(ot.path[qe]);var dt=2.5*we;if(b){var _t=it.map(function(Ii){return kt(Ii,b)});it=_t.some(function(Ii){return Ii.signedDistanceFromCamera<=0})?[]:_t.map(function(Ii){return Ii.point})}var ht=[];if(it.length>0){for(var pt=it[0].clone(),vt=it[0].clone(),ct=1;ct<it.length;ct++)pt.x=Math.min(pt.x,it[ct].x),pt.y=Math.min(pt.y,it[ct].y),vt.x=Math.max(vt.x,it[ct].x),vt.y=Math.max(vt.y,it[ct].y);ht=pt.x>=ze.x&&vt.x<=Ie.x&&pt.y>=ze.y&&vt.y<=Ie.y?[it]:vt.x<ze.x||pt.x>Ie.x||vt.y<ze.y||pt.y>Ie.y?[]:c.clipLine([it],ze.x,ze.y,Ie.x,Ie.y)}for(var lt=0,jr=ht;lt<jr.length;lt+=1){var vr;je.reset(jr[lt],.25*we),vr=je.length<=.5*we?1:Math.ceil(je.paddedLength/dt)+1;for(var hn=0;hn<vr;hn++){var Yr=hn/Math.max(vr-1,1),fr=je.lerp(Yr),Tr=fr.x+100,Qn=fr.y+100;H.push(Tr,Qn,we,0);var Tn=Tr-we,Zo=Qn-we,On=Tr+we,Gi=Qn+we;if(ye=ye&&this.isOffscreen(Tn,Zo,On,Gi),he=he||this.isInsideGrid(Tn,Zo,On,Gi),!o&&this.grid.hitTestCircle(Tr,Qn,we,R)&&(de=!0,!T))return{circles:[],offscreen:!1,collisionDetected:de}}}}return{circles:!T&&de||!he?[]:H,offscreen:ye,collisionDetected:de}},wi.prototype.queryRenderedSymbols=function(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var s=[],a=1/0,u=1/0,d=-1/0,g=-1/0,v=0,b=o;v<b.length;v+=1){var T=b[v],P=new c.Point(T.x+100,T.y+100);a=Math.min(a,P.x),u=Math.min(u,P.y),d=Math.max(d,P.x),g=Math.max(g,P.y),s.push(P)}for(var R={},B={},N=0,H=this.grid.query(a,u,d,g).concat(this.ignoredGrid.query(a,u,d,g));N<H.length;N+=1){var G=H[N],K=G.key;if(R[K.bucketInstanceId]===void 0&&(R[K.bucketInstanceId]={}),!R[K.bucketInstanceId][K.featureIndex]){var V=[new c.Point(G.x1,G.y1),new c.Point(G.x2,G.y1),new c.Point(G.x2,G.y2),new c.Point(G.x1,G.y2)];c.polygonIntersectsPolygon(s,V)&&(R[K.bucketInstanceId][K.featureIndex]=!0,B[K.bucketInstanceId]===void 0&&(B[K.bucketInstanceId]=[]),B[K.bucketInstanceId].push(K.featureIndex))}}return B},wi.prototype.insertCollisionBox=function(o,s,a,u,d){(s?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:u,collisionGroupID:d},o[0],o[1],o[2],o[3])},wi.prototype.insertCollisionCircles=function(o,s,a,u,d){for(var g=s?this.ignoredGrid:this.grid,v={bucketInstanceId:a,featureIndex:u,collisionGroupID:d},b=0;b<o.length;b+=4)g.insertCircle(v,o[b],o[b+1],o[b+2])},wi.prototype.projectAndGetPerspectiveRatio=function(o,s,a){var u=[s,a,0,1];return $r(u,u,o),{point:new c.Point((u[0]/u[3]+1)/2*this.transform.width+100,(-u[1]/u[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/u[3]*.5}},wi.prototype.isOffscreen=function(o,s,a,u){return a<100||o>=this.screenRightBoundary||u<100||s>this.screenBottomBoundary},wi.prototype.isInsideGrid=function(o,s,a,u){return a>=0&&o<this.gridRightBoundary&&u>=0&&s<this.gridBottomBoundary},wi.prototype.getViewportMatrix=function(){var o=c.identity([]);return c.translate(o,o,[-100,-100,0]),o};var Fi=function(o,s,a,u){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?s:-s))):u&&a?1:0,this.placed=a};Fi.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var li=function(o,s,a,u,d){this.text=new Fi(o?o.text:null,s,a,d),this.icon=new Fi(o?o.icon:null,s,u,d)};li.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var eh=function(o,s,a){this.text=o,this.icon=s,this.skipFade=a},bi=function(){this.invProjMatrix=c.create(),this.viewportMatrix=c.create(),this.circles=[]},Gd=function(o,s,a,u,d){this.bucketInstanceId=o,this.featureIndex=s,this.sourceLayerIndex=a,this.bucketIndex=u,this.tileID=d},fo=function(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}};function an(o,s,a,u,d){var g=c.getAnchorAlignment(o),v=-(g.horizontalAlign-.5)*s,b=-(g.verticalAlign-.5)*a,T=c.evaluateVariableOffset(o,u);return new c.Point(v+T[0]*d,b+T[1]*d)}function Ji(o,s,a,u,d,g){var v=o.x1,b=o.x2,T=o.y1,P=o.y2,R=o.anchorPointX,B=o.anchorPointY,N=new c.Point(s,a);return u&&N._rotate(d?g:-g),{x1:v+N.x,y1:T+N.y,x2:b+N.x,y2:P+N.y,anchorPointX:R,anchorPointY:B}}fo.prototype.get=function(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){var s=++this.maxGroupID;this.collisionGroups[o]={ID:s,predicate:function(a){return a.collisionGroupID===s}}}return this.collisionGroups[o]};var bn=function(o,s,a,u){this.transform=o.clone(),this.collisionIndex=new wi(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=s,this.retainedQueryData={},this.collisionGroups=new fo(a),this.collisionCircleArrays={},this.prevPlacement=u,u&&(u.prevPlacement=void 0),this.placedOrientations={}};function ca(o,s,a,u,d){o.emplaceBack(s?1:0,a?1:0,u||0,d||0),o.emplaceBack(s?1:0,a?1:0,u||0,d||0),o.emplaceBack(s?1:0,a?1:0,u||0,d||0),o.emplaceBack(s?1:0,a?1:0,u||0,d||0)}bn.prototype.getBucketParts=function(o,s,a,u){var d=a.getBucket(s),g=a.latestFeatureIndex;if(d&&g&&s.id===d.layerIds[0]){var v=a.collisionBoxArray,b=d.layers[0].layout,T=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),P=a.tileSize/c.EXTENT,R=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),B=b.get("text-pitch-alignment")==="map",N=b.get("text-rotation-alignment")==="map",H=ar(a,1,this.transform.zoom),G=Sr(R,B,N,this.transform,H),K=null;if(B){var V=$t(R,B,N,this.transform,H);K=c.multiply([],this.transform.labelPlaneMatrix,V)}this.retainedQueryData[d.bucketInstanceId]=new Gd(d.bucketInstanceId,g,d.sourceLayerIndex,d.index,a.tileID);var $={bucket:d,layout:b,posMatrix:R,textLabelPlaneMatrix:G,labelToScreenMatrix:K,scale:T,textPixelRatio:P,holdingForFade:a.holdingForFade(),collisionBoxArray:v,partiallyEvaluatedTextSize:c.evaluateSizeForZoom(d.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(d.sourceID)};if(u)for(var re=0,se=d.sortKeyRanges;re<se.length;re+=1){var de=se[re];o.push({sortKey:de.sortKey,symbolInstanceStart:de.symbolInstanceStart,symbolInstanceEnd:de.symbolInstanceEnd,parameters:$})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:d.symbolInstances.length,parameters:$})}},bn.prototype.attemptAnchorPlacement=function(o,s,a,u,d,g,v,b,T,P,R,B,N,H,G){var K,V=[B.textOffset0,B.textOffset1],$=an(o,a,u,V,d),re=this.collisionIndex.placeCollisionBox(Ji(s,$.x,$.y,g,v,this.transform.angle),R,b,T,P.predicate);if(!G||this.collisionIndex.placeCollisionBox(Ji(G,$.x,$.y,g,v,this.transform.angle),R,b,T,P.predicate).box.length!==0)return re.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[B.crossTileID]&&this.prevPlacement.placements[B.crossTileID]&&this.prevPlacement.placements[B.crossTileID].text&&(K=this.prevPlacement.variableOffsets[B.crossTileID].anchor),this.variableOffsets[B.crossTileID]={textOffset:V,width:a,height:u,anchor:o,textBoxScale:d,prevAnchor:K},this.markUsedJustification(N,o,B,H),N.allowVerticalPlacement&&(this.markUsedOrientation(N,H,B),this.placedOrientations[B.crossTileID]=H),{shift:$,placedGlyphBoxes:re}):void 0},bn.prototype.placeLayerBucketPart=function(o,s,a){var u=this,d=o.parameters,g=d.bucket,v=d.layout,b=d.posMatrix,T=d.textLabelPlaneMatrix,P=d.labelToScreenMatrix,R=d.textPixelRatio,B=d.holdingForFade,N=d.collisionBoxArray,H=d.partiallyEvaluatedTextSize,G=d.collisionGroup,K=v.get("text-optional"),V=v.get("icon-optional"),$=v.get("text-allow-overlap"),re=v.get("icon-allow-overlap"),se=v.get("text-rotation-alignment")==="map",de=v.get("text-pitch-alignment")==="map",he=v.get("icon-text-fit")!=="none",ye=v.get("symbol-z-order")==="viewport-y",we=$&&(re||!g.hasIconData()||V),ze=re&&($||!g.hasTextData()||K);!g.collisionArrays&&N&&g.deserializeCollisionBoxes(N);var Ie=function(qe,dt){if(!s[qe.crossTileID])if(B)u.placements[qe.crossTileID]=new eh(!1,!1,!1);else{var _t,ht=!1,pt=!1,vt=!0,ct=null,lt={box:null,offscreen:null},jr={box:null,offscreen:null},vr=null,hn=null,Yr=0,fr=0,Tr=0;dt.textFeatureIndex?Yr=dt.textFeatureIndex:qe.useRuntimeCollisionCircles&&(Yr=qe.featureIndex),dt.verticalTextFeatureIndex&&(fr=dt.verticalTextFeatureIndex);var Qn=dt.textBox;if(Qn){var Tn=function(jt){var pi=c.WritingMode.horizontal;if(g.allowVerticalPlacement&&!jt&&u.prevPlacement){var Bn=u.prevPlacement.placedOrientations[qe.crossTileID];Bn&&(u.placedOrientations[qe.crossTileID]=Bn,u.markUsedOrientation(g,pi=Bn,qe))}return pi},Zo=function(jt,pi){if(g.allowVerticalPlacement&&qe.numVerticalGlyphVertices>0&&dt.verticalTextBox)for(var Bn=0,ka=g.writingModes;Bn<ka.length&&(ka[Bn]===c.WritingMode.vertical?(lt=pi(),jr=lt):lt=jt(),!(lt&&lt.box&&lt.box.length));Bn+=1);else lt=jt()};if(v.get("text-variable-anchor")){var On=v.get("text-variable-anchor");if(u.prevPlacement&&u.prevPlacement.variableOffsets[qe.crossTileID]){var Gi=u.prevPlacement.variableOffsets[qe.crossTileID];On.indexOf(Gi.anchor)>0&&(On=On.filter(function(jt){return jt!==Gi.anchor})).unshift(Gi.anchor)}var Ii=function(jt,pi,Bn){for(var ka=jt.x2-jt.x1,im=jt.y2-jt.y1,ru=qe.textBoxScale,om=he&&!re?pi:null,ul={box:[],offscreen:!1},Ah=$?2*On.length:On.length,ls=0;ls<Ah;++ls){var nu=u.attemptAnchorPlacement(On[ls%On.length],jt,ka,im,ru,se,de,R,b,G,ls>=On.length,qe,g,Bn,om);if(nu&&(ul=nu.placedGlyphBoxes)&&ul.box&&ul.box.length){ht=!0,ct=nu.shift;break}}return ul};Zo(function(){return Ii(Qn,dt.iconBox,c.WritingMode.horizontal)},function(){var jt=dt.verticalTextBox;return g.allowVerticalPlacement&&!(lt&&lt.box&&lt.box.length)&&qe.numVerticalGlyphVertices>0&&jt?Ii(jt,dt.verticalIconBox,c.WritingMode.vertical):{box:null,offscreen:null}}),lt&&(ht=lt.box,vt=lt.offscreen);var al=Tn(lt&&lt.box);if(!ht&&u.prevPlacement){var as=u.prevPlacement.variableOffsets[qe.crossTileID];as&&(u.variableOffsets[qe.crossTileID]=as,u.markUsedJustification(g,as.anchor,qe,al))}}else{var Ho=function(jt,pi){var Bn=u.collisionIndex.placeCollisionBox(jt,$,R,b,G.predicate);return Bn&&Bn.box&&Bn.box.length&&(u.markUsedOrientation(g,pi,qe),u.placedOrientations[qe.crossTileID]=pi),Bn};Zo(function(){return Ho(Qn,c.WritingMode.horizontal)},function(){var jt=dt.verticalTextBox;return g.allowVerticalPlacement&&qe.numVerticalGlyphVertices>0&&jt?Ho(jt,c.WritingMode.vertical):{box:null,offscreen:null}}),Tn(lt&&lt.box&&lt.box.length)}}if(ht=(_t=lt)&&_t.box&&_t.box.length>0,vt=_t&&_t.offscreen,qe.useRuntimeCollisionCircles){var ss=g.text.placedSymbolArray.get(qe.centerJustifiedTextSymbolIndex),sl=c.evaluateSizeForFeature(g.textSizeData,H,ss),ro=v.get("text-padding");vr=u.collisionIndex.placeCollisionCircles($,ss,g.lineVertexArray,g.glyphOffsetArray,sl,b,T,P,a,de,G.predicate,qe.collisionCircleDiameter,ro),ht=$||vr.circles.length>0&&!vr.collisionDetected,vt=vt&&vr.offscreen}if(dt.iconFeatureIndex&&(Tr=dt.iconFeatureIndex),dt.iconBox){var ll=function(jt){var pi=he&&ct?Ji(jt,ct.x,ct.y,se,de,u.transform.angle):jt;return u.collisionIndex.placeCollisionBox(pi,re,R,b,G.predicate)};pt=jr&&jr.box&&jr.box.length&&dt.verticalIconBox?(hn=ll(dt.verticalIconBox)).box.length>0:(hn=ll(dt.iconBox)).box.length>0,vt=vt&&hn.offscreen}var no=K||qe.numHorizontalGlyphVertices===0&&qe.numVerticalGlyphVertices===0,qr=V||qe.numIconVertices===0;if(no||qr?qr?no||(pt=pt&&ht):ht=pt&&ht:pt=ht=pt&&ht,ht&&_t&&_t.box&&u.collisionIndex.insertCollisionBox(_t.box,v.get("text-ignore-placement"),g.bucketInstanceId,jr&&jr.box&&fr?fr:Yr,G.ID),pt&&hn&&u.collisionIndex.insertCollisionBox(hn.box,v.get("icon-ignore-placement"),g.bucketInstanceId,Tr,G.ID),vr&&(ht&&u.collisionIndex.insertCollisionCircles(vr.circles,v.get("text-ignore-placement"),g.bucketInstanceId,Yr,G.ID),a)){var vo=g.bucketInstanceId,Wo=u.collisionCircleArrays[vo];Wo===void 0&&(Wo=u.collisionCircleArrays[vo]=new bi);for(var Ia=0;Ia<vr.circles.length;Ia+=4)Wo.circles.push(vr.circles[Ia+0]),Wo.circles.push(vr.circles[Ia+1]),Wo.circles.push(vr.circles[Ia+2]),Wo.circles.push(vr.collisionDetected?1:0)}u.placements[qe.crossTileID]=new eh(ht||we,pt||ze,vt||g.justReloaded),s[qe.crossTileID]=!0}};if(ye)for(var je=g.getSortedSymbolIndexes(this.transform.angle),et=je.length-1;et>=0;--et){var ot=je[et];Ie(g.symbolInstances.get(ot),g.collisionArrays[ot])}else for(var it=o.symbolInstanceStart;it<o.symbolInstanceEnd;it++)Ie(g.symbolInstances.get(it),g.collisionArrays[it]);if(a&&g.bucketInstanceId in this.collisionCircleArrays){var Dt=this.collisionCircleArrays[g.bucketInstanceId];c.invert(Dt.invProjMatrix,b),Dt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1},bn.prototype.markUsedJustification=function(o,s,a,u){var d;d=u===c.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[c.getAnchorJustification(s)];for(var g=0,v=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];g<v.length;g+=1){var b=v[g];b>=0&&(o.text.placedSymbolArray.get(b).crossTileID=d>=0&&b!==d?0:a.crossTileID)}},bn.prototype.markUsedOrientation=function(o,s,a){for(var u=s===c.WritingMode.horizontal||s===c.WritingMode.horizontalOnly?s:0,d=s===c.WritingMode.vertical?s:0,g=0,v=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];g<v.length;g+=1)o.text.placedSymbolArray.get(v[g]).placedOrientation=u;a.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=d)},bn.prototype.commit=function(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;var s=this.prevPlacement,a=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;var u=s?s.symbolFadeChange(o):1,d=s?s.opacities:{},g=s?s.variableOffsets:{},v=s?s.placedOrientations:{};for(var b in this.placements){var T=this.placements[b],P=d[b];P?(this.opacities[b]=new li(P,u,T.text,T.icon),a=a||T.text!==P.text.placed||T.icon!==P.icon.placed):(this.opacities[b]=new li(null,u,T.text,T.icon,T.skipFade),a=a||T.text||T.icon)}for(var R in d){var B=d[R];if(!this.opacities[R]){var N=new li(B,u,!1,!1);N.isHidden()||(this.opacities[R]=N,a=a||B.text.placed||B.icon.placed)}}for(var H in g)this.variableOffsets[H]||!this.opacities[H]||this.opacities[H].isHidden()||(this.variableOffsets[H]=g[H]);for(var G in v)this.placedOrientations[G]||!this.opacities[G]||this.opacities[G].isHidden()||(this.placedOrientations[G]=v[G]);a?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:o)},bn.prototype.updateLayerOpacities=function(o,s){for(var a={},u=0,d=s;u<d.length;u+=1){var g=d[u],v=g.getBucket(o);v&&g.latestFeatureIndex&&o.id===v.layerIds[0]&&this.updateBucketOpacities(v,a,g.collisionBoxArray)}},bn.prototype.updateBucketOpacities=function(o,s,a){var u=this;o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();var d=o.layers[0].layout,g=new li(null,0,!1,!1,!0),v=d.get("text-allow-overlap"),b=d.get("icon-allow-overlap"),T=d.get("text-variable-anchor"),P=d.get("text-rotation-alignment")==="map",R=d.get("text-pitch-alignment")==="map",B=d.get("icon-text-fit")!=="none",N=new li(null,0,v&&(b||!o.hasIconData()||d.get("icon-optional")),b&&(v||!o.hasTextData()||d.get("text-optional")),!0);!o.collisionArrays&&a&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(a);for(var H=function($,re,se){for(var de=0;de<re/4;de++)$.opacityVertexArray.emplaceBack(se)},G=function($){var re=o.symbolInstances.get($),se=re.numHorizontalGlyphVertices,de=re.numVerticalGlyphVertices,he=re.crossTileID,ye=u.opacities[he];s[he]?ye=g:ye||(u.opacities[he]=ye=N),s[he]=!0;var we=re.numIconVertices>0,ze=u.placedOrientations[re.crossTileID],Ie=ze===c.WritingMode.vertical,je=ze===c.WritingMode.horizontal||ze===c.WritingMode.horizontalOnly;if(se>0||de>0){var et=nh(ye.text);H(o.text,se,Ie?$a:et),H(o.text,de,je?$a:et);var ot=ye.text.isHidden();[re.rightJustifiedTextSymbolIndex,re.centerJustifiedTextSymbolIndex,re.leftJustifiedTextSymbolIndex].forEach(function(lt){lt>=0&&(o.text.placedSymbolArray.get(lt).hidden=ot||Ie?1:0)}),re.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(re.verticalPlacedTextSymbolIndex).hidden=ot||je?1:0);var it=u.variableOffsets[re.crossTileID];it&&u.markUsedJustification(o,it.anchor,re,ze);var Dt=u.placedOrientations[re.crossTileID];Dt&&(u.markUsedJustification(o,"left",re,Dt),u.markUsedOrientation(o,Dt,re))}if(we){var qe=nh(ye.icon),dt=!(B&&re.verticalPlacedIconSymbolIndex&&Ie);re.placedIconSymbolIndex>=0&&(H(o.icon,re.numIconVertices,dt?qe:$a),o.icon.placedSymbolArray.get(re.placedIconSymbolIndex).hidden=ye.icon.isHidden()),re.verticalPlacedIconSymbolIndex>=0&&(H(o.icon,re.numVerticalIconVertices,dt?$a:qe),o.icon.placedSymbolArray.get(re.verticalPlacedIconSymbolIndex).hidden=ye.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){var _t=o.collisionArrays[$];if(_t){var ht=new c.Point(0,0);if(_t.textBox||_t.verticalTextBox){var pt=!0;if(T){var vt=u.variableOffsets[he];vt?(ht=an(vt.anchor,vt.width,vt.height,vt.textOffset,vt.textBoxScale),P&&ht._rotate(R?u.transform.angle:-u.transform.angle)):pt=!1}_t.textBox&&ca(o.textCollisionBox.collisionVertexArray,ye.text.placed,!pt||Ie,ht.x,ht.y),_t.verticalTextBox&&ca(o.textCollisionBox.collisionVertexArray,ye.text.placed,!pt||je,ht.x,ht.y)}var ct=!!(!je&&_t.verticalIconBox);_t.iconBox&&ca(o.iconCollisionBox.collisionVertexArray,ye.icon.placed,ct,B?ht.x:0,B?ht.y:0),_t.verticalIconBox&&ca(o.iconCollisionBox.collisionVertexArray,ye.icon.placed,!ct,B?ht.x:0,B?ht.y:0)}}},K=0;K<o.symbolInstances.length;K++)G(K);if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){var V=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=V.invProjMatrix,o.placementViewportMatrix=V.viewportMatrix,o.collisionCircleArray=V.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}},bn.prototype.symbolFadeChange=function(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},bn.prototype.zoomAdjustment=function(o){return Math.max(0,(this.transform.zoom-o)/1.5)},bn.prototype.hasTransitions=function(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration},bn.prototype.stillRecent=function(o,s){var a=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*a>o},bn.prototype.setStale=function(){this.stale=!0};var Zd=Math.pow(2,25),Hd=Math.pow(2,24),ac=Math.pow(2,17),Wd=Math.pow(2,16),th=Math.pow(2,9),Xd=Math.pow(2,8),rh=Math.pow(2,1);function nh(o){if(o.opacity===0&&!o.placed)return 0;if(o.opacity===1&&o.placed)return 4294967295;var s=o.placed?1:0,a=Math.floor(127*o.opacity);return a*Zd+s*Hd+a*ac+s*Wd+a*th+s*Xd+a*rh+s}var $a=0,sc=function(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};sc.prototype.continuePlacement=function(o,s,a,u,d){for(var g=this._bucketParts;this._currentTileIndex<o.length;)if(s.getBucketParts(g,u,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,d())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,g.sort(function(v,b){return v.sortKey-b.sortKey}));this._currentPartIndex<g.length;)if(s.placeLayerBucketPart(g[this._currentPartIndex],this._seenCrossTileIDs,a),this._currentPartIndex++,d())return!0;return!1};var qs=function(o,s,a,u,d,g,v){this.placement=new bn(o,d,g,v),this._currentPlacementIndex=s.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=u,this._done=!1};qs.prototype.isDone=function(){return this._done},qs.prototype.continuePlacement=function(o,s,a){for(var u=this,d=c.browser.now(),g=function(){var T=c.browser.now()-d;return!u._forceFullPlacement&&T>2};this._currentPlacementIndex>=0;){var v=s[o[this._currentPlacementIndex]],b=this.placement.collisionIndex.transform.zoom;if(v.type==="symbol"&&(!v.minzoom||v.minzoom<=b)&&(!v.maxzoom||v.maxzoom>b)){if(this._inProgressLayer||(this._inProgressLayer=new sc(v)),this._inProgressLayer.continuePlacement(a[v.source],this.placement,this._showCollisionBoxes,v,g))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},qs.prototype.commit=function(o){return this.placement.commit(o),this.placement};var ih=512/c.EXTENT/2,Ol=function(o,s,a){this.tileID=o,this.indexedSymbolInstances={},this.bucketInstanceId=a;for(var u=0;u<s.length;u++){var d=s.get(u),g=d.key;this.indexedSymbolInstances[g]||(this.indexedSymbolInstances[g]=[]),this.indexedSymbolInstances[g].push({crossTileID:d.crossTileID,coord:this.getScaledCoordinates(d,o)})}};Ol.prototype.getScaledCoordinates=function(o,s){var a=ih/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*c.EXTENT+o.anchorX)*a),y:Math.floor((s.canonical.y*c.EXTENT+o.anchorY)*a)}},Ol.prototype.findMatches=function(o,s,a){for(var u=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z),d=0;d<o.length;d++){var g=o.get(d);if(!g.crossTileID){var v=this.indexedSymbolInstances[g.key];if(v)for(var b=this.getScaledCoordinates(g,s),T=0,P=v;T<P.length;T+=1){var R=P[T];if(Math.abs(R.coord.x-b.x)<=u&&Math.abs(R.coord.y-b.y)<=u&&!a[R.crossTileID]){a[R.crossTileID]=!0,g.crossTileID=R.crossTileID;break}}}}};var Si=function(){this.maxCrossTileID=0};Si.prototype.generate=function(){return++this.maxCrossTileID};var Ao=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ao.prototype.handleWrapJump=function(o){var s=Math.round((o-this.lng)/360);if(s!==0)for(var a in this.indexes){var u=this.indexes[a],d={};for(var g in u){var v=u[g];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+s),d[v.tileID.key]=v}this.indexes[a]=d}this.lng=o},Ao.prototype.addBucket=function(o,s,a){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(var u=0;u<s.symbolInstances.length;u++)s.symbolInstances.get(u).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});var d=this.usedCrossTileIDs[o.overscaledZ];for(var g in this.indexes){var v=this.indexes[g];if(Number(g)>o.overscaledZ)for(var b in v){var T=v[b];T.tileID.isChildOf(o)&&T.findMatches(s.symbolInstances,o,d)}else{var P=v[o.scaledTo(Number(g)).key];P&&P.findMatches(s.symbolInstances,o,d)}}for(var R=0;R<s.symbolInstances.length;R++){var B=s.symbolInstances.get(R);B.crossTileID||(B.crossTileID=a.generate(),d[B.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Ol(o,s.symbolInstances,s.bucketInstanceId),!0},Ao.prototype.removeBucketCrossTileIDs=function(o,s){for(var a in s.indexedSymbolInstances)for(var u=0,d=s.indexedSymbolInstances[a];u<d.length;u+=1)delete this.usedCrossTileIDs[o][d[u].crossTileID]},Ao.prototype.removeStaleBuckets=function(o){var s=!1;for(var a in this.indexes){var u=this.indexes[a];for(var d in u)o[u[d].bucketInstanceId]||(this.removeBucketCrossTileIDs(a,u[d]),delete u[d],s=!0)}return s};var Mo=function(){this.layerIndexes={},this.crossTileIDs=new Si,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Mo.prototype.addLayer=function(o,s,a){var u=this.layerIndexes[o.id];u===void 0&&(u=this.layerIndexes[o.id]=new Ao);var d=!1,g={};u.handleWrapJump(a);for(var v=0,b=s;v<b.length;v+=1){var T=b[v],P=T.getBucket(o);P&&o.id===P.layerIds[0]&&(P.bucketInstanceId||(P.bucketInstanceId=++this.maxBucketInstanceId),u.addBucket(T.tileID,P,this.crossTileIDs)&&(d=!0),g[P.bucketInstanceId]=!0)}return u.removeStaleBuckets(g)&&(d=!0),d},Mo.prototype.pruneUnusedLayers=function(o){var s={};for(var a in o.forEach(function(u){s[u]=!0}),this.layerIndexes)s[a]||delete this.layerIndexes[a]};var pa=function(o,s){return c.emitValidationErrors(o,s&&s.filter(function(a){return a.identifier!=="source.canvas"}))},Lo=c.pick(Re,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Do=c.pick(Re,["setCenter","setZoom","setBearing","setPitch"]),Bl=function(){var o={},s=c.styleSpec.$version;for(var a in c.styleSpec.$root){var u,d=c.styleSpec.$root[a];d.required&&(u=a==="version"?s:d.type==="array"?[]:{})!=null&&(o[a]=u)}return o}(),Wn=function(o){function s(a,u){var d=this;u===void 0&&(u={}),o.call(this),this.map=a,this.dispatcher=new Ht(ve(),this),this.imageManager=new J,this.imageManager.setEventedParent(this),this.glyphManager=new It(a._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Nt(256,512),this.crossTileSymbolIndex=new Mo,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.getReferrer());var g=this;this._rtlTextPluginCallback=s.registerForPluginStateChange(function(v){g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},function(b,T){if(c.triggerPluginCompletionEvent(b),T&&T.every(function(R){return R}))for(var P in g.sourceCaches)g.sourceCaches[P].reload()})}),this.on("data",function(v){if(v.dataType==="source"&&v.sourceDataType==="metadata"){var b=d.sourceCaches[v.sourceId];if(b){var T=b.getSource();if(T&&T.vectorLayerIds)for(var P in d._layers){var R=d._layers[P];R.source===T.id&&d._validateLayer(R)}}}})}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.loadURL=function(a,u){var d=this;u===void 0&&(u={}),this.fire(new c.Event("dataloading",{dataType:"style"}));var g=typeof u.validate=="boolean"?u.validate:!c.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,u.accessToken);var v=this.map._requestManager.transformRequest(a,c.ResourceType.Style);this._request=c.getJSON(v,function(b,T){d._request=null,b?d.fire(new c.ErrorEvent(b)):T&&d._load(T,g)})},s.prototype.loadJSON=function(a,u){var d=this;u===void 0&&(u={}),this.fire(new c.Event("dataloading",{dataType:"style"})),this._request=c.browser.frame(function(){d._request=null,d._load(a,u.validate!==!1)})},s.prototype.loadEmpty=function(){this.fire(new c.Event("dataloading",{dataType:"style"})),this._load(Bl,!1)},s.prototype._load=function(a,u){if(!u||!pa(this,c.validateStyle(a))){for(var d in this._loaded=!0,this.stylesheet=a,a.sources)this.addSource(d,a.sources[d],{validate:!1});a.sprite?this._loadSprite(a.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(a.glyphs);var g=Le(this.stylesheet.layers);this._order=g.map(function(P){return P.id}),this._layers={},this._serializedLayers={};for(var v=0,b=g;v<b.length;v+=1){var T=b[v];(T=c.createStyleLayer(T)).setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=T,this._serializedLayers[T.id]=T.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Wr(this.stylesheet.light),this.fire(new c.Event("data",{dataType:"style"})),this.fire(new c.Event("style.load"))}},s.prototype._loadSprite=function(a){var u=this;this._spriteRequest=function(d,g,v){var b,T,P,R=c.browser.devicePixelRatio>1?"@2x":"",B=c.getJSON(g.transformRequest(g.normalizeSpriteURL(d,R,".json"),c.ResourceType.SpriteJSON),function(G,K){B=null,P||(P=G,b=K,H())}),N=c.getImage(g.transformRequest(g.normalizeSpriteURL(d,R,".png"),c.ResourceType.SpriteImage),function(G,K){N=null,P||(P=G,T=K,H())});function H(){if(P)v(P);else if(b&&T){var G=c.browser.getImageData(T),K={};for(var V in b){var $=b[V],re=$.width,se=$.height,de=$.x,he=$.y,ye=$.sdf,we=$.pixelRatio,ze=$.stretchX,Ie=$.stretchY,je=$.content,et=new c.RGBAImage({width:re,height:se});c.RGBAImage.copy(G,et,{x:de,y:he},{x:0,y:0},{width:re,height:se}),K[V]={data:et,pixelRatio:we,sdf:ye,stretchX:ze,stretchY:Ie,content:je}}v(null,K)}}return{cancel:function(){B&&(B.cancel(),B=null),N&&(N.cancel(),N=null)}}}(a,this.map._requestManager,function(d,g){if(u._spriteRequest=null,d)u.fire(new c.ErrorEvent(d));else if(g)for(var v in g)u.imageManager.addImage(v,g[v]);u.imageManager.setLoaded(!0),u._availableImages=u.imageManager.listImages(),u.dispatcher.broadcast("setImages",u._availableImages),u.fire(new c.Event("data",{dataType:"style"}))})},s.prototype._validateLayer=function(a){var u=this.sourceCaches[a.source];if(u){var d=a.sourceLayer;if(d){var g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(d)===-1)&&this.fire(new c.ErrorEvent(new Error('Source layer "'+d+'" does not exist on source "'+g.id+'" as specified by style layer "'+a.id+'"')))}}},s.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()},s.prototype._serializeLayers=function(a){for(var u=[],d=0,g=a;d<g.length;d+=1){var v=this._layers[g[d]];v.type!=="custom"&&u.push(v.serialize())}return u},s.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(var u in this._layers)if(this._layers[u].hasTransition())return!0;return!1},s.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},s.prototype.update=function(a){if(this._loaded){var u=this._changed;if(this._changed){var d=Object.keys(this._updatedLayers),g=Object.keys(this._removedLayers);for(var v in(d.length||g.length)&&this._updateWorkerLayers(d,g),this._updatedSources){var b=this._updatedSources[v];b==="reload"?this._reloadSource(v):b==="clear"&&this._clearSource(v)}for(var T in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[T].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}var P={};for(var R in this.sourceCaches){var B=this.sourceCaches[R];P[R]=B.used,B.used=!1}for(var N=0,H=this._order;N<H.length;N+=1){var G=this._layers[H[N]];G.recalculate(a,this._availableImages),!G.isHidden(a.zoom)&&G.source&&(this.sourceCaches[G.source].used=!0)}for(var K in P){var V=this.sourceCaches[K];P[K]!==V.used&&V.fire(new c.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:K}))}this.light.recalculate(a),this.z=a.zoom,u&&this.fire(new c.Event("data",{dataType:"style"}))}},s.prototype._updateTilesForChangedImages=function(){var a=Object.keys(this._changedImages);if(a.length){for(var u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}},s.prototype._updateWorkerLayers=function(a,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:u})},s.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},s.prototype.setState=function(a){var u=this;if(this._checkLoaded(),pa(this,c.validateStyle(a)))return!1;(a=c.clone$1(a)).layers=Le(a.layers);var d=function(v,b){if(!v)return[{command:Re.setStyle,args:[b]}];var T=[];try{if(!c.deepEqual(v.version,b.version))return[{command:Re.setStyle,args:[b]}];c.deepEqual(v.center,b.center)||T.push({command:Re.setCenter,args:[b.center]}),c.deepEqual(v.zoom,b.zoom)||T.push({command:Re.setZoom,args:[b.zoom]}),c.deepEqual(v.bearing,b.bearing)||T.push({command:Re.setBearing,args:[b.bearing]}),c.deepEqual(v.pitch,b.pitch)||T.push({command:Re.setPitch,args:[b.pitch]}),c.deepEqual(v.sprite,b.sprite)||T.push({command:Re.setSprite,args:[b.sprite]}),c.deepEqual(v.glyphs,b.glyphs)||T.push({command:Re.setGlyphs,args:[b.glyphs]}),c.deepEqual(v.transition,b.transition)||T.push({command:Re.setTransition,args:[b.transition]}),c.deepEqual(v.light,b.light)||T.push({command:Re.setLight,args:[b.light]});var P={},R=[];(function(N,H,G,K){var V;for(V in H=H||{},N=N||{})N.hasOwnProperty(V)&&(H.hasOwnProperty(V)||Fe(V,G,K));for(V in H)H.hasOwnProperty(V)&&(N.hasOwnProperty(V)?c.deepEqual(N[V],H[V])||(N[V].type==="geojson"&&H[V].type==="geojson"&&Yt(N,H,V)?G.push({command:Re.setGeoJSONSourceData,args:[V,H[V].data]}):Pt(V,H,G,K)):wt(V,H,G))})(v.sources,b.sources,R,P);var B=[];v.layers&&v.layers.forEach(function(N){P[N.source]?T.push({command:Re.removeLayer,args:[N.id]}):B.push(N)}),T=T.concat(R),function(N,H,G){H=H||[];var K,V,$,re,se,de,he,ye=(N=N||[]).map(Ut),we=H.map(Ut),ze=N.reduce(At,{}),Ie=H.reduce(At,{}),je=ye.slice(),et=Object.create(null);for(K=0,V=0;K<ye.length;K++)Ie.hasOwnProperty($=ye[K])?V++:(G.push({command:Re.removeLayer,args:[$]}),je.splice(je.indexOf($,V),1));for(K=0,V=0;K<we.length;K++)je[je.length-1-K]!==($=we[we.length-1-K])&&(ze.hasOwnProperty($)?(G.push({command:Re.removeLayer,args:[$]}),je.splice(je.lastIndexOf($,je.length-V),1)):V++,G.push({command:Re.addLayer,args:[Ie[$],de=je[je.length-K]]}),je.splice(je.length-K,0,$),et[$]=!0);for(K=0;K<we.length;K++)if(re=ze[$=we[K]],se=Ie[$],!et[$]&&!c.deepEqual(re,se))if(c.deepEqual(re.source,se.source)&&c.deepEqual(re["source-layer"],se["source-layer"])&&c.deepEqual(re.type,se.type)){for(he in Et(re.layout,se.layout,G,$,null,Re.setLayoutProperty),Et(re.paint,se.paint,G,$,null,Re.setPaintProperty),c.deepEqual(re.filter,se.filter)||G.push({command:Re.setFilter,args:[$,se.filter]}),c.deepEqual(re.minzoom,se.minzoom)&&c.deepEqual(re.maxzoom,se.maxzoom)||G.push({command:Re.setLayerZoomRange,args:[$,se.minzoom,se.maxzoom]}),re)re.hasOwnProperty(he)&&he!=="layout"&&he!=="paint"&&he!=="filter"&&he!=="metadata"&&he!=="minzoom"&&he!=="maxzoom"&&(he.indexOf("paint.")===0?Et(re[he],se[he],G,$,he.slice(6),Re.setPaintProperty):c.deepEqual(re[he],se[he])||G.push({command:Re.setLayerProperty,args:[$,he,se[he]]}));for(he in se)se.hasOwnProperty(he)&&!re.hasOwnProperty(he)&&he!=="layout"&&he!=="paint"&&he!=="filter"&&he!=="metadata"&&he!=="minzoom"&&he!=="maxzoom"&&(he.indexOf("paint.")===0?Et(re[he],se[he],G,$,he.slice(6),Re.setPaintProperty):c.deepEqual(re[he],se[he])||G.push({command:Re.setLayerProperty,args:[$,he,se[he]]}))}else G.push({command:Re.removeLayer,args:[$]}),de=je[je.lastIndexOf($)+1],G.push({command:Re.addLayer,args:[se,de]})}(B,b.layers,T)}catch(N){console.warn("Unable to compute style diff:",N),T=[{command:Re.setStyle,args:[b]}]}return T}(this.serialize(),a).filter(function(v){return!(v.command in Do)});if(d.length===0)return!1;var g=d.filter(function(v){return!(v.command in Lo)});if(g.length>0)throw new Error("Unimplemented: "+g.map(function(v){return v.command}).join(", ")+".");return d.forEach(function(v){v.command!=="setTransition"&&u[v.command].apply(u,v.args)}),this.stylesheet=a,!0},s.prototype.addImage=function(a,u){if(this.getImage(a))return this.fire(new c.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(a,u),this._afterImageUpdated(a)},s.prototype.updateImage=function(a,u){this.imageManager.updateImage(a,u)},s.prototype.getImage=function(a){return this.imageManager.getImage(a)},s.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new c.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(a),this._afterImageUpdated(a)},s.prototype._afterImageUpdated=function(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))},s.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},s.prototype.addSource=function(a,u,d){var g=this;if(d===void 0&&(d={}),this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error("There is already a source with this ID");if(!u.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(u).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.validateStyle.source,"sources."+a,u,null,d))){this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);var v=this.sourceCaches[a]=new W(a,u,this.dispatcher);v.style=this,v.setEventedParent(this,function(){return{isSourceLoaded:g.loaded(),source:v.serialize(),sourceId:a}}),v.onAdd(this.map),this._changed=!0}},s.prototype.removeSource=function(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(var u in this._layers)if(this._layers[u].source===a)return this.fire(new c.ErrorEvent(new Error('Source "'+a+'" cannot be removed while layer "'+u+'" is using it.')));var d=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],d.fire(new c.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),d.setEventedParent(null),d.clearTiles(),d.onRemove&&d.onRemove(this.map),this._changed=!0},s.prototype.setGeoJSONSourceData=function(a,u){this._checkLoaded(),this.sourceCaches[a].getSource().setData(u),this._changed=!0},s.prototype.getSource=function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},s.prototype.addLayer=function(a,u,d){d===void 0&&(d={}),this._checkLoaded();var g=a.id;if(this.getLayer(g))this.fire(new c.ErrorEvent(new Error('Layer with id "'+g+'" already exists on this map')));else{var v;if(a.type==="custom"){if(pa(this,c.validateCustomStyleLayer(a)))return;v=c.createStyleLayer(a)}else{if(typeof a.source=="object"&&(this.addSource(g,a.source),a=c.clone$1(a),a=c.extend(a,{source:g})),this._validate(c.validateStyle.layer,"layers."+g,a,{arrayIndex:-1},d))return;v=c.createStyleLayer(a),this._validateLayer(v),v.setEventedParent(this,{layer:{id:g}}),this._serializedLayers[v.id]=v.serialize()}var b=u?this._order.indexOf(u):this._order.length;if(u&&b===-1)this.fire(new c.ErrorEvent(new Error('Layer with id "'+u+'" does not exist on this map.')));else{if(this._order.splice(b,0,g),this._layerOrderChanged=!0,this._layers[g]=v,this._removedLayers[g]&&v.source&&v.type!=="custom"){var T=this._removedLayers[g];delete this._removedLayers[g],T.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}},s.prototype.moveLayer=function(a,u){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==u){var d=this._order.indexOf(a);this._order.splice(d,1);var g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new c.ErrorEvent(new Error('Layer with id "'+u+'" does not exist on this map.'))):(this._order.splice(g,0,a),this._layerOrderChanged=!0)}}else this.fire(new c.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be moved.")))},s.prototype.removeLayer=function(a){this._checkLoaded();var u=this._layers[a];if(u){u.setEventedParent(null);var d=this._order.indexOf(a);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=u,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],u.onRemove&&u.onRemove(this.map)}else this.fire(new c.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},s.prototype.getLayer=function(a){return this._layers[a]},s.prototype.hasLayer=function(a){return a in this._layers},s.prototype.setLayerZoomRange=function(a,u,d){this._checkLoaded();var g=this.getLayer(a);g?g.minzoom===u&&g.maxzoom===d||(u!=null&&(g.minzoom=u),d!=null&&(g.maxzoom=d),this._updateLayer(g)):this.fire(new c.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},s.prototype.setFilter=function(a,u,d){d===void 0&&(d={}),this._checkLoaded();var g=this.getLayer(a);if(g){if(!c.deepEqual(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(c.validateStyle.filter,"layers."+g.id+".filter",u,null,d)||(g.filter=c.clone$1(u),this._updateLayer(g)))}else this.fire(new c.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},s.prototype.getFilter=function(a){return c.clone$1(this.getLayer(a).filter)},s.prototype.setLayoutProperty=function(a,u,d,g){g===void 0&&(g={}),this._checkLoaded();var v=this.getLayer(a);v?c.deepEqual(v.getLayoutProperty(u),d)||(v.setLayoutProperty(u,d,g),this._updateLayer(v)):this.fire(new c.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getLayoutProperty=function(a,u){var d=this.getLayer(a);if(d)return d.getLayoutProperty(u);this.fire(new c.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style.")))},s.prototype.setPaintProperty=function(a,u,d,g){g===void 0&&(g={}),this._checkLoaded();var v=this.getLayer(a);v?c.deepEqual(v.getPaintProperty(u),d)||(v.setPaintProperty(u,d,g)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new c.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},s.prototype.getPaintProperty=function(a,u){return this.getLayer(a).getPaintProperty(u)},s.prototype.setFeatureState=function(a,u){this._checkLoaded();var d=a.source,g=a.sourceLayer,v=this.sourceCaches[d];if(v!==void 0){var b=v.getSource().type;b==="geojson"&&g?this.fire(new c.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||g?(a.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),v.setFeatureState(g,a.id,u)):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new c.ErrorEvent(new Error("The source '"+d+"' does not exist in the map's style.")))},s.prototype.removeFeatureState=function(a,u){this._checkLoaded();var d=a.source,g=this.sourceCaches[d];if(g!==void 0){var v=g.getSource().type,b=v==="vector"?a.sourceLayer:void 0;v!=="vector"||b?u&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new c.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(b,a.id,u):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new c.ErrorEvent(new Error("The source '"+d+"' does not exist in the map's style.")))},s.prototype.getFeatureState=function(a){this._checkLoaded();var u=a.source,d=a.sourceLayer,g=this.sourceCaches[u];if(g!==void 0){if(g.getSource().type!=="vector"||d)return a.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),g.getFeatureState(d,a.id);this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new c.ErrorEvent(new Error("The source '"+u+"' does not exist in the map's style.")))},s.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},s.prototype.serialize=function(){return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._serializeLayers(this._order)},function(a){return a!==void 0})},s.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._changed=!0},s.prototype._flattenAndSortRenderedFeatures=function(a){for(var u=this,d=function(ze){return u._layers[ze].type==="fill-extrusion"},g={},v=[],b=this._order.length-1;b>=0;b--){var T=this._order[b];if(d(T)){g[T]=b;for(var P=0,R=a;P<R.length;P+=1){var B=R[P][T];if(B)for(var N=0,H=B;N<H.length;N+=1)v.push(H[N])}}}v.sort(function(ze,Ie){return Ie.intersectionZ-ze.intersectionZ});for(var G=[],K=this._order.length-1;K>=0;K--){var V=this._order[K];if(d(V))for(var $=v.length-1;$>=0;$--){var re=v[$].feature;if(g[re.layer.id]<K)break;G.push(re),v.pop()}else for(var se=0,de=a;se<de.length;se+=1){var he=de[se][V];if(he)for(var ye=0,we=he;ye<we.length;ye+=1)G.push(we[ye].feature)}}return G},s.prototype.queryRenderedFeatures=function(a,u,d){u&&u.filter&&this._validate(c.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);var g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new c.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var v=0,b=u.layers;v<b.length;v+=1){var T=b[v],P=this._layers[T];if(!P)return this.fire(new c.ErrorEvent(new Error("The layer '"+T+"' does not exist in the map's style and cannot be queried for features."))),[];g[P.source]=!0}}var R=[];for(var B in u.availableImages=this._availableImages,this.sourceCaches)u.layers&&!g[B]||R.push(gr(this.sourceCaches[B],this._layers,this._serializedLayers,a,u,d));return this.placement&&R.push(function(N,H,G,K,V,$,re){for(var se={},de=$.queryRenderedSymbols(K),he=[],ye=0,we=Object.keys(de).map(Number);ye<we.length;ye+=1)he.push(re[we[ye]]);he.sort(vi);for(var ze=function(){var it=je[Ie],Dt=it.featureIndex.lookupSymbolFeatures(de[it.bucketInstanceId],H,it.bucketIndex,it.sourceLayerIndex,V.filter,V.layers,V.availableImages,N);for(var qe in Dt){var dt=se[qe]=se[qe]||[],_t=Dt[qe];_t.sort(function(vt,ct){var lt=it.featureSortOrder;if(lt){var jr=lt.indexOf(vt.featureIndex);return lt.indexOf(ct.featureIndex)-jr}return ct.featureIndex-vt.featureIndex});for(var ht=0,pt=_t;ht<pt.length;ht+=1)dt.push(pt[ht])}},Ie=0,je=he;Ie<je.length;Ie+=1)ze();var et=function(it){se[it].forEach(function(Dt){var qe=Dt.feature,dt=G[N[it].source].getFeatureState(qe.layer["source-layer"],qe.id);qe.source=qe.layer.source,qe.layer["source-layer"]&&(qe.sourceLayer=qe.layer["source-layer"]),qe.state=dt})};for(var ot in se)et(ot);return se}(this._layers,this._serializedLayers,this.sourceCaches,a,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(R)},s.prototype.querySourceFeatures=function(a,u){u&&u.filter&&this._validate(c.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);var d=this.sourceCaches[a];return d?function(g,v){for(var b=g.getRenderableIds().map(function(H){return g.getTileByID(H)}),T=[],P={},R=0;R<b.length;R++){var B=b[R],N=B.tileID.canonical.key;P[N]||(P[N]=!0,B.querySourceFeatures(T,v))}return T}(d,u):[]},s.prototype.addSourceType=function(a,u,d){return s.getSourceType(a)?d(new Error('A source type called "'+a+'" already exists.')):(s.setSourceType(a,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:u.workerSourceURL},d):d(null,null))},s.prototype.getLight=function(){return this.light.getLight()},s.prototype.setLight=function(a,u){u===void 0&&(u={}),this._checkLoaded();var d=this.light.getLight(),g=!1;for(var v in a)if(!c.deepEqual(a[v],d[v])){g=!0;break}if(g){var b={now:c.browser.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,u),this.light.updateTransitions(b)}},s.prototype._validate=function(a,u,d,g,v){return v===void 0&&(v={}),(!v||v.validate!==!1)&&pa(this,a.call(c.validateStyle,c.extend({key:u,style:this.serialize(),value:d,styleSpec:c.styleSpec},g)))},s.prototype._remove=function(){for(var a in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[a].setEventedParent(null);for(var u in this.sourceCaches)this.sourceCaches[u].clearTiles(),this.sourceCaches[u].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},s.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},s.prototype._reloadSource=function(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()},s.prototype._updateSources=function(a){for(var u in this.sourceCaches)this.sourceCaches[u].update(a)},s.prototype._generateCollisionBoxes=function(){for(var a in this.sourceCaches)this._reloadSource(a)},s.prototype._updatePlacement=function(a,u,d,g,v){v===void 0&&(v=!1);for(var b=!1,T=!1,P={},R=0,B=this._order;R<B.length;R+=1){var N=this._layers[B[R]];if(N.type==="symbol"){if(!P[N.source]){var H=this.sourceCaches[N.source];P[N.source]=H.getRenderableIds(!0).map(function(re){return H.getTileByID(re)}).sort(function(re,se){return se.tileID.overscaledZ-re.tileID.overscaledZ||(re.tileID.isLessThan(se.tileID)?-1:1)})}var G=this.crossTileSymbolIndex.addLayer(N,P[N.source],a.center.lng);b=b||G}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.browser.now(),a.zoom))&&(this.pauseablePlacement=new qs(a,this._order,v,u,d,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.browser.now()),T=!0),b&&this.pauseablePlacement.placement.setStale()),T||b)for(var K=0,V=this._order;K<V.length;K+=1){var $=this._layers[V[K]];$.type==="symbol"&&this.placement.updateLayerOpacities($,P[$.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.browser.now())},s.prototype._releaseSymbolFadeTiles=function(){for(var a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()},s.prototype.getImages=function(a,u,d){this.imageManager.getImages(u.icons,d),this._updateTilesForChangedImages();var g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)},s.prototype.getGlyphs=function(a,u,d){this.glyphManager.getGlyphs(u.stacks,d)},s.prototype.getResource=function(a,u,d){return c.makeRequest(u,d)},s}(c.Evented);Wn.getSourceType=function(o){return pn[o]},Wn.setSourceType=function(o,s){pn[o]=s},Wn.registerForPluginStateChange=c.registerForPluginStateChange;var Ar=c.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ka=Jt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),oh=Jt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),$d=Jt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Kd=Jt(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),lc=Jt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),uc=Jt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),cc=Jt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),pc=Jt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),ah=Jt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),sh=Jt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Yd=Jt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Gs=Jt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Zs=Jt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),lh=Jt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),sn=Jt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),hc=Jt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Ro=Jt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Oo=Jt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ha=Jt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),fa=Jt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Bo=Jt(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),da=Jt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),ma=Jt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Fo=Jt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),uh=Jt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),ch=Jt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Jt(o,s){var a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,u=s.match(/attribute ([\w]+) ([\w]+)/g),d=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),g=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=g?g.concat(d):d,b={};return{fragmentSource:o=o.replace(a,function(T,P,R,B,N){return b[N]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_`+N+`
varying `+R+" "+B+" "+N+`;
#else
uniform `+R+" "+B+" u_"+N+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+N+`
    `+R+" "+B+" "+N+" = u_"+N+`;
#endif
`}),vertexSource:s=s.replace(a,function(T,P,R,B,N){var H=B==="float"?"vec2":"vec4",G=N.match(/color/)?"color":H;return b[N]?P==="define"?`
#ifndef HAS_UNIFORM_u_`+N+`
uniform lowp float u_`+N+`_t;
attribute `+R+" "+H+" a_"+N+`;
varying `+R+" "+B+" "+N+`;
#else
uniform `+R+" "+B+" u_"+N+`;
#endif
`:G==="vec4"?`
#ifndef HAS_UNIFORM_u_`+N+`
    `+N+" = a_"+N+`;
#else
    `+R+" "+B+" "+N+" = u_"+N+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+N+`
    `+N+" = unpack_mix_"+G+"(a_"+N+", u_"+N+`_t);
#else
    `+R+" "+B+" "+N+" = u_"+N+`;
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_`+N+`
uniform lowp float u_`+N+`_t;
attribute `+R+" "+H+" a_"+N+`;
#else
uniform `+R+" "+B+" u_"+N+`;
#endif
`:G==="vec4"?`
#ifndef HAS_UNIFORM_u_`+N+`
    `+R+" "+B+" "+N+" = a_"+N+`;
#else
    `+R+" "+B+" "+N+" = u_"+N+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+N+`
    `+R+" "+B+" "+N+" = unpack_mix_"+G+"(a_"+N+", u_"+N+`_t);
#else
    `+R+" "+B+" "+N+" = u_"+N+`;
#endif
`}),staticAttributes:u,staticUniforms:v}}var Jd=Object.freeze({__proto__:null,prelude:Ka,background:oh,backgroundPattern:$d,circle:Kd,clippingMask:lc,heatmap:uc,heatmapTexture:cc,collisionBox:pc,collisionCircle:ah,debug:sh,fill:Yd,fillOutline:Gs,fillOutlinePattern:Zs,fillPattern:lh,fillExtrusion:sn,fillExtrusionPattern:hc,hillshadePrepare:Ro,hillshade:Oo,line:ha,lineGradient:fa,linePattern:Bo,lineSDF:da,raster:ma,symbolIcon:Fo,symbolSDF:uh,symbolTextAndIcon:ch}),Fl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function ph(o){for(var s=[],a=0;a<o.length;a++)if(o[a]!==null){var u=o[a].split(" ");s.push(u.pop())}return s}Fl.prototype.bind=function(o,s,a,u,d,g,v,b){this.context=o;for(var T=this.boundPaintVertexBuffers.length!==u.length,P=0;!T&&P<u.length;P++)this.boundPaintVertexBuffers[P]!==u[P]&&(T=!0);o.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===a&&!T&&this.boundIndexBuffer===d&&this.boundVertexOffset===g&&this.boundDynamicVertexBuffer===v&&this.boundDynamicVertexBuffer2===b?(o.bindVertexArrayOES.set(this.vao),v&&v.bind(),d&&d.dynamicDraw&&d.bind(),b&&b.bind()):this.freshBind(s,a,u,d,g,v,b)},Fl.prototype.freshBind=function(o,s,a,u,d,g,v){var b,T=o.numAttributes,P=this.context,R=P.gl;if(P.extVertexArrayObject)this.vao&&this.destroy(),this.vao=P.extVertexArrayObject.createVertexArrayOES(),P.bindVertexArrayOES.set(this.vao),b=0,this.boundProgram=o,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=a,this.boundIndexBuffer=u,this.boundVertexOffset=d,this.boundDynamicVertexBuffer=g,this.boundDynamicVertexBuffer2=v;else{b=P.currentNumAttributes||0;for(var B=T;B<b;B++)R.disableVertexAttribArray(B)}s.enableAttributes(R,o);for(var N=0,H=a;N<H.length;N+=1)H[N].enableAttributes(R,o);g&&g.enableAttributes(R,o),v&&v.enableAttributes(R,o),s.bind(),s.setVertexAttribPointers(R,o,d);for(var G=0,K=a;G<K.length;G+=1){var V=K[G];V.bind(),V.setVertexAttribPointers(R,o,d)}g&&(g.bind(),g.setVertexAttribPointers(R,o,d)),u&&u.bind(),v&&(v.bind(),v.setVertexAttribPointers(R,o,d)),P.currentNumAttributes=T},Fl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var hh=function(o,s,a,u,d,g){var v=o.gl;this.program=v.createProgram();for(var b=ph(a.staticAttributes),T=u?u.getBinderAttributes():[],P=b.concat(T),R=a.staticUniforms?ph(a.staticUniforms):[],B=u?u.getBinderUniforms():[],N=[],H=0,G=R.concat(B);H<G.length;H+=1){var K=G[H];N.indexOf(K)<0&&N.push(K)}var V=u?u.defines():[];g&&V.push("#define OVERDRAW_INSPECTOR;");var $=V.concat(Ka.fragmentSource,a.fragmentSource).join(`
`),re=V.concat(Ka.vertexSource,a.vertexSource).join(`
`),se=v.createShader(v.FRAGMENT_SHADER);if(v.isContextLost())this.failedToCreate=!0;else{v.shaderSource(se,$),v.compileShader(se),v.attachShader(this.program,se);var de=v.createShader(v.VERTEX_SHADER);if(v.isContextLost())this.failedToCreate=!0;else{v.shaderSource(de,re),v.compileShader(de),v.attachShader(this.program,de),this.attributes={};var he={};this.numAttributes=P.length;for(var ye=0;ye<this.numAttributes;ye++)P[ye]&&(v.bindAttribLocation(this.program,ye,P[ye]),this.attributes[P[ye]]=ye);v.linkProgram(this.program),v.deleteShader(de),v.deleteShader(se);for(var we=0;we<N.length;we++){var ze=N[we];if(ze&&!he[ze]){var Ie=v.getUniformLocation(this.program,ze);Ie&&(he[ze]=Ie)}}this.fixedUniforms=d(o,he),this.binderUniforms=u?u.getUniforms(o,he):[]}}};function fh(o,s,a){var u=1/ar(a,1,s.transform.tileZoom),d=Math.pow(2,a.tileID.overscaledZ),g=a.tileSize*Math.pow(2,s.transform.tileZoom)/d,v=g*(a.tileID.canonical.x+a.tileID.wrap*d),b=g*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[u,o.fromScale,o.toScale],u_fade:o.t,u_pixel_coord_upper:[v>>16,b>>16],u_pixel_coord_lower:[65535&v,65535&b]}}hh.prototype.draw=function(o,s,a,u,d,g,v,b,T,P,R,B,N,H,G,K){var V,$=o.gl;if(!this.failedToCreate){for(var re in o.program.set(this.program),o.setDepthMode(a),o.setStencilMode(u),o.setColorMode(d),o.setCullFace(g),this.fixedUniforms)this.fixedUniforms[re].set(v[re]);H&&H.setUniforms(o,this.binderUniforms,B,{zoom:N});for(var se=(V={},V[$.LINES]=2,V[$.TRIANGLES]=3,V[$.LINE_STRIP]=1,V)[s],de=0,he=R.get();de<he.length;de+=1){var ye=he[de],we=ye.vaos||(ye.vaos={});(we[b]||(we[b]=new Fl)).bind(o,this,T,H?H.getPaintVertexBuffers():[],P,ye.vertexOffset,G,K),$.drawElements(s,ye.primitiveLength*se,$.UNSIGNED_SHORT,ye.primitiveOffset*se*2)}}};var dh=function(o,s,a,u){var d=s.style.light,g=d.properties.get("position"),v=[g.x,g.y,g.z],b=c.create$1();d.properties.get("anchor")==="viewport"&&c.fromRotation(b,-s.transform.angle),c.transformMat3(v,v,b);var T=d.properties.get("color");return{u_matrix:o,u_lightpos:v,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[T.r,T.g,T.b],u_vertical_gradient:+a,u_opacity:u}},ya=function(o,s,a,u,d,g,v){return c.extend(dh(o,s,a,u),fh(g,s,v),{u_height_factor:-Math.pow(2,d.overscaledZ)/v.tileSize/8})},No=function(o){return{u_matrix:o}},ga=function(o,s,a,u){return c.extend(No(o),fh(a,s,u))},mh=function(o,s){return{u_matrix:o,u_world:s}},yh=function(o,s,a,u,d){return c.extend(ga(o,s,a,u),{u_world:d})},fc=function(o,s,a,u){var d,g,v=o.transform;if(u.paint.get("circle-pitch-alignment")==="map"){var b=ar(a,1,v.zoom);d=!0,g=[b,b]}else d=!1,g=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_matrix:o.translatePosMatrix(s.posMatrix,a,u.paint.get("circle-translate"),u.paint.get("circle-translate-anchor")),u_pitch_with_map:+d,u_device_pixel_ratio:c.browser.devicePixelRatio,u_extrude_scale:g}},va=function(o,s,a){var u=ar(a,1,s.zoom),d=Math.pow(2,s.zoom-a.tileID.overscaledZ),g=a.tileID.overscaleFactor();return{u_matrix:o,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:u,u_extrude_scale:[s.pixelsToGLUnits[0]/(u*d),s.pixelsToGLUnits[1]/(u*d)],u_overscale_factor:g}},gh=function(o,s,a){return{u_matrix:o,u_inv_matrix:s,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}},_a=function(o,s,a){return a===void 0&&(a=1),{u_matrix:o,u_color:s,u_overlay:0,u_overlay_scale:a}},xa=function(o){return{u_matrix:o}},vh=function(o,s,a,u){return{u_matrix:o,u_extrude_scale:ar(s,1,a),u_intensity:u}},Hs=function(o,s,a){var u=o.transform;return{u_matrix:_h(o,s,a),u_ratio:1/ar(s,1,u.zoom),u_device_pixel_ratio:c.browser.devicePixelRatio,u_units_to_pixels:[1/u.pixelsToGLUnits[0],1/u.pixelsToGLUnits[1]]}},rr=function(o,s,a,u){return c.extend(Hs(o,s,a),{u_image:0,u_image_height:u})},Nl=function(o,s,a,u){var d=o.transform,g=Ya(s,d);return{u_matrix:_h(o,s,a),u_texsize:s.imageAtlasTexture.size,u_ratio:1/ar(s,1,d.zoom),u_device_pixel_ratio:c.browser.devicePixelRatio,u_image:0,u_scale:[g,u.fromScale,u.toScale],u_fade:u.t,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},Qd=function(o,s,a,u,d){var g=o.lineAtlas,v=Ya(s,o.transform),b=a.layout.get("line-cap")==="round",T=g.getDash(u.from,b),P=g.getDash(u.to,b),R=T.width*d.fromScale,B=P.width*d.toScale;return c.extend(Hs(o,s,a),{u_patternscale_a:[v/R,-T.height/2],u_patternscale_b:[v/B,-P.height/2],u_sdfgamma:g.width/(256*Math.min(R,B)*c.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:T.y,u_tex_y_b:P.y,u_mix:d.t})};function Ya(o,s){return 1/ar(o,1,s.tileZoom)}function _h(o,s,a){return o.translatePosMatrix(s.tileID.posMatrix,s,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}var em=function(o,s,a,u,d){return{u_matrix:o,u_tl_parent:s,u_scale_parent:a,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(v=d.paint.get("raster-saturation"),v>0?1-1/(1.001-v):-v),u_contrast_factor:(g=d.paint.get("raster-contrast"),g>0?1/(1-g):1+g),u_spin_weights:xh(d.paint.get("raster-hue-rotate"))};var g,v};function xh(o){o*=Math.PI/180;var s=Math.sin(o),a=Math.cos(o);return[(2*a+1)/3,(-Math.sqrt(3)*s-a+1)/3,(Math.sqrt(3)*s-a+1)/3]}var Ul,Ja=function(o,s,a,u,d,g,v,b,T,P){var R=d.transform;return{u_is_size_zoom_constant:+(o==="constant"||o==="source"),u_is_size_feature_constant:+(o==="constant"||o==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:R.cameraToCenterDistance,u_pitch:R.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:R.width/R.height,u_fade_change:d.options.fadeDuration?d.symbolFadeChange:1,u_matrix:g,u_label_plane_matrix:v,u_coord_matrix:b,u_is_text:+T,u_pitch_with_map:+u,u_texsize:P,u_texture:0}},Ws=function(o,s,a,u,d,g,v,b,T,P,R){var B=d.transform;return c.extend(Ja(o,s,a,u,d,g,v,b,T,P),{u_gamma_scale:u?Math.cos(B._pitch)*B.cameraToCenterDistance:1,u_device_pixel_ratio:c.browser.devicePixelRatio,u_is_halo:+R})},Vl=function(o,s,a,u,d,g,v,b,T,P){return c.extend(Ws(o,s,a,u,d,g,v,b,!0,T,!0),{u_texsize_icon:P,u_texture_icon:1})},Xs=function(o,s,a){return{u_matrix:o,u_opacity:s,u_color:a}},Qa=function(o,s,a,u,d,g){return c.extend(function(v,b,T,P){var R=T.imageManager.getPattern(v.from.toString()),B=T.imageManager.getPattern(v.to.toString()),N=T.imageManager.getPixelSize(),H=N.width,G=N.height,K=Math.pow(2,P.tileID.overscaledZ),V=P.tileSize*Math.pow(2,T.transform.tileZoom)/K,$=V*(P.tileID.canonical.x+P.tileID.wrap*K),re=V*P.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[H,G],u_mix:b.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:b.fromScale,u_scale_b:b.toScale,u_tile_units_to_pixels:1/ar(P,1,T.transform.tileZoom),u_pixel_coord_upper:[$>>16,re>>16],u_pixel_coord_lower:[65535&$,65535&re]}}(u,g,a,d),{u_matrix:o,u_opacity:s})},wh={fillExtrusion:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_lightpos:new c.Uniform3f(o,s.u_lightpos),u_lightintensity:new c.Uniform1f(o,s.u_lightintensity),u_lightcolor:new c.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new c.Uniform1f(o,s.u_vertical_gradient),u_opacity:new c.Uniform1f(o,s.u_opacity)}},fillExtrusionPattern:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_lightpos:new c.Uniform3f(o,s.u_lightpos),u_lightintensity:new c.Uniform1f(o,s.u_lightintensity),u_lightcolor:new c.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new c.Uniform1f(o,s.u_vertical_gradient),u_height_factor:new c.Uniform1f(o,s.u_height_factor),u_image:new c.Uniform1i(o,s.u_image),u_texsize:new c.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new c.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new c.Uniform3f(o,s.u_scale),u_fade:new c.Uniform1f(o,s.u_fade),u_opacity:new c.Uniform1f(o,s.u_opacity)}},fill:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix)}},fillPattern:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_image:new c.Uniform1i(o,s.u_image),u_texsize:new c.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new c.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new c.Uniform3f(o,s.u_scale),u_fade:new c.Uniform1f(o,s.u_fade)}},fillOutline:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_world:new c.Uniform2f(o,s.u_world)}},fillOutlinePattern:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_world:new c.Uniform2f(o,s.u_world),u_image:new c.Uniform1i(o,s.u_image),u_texsize:new c.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new c.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new c.Uniform3f(o,s.u_scale),u_fade:new c.Uniform1f(o,s.u_fade)}},circle:function(o,s){return{u_camera_to_center_distance:new c.Uniform1f(o,s.u_camera_to_center_distance),u_scale_with_map:new c.Uniform1i(o,s.u_scale_with_map),u_pitch_with_map:new c.Uniform1i(o,s.u_pitch_with_map),u_extrude_scale:new c.Uniform2f(o,s.u_extrude_scale),u_device_pixel_ratio:new c.Uniform1f(o,s.u_device_pixel_ratio),u_matrix:new c.UniformMatrix4f(o,s.u_matrix)}},collisionBox:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_camera_to_center_distance:new c.Uniform1f(o,s.u_camera_to_center_distance),u_pixels_to_tile_units:new c.Uniform1f(o,s.u_pixels_to_tile_units),u_extrude_scale:new c.Uniform2f(o,s.u_extrude_scale),u_overscale_factor:new c.Uniform1f(o,s.u_overscale_factor)}},collisionCircle:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_inv_matrix:new c.UniformMatrix4f(o,s.u_inv_matrix),u_camera_to_center_distance:new c.Uniform1f(o,s.u_camera_to_center_distance),u_viewport_size:new c.Uniform2f(o,s.u_viewport_size)}},debug:function(o,s){return{u_color:new c.UniformColor(o,s.u_color),u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_overlay:new c.Uniform1i(o,s.u_overlay),u_overlay_scale:new c.Uniform1f(o,s.u_overlay_scale)}},clippingMask:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix)}},heatmap:function(o,s){return{u_extrude_scale:new c.Uniform1f(o,s.u_extrude_scale),u_intensity:new c.Uniform1f(o,s.u_intensity),u_matrix:new c.UniformMatrix4f(o,s.u_matrix)}},heatmapTexture:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_world:new c.Uniform2f(o,s.u_world),u_image:new c.Uniform1i(o,s.u_image),u_color_ramp:new c.Uniform1i(o,s.u_color_ramp),u_opacity:new c.Uniform1f(o,s.u_opacity)}},hillshade:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_image:new c.Uniform1i(o,s.u_image),u_latrange:new c.Uniform2f(o,s.u_latrange),u_light:new c.Uniform2f(o,s.u_light),u_shadow:new c.UniformColor(o,s.u_shadow),u_highlight:new c.UniformColor(o,s.u_highlight),u_accent:new c.UniformColor(o,s.u_accent)}},hillshadePrepare:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_image:new c.Uniform1i(o,s.u_image),u_dimension:new c.Uniform2f(o,s.u_dimension),u_zoom:new c.Uniform1f(o,s.u_zoom),u_unpack:new c.Uniform4f(o,s.u_unpack)}},line:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_ratio:new c.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new c.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(o,s.u_units_to_pixels)}},lineGradient:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_ratio:new c.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new c.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(o,s.u_units_to_pixels),u_image:new c.Uniform1i(o,s.u_image),u_image_height:new c.Uniform1f(o,s.u_image_height)}},linePattern:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_texsize:new c.Uniform2f(o,s.u_texsize),u_ratio:new c.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new c.Uniform1f(o,s.u_device_pixel_ratio),u_image:new c.Uniform1i(o,s.u_image),u_units_to_pixels:new c.Uniform2f(o,s.u_units_to_pixels),u_scale:new c.Uniform3f(o,s.u_scale),u_fade:new c.Uniform1f(o,s.u_fade)}},lineSDF:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_ratio:new c.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new c.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(o,s.u_units_to_pixels),u_patternscale_a:new c.Uniform2f(o,s.u_patternscale_a),u_patternscale_b:new c.Uniform2f(o,s.u_patternscale_b),u_sdfgamma:new c.Uniform1f(o,s.u_sdfgamma),u_image:new c.Uniform1i(o,s.u_image),u_tex_y_a:new c.Uniform1f(o,s.u_tex_y_a),u_tex_y_b:new c.Uniform1f(o,s.u_tex_y_b),u_mix:new c.Uniform1f(o,s.u_mix)}},raster:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_tl_parent:new c.Uniform2f(o,s.u_tl_parent),u_scale_parent:new c.Uniform1f(o,s.u_scale_parent),u_buffer_scale:new c.Uniform1f(o,s.u_buffer_scale),u_fade_t:new c.Uniform1f(o,s.u_fade_t),u_opacity:new c.Uniform1f(o,s.u_opacity),u_image0:new c.Uniform1i(o,s.u_image0),u_image1:new c.Uniform1i(o,s.u_image1),u_brightness_low:new c.Uniform1f(o,s.u_brightness_low),u_brightness_high:new c.Uniform1f(o,s.u_brightness_high),u_saturation_factor:new c.Uniform1f(o,s.u_saturation_factor),u_contrast_factor:new c.Uniform1f(o,s.u_contrast_factor),u_spin_weights:new c.Uniform3f(o,s.u_spin_weights)}},symbolIcon:function(o,s){return{u_is_size_zoom_constant:new c.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new c.Uniform1f(o,s.u_size_t),u_size:new c.Uniform1f(o,s.u_size),u_camera_to_center_distance:new c.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new c.Uniform1f(o,s.u_pitch),u_rotate_symbol:new c.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new c.Uniform1f(o,s.u_fade_change),u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new c.Uniform1i(o,s.u_is_text),u_pitch_with_map:new c.Uniform1i(o,s.u_pitch_with_map),u_texsize:new c.Uniform2f(o,s.u_texsize),u_texture:new c.Uniform1i(o,s.u_texture)}},symbolSDF:function(o,s){return{u_is_size_zoom_constant:new c.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new c.Uniform1f(o,s.u_size_t),u_size:new c.Uniform1f(o,s.u_size),u_camera_to_center_distance:new c.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new c.Uniform1f(o,s.u_pitch),u_rotate_symbol:new c.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new c.Uniform1f(o,s.u_fade_change),u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new c.Uniform1i(o,s.u_is_text),u_pitch_with_map:new c.Uniform1i(o,s.u_pitch_with_map),u_texsize:new c.Uniform2f(o,s.u_texsize),u_texture:new c.Uniform1i(o,s.u_texture),u_gamma_scale:new c.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(o,s.u_is_halo)}},symbolTextAndIcon:function(o,s){return{u_is_size_zoom_constant:new c.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new c.Uniform1f(o,s.u_size_t),u_size:new c.Uniform1f(o,s.u_size),u_camera_to_center_distance:new c.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new c.Uniform1f(o,s.u_pitch),u_rotate_symbol:new c.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new c.Uniform1f(o,s.u_fade_change),u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new c.Uniform1i(o,s.u_is_text),u_pitch_with_map:new c.Uniform1i(o,s.u_pitch_with_map),u_texsize:new c.Uniform2f(o,s.u_texsize),u_texsize_icon:new c.Uniform2f(o,s.u_texsize_icon),u_texture:new c.Uniform1i(o,s.u_texture),u_texture_icon:new c.Uniform1i(o,s.u_texture_icon),u_gamma_scale:new c.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(o,s.u_is_halo)}},background:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_opacity:new c.Uniform1f(o,s.u_opacity),u_color:new c.UniformColor(o,s.u_color)}},backgroundPattern:function(o,s){return{u_matrix:new c.UniformMatrix4f(o,s.u_matrix),u_opacity:new c.Uniform1f(o,s.u_opacity),u_image:new c.Uniform1i(o,s.u_image),u_pattern_tl_a:new c.Uniform2f(o,s.u_pattern_tl_a),u_pattern_br_a:new c.Uniform2f(o,s.u_pattern_br_a),u_pattern_tl_b:new c.Uniform2f(o,s.u_pattern_tl_b),u_pattern_br_b:new c.Uniform2f(o,s.u_pattern_br_b),u_texsize:new c.Uniform2f(o,s.u_texsize),u_mix:new c.Uniform1f(o,s.u_mix),u_pattern_size_a:new c.Uniform2f(o,s.u_pattern_size_a),u_pattern_size_b:new c.Uniform2f(o,s.u_pattern_size_b),u_scale_a:new c.Uniform1f(o,s.u_scale_a),u_scale_b:new c.Uniform1f(o,s.u_scale_b),u_pixel_coord_upper:new c.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(o,s.u_pixel_coord_lower),u_tile_units_to_pixels:new c.Uniform1f(o,s.u_tile_units_to_pixels)}}};function es(o,s,a,u,d,g,v){for(var b=o.context,T=b.gl,P=o.useProgram("collisionBox"),R=[],B=0,N=0,H=0;H<u.length;H++){var G=u[H],K=s.getTile(G),V=K.getBucket(a);if(V){var $=G.posMatrix;d[0]===0&&d[1]===0||($=o.translatePosMatrix(G.posMatrix,K,d,g));var re=v?V.textCollisionBox:V.iconCollisionBox,se=V.collisionCircleArray;if(se.length>0){var de=c.create(),he=$;c.mul(de,V.placementInvProjMatrix,o.transform.glCoordMatrix),c.mul(de,de,V.placementViewportMatrix),R.push({circleArray:se,circleOffset:N,transform:he,invTransform:de}),N=B+=se.length/4}re&&P.draw(b,T.LINES,U.disabled,Z.disabled,o.colorModeForRenderPass(),ne.disabled,va($,o.transform,K),a.id,re.layoutVertexBuffer,re.indexBuffer,re.segments,null,o.transform.zoom,null,null,re.collisionVertexBuffer)}}if(v&&R.length){var ye=o.useProgram("collisionCircle"),we=new c.StructArrayLayout2f1f2i16;we.resize(4*B),we._trim();for(var ze=0,Ie=0,je=R;Ie<je.length;Ie+=1)for(var et=je[Ie],ot=0;ot<et.circleArray.length/4;ot++){var it=4*ot,Dt=et.circleArray[it+0],qe=et.circleArray[it+1],dt=et.circleArray[it+2],_t=et.circleArray[it+3];we.emplace(ze++,Dt,qe,dt,_t,0),we.emplace(ze++,Dt,qe,dt,_t,1),we.emplace(ze++,Dt,qe,dt,_t,2),we.emplace(ze++,Dt,qe,dt,_t,3)}(!Ul||Ul.length<2*B)&&(Ul=function(vr){var hn=2*vr,Yr=new c.StructArrayLayout3ui6;Yr.resize(hn),Yr._trim();for(var fr=0;fr<hn;fr++){var Tr=6*fr;Yr.uint16[Tr+0]=4*fr+0,Yr.uint16[Tr+1]=4*fr+1,Yr.uint16[Tr+2]=4*fr+2,Yr.uint16[Tr+3]=4*fr+2,Yr.uint16[Tr+4]=4*fr+3,Yr.uint16[Tr+5]=4*fr+0}return Yr}(B));for(var ht=b.createIndexBuffer(Ul,!0),pt=b.createVertexBuffer(we,c.collisionCircleLayout.members,!0),vt=0,ct=R;vt<ct.length;vt+=1){var lt=ct[vt],jr=gh(lt.transform,lt.invTransform,o.transform);ye.draw(b,T.TRIANGLES,U.disabled,Z.disabled,o.colorModeForRenderPass(),ne.disabled,jr,a.id,pt,ht,c.SegmentVector.simpleSegment(0,2*lt.circleOffset,lt.circleArray.length,lt.circleArray.length/2),null,o.transform.zoom,null,null,null)}pt.destroy(),ht.destroy()}}var Ni=c.identity(new Float32Array(16));function bh(o,s,a,u,d,g){var v=c.getAnchorAlignment(o),b=-(v.horizontalAlign-.5)*s,T=-(v.verticalAlign-.5)*a,P=c.evaluateVariableOffset(o,u);return new c.Point((b/d+P[0])*g,(T/d+P[1])*g)}function Sh(o,s,a,u,d,g,v,b,T,P,R){var B=o.text.placedSymbolArray,N=o.text.dynamicLayoutVertexArray,H=o.icon.dynamicLayoutVertexArray,G={};N.clear();for(var K=0;K<B.length;K++){var V=B.get(K),$=V.hidden||!V.crossTileID||o.allowVerticalPlacement&&!V.placedOrientation?null:u[V.crossTileID];if($){var re=new c.Point(V.anchorX,V.anchorY),se=kt(re,a?b:v),de=Vt(g.cameraToCenterDistance,se.signedDistanceFromCamera),he=d.evaluateSizeForFeature(o.textSizeData,P,V)*de/c.ONE_EM;a&&(he*=o.tilePixelRatio/T);for(var ye=bh($.anchor,$.width,$.height,$.textOffset,$.textBoxScale,he),we=a?kt(re.add(ye),v).point:se.point.add(s?ye.rotate(-g.angle):ye),ze=o.allowVerticalPlacement&&V.placedOrientation===c.WritingMode.vertical?Math.PI/2:0,Ie=0;Ie<V.numGlyphs;Ie++)c.addDynamicAttributes(N,we,ze);R&&V.associatedIconIndex>=0&&(G[V.associatedIconIndex]={shiftedAnchor:we,angle:ze})}else wn(V.numGlyphs,N)}if(R){H.clear();for(var je=o.icon.placedSymbolArray,et=0;et<je.length;et++){var ot=je.get(et);if(ot.hidden)wn(ot.numGlyphs,H);else{var it=G[et];if(it)for(var Dt=0;Dt<ot.numGlyphs;Dt++)c.addDynamicAttributes(H,it.shiftedAnchor,it.angle);else wn(ot.numGlyphs,H)}}o.icon.dynamicLayoutVertexBuffer.updateData(H)}o.text.dynamicLayoutVertexBuffer.updateData(N)}function Eh(o,s,a){return a.iconsInText&&s?"symbolTextAndIcon":o?"symbolSDF":"symbolIcon"}function wa(o,s,a,u,d,g,v,b,T,P,R,B){for(var N=o.context,H=N.gl,G=o.transform,K=b==="map",V=T==="map",$=K&&a.layout.get("symbol-placement")!=="point",re=K&&!V&&!$,se=a.layout.get("symbol-sort-key").constantOr(1)!==void 0,de=!1,he=o.depthModeForSublayer(0,U.ReadOnly),ye=a.layout.get("text-variable-anchor"),we=[],ze=0,Ie=u;ze<Ie.length;ze+=1){var je=Ie[ze],et=s.getTile(je),ot=et.getBucket(a);if(ot){var it=d?ot.text:ot.icon;if(it&&it.segments.get().length){var Dt=it.programConfigurations.get(a.id),qe=d||ot.sdfIcons,dt=d?ot.textSizeData:ot.iconSizeData,_t=V||G.pitch!==0,ht=o.useProgram(Eh(qe,d,ot),Dt),pt=c.evaluateSizeForZoom(dt,G.zoom),vt=void 0,ct=[0,0],lt=void 0,jr=void 0,vr=null,hn=void 0;if(d)lt=et.glyphAtlasTexture,jr=H.LINEAR,vt=et.glyphAtlasTexture.size,ot.iconsInText&&(ct=et.imageAtlasTexture.size,vr=et.imageAtlasTexture,hn=_t||o.options.rotating||o.options.zooming||dt.kind==="composite"||dt.kind==="camera"?H.LINEAR:H.NEAREST);else{var Yr=a.layout.get("icon-size").constantOr(0)!==1||ot.iconsNeedLinear;lt=et.imageAtlasTexture,jr=qe||o.options.rotating||o.options.zooming||Yr||_t?H.LINEAR:H.NEAREST,vt=et.imageAtlasTexture.size}var fr=ar(et,1,o.transform.zoom),Tr=Sr(je.posMatrix,V,K,o.transform,fr),Qn=$t(je.posMatrix,V,K,o.transform,fr),Tn=ye&&ot.hasTextData(),Zo=a.layout.get("icon-text-fit")!=="none"&&Tn&&ot.hasIconData();$&&Us(ot,je.posMatrix,o,d,Tr,Qn,V,P);var On=o.translatePosMatrix(je.posMatrix,et,g,v),Gi=$||d&&ye||Zo?Ni:Tr,Ii=o.translatePosMatrix(Qn,et,g,v,!0),al=qe&&a.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0,as={program:ht,buffers:it,uniformValues:qe?ot.iconsInText?Vl(dt.kind,pt,re,V,o,On,Gi,Ii,vt,ct):Ws(dt.kind,pt,re,V,o,On,Gi,Ii,d,vt,!0):Ja(dt.kind,pt,re,V,o,On,Gi,Ii,d,vt),atlasTexture:lt,atlasTextureIcon:vr,atlasInterpolation:jr,atlasInterpolationIcon:hn,isSDF:qe,hasHalo:al};if(se&&ot.canOverlap){de=!0;for(var Ho=0,ss=it.segments.get();Ho<ss.length;Ho+=1){var sl=ss[Ho];we.push({segments:new c.SegmentVector([sl]),sortKey:sl.sortKey,state:as})}}else we.push({segments:it.segments,sortKey:0,state:as})}}}de&&we.sort(function(Wo,Ia){return Wo.sortKey-Ia.sortKey});for(var ro=0,ll=we;ro<ll.length;ro+=1){var no=ll[ro],qr=no.state;if(N.activeTexture.set(H.TEXTURE0),qr.atlasTexture.bind(qr.atlasInterpolation,H.CLAMP_TO_EDGE),qr.atlasTextureIcon&&(N.activeTexture.set(H.TEXTURE1),qr.atlasTextureIcon&&qr.atlasTextureIcon.bind(qr.atlasInterpolationIcon,H.CLAMP_TO_EDGE)),qr.isSDF){var vo=qr.uniformValues;qr.hasHalo&&(vo.u_is_halo=1,$s(qr.buffers,no.segments,a,o,qr.program,he,R,B,vo)),vo.u_is_halo=0}$s(qr.buffers,no.segments,a,o,qr.program,he,R,B,qr.uniformValues)}}function $s(o,s,a,u,d,g,v,b,T){var P=u.context;d.draw(P,P.gl.TRIANGLES,g,v,b,ne.disabled,T,a.id,o.layoutVertexBuffer,o.indexBuffer,s,a.paint,u.transform.zoom,o.programConfigurations.get(a.id),o.dynamicLayoutVertexBuffer,o.opacityVertexBuffer)}function jl(o,s,a,u,d,g,v){var b,T,P,R,B,N=o.context.gl,H=a.paint.get("fill-pattern"),G=H&&H.constantOr(1),K=a.getCrossfadeParameters();v?(T=G&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",b=N.LINES):(T=G?"fillPattern":"fill",b=N.TRIANGLES);for(var V=0,$=u;V<$.length;V+=1){var re=$[V],se=s.getTile(re);if(!G||se.patternsLoaded()){var de=se.getBucket(a);if(de){var he=de.programConfigurations.get(a.id),ye=o.useProgram(T,he);G&&(o.context.activeTexture.set(N.TEXTURE0),se.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),he.updatePaintBuffers(K));var we=H.constantOr(null);if(we&&se.imageAtlas){var ze=se.imageAtlas,Ie=ze.patternPositions[we.to.toString()],je=ze.patternPositions[we.from.toString()];Ie&&je&&he.setConstantPatternPositions(Ie,je)}var et=o.translatePosMatrix(re.posMatrix,se,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(v){R=de.indexBuffer2,B=de.segments2;var ot=[N.drawingBufferWidth,N.drawingBufferHeight];P=T==="fillOutlinePattern"&&G?yh(et,o,K,se,ot):mh(et,ot)}else R=de.indexBuffer,B=de.segments,P=G?ga(et,o,K,se):No(et);ye.draw(o.context,b,d,o.stencilModeForClipping(re),g,ne.disabled,P,a.id,de.layoutVertexBuffer,R,B,a.paint,o.transform.zoom,he)}}}}function dc(o,s,a,u,d,g,v){for(var b=o.context,T=b.gl,P=a.paint.get("fill-extrusion-pattern"),R=P.constantOr(1),B=a.getCrossfadeParameters(),N=a.paint.get("fill-extrusion-opacity"),H=0,G=u;H<G.length;H+=1){var K=G[H],V=s.getTile(K),$=V.getBucket(a);if($){var re=$.programConfigurations.get(a.id),se=o.useProgram(R?"fillExtrusionPattern":"fillExtrusion",re);R&&(o.context.activeTexture.set(T.TEXTURE0),V.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),re.updatePaintBuffers(B));var de=P.constantOr(null);if(de&&V.imageAtlas){var he=V.imageAtlas,ye=he.patternPositions[de.to.toString()],we=he.patternPositions[de.from.toString()];ye&&we&&re.setConstantPatternPositions(ye,we)}var ze=o.translatePosMatrix(K.posMatrix,V,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Ie=a.paint.get("fill-extrusion-vertical-gradient"),je=R?ya(ze,o,Ie,N,K,B,V):dh(ze,o,Ie,N);se.draw(b,b.gl.TRIANGLES,d,g,v,ne.backCCW,je,a.id,$.layoutVertexBuffer,$.indexBuffer,$.segments,a.paint,o.transform.zoom,re)}}}function ql(o,s,a,u,d,g){var v=o.context,b=v.gl,T=s.fbo;if(T){var P=o.useProgram("hillshade");v.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,T.colorAttachment.get());var R=function(B,N,H){var G=H.paint.get("hillshade-shadow-color"),K=H.paint.get("hillshade-highlight-color"),V=H.paint.get("hillshade-accent-color"),$=H.paint.get("hillshade-illumination-direction")*(Math.PI/180);H.paint.get("hillshade-illumination-anchor")==="viewport"&&($-=B.transform.angle);var re,se,de,he=!B.options.moving;return{u_matrix:B.transform.calculatePosMatrix(N.tileID.toUnwrapped(),he),u_image:0,u_latrange:(re=N.tileID,se=Math.pow(2,re.canonical.z),de=re.canonical.y,[new c.MercatorCoordinate(0,de/se).toLngLat().lat,new c.MercatorCoordinate(0,(de+1)/se).toLngLat().lat]),u_light:[H.paint.get("hillshade-exaggeration"),$],u_shadow:G,u_highlight:K,u_accent:V}}(o,s,a);P.draw(v,b.TRIANGLES,u,d,g,ne.disabled,R,a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}}function tm(o,s,a,u,d,g){var v=o.context,b=v.gl,T=s.dem;if(T&&T.data){var P=T.dim,R=T.stride,B=T.getPixels();if(v.activeTexture.set(b.TEXTURE1),v.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||o.getTileTexture(R),s.demTexture){var N=s.demTexture;N.update(B,{premultiply:!1}),N.bind(b.NEAREST,b.CLAMP_TO_EDGE)}else s.demTexture=new c.Texture(v,B,b.RGBA,{premultiply:!1}),s.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE);v.activeTexture.set(b.TEXTURE0);var H=s.fbo;if(!H){var G=new c.Texture(v,{width:P,height:P,data:null},b.RGBA);G.bind(b.LINEAR,b.CLAMP_TO_EDGE),(H=s.fbo=v.createFramebuffer(P,P,!0)).colorAttachment.set(G.texture)}v.bindFramebuffer.set(H.framebuffer),v.viewport.set([0,0,P,P]),o.useProgram("hillshadePrepare").draw(v,b.TRIANGLES,u,d,g,ne.disabled,function(K,V){var $=V.stride,re=c.create();return c.ortho(re,0,c.EXTENT,-c.EXTENT,0,0,1),c.translate(re,re,[0,-c.EXTENT,0]),{u_matrix:re,u_image:1,u_dimension:[$,$],u_zoom:K.overscaledZ,u_unpack:V.getUnpackVector()}}(s.tileID,T),a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function Gl(o,s,a,u,d){var g=u.paint.get("raster-fade-duration");if(g>0){var v=c.browser.now(),b=(v-o.timeAdded)/g,T=s?(v-s.timeAdded)/g:-1,P=a.getSource(),R=d.coveringZoomLevel({tileSize:P.tileSize,roundZoom:P.roundZoom}),B=!s||Math.abs(s.tileID.overscaledZ-R)>Math.abs(o.tileID.overscaledZ-R),N=B&&o.refreshedUponExpiration?1:c.clamp(B?b:1-T,0,1);return o.refreshedUponExpiration&&b>=1&&(o.refreshedUponExpiration=!1),s?{opacity:1,mix:1-N}:{opacity:N,mix:0}}return{opacity:1,mix:0}}var mc=new c.Color(1,0,0,1),Th=new c.Color(0,1,0,1),Ch=new c.Color(0,0,1,1),Zl=new c.Color(1,0,1,1),yc=new c.Color(0,1,1,1);function gc(o,s,a,u){Ks(o,0,s+a/2,o.transform.width,a,u)}function vc(o,s,a,u){Ks(o,s-a/2,0,a,o.transform.height,u)}function Ks(o,s,a,u,d,g){var v=o.context,b=v.gl;b.enable(b.SCISSOR_TEST),b.scissor(s*c.browser.devicePixelRatio,a*c.browser.devicePixelRatio,u*c.browser.devicePixelRatio,d*c.browser.devicePixelRatio),v.clear({color:g}),b.disable(b.SCISSOR_TEST)}function Ih(o,s,a){var u=o.context,d=u.gl,g=a.posMatrix,v=o.useProgram("debug"),b=U.disabled,T=Z.disabled,P=o.colorModeForRenderPass();u.activeTexture.set(d.TEXTURE0),o.emptyTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),v.draw(u,d.LINE_STRIP,b,T,P,ne.disabled,_a(g,c.Color.red),"$debug",o.debugBuffer,o.tileBorderIndexBuffer,o.debugSegments);var R=s.getTileByID(a.key).latestRawTileData,B=Math.floor((R&&R.byteLength||0)/1024),N=s.getTile(a).tileSize,H=512/Math.min(N,512)*(a.overscaledZ/o.transform.zoom)*.5,G=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(G+=" => "+a.overscaledZ),function(K,V){K.initDebugOverlayCanvas();var $=K.debugOverlayCanvas,re=K.context.gl,se=K.debugOverlayCanvas.getContext("2d");se.clearRect(0,0,$.width,$.height),se.shadowColor="white",se.shadowBlur=2,se.lineWidth=1.5,se.strokeStyle="white",se.textBaseline="top",se.font="bold 36px Open Sans, sans-serif",se.fillText(V,5,5),se.strokeText(V,5,5),K.debugOverlayTexture.update($),K.debugOverlayTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE)}(o,G+" "+B+"kb"),v.draw(u,d.TRIANGLES,b,T,Q.alphaBlended,ne.disabled,_a(g,c.Color.transparent,H),"$debug",o.debugBuffer,o.quadTriangleIndexBuffer,o.debugSegments)}var ba={symbol:function(o,s,a,u,d){if(o.renderPass==="translucent"){var g=Z.disabled,v=o.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(b,T,P,R,B,N,H){for(var G=T.transform,K=B==="map",V=N==="map",$=0,re=b;$<re.length;$+=1){var se=re[$],de=R.getTile(se),he=de.getBucket(P);if(he&&he.text&&he.text.segments.get().length){var ye=c.evaluateSizeForZoom(he.textSizeData,G.zoom),we=ar(de,1,T.transform.zoom),ze=Sr(se.posMatrix,V,K,T.transform,we),Ie=P.layout.get("icon-text-fit")!=="none"&&he.hasIconData();if(ye){var je=Math.pow(2,G.zoom-de.tileID.overscaledZ);Sh(he,K,V,H,c.symbolSize,G,ze,se.posMatrix,je,ye,Ie)}}}}(u,o,a,s,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),d),a.paint.get("icon-opacity").constantOr(1)!==0&&wa(o,s,a,u,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),g,v),a.paint.get("text-opacity").constantOr(1)!==0&&wa(o,s,a,u,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),g,v),s.map.showCollisionBoxes&&(es(o,s,a,u,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),es(o,s,a,u,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(o,s,a,u){if(o.renderPass==="translucent"){var d=a.paint.get("circle-opacity"),g=a.paint.get("circle-stroke-width"),v=a.paint.get("circle-stroke-opacity"),b=a.layout.get("circle-sort-key").constantOr(1)!==void 0;if(d.constantOr(1)!==0||g.constantOr(1)!==0&&v.constantOr(1)!==0){for(var T=o.context,P=T.gl,R=o.depthModeForSublayer(0,U.ReadOnly),B=Z.disabled,N=o.colorModeForRenderPass(),H=[],G=0;G<u.length;G++){var K=u[G],V=s.getTile(K),$=V.getBucket(a);if($){var re=$.programConfigurations.get(a.id),se={programConfiguration:re,program:o.useProgram("circle",re),layoutVertexBuffer:$.layoutVertexBuffer,indexBuffer:$.indexBuffer,uniformValues:fc(o,K,V,a)};if(b)for(var de=0,he=$.segments.get();de<he.length;de+=1){var ye=he[de];H.push({segments:new c.SegmentVector([ye]),sortKey:ye.sortKey,state:se})}else H.push({segments:$.segments,sortKey:0,state:se})}}b&&H.sort(function(et,ot){return et.sortKey-ot.sortKey});for(var we=0,ze=H;we<ze.length;we+=1){var Ie=ze[we],je=Ie.state;je.program.draw(T,P.TRIANGLES,R,B,N,ne.disabled,je.uniformValues,a.id,je.layoutVertexBuffer,je.indexBuffer,Ie.segments,a.paint,o.transform.zoom,je.programConfiguration)}}}},heatmap:function(o,s,a,u){if(a.paint.get("heatmap-opacity")!==0)if(o.renderPass==="offscreen"){var d=o.context,g=d.gl,v=Z.disabled,b=new Q([g.ONE,g.ONE],c.Color.transparent,[!0,!0,!0,!0]);(function(H,G,K){var V=H.gl;H.activeTexture.set(V.TEXTURE1),H.viewport.set([0,0,G.width/4,G.height/4]);var $=K.heatmapFbo;if($)V.bindTexture(V.TEXTURE_2D,$.colorAttachment.get()),H.bindFramebuffer.set($.framebuffer);else{var re=V.createTexture();V.bindTexture(V.TEXTURE_2D,re),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_S,V.CLAMP_TO_EDGE),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_T,V.CLAMP_TO_EDGE),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MIN_FILTER,V.LINEAR),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,V.LINEAR),$=K.heatmapFbo=H.createFramebuffer(G.width/4,G.height/4,!1),function(se,de,he,ye){var we=se.gl;we.texImage2D(we.TEXTURE_2D,0,we.RGBA,de.width/4,de.height/4,0,we.RGBA,se.extRenderToTextureHalfFloat?se.extTextureHalfFloat.HALF_FLOAT_OES:we.UNSIGNED_BYTE,null),ye.colorAttachment.set(he)}(H,G,re,$)}})(d,o,a),d.clear({color:c.Color.transparent});for(var T=0;T<u.length;T++){var P=u[T];if(!s.hasRenderableParent(P)){var R=s.getTile(P),B=R.getBucket(a);if(B){var N=B.programConfigurations.get(a.id);o.useProgram("heatmap",N).draw(d,g.TRIANGLES,U.disabled,v,b,ne.disabled,vh(P.posMatrix,R,o.transform.zoom,a.paint.get("heatmap-intensity")),a.id,B.layoutVertexBuffer,B.indexBuffer,B.segments,a.paint,o.transform.zoom,N)}}}d.viewport.set([0,0,o.width,o.height])}else o.renderPass==="translucent"&&(o.context.setColorMode(o.colorModeForRenderPass()),function(H,G){var K=H.context,V=K.gl,$=G.heatmapFbo;if($){K.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,$.colorAttachment.get()),K.activeTexture.set(V.TEXTURE1);var re=G.colorRampTexture;re||(re=G.colorRampTexture=new c.Texture(K,G.colorRamp,V.RGBA)),re.bind(V.LINEAR,V.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(K,V.TRIANGLES,U.disabled,Z.disabled,H.colorModeForRenderPass(),ne.disabled,function(se,de,he,ye){var we=c.create();c.ortho(we,0,se.width,se.height,0,0,1);var ze=se.context.gl;return{u_matrix:we,u_world:[ze.drawingBufferWidth,ze.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:de.paint.get("heatmap-opacity")}}(H,G),G.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,G.paint,H.transform.zoom)}}(o,a))},line:function(o,s,a,u){if(o.renderPass==="translucent"){var d=a.paint.get("line-opacity"),g=a.paint.get("line-width");if(d.constantOr(1)!==0&&g.constantOr(1)!==0)for(var v=o.depthModeForSublayer(0,U.ReadOnly),b=o.colorModeForRenderPass(),T=a.paint.get("line-dasharray"),P=a.paint.get("line-pattern"),R=P.constantOr(1),B=a.paint.get("line-gradient"),N=a.getCrossfadeParameters(),H=R?"linePattern":T?"lineSDF":B?"lineGradient":"line",G=o.context,K=G.gl,V=!0,$=0,re=u;$<re.length;$+=1){var se=re[$],de=s.getTile(se);if(!R||de.patternsLoaded()){var he=de.getBucket(a);if(he){var ye=he.programConfigurations.get(a.id),we=o.context.program.get(),ze=o.useProgram(H,ye),Ie=V||ze.program!==we,je=P.constantOr(null);if(je&&de.imageAtlas){var et=de.imageAtlas,ot=et.patternPositions[je.to.toString()],it=et.patternPositions[je.from.toString()];ot&&it&&ye.setConstantPatternPositions(ot,it)}var Dt=R?Nl(o,de,a,N):T?Qd(o,de,a,T,N):B?rr(o,de,a,he.lineClipsArray.length):Hs(o,de,a);if(R)G.activeTexture.set(K.TEXTURE0),de.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),ye.updatePaintBuffers(N);else if(T&&(Ie||o.lineAtlas.dirty))G.activeTexture.set(K.TEXTURE0),o.lineAtlas.bind(G);else if(B){var qe=he.gradients[a.id],dt=qe.texture;if(a.gradientVersion!==qe.version){var _t=256;if(a.stepInterpolant){var ht=s.getSource().maxzoom,pt=se.canonical.z===ht?Math.ceil(1<<o.transform.maxZoom-se.canonical.z):1;_t=c.clamp(c.nextPowerOfTwo(he.maxLineLength/c.EXTENT*1024*pt),256,G.maxTextureSize)}qe.gradient=c.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:_t,image:qe.gradient||void 0,clips:he.lineClipsArray}),qe.texture?qe.texture.update(qe.gradient):qe.texture=new c.Texture(G,qe.gradient,K.RGBA),qe.version=a.gradientVersion,dt=qe.texture}G.activeTexture.set(K.TEXTURE0),dt.bind(a.stepInterpolant?K.NEAREST:K.LINEAR,K.CLAMP_TO_EDGE)}ze.draw(G,K.TRIANGLES,v,o.stencilModeForClipping(se),b,ne.disabled,Dt,a.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,a.paint,o.transform.zoom,ye,he.layoutVertexBuffer2),V=!1}}}}},fill:function(o,s,a,u){var d=a.paint.get("fill-color"),g=a.paint.get("fill-opacity");if(g.constantOr(1)!==0){var v=o.colorModeForRenderPass(),b=a.paint.get("fill-pattern"),T=o.opaquePassEnabledForLayer()&&!b.constantOr(1)&&d.constantOr(c.Color.transparent).a===1&&g.constantOr(0)===1?"opaque":"translucent";if(o.renderPass===T){var P=o.depthModeForSublayer(1,o.renderPass==="opaque"?U.ReadWrite:U.ReadOnly);jl(o,s,a,u,P,v,!1)}if(o.renderPass==="translucent"&&a.paint.get("fill-antialias")){var R=o.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,U.ReadOnly);jl(o,s,a,u,R,v,!0)}}},"fill-extrusion":function(o,s,a,u){var d=a.paint.get("fill-extrusion-opacity");if(d!==0&&o.renderPass==="translucent"){var g=new U(o.context.gl.LEQUAL,U.ReadWrite,o.depthRangeFor3D);if(d!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))dc(o,s,a,u,g,Z.disabled,Q.disabled),dc(o,s,a,u,g,o.stencilModeFor3D(),o.colorModeForRenderPass());else{var v=o.colorModeForRenderPass();dc(o,s,a,u,g,Z.disabled,v)}}},hillshade:function(o,s,a,u){if(o.renderPass==="offscreen"||o.renderPass==="translucent"){for(var d=o.context,g=o.depthModeForSublayer(0,U.ReadOnly),v=o.colorModeForRenderPass(),b=o.renderPass==="translucent"?o.stencilConfigForOverlap(u):[{},u],T=b[0],P=0,R=b[1];P<R.length;P+=1){var B=R[P],N=s.getTile(B);N.needsHillshadePrepare&&o.renderPass==="offscreen"?tm(o,N,a,g,Z.disabled,v):o.renderPass==="translucent"&&ql(o,N,a,g,T[B.overscaledZ],v)}d.viewport.set([0,0,o.width,o.height])}},raster:function(o,s,a,u){if(o.renderPass==="translucent"&&a.paint.get("raster-opacity")!==0&&u.length)for(var d=o.context,g=d.gl,v=s.getSource(),b=o.useProgram("raster"),T=o.colorModeForRenderPass(),P=v instanceof Ot?[{},u]:o.stencilConfigForOverlap(u),R=P[0],B=P[1],N=B[B.length-1].overscaledZ,H=!o.options.moving,G=0,K=B;G<K.length;G+=1){var V=K[G],$=o.depthModeForSublayer(V.overscaledZ-N,a.paint.get("raster-opacity")===1?U.ReadWrite:U.ReadOnly,g.LESS),re=s.getTile(V),se=o.transform.calculatePosMatrix(V.toUnwrapped(),H);re.registerFadeDuration(a.paint.get("raster-fade-duration"));var de=s.findLoadedParent(V,0),he=Gl(re,de,s,a,o.transform),ye=void 0,we=void 0,ze=a.paint.get("raster-resampling")==="nearest"?g.NEAREST:g.LINEAR;d.activeTexture.set(g.TEXTURE0),re.texture.bind(ze,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST),d.activeTexture.set(g.TEXTURE1),de?(de.texture.bind(ze,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST),ye=Math.pow(2,de.tileID.overscaledZ-re.tileID.overscaledZ),we=[re.tileID.canonical.x*ye%1,re.tileID.canonical.y*ye%1]):re.texture.bind(ze,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST);var Ie=em(se,we||[0,0],ye||1,he,a);v instanceof Ot?b.draw(d,g.TRIANGLES,$,Z.disabled,T,ne.disabled,Ie,a.id,v.boundsBuffer,o.quadTriangleIndexBuffer,v.boundsSegments):b.draw(d,g.TRIANGLES,$,R[V.overscaledZ],T,ne.disabled,Ie,a.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}},background:function(o,s,a){var u=a.paint.get("background-color"),d=a.paint.get("background-opacity");if(d!==0){var g=o.context,v=g.gl,b=o.transform,T=b.tileSize,P=a.paint.get("background-pattern");if(!o.isPatternMissing(P)){var R=!P&&u.a===1&&d===1&&o.opaquePassEnabledForLayer()?"opaque":"translucent";if(o.renderPass===R){var B=Z.disabled,N=o.depthModeForSublayer(0,R==="opaque"?U.ReadWrite:U.ReadOnly),H=o.colorModeForRenderPass(),G=o.useProgram(P?"backgroundPattern":"background"),K=b.coveringTiles({tileSize:T});P&&(g.activeTexture.set(v.TEXTURE0),o.imageManager.bind(o.context));for(var V=a.getCrossfadeParameters(),$=0,re=K;$<re.length;$+=1){var se=re[$],de=o.transform.calculatePosMatrix(se.toUnwrapped()),he=P?Qa(de,d,o,P,{tileID:se,tileSize:T},V):Xs(de,d,u);G.draw(g,v.TRIANGLES,N,B,H,ne.disabled,he,a.id,o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments)}}}}},debug:function(o,s,a){for(var u=0;u<a.length;u++)Ih(o,s,a[u])},custom:function(o,s,a){var u=o.context,d=a.implementation;if(o.renderPass==="offscreen"){var g=d.prerender;g&&(o.setCustomLayerDefaults(),u.setColorMode(o.colorModeForRenderPass()),g.call(d,u.gl,o.transform.customLayerMatrix()),u.setDirty(),o.setBaseState())}else if(o.renderPass==="translucent"){o.setCustomLayerDefaults(),u.setColorMode(o.colorModeForRenderPass()),u.setStencilMode(Z.disabled);var v=d.renderingMode==="3d"?new U(o.context.gl.LEQUAL,U.ReadWrite,o.depthRangeFor3D):o.depthModeForSublayer(0,U.ReadOnly);u.setDepthMode(v),d.render(u.gl,o.transform.customLayerMatrix()),u.setDirty(),o.setBaseState(),u.bindFramebuffer.set(null)}}},sr=function(o,s){this.context=new O(o),this.transform=s,this._tileTextures={},this.setup(),this.numSublayers=W.maxUnderzooming+W.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Mo,this.gpuTimers={}};sr.prototype.resize=function(o,s){if(this.width=o*c.browser.devicePixelRatio,this.height=s*c.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,u=this.style._order;a<u.length;a+=1)this.style._layers[u[a]].resize()},sr.prototype.setup=function(){var o=this.context,s=new c.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(c.EXTENT,0),s.emplaceBack(0,c.EXTENT),s.emplaceBack(c.EXTENT,c.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(s,Ar.members),this.tileExtentSegments=c.SegmentVector.simpleSegment(0,0,4,2);var a=new c.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(c.EXTENT,0),a.emplaceBack(0,c.EXTENT),a.emplaceBack(c.EXTENT,c.EXTENT),this.debugBuffer=o.createVertexBuffer(a,Ar.members),this.debugSegments=c.SegmentVector.simpleSegment(0,0,4,5);var u=new c.StructArrayLayout4i8;u.emplaceBack(0,0,0,0),u.emplaceBack(c.EXTENT,0,c.EXTENT,0),u.emplaceBack(0,c.EXTENT,0,c.EXTENT),u.emplaceBack(c.EXTENT,c.EXTENT,c.EXTENT,c.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(u,Lt.members),this.rasterBoundsSegments=c.SegmentVector.simpleSegment(0,0,4,2);var d=new c.StructArrayLayout2i4;d.emplaceBack(0,0),d.emplaceBack(1,0),d.emplaceBack(0,1),d.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(d,Ar.members),this.viewportSegments=c.SegmentVector.simpleSegment(0,0,4,2);var g=new c.StructArrayLayout1ui2;g.emplaceBack(0),g.emplaceBack(1),g.emplaceBack(3),g.emplaceBack(2),g.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(g);var v=new c.StructArrayLayout3ui6;v.emplaceBack(0,1,2),v.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(v),this.emptyTexture=new c.Texture(o,{width:1,height:1,data:new Uint8Array([0,0,0,0])},o.gl.RGBA);var b=this.context.gl;this.stencilClearMode=new Z({func:b.ALWAYS,mask:0},0,255,b.ZERO,b.ZERO,b.ZERO)},sr.prototype.clearStencil=function(){var o=this.context,s=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=c.create();c.ortho(a,0,this.width,this.height,0,0,1),c.scale(a,a,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,s.TRIANGLES,U.disabled,this.stencilClearMode,Q.disabled,ne.disabled,xa(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},sr.prototype._renderTileClippingMasks=function(o,s){if(this.currentStencilSource!==o.source&&o.isTileClipped()&&s&&s.length){this.currentStencilSource=o.source;var a=this.context,u=a.gl;this.nextStencilID+s.length>256&&this.clearStencil(),a.setColorMode(Q.disabled),a.setDepthMode(U.disabled);var d=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var g=0,v=s;g<v.length;g+=1){var b=v[g],T=this._tileClippingMaskIDs[b.key]=this.nextStencilID++;d.draw(a,u.TRIANGLES,U.disabled,new Z({func:u.ALWAYS,mask:0},T,255,u.KEEP,u.KEEP,u.REPLACE),Q.disabled,ne.disabled,xa(b.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},sr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var o=this.nextStencilID++,s=this.context.gl;return new Z({func:s.NOTEQUAL,mask:255},o,255,s.KEEP,s.KEEP,s.REPLACE)},sr.prototype.stencilModeForClipping=function(o){var s=this.context.gl;return new Z({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,s.KEEP,s.KEEP,s.REPLACE)},sr.prototype.stencilConfigForOverlap=function(o){var s,a=this.context.gl,u=o.sort(function(T,P){return P.overscaledZ-T.overscaledZ}),d=u[u.length-1].overscaledZ,g=u[0].overscaledZ-d+1;if(g>1){this.currentStencilSource=void 0,this.nextStencilID+g>256&&this.clearStencil();for(var v={},b=0;b<g;b++)v[b+d]=new Z({func:a.GEQUAL,mask:255},b+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=g,[v,u]}return[(s={},s[d]=Z.disabled,s),u]},sr.prototype.colorModeForRenderPass=function(){var o=this.context.gl;return this._showOverdrawInspector?new Q([o.CONSTANT_COLOR,o.ONE],new c.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Q.unblended:Q.alphaBlended},sr.prototype.depthModeForSublayer=function(o,s,a){if(!this.opaquePassEnabledForLayer())return U.disabled;var u=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new U(a||this.context.gl.LEQUAL,s,[u,u])},sr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},sr.prototype.render=function(o,s){var a=this;this.style=o,this.options=s,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(c.browser.now()),this.imageManager.beginFrame();var u=this.style._order,d=this.style.sourceCaches;for(var g in d){var v=d[g];v.used&&v.prepare(this.context)}var b,T,P={},R={},B={};for(var N in d){var H=d[N];P[N]=H.getVisibleCoordinates(),R[N]=P[N].slice().reverse(),B[N]=H.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var G=0;G<u.length;G++)if(this.style._layers[u[G]].is3D()){this.opaquePassCutoff=G;break}this.renderPass="offscreen";for(var K=0,V=u;K<V.length;K+=1){var $=this.style._layers[V[K]];if($.hasOffscreenPass()&&!$.isHidden(this.transform.zoom)){var re=R[$.source];($.type==="custom"||re.length)&&this.renderLayer(this,d[$.source],$,re)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?c.Color.black:c.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=u.length-1;this.currentLayer>=0;this.currentLayer--){var se=this.style._layers[u[this.currentLayer]],de=d[se.source],he=P[se.source];this._renderTileClippingMasks(se,he),this.renderLayer(this,de,se,he)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<u.length;this.currentLayer++){var ye=this.style._layers[u[this.currentLayer]],we=d[ye.source],ze=(ye.type==="symbol"?B:R)[ye.source];this._renderTileClippingMasks(ye,P[ye.source]),this.renderLayer(this,we,ye,ze)}this.options.showTileBoundaries&&(c.values(this.style._layers).forEach(function(Ie){Ie.source&&!Ie.isHidden(a.transform.zoom)&&(Ie.source!==(T&&T.id)&&(T=a.style.sourceCaches[Ie.source]),(!b||b.getSource().maxzoom<T.getSource().maxzoom)&&(b=T))}),b&&ba.debug(this,b,b.getVisibleCoordinates())),this.options.showPadding&&function(Ie){var je=Ie.transform.padding;gc(Ie,Ie.transform.height-(je.top||0),3,mc),gc(Ie,je.bottom||0,3,Th),vc(Ie,je.left||0,3,Ch),vc(Ie,Ie.transform.width-(je.right||0),3,Zl);var et=Ie.transform.centerPoint;(function(ot,it,Dt,qe){Ks(ot,it-1,Dt-10,2,20,qe),Ks(ot,it-10,Dt-1,20,2,qe)})(Ie,et.x,Ie.transform.height-et.y,yc)}(this),this.context.setDefault()},sr.prototype.renderLayer=function(o,s,a,u){a.isHidden(this.transform.zoom)||(a.type==="background"||a.type==="custom"||u.length)&&(this.id=a.id,this.gpuTimingStart(a),ba[a.type](o,s,a,u,this.style.placement.variableOffsets),this.gpuTimingEnd())},sr.prototype.gpuTimingStart=function(o){if(this.options.gpuTiming){var s=this.context.extTimerQuery,a=this.gpuTimers[o.id];a||(a=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),a.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,a.query)}},sr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}},sr.prototype.collectGpuTimers=function(){var o=this.gpuTimers;return this.gpuTimers={},o},sr.prototype.queryGpuTimers=function(o){var s={};for(var a in o){var u=o[a],d=this.context.extTimerQuery,g=d.getQueryObjectEXT(u.query,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(u.query),s[a]=g}return s},sr.prototype.translatePosMatrix=function(o,s,a,u,d){if(!a[0]&&!a[1])return o;var g=d?u==="map"?this.transform.angle:0:u==="viewport"?-this.transform.angle:0;if(g){var v=Math.sin(g),b=Math.cos(g);a=[a[0]*b-a[1]*v,a[0]*v+a[1]*b]}var T=[d?a[0]:ar(s,a[0],this.transform.zoom),d?a[1]:ar(s,a[1],this.transform.zoom),0],P=new Float32Array(16);return c.translate(P,o,T),P},sr.prototype.saveTileTexture=function(o){var s=this._tileTextures[o.size[0]];s?s.push(o):this._tileTextures[o.size[0]]=[o]},sr.prototype.getTileTexture=function(o){var s=this._tileTextures[o];return s&&s.length>0?s.pop():null},sr.prototype.isPatternMissing=function(o){if(!o)return!1;if(!o.from||!o.to)return!0;var s=this.imageManager.getPattern(o.from.toString()),a=this.imageManager.getPattern(o.to.toString());return!s||!a},sr.prototype.useProgram=function(o,s){this.cache=this.cache||{};var a=""+o+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[a]||(this.cache[a]=new hh(this.context,o,Jd[o],s,wh[o],this._showOverdrawInspector)),this.cache[a]},sr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},sr.prototype.setBaseState=function(){var o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)},sr.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=c.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},sr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Hl=function(o,s){this.points=o,this.planes=s};Hl.fromInvProjectionMatrix=function(o,s,a){var u=Math.pow(2,a),d=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(v){return c.transformMat4([],v,o)}).map(function(v){return c.scale$1([],v,1/v[3]/s*u)}),g=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(v){var b=c.sub([],d[v[0]],d[v[1]]),T=c.sub([],d[v[2]],d[v[1]]),P=c.normalize([],c.cross([],b,T)),R=-c.dot(P,d[v[1]]);return P.concat(R)});return new Hl(d,g)};var Sa=function(o,s){this.min=o,this.max=s,this.center=c.scale$2([],c.add([],this.min,this.max),.5)};Sa.prototype.quadrant=function(o){for(var s=[o%2==0,o<2],a=c.clone$2(this.min),u=c.clone$2(this.max),d=0;d<s.length;d++)a[d]=s[d]?this.min[d]:this.center[d],u[d]=s[d]?this.center[d]:this.max[d];return u[2]=this.max[2],new Sa(a,u)},Sa.prototype.distanceX=function(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]},Sa.prototype.distanceY=function(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]},Sa.prototype.intersects=function(o){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,u=0;u<o.planes.length;u++){for(var d=o.planes[u],g=0,v=0;v<s.length;v++)g+=c.dot$1(d,s[v])>=0;if(g===0)return 0;g!==s.length&&(a=!1)}if(a)return 2;for(var b=0;b<3;b++){for(var T=Number.MAX_VALUE,P=-Number.MAX_VALUE,R=0;R<o.points.length;R++){var B=o.points[R][b]-this.min[b];T=Math.min(T,B),P=Math.max(P,B)}if(P<0||T>this.max[b]-this.min[b])return 0}return 1};var Uo=function(o,s,a,u){if(o===void 0&&(o=0),s===void 0&&(s=0),a===void 0&&(a=0),u===void 0&&(u=0),isNaN(o)||o<0||isNaN(s)||s<0||isNaN(a)||a<0||isNaN(u)||u<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=s,this.left=a,this.right=u};Uo.prototype.interpolate=function(o,s,a){return s.top!=null&&o.top!=null&&(this.top=c.number(o.top,s.top,a)),s.bottom!=null&&o.bottom!=null&&(this.bottom=c.number(o.bottom,s.bottom,a)),s.left!=null&&o.left!=null&&(this.left=c.number(o.left,s.left,a)),s.right!=null&&o.right!=null&&(this.right=c.number(o.right,s.right,a)),this},Uo.prototype.getCenter=function(o,s){var a=c.clamp((this.left+o-this.right)/2,0,o),u=c.clamp((this.top+s-this.bottom)/2,0,s);return new c.Point(a,u)},Uo.prototype.equals=function(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right},Uo.prototype.clone=function(){return new Uo(this.top,this.bottom,this.left,this.right)},Uo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var zt=function(o,s,a,u,d){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=d===void 0||d,this._minZoom=o||0,this._maxZoom=s||22,this._minPitch=a??0,this._maxPitch=u??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Uo,this._posMatrixCache={},this._alignedPosMatrixCache={}},nr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};zt.prototype.clone=function(){var o=new zt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.tileSize=this.tileSize,o.latRange=this.latRange,o.width=this.width,o.height=this.height,o._center=this._center,o.zoom=this.zoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._calcMatrices(),o},nr.minZoom.get=function(){return this._minZoom},nr.minZoom.set=function(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))},nr.maxZoom.get=function(){return this._maxZoom},nr.maxZoom.set=function(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))},nr.minPitch.get=function(){return this._minPitch},nr.minPitch.set=function(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))},nr.maxPitch.get=function(){return this._maxPitch},nr.maxPitch.set=function(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))},nr.renderWorldCopies.get=function(){return this._renderWorldCopies},nr.renderWorldCopies.set=function(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o},nr.worldSize.get=function(){return this.tileSize*this.scale},nr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},nr.size.get=function(){return new c.Point(this.width,this.height)},nr.bearing.get=function(){return-this.angle/Math.PI*180},nr.bearing.set=function(o){var s=-c.wrap(o,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=c.create$2(),c.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},nr.pitch.get=function(){return this._pitch/Math.PI*180},nr.pitch.set=function(o){var s=c.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},nr.fov.get=function(){return this._fov/Math.PI*180},nr.fov.set=function(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())},nr.zoom.get=function(){return this._zoom},nr.zoom.set=function(o){var s=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())},nr.center.get=function(){return this._center},nr.center.set=function(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())},nr.padding.get=function(){return this._edgeInsets.toJSON()},nr.padding.set=function(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())},nr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},zt.prototype.isPaddingEqual=function(o){return this._edgeInsets.equals(o)},zt.prototype.interpolatePadding=function(o,s,a){this._unmodified=!1,this._edgeInsets.interpolate(o,s,a),this._constrain(),this._calcMatrices()},zt.prototype.coveringZoomLevel=function(o){var s=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,s)},zt.prototype.getVisibleUnwrappedCoordinates=function(o){var s=[new c.UnwrappedTileID(0,o)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new c.Point(0,0)),u=this.pointCoordinate(new c.Point(this.width,0)),d=this.pointCoordinate(new c.Point(this.width,this.height)),g=this.pointCoordinate(new c.Point(0,this.height)),v=Math.floor(Math.min(a.x,u.x,d.x,g.x)),b=Math.floor(Math.max(a.x,u.x,d.x,g.x)),T=v-1;T<=b+1;T++)T!==0&&s.push(new c.UnwrappedTileID(T,o));return s},zt.prototype.coveringTiles=function(o){var s=this.coveringZoomLevel(o),a=s;if(o.minzoom!==void 0&&s<o.minzoom)return[];o.maxzoom!==void 0&&s>o.maxzoom&&(s=o.maxzoom);var u=c.MercatorCoordinate.fromLngLat(this.center),d=Math.pow(2,s),g=[d*u.x,d*u.y,0],v=Hl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),b=o.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(b=s);var T=function(Ie){return{aabb:new Sa([Ie*d,0,0],[(Ie+1)*d,d,0]),zoom:0,x:0,y:0,wrap:Ie,fullyVisible:!1}},P=[],R=[],B=s,N=o.reparseOverscaled?a:s;if(this._renderWorldCopies)for(var H=1;H<=3;H++)P.push(T(-H)),P.push(T(H));for(P.push(T(0));P.length>0;){var G=P.pop(),K=G.x,V=G.y,$=G.fullyVisible;if(!$){var re=G.aabb.intersects(v);if(re===0)continue;$=re===2}var se=G.aabb.distanceX(g),de=G.aabb.distanceY(g),he=Math.max(Math.abs(se),Math.abs(de));if(G.zoom===B||he>3+(1<<B-G.zoom)-2&&G.zoom>=b)R.push({tileID:new c.OverscaledTileID(G.zoom===B?N:G.zoom,G.wrap,G.zoom,K,V),distanceSq:c.sqrLen([g[0]-.5-K,g[1]-.5-V])});else for(var ye=0;ye<4;ye++){var we=(K<<1)+ye%2,ze=(V<<1)+(ye>>1);P.push({aabb:G.aabb.quadrant(ye),zoom:G.zoom+1,x:we,y:ze,wrap:G.wrap,fullyVisible:$})}}return R.sort(function(Ie,je){return Ie.distanceSq-je.distanceSq}).map(function(Ie){return Ie.tileID})},zt.prototype.resize=function(o,s){this.width=o,this.height=s,this.pixelsToGLUnits=[2/o,-2/s],this._constrain(),this._calcMatrices()},nr.unmodified.get=function(){return this._unmodified},zt.prototype.zoomScale=function(o){return Math.pow(2,o)},zt.prototype.scaleZoom=function(o){return Math.log(o)/Math.LN2},zt.prototype.project=function(o){var s=c.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.Point(c.mercatorXfromLng(o.lng)*this.worldSize,c.mercatorYfromLat(s)*this.worldSize)},zt.prototype.unproject=function(o){return new c.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()},nr.point.get=function(){return this.project(this.center)},zt.prototype.setLocationAtPoint=function(o,s){var a=this.pointCoordinate(s),u=this.pointCoordinate(this.centerPoint),d=this.locationCoordinate(o),g=new c.MercatorCoordinate(d.x-(a.x-u.x),d.y-(a.y-u.y));this.center=this.coordinateLocation(g),this._renderWorldCopies&&(this.center=this.center.wrap())},zt.prototype.locationPoint=function(o){return this.coordinatePoint(this.locationCoordinate(o))},zt.prototype.pointLocation=function(o){return this.coordinateLocation(this.pointCoordinate(o))},zt.prototype.locationCoordinate=function(o){return c.MercatorCoordinate.fromLngLat(o)},zt.prototype.coordinateLocation=function(o){return o.toLngLat()},zt.prototype.pointCoordinate=function(o){var s=[o.x,o.y,0,1],a=[o.x,o.y,1,1];c.transformMat4(s,s,this.pixelMatrixInverse),c.transformMat4(a,a,this.pixelMatrixInverse);var u=s[3],d=a[3],g=s[1]/u,v=a[1]/d,b=s[2]/u,T=a[2]/d,P=b===T?0:(0-b)/(T-b);return new c.MercatorCoordinate(c.number(s[0]/u,a[0]/d,P)/this.worldSize,c.number(g,v,P)/this.worldSize)},zt.prototype.coordinatePoint=function(o){var s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return c.transformMat4(s,s,this.pixelMatrix),new c.Point(s[0]/s[3],s[1]/s[3])},zt.prototype.getBounds=function(){return new c.LngLatBounds().extend(this.pointLocation(new c.Point(0,0))).extend(this.pointLocation(new c.Point(this.width,0))).extend(this.pointLocation(new c.Point(this.width,this.height))).extend(this.pointLocation(new c.Point(0,this.height)))},zt.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new c.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},zt.prototype.setMaxBounds=function(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},zt.prototype.calculatePosMatrix=function(o,s){s===void 0&&(s=!1);var a=o.key,u=s?this._alignedPosMatrixCache:this._posMatrixCache;if(u[a])return u[a];var d=o.canonical,g=this.worldSize/this.zoomScale(d.z),v=d.x+Math.pow(2,d.z)*o.wrap,b=c.identity(new Float64Array(16));return c.translate(b,b,[v*g,d.y*g,0]),c.scale(b,b,[g/c.EXTENT,g/c.EXTENT,1]),c.multiply(b,s?this.alignedProjMatrix:this.projMatrix,b),u[a]=new Float32Array(b),u[a]},zt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},zt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var o,s,a,u,d=-90,g=90,v=-180,b=180,T=this.size,P=this._unmodified;if(this.latRange){var R=this.latRange;d=c.mercatorYfromLat(R[1])*this.worldSize,o=(g=c.mercatorYfromLat(R[0])*this.worldSize)-d<T.y?T.y/(g-d):0}if(this.lngRange){var B=this.lngRange;v=c.mercatorXfromLng(B[0])*this.worldSize,s=(b=c.mercatorXfromLng(B[1])*this.worldSize)-v<T.x?T.x/(b-v):0}var N=this.point,H=Math.max(s||0,o||0);if(H)return this.center=this.unproject(new c.Point(s?(b+v)/2:N.x,o?(g+d)/2:N.y)),this.zoom+=this.scaleZoom(H),this._unmodified=P,void(this._constraining=!1);if(this.latRange){var G=N.y,K=T.y/2;G-K<d&&(u=d+K),G+K>g&&(u=g-K)}if(this.lngRange){var V=N.x,$=T.x/2;V-$<v&&(a=v+$),V+$>b&&(a=b-$)}a===void 0&&u===void 0||(this.center=this.unproject(new c.Point(a!==void 0?a:N.x,u!==void 0?u:N.y))),this._unmodified=P,this._constraining=!1}},zt.prototype._calcMatrices=function(){if(this.height){var o=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var s=Math.PI/2+this._pitch,a=this._fov*(.5+o.y/this.height),u=Math.sin(a)*this.cameraToCenterDistance/Math.sin(c.clamp(Math.PI-s-a,.01,Math.PI-.01)),d=this.point,g=d.x,v=d.y,b=1.01*(Math.cos(Math.PI/2-this._pitch)*u+this.cameraToCenterDistance),T=this.height/50,P=new Float64Array(16);c.perspective(P,this._fov,this.width/this.height,T,b),P[8]=2*-o.x/this.width,P[9]=2*o.y/this.height,c.scale(P,P,[1,-1,1]),c.translate(P,P,[0,0,-this.cameraToCenterDistance]),c.rotateX(P,P,this._pitch),c.rotateZ(P,P,this.angle),c.translate(P,P,[-g,-v,0]),this.mercatorMatrix=c.scale([],P,[this.worldSize,this.worldSize,this.worldSize]),c.scale(P,P,[1,1,c.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=P,this.invProjMatrix=c.invert([],this.projMatrix);var R=this.width%2/2,B=this.height%2/2,N=Math.cos(this.angle),H=Math.sin(this.angle),G=g-Math.round(g)+N*R+H*B,K=v-Math.round(v)+N*B+H*R,V=new Float64Array(P);if(c.translate(V,V,[G>.5?G-1:G,K>.5?K-1:K,0]),this.alignedProjMatrix=V,P=c.create(),c.scale(P,P,[this.width/2,-this.height/2,1]),c.translate(P,P,[1,-1,0]),this.labelPlaneMatrix=P,P=c.create(),c.scale(P,P,[1,-1,1]),c.translate(P,P,[-1,-1,0]),c.scale(P,P,[2/this.width,2/this.height,1]),this.glCoordMatrix=P,this.pixelMatrix=c.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(P=c.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=P,this._posMatrixCache={},this._alignedPosMatrixCache={}}},zt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var o=this.pointCoordinate(new c.Point(0,0)),s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return c.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},zt.prototype.getCameraPoint=function(){var o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.Point(0,o))},zt.prototype.getCameraQueryGeometry=function(o){var s=this.getCameraPoint();if(o.length===1)return[o[0],s];for(var a=s.x,u=s.y,d=s.x,g=s.y,v=0,b=o;v<b.length;v+=1){var T=b[v];a=Math.min(a,T.x),u=Math.min(u,T.y),d=Math.max(d,T.x),g=Math.max(g,T.y)}return[new c.Point(a,u),new c.Point(d,u),new c.Point(d,g),new c.Point(a,g),new c.Point(a,u)]},Object.defineProperties(zt.prototype,nr);var ui=function(o){var s,a,u,d;this._hashName=o&&encodeURIComponent(o),c.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),a=!1,u=null,d=function(){u=null,a&&(s(),u=setTimeout(d,300),a=!1)},function(){return a=!0,u||d(),u})};ui.prototype.addTo=function(o){return this._map=o,c.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ui.prototype.remove=function(){return c.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ui.prototype.getHashString=function(o){var s=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,u=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),d=Math.pow(10,u),g=Math.round(s.lng*d)/d,v=Math.round(s.lat*d)/d,b=this._map.getBearing(),T=this._map.getPitch(),P="";if(P+=o?"/"+g+"/"+v+"/"+a:a+"/"+v+"/"+g,(b||T)&&(P+="/"+Math.round(10*b)/10),T&&(P+="/"+Math.round(T)),this._hashName){var R=this._hashName,B=!1,N=c.window.location.hash.slice(1).split("&").map(function(H){var G=H.split("=")[0];return G===R?(B=!0,G+"="+P):H}).filter(function(H){return H});return B||N.push(R+"="+P),"#"+N.join("&")}return"#"+P},ui.prototype._getCurrentHash=function(){var o,s=this,a=c.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(u){return u.split("=")}).forEach(function(u){u[0]===s._hashName&&(o=u)}),(o&&o[1]||"").split("/")):a.split("/")},ui.prototype._onHashChange=function(){var o=this._getCurrentHash();if(o.length>=3&&!o.some(function(a){return isNaN(a)})){var s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:s,pitch:+(o[4]||0)}),!0}return!1},ui.prototype._updateHashUnthrottled=function(){var o=c.window.location.href.replace(/(#.+)?$/,this.getHashString());try{c.window.history.replaceState(c.window.history.state,null,o)}catch{}};var Ys={linearity:.3,easing:c.bezier(0,0,.3,1)},ts=c.extend({deceleration:2500,maxSpeed:1400},Ys),Js=c.extend({deceleration:20,maxSpeed:1400},Ys),rm=c.extend({deceleration:1e3,maxSpeed:360},Ys),nm=c.extend({deceleration:1e3,maxSpeed:90},Ys),Qs=function(o){this._map=o,this.clear()};function el(o,s){(!o.duration||o.duration<s.duration)&&(o.duration=s.duration,o.easing=s.easing)}function mo(o,s,a){var u=a.maxSpeed,d=a.linearity,g=a.deceleration,v=c.clamp(o*d/(s/1e3),-u,u),b=Math.abs(v)/(g*d);return{easing:a.easing,duration:1e3*b,amount:v*(b/2)}}Qs.prototype.clear=function(){this._inertiaBuffer=[]},Qs.prototype.record=function(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.browser.now(),settings:o})},Qs.prototype._drainInertiaBuffer=function(){for(var o=this._inertiaBuffer,s=c.browser.now();o.length>0&&s-o[0].time>160;)o.shift()},Qs.prototype._onMoveEnd=function(o){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new c.Point(0,0),pinchAround:void 0,around:void 0},a=0,u=this._inertiaBuffer;a<u.length;a+=1){var d=u[a].settings;s.zoom+=d.zoomDelta||0,s.bearing+=d.bearingDelta||0,s.pitch+=d.pitchDelta||0,d.panDelta&&s.pan._add(d.panDelta),d.around&&(s.around=d.around),d.pinchAround&&(s.pinchAround=d.pinchAround)}var g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(s.pan.mag()){var b=mo(s.pan.mag(),g,c.extend({},ts,o||{}));v.offset=s.pan.mult(b.amount/s.pan.mag()),v.center=this._map.transform.center,el(v,b)}if(s.zoom){var T=mo(s.zoom,g,Js);v.zoom=this._map.transform.zoom+T.amount,el(v,T)}if(s.bearing){var P=mo(s.bearing,g,rm);v.bearing=this._map.transform.bearing+c.clamp(P.amount,-179,179),el(v,P)}if(s.pitch){var R=mo(s.pitch,g,nm);v.pitch=this._map.transform.pitch+R.amount,el(v,R)}if(v.zoom||v.bearing){var B=s.pinchAround===void 0?s.around:s.pinchAround;v.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),c.extend(v,{noMoveStart:!0})}};var Rr=function(o){function s(u,d,g,v){v===void 0&&(v={});var b=M.mousePos(d.getCanvasContainer(),g),T=d.unproject(b);o.call(this,u,c.extend({point:b,lngLat:T,originalEvent:g},v)),this._defaultPrevented=!1,this.target=d}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(c.Event),tl=function(o){function s(u,d,g){var v=u==="touchend"?g.changedTouches:g.touches,b=M.touchPos(d.getCanvasContainer(),v),T=b.map(function(B){return d.unproject(B)}),P=b.reduce(function(B,N,H,G){return B.add(N.div(G.length))},new c.Point(0,0)),R=d.unproject(P);o.call(this,u,{points:b,point:P,lngLats:T,lngLat:R,originalEvent:g}),this._defaultPrevented=!1}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(c.Event),kh=function(o){function s(u,d,g){o.call(this,u,{originalEvent:g}),this._defaultPrevented=!1}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={defaultPrevented:{configurable:!0}};return s.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(s.prototype,a),s}(c.Event),Mr=function(o,s){this._map=o,this._clickTolerance=s.clickTolerance};Mr.prototype.reset=function(){delete this._mousedownPos},Mr.prototype.wheel=function(o){return this._firePreventable(new kh(o.type,this._map,o))},Mr.prototype.mousedown=function(o,s){return this._mousedownPos=s,this._firePreventable(new Rr(o.type,this._map,o))},Mr.prototype.mouseup=function(o){this._map.fire(new Rr(o.type,this._map,o))},Mr.prototype.click=function(o,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Rr(o.type,this._map,o))},Mr.prototype.dblclick=function(o){return this._firePreventable(new Rr(o.type,this._map,o))},Mr.prototype.mouseover=function(o){this._map.fire(new Rr(o.type,this._map,o))},Mr.prototype.mouseout=function(o){this._map.fire(new Rr(o.type,this._map,o))},Mr.prototype.touchstart=function(o){return this._firePreventable(new tl(o.type,this._map,o))},Mr.prototype.touchmove=function(o){this._map.fire(new tl(o.type,this._map,o))},Mr.prototype.touchend=function(o){this._map.fire(new tl(o.type,this._map,o))},Mr.prototype.touchcancel=function(o){this._map.fire(new tl(o.type,this._map,o))},Mr.prototype._firePreventable=function(o){if(this._map.fire(o),o.defaultPrevented)return{}},Mr.prototype.isEnabled=function(){return!0},Mr.prototype.isActive=function(){return!1},Mr.prototype.enable=function(){},Mr.prototype.disable=function(){};var Ze=function(o){this._map=o};Ze.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ze.prototype.mousemove=function(o){this._map.fire(new Rr(o.type,this._map,o))},Ze.prototype.mousedown=function(){this._delayContextMenu=!0},Ze.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Rr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ze.prototype.contextmenu=function(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new Rr(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()},Ze.prototype.isEnabled=function(){return!0},Ze.prototype.isActive=function(){return!1},Ze.prototype.enable=function(){},Ze.prototype.disable=function(){};var Xn=function(o,s){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=s.clickTolerance||1};function Wl(o,s){for(var a={},u=0;u<o.length;u++)a[o[u].identifier]=s[u];return a}Xn.prototype.isEnabled=function(){return!!this._enabled},Xn.prototype.isActive=function(){return!!this._active},Xn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Xn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Xn.prototype.mousedown=function(o,s){this.isEnabled()&&o.shiftKey&&o.button===0&&(M.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)},Xn.prototype.mousemoveWindow=function(o,s){if(this._active){var a=s;if(!(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)){var u=this._startPos;this._lastPos=a,this._box||(this._box=M.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));var d=Math.min(u.x,a.x),g=Math.max(u.x,a.x),v=Math.min(u.y,a.y),b=Math.max(u.y,a.y);M.setTransform(this._box,"translate("+d+"px,"+v+"px)"),this._box.style.width=g-d+"px",this._box.style.height=b-v+"px"}}},Xn.prototype.mouseupWindow=function(o,s){var a=this;if(this._active&&o.button===0){var u=this._startPos,d=s;if(this.reset(),M.suppressClick(),u.x!==d.x||u.y!==d.y)return this._map.fire(new c.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:function(g){return g.fitScreenCoordinates(u,d,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",o)}},Xn.prototype.keydown=function(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))},Xn.prototype.blur=function(){this.reset()},Xn.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(M.remove(this._box),this._box=null),M.enableDrag(),delete this._startPos,delete this._lastPos},Xn.prototype._fireEvent=function(o,s){return this._map.fire(new c.Event(o,{originalEvent:s}))};var rs=function(o){this.reset(),this.numTouches=o.numTouches};rs.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},rs.prototype.touchstart=function(o,s,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),a.length===this.numTouches&&(this.centroid=function(u){for(var d=new c.Point(0,0),g=0,v=u;g<v.length;g+=1)d._add(v[g]);return d.div(u.length)}(s),this.touches=Wl(a,s)))},rs.prototype.touchmove=function(o,s,a){if(!this.aborted&&this.centroid){var u=Wl(a,s);for(var d in this.touches){var g=u[d];(!g||g.dist(this.touches[d])>30)&&(this.aborted=!0)}}},rs.prototype.touchend=function(o,s,a){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),a.length===0){var u=!this.aborted&&this.centroid;if(this.reset(),u)return u}};var Ui=function(o){this.singleTap=new rs(o),this.numTaps=o.numTaps,this.reset()};Ui.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ui.prototype.touchstart=function(o,s,a){this.singleTap.touchstart(o,s,a)},Ui.prototype.touchmove=function(o,s,a){this.singleTap.touchmove(o,s,a)},Ui.prototype.touchend=function(o,s,a){var u=this.singleTap.touchend(o,s,a);if(u){var d=o.timeStamp-this.lastTime<500,g=!this.lastTap||this.lastTap.dist(u)<30;if(d&&g||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=u,this.count===this.numTaps)return this.reset(),u}};var $n=function(){this._zoomIn=new Ui({numTouches:1,numTaps:2}),this._zoomOut=new Ui({numTouches:2,numTaps:1}),this.reset()};$n.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},$n.prototype.touchstart=function(o,s,a){this._zoomIn.touchstart(o,s,a),this._zoomOut.touchstart(o,s,a)},$n.prototype.touchmove=function(o,s,a){this._zoomIn.touchmove(o,s,a),this._zoomOut.touchmove(o,s,a)},$n.prototype.touchend=function(o,s,a){var u=this,d=this._zoomIn.touchend(o,s,a),g=this._zoomOut.touchend(o,s,a);return d?(this._active=!0,o.preventDefault(),setTimeout(function(){return u.reset()},0),{cameraAnimation:function(v){return v.easeTo({duration:300,zoom:v.getZoom()+1,around:v.unproject(d)},{originalEvent:o})}}):g?(this._active=!0,o.preventDefault(),setTimeout(function(){return u.reset()},0),{cameraAnimation:function(v){return v.easeTo({duration:300,zoom:v.getZoom()-1,around:v.unproject(g)},{originalEvent:o})}}):void 0},$n.prototype.touchcancel=function(){this.reset()},$n.prototype.enable=function(){this._enabled=!0},$n.prototype.disable=function(){this._enabled=!1,this.reset()},$n.prototype.isEnabled=function(){return this._enabled},$n.prototype.isActive=function(){return this._active};var _c={0:1,2:2},De=function(o){this.reset(),this._clickTolerance=o.clickTolerance||1};De.prototype.blur=function(){this.reset()},De.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},De.prototype._correctButton=function(o,s){return!1},De.prototype._move=function(o,s){return{}},De.prototype.mousedown=function(o,s){if(!this._lastPoint){var a=M.mouseButton(o);this._correctButton(o,a)&&(this._lastPoint=s,this._eventButton=a)}},De.prototype.mousemoveWindow=function(o,s){var a=this._lastPoint;if(a){if(o.preventDefault(),function(u,d){var g=_c[d];return u.buttons===void 0||(u.buttons&g)!==g}(o,this._eventButton))this.reset();else if(this._moved||!(s.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(a,s)}},De.prototype.mouseupWindow=function(o){this._lastPoint&&M.mouseButton(o)===this._eventButton&&(this._moved&&M.suppressClick(),this.reset())},De.prototype.enable=function(){this._enabled=!0},De.prototype.disable=function(){this._enabled=!1,this.reset()},De.prototype.isEnabled=function(){return this._enabled},De.prototype.isActive=function(){return this._active};var xc=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.mousedown=function(a,u){o.prototype.mousedown.call(this,a,u),this._lastPoint&&(this._active=!0)},s.prototype._correctButton=function(a,u){return u===0&&!a.ctrlKey},s.prototype._move=function(a,u){return{around:u,panDelta:u.sub(a)}},s}(De),Xl=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype._correctButton=function(a,u){return u===0&&a.ctrlKey||u===2},s.prototype._move=function(a,u){var d=.8*(u.x-a.x);if(d)return this._active=!0,{bearingDelta:d}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(De),wc=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype._correctButton=function(a,u){return u===0&&a.ctrlKey||u===2},s.prototype._move=function(a,u){var d=-.5*(u.y-a.y);if(d)return this._active=!0,{pitchDelta:d}},s.prototype.contextmenu=function(a){a.preventDefault()},s}(De),Ei=function(o){this._minTouches=1,this._clickTolerance=o.clickTolerance||1,this.reset()};Ei.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new c.Point(0,0)},Ei.prototype.touchstart=function(o,s,a){return this._calculateTransform(o,s,a)},Ei.prototype.touchmove=function(o,s,a){if(this._active&&!(a.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,s,a)},Ei.prototype.touchend=function(o,s,a){this._calculateTransform(o,s,a),this._active&&a.length<this._minTouches&&this.reset()},Ei.prototype.touchcancel=function(){this.reset()},Ei.prototype._calculateTransform=function(o,s,a){a.length>0&&(this._active=!0);var u=Wl(a,s),d=new c.Point(0,0),g=new c.Point(0,0),v=0;for(var b in u){var T=u[b],P=this._touches[b];P&&(d._add(T),g._add(T.sub(P)),v++,u[b]=T)}if(this._touches=u,!(v<this._minTouches)&&g.mag()){var R=g.div(v);if(this._sum._add(R),!(this._sum.mag()<this._clickTolerance))return{around:d.div(v),panDelta:R}}},Ei.prototype.enable=function(){this._enabled=!0},Ei.prototype.disable=function(){this._enabled=!1,this.reset()},Ei.prototype.isEnabled=function(){return this._enabled},Ei.prototype.isActive=function(){return this._active};var Kn=function(){this.reset()};function $l(o,s,a){for(var u=0;u<o.length;u++)if(o[u].identifier===a)return s[u]}function Kl(o,s){return Math.log(o/s)/Math.LN2}Kn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Kn.prototype._start=function(o){},Kn.prototype._move=function(o,s,a){return{}},Kn.prototype.touchstart=function(o,s,a){this._firstTwoTouches||a.length<2||(this._firstTwoTouches=[a[0].identifier,a[1].identifier],this._start([s[0],s[1]]))},Kn.prototype.touchmove=function(o,s,a){if(this._firstTwoTouches){o.preventDefault();var u=this._firstTwoTouches,d=u[1],g=$l(a,s,u[0]),v=$l(a,s,d);if(g&&v){var b=this._aroundCenter?null:g.add(v).div(2);return this._move([g,v],b,o)}}},Kn.prototype.touchend=function(o,s,a){if(this._firstTwoTouches){var u=this._firstTwoTouches,d=u[1],g=$l(a,s,u[0]),v=$l(a,s,d);g&&v||(this._active&&M.suppressClick(),this.reset())}},Kn.prototype.touchcancel=function(){this.reset()},Kn.prototype.enable=function(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"},Kn.prototype.disable=function(){this._enabled=!1,this.reset()},Kn.prototype.isEnabled=function(){return this._enabled},Kn.prototype.isActive=function(){return this._active};var Yn=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),delete this._distance,delete this._startDistance},s.prototype._start=function(a){this._startDistance=this._distance=a[0].dist(a[1])},s.prototype._move=function(a,u){var d=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Kl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Kl(this._distance,d),pinchAround:u}},s}(Kn);function yo(o,s){return 180*o.angleWith(s)/Math.PI}var Ph=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},s.prototype._start=function(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])},s.prototype._move=function(a,u){var d=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:yo(this._vector,d),pinchAround:u}},s.prototype._isBelowThreshold=function(a){this._minDiameter=Math.min(this._minDiameter,a.mag());var u=25/(Math.PI*this._minDiameter)*360,d=yo(a,this._startVector);return Math.abs(d)<u},s}(Kn);function rl(o){return Math.abs(o.y)>Math.abs(o.x)}var bc=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.reset=function(){o.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},s.prototype._start=function(a){this._lastPoints=a,rl(a[0].sub(a[1]))&&(this._valid=!1)},s.prototype._move=function(a,u,d){var g=a[0].sub(this._lastPoints[0]),v=a[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(g,v,d.timeStamp),this._valid)return this._lastPoints=a,this._active=!0,{pitchDelta:(g.y+v.y)/2*-.5}},s.prototype.gestureBeginsVertically=function(a,u,d){if(this._valid!==void 0)return this._valid;var g=a.mag()>=2,v=u.mag()>=2;if(g||v){if(!g||!v)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;var b=a.y>0==u.y>0;return rl(a)&&rl(u)&&b}},s}(Kn),Sc={panStep:100,bearingStep:15,pitchStep:10},Vi=function(){var o=Sc;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1};function ci(o){return o*(2-o)}Vi.prototype.blur=function(){this.reset()},Vi.prototype.reset=function(){this._active=!1},Vi.prototype.keydown=function(o){var s=this;if(!(o.altKey||o.ctrlKey||o.metaKey)){var a=0,u=0,d=0,g=0,v=0;switch(o.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:o.shiftKey?u=-1:(o.preventDefault(),g=-1);break;case 39:o.shiftKey?u=1:(o.preventDefault(),g=1);break;case 38:o.shiftKey?d=1:(o.preventDefault(),v=-1);break;case 40:o.shiftKey?d=-1:(o.preventDefault(),v=1);break;default:return}return this._rotationDisabled&&(u=0,d=0),{cameraAnimation:function(b){var T=b.getZoom();b.easeTo({duration:300,easeId:"keyboardHandler",easing:ci,zoom:a?Math.round(T)+a*(o.shiftKey?2:1):T,bearing:b.getBearing()+u*s._bearingStep,pitch:b.getPitch()+d*s._pitchStep,offset:[-g*s._panStep,-v*s._panStep],center:b.getCenter()},{originalEvent:o})}}}},Vi.prototype.enable=function(){this._enabled=!0},Vi.prototype.disable=function(){this._enabled=!1,this.reset()},Vi.prototype.isEnabled=function(){return this._enabled},Vi.prototype.isActive=function(){return this._active},Vi.prototype.disableRotation=function(){this._rotationDisabled=!0},Vi.prototype.enableRotation=function(){this._rotationDisabled=!1};var Tt=function(o,s){this._map=o,this._el=o.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,c.bindAll(["_onTimeout"],this)};Tt.prototype.setZoomRate=function(o){this._defaultZoomRate=o},Tt.prototype.setWheelZoomRate=function(o){this._wheelZoomRate=o},Tt.prototype.isEnabled=function(){return!!this._enabled},Tt.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Tt.prototype.isZooming=function(){return!!this._zooming},Tt.prototype.enable=function(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=o&&o.around==="center")},Tt.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Tt.prototype.wheel=function(o){if(this.isEnabled()){var s=o.deltaMode===c.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY,a=c.browser.now(),u=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,s!==0&&s%4.000244140625==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":u>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(u*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),o.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=o,this._delta-=s,this._active||this._start(o)),o.preventDefault()}},Tt.prototype._onTimeout=function(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)},Tt.prototype._start=function(o){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=M.mousePos(this._el,o);this._around=c.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Tt.prototype.renderFrame=function(){var o=this;if(this._frameId&&(this._frameId=null,this.isActive())){var s=this._map.transform;if(this._delta!==0){var a=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,u=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&u!==0&&(u=1/u);var d=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(d*u))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var g,v=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,b=this._startZoom,T=this._easing,P=!1;if(this._type==="wheel"&&b&&T){var R=Math.min((c.browser.now()-this._lastWheelEventTime)/200,1),B=T(R);g=c.number(b,v,B),R<1?this._frameId||(this._frameId=!0):P=!0}else g=v,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(function(){o._zooming=!1,o._handler._triggerRenderFrame(),delete o._targetZoom,delete o._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:g-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Tt.prototype._smoothOutEasing=function(o){var s=c.ease;if(this._prevEase){var a=this._prevEase,u=(c.browser.now()-a.start)/a.duration,d=a.easing(u+.01)-a.easing(u),g=.27/Math.sqrt(d*d+1e-4)*.01,v=Math.sqrt(.0729-g*g);s=c.bezier(g,v,.25,1)}return this._prevEase={start:c.browser.now(),duration:o,easing:s},s},Tt.prototype.blur=function(){this.reset()},Tt.prototype.reset=function(){this._active=!1};var Qi=function(o,s){this._clickZoom=o,this._tapZoom=s};Qi.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Qi.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Qi.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Qi.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ti=function(){this.reset()};Ti.prototype.reset=function(){this._active=!1},Ti.prototype.blur=function(){this.reset()},Ti.prototype.dblclick=function(o,s){return o.preventDefault(),{cameraAnimation:function(a){a.easeTo({duration:300,zoom:a.getZoom()+(o.shiftKey?-1:1),around:a.unproject(s)},{originalEvent:o})}}},Ti.prototype.enable=function(){this._enabled=!0},Ti.prototype.disable=function(){this._enabled=!1,this.reset()},Ti.prototype.isEnabled=function(){return this._enabled},Ti.prototype.isActive=function(){return this._active};var ln=function(){this._tap=new Ui({numTouches:1,numTaps:1}),this.reset()};ln.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ln.prototype.touchstart=function(o,s,a){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?a.length>0&&(this._swipePoint=s[0],this._swipeTouch=a[0].identifier):this._tap.touchstart(o,s,a))},ln.prototype.touchmove=function(o,s,a){if(this._tapTime){if(this._swipePoint){if(a[0].identifier!==this._swipeTouch)return;var u=s[0],d=u.y-this._swipePoint.y;return this._swipePoint=u,o.preventDefault(),this._active=!0,{zoomDelta:d/128}}}else this._tap.touchmove(o,s,a)},ln.prototype.touchend=function(o,s,a){this._tapTime?this._swipePoint&&a.length===0&&this.reset():this._tap.touchend(o,s,a)&&(this._tapTime=o.timeStamp)},ln.prototype.touchcancel=function(){this.reset()},ln.prototype.enable=function(){this._enabled=!0},ln.prototype.disable=function(){this._enabled=!1,this.reset()},ln.prototype.isEnabled=function(){return this._enabled},ln.prototype.isActive=function(){return this._active};var Ea=function(o,s,a){this._el=o,this._mousePan=s,this._touchPan=a};Ea.prototype.enable=function(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ea.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ea.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ea.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Vo=function(o,s,a){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=s,this._mousePitch=a};Vo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Vo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Vo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Vo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ji=function(o,s,a,u){this._el=o,this._touchZoom=s,this._touchRotate=a,this._tapDragZoom=u,this._rotationDisabled=!1,this._enabled=!0};ji.prototype.enable=function(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ji.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ji.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ji.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ji.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ji.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Sn=function(o){return o.zoom||o.drag||o.pitch||o.rotate},nl=function(o){function s(){o.apply(this,arguments)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s}(c.Event);function Qe(o){return o.panDelta&&o.panDelta.mag()||o.zoomDelta||o.bearingDelta||o.pitchDelta}var Xe=function(o,s){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Qs(o),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),c.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[c.window.document,"mousemove",{capture:!0}],[c.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[c.window,"blur",void 0]];for(var u=0,d=this._listeners;u<d.length;u+=1){var g=d[u],v=g[0];M.addEventListener(v,g[1],v===c.window.document?this.handleWindowEvent:this.handleEvent,g[2])}};Xe.prototype.destroy=function(){for(var o=0,s=this._listeners;o<s.length;o+=1){var a=s[o],u=a[0];M.removeEventListener(u,a[1],u===c.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},Xe.prototype._addDefaultHandlers=function(o){var s=this._map,a=s.getCanvasContainer();this._add("mapEvent",new Mr(s,o));var u=s.boxZoom=new Xn(s,o);this._add("boxZoom",u);var d=new $n,g=new Ti;s.doubleClickZoom=new Qi(g,d),this._add("tapZoom",d),this._add("clickZoom",g);var v=new ln;this._add("tapDragZoom",v);var b=s.touchPitch=new bc;this._add("touchPitch",b);var T=new Xl(o),P=new wc(o);s.dragRotate=new Vo(o,T,P),this._add("mouseRotate",T,["mousePitch"]),this._add("mousePitch",P,["mouseRotate"]);var R=new xc(o),B=new Ei(o);s.dragPan=new Ea(a,R,B),this._add("mousePan",R),this._add("touchPan",B,["touchZoom","touchRotate"]);var N=new Ph,H=new Yn;s.touchZoomRotate=new ji(a,H,N,v),this._add("touchRotate",N,["touchPan","touchZoom"]),this._add("touchZoom",H,["touchPan","touchRotate"]);var G=s.scrollZoom=new Tt(s,this);this._add("scrollZoom",G,["mousePan"]);var K=s.keyboard=new Vi;this._add("keyboard",K),this._add("blockableMapEvent",new Ze(s));for(var V=0,$=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];V<$.length;V+=1){var re=$[V];o.interactive&&o[re]&&s[re].enable(o[re])}},Xe.prototype._add=function(o,s,a){this._handlers.push({handlerName:o,handler:s,allowed:a}),this._handlersById[o]=s},Xe.prototype.stop=function(o){if(!this._updatingCamera){for(var s=0,a=this._handlers;s<a.length;s+=1)a[s].handler.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}},Xe.prototype.isActive=function(){for(var o=0,s=this._handlers;o<s.length;o+=1)if(s[o].handler.isActive())return!0;return!1},Xe.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Xe.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Xe.prototype.isMoving=function(){return!!Sn(this._eventsInProgress)||this.isZooming()},Xe.prototype._blockedByActive=function(o,s,a){for(var u in o)if(u!==a&&(!s||s.indexOf(u)<0))return!0;return!1},Xe.prototype.handleWindowEvent=function(o){this.handleEvent(o,o.type+"Window")},Xe.prototype._getMapTouches=function(o){for(var s=[],a=0,u=o;a<u.length;a+=1){var d=u[a];this._el.contains(d.target)&&s.push(d)}return s},Xe.prototype.handleEvent=function(o,s){this._updatingCamera=!0;for(var a=o.type==="renderFrame"?void 0:o,u={needsRenderFrame:!1},d={},g={},v=o.touches?this._getMapTouches(o.touches):void 0,b=v?M.touchPos(this._el,v):M.mousePos(this._el,o),T=0,P=this._handlers;T<P.length;T+=1){var R=P[T],B=R.handlerName,N=R.handler,H=R.allowed;if(N.isEnabled()){var G=void 0;this._blockedByActive(g,H,B)?N.reset():N[s||o.type]&&(G=N[s||o.type](o,b,v),this.mergeHandlerResult(u,d,G,B,a),G&&G.needsRenderFrame&&this._triggerRenderFrame()),(G||N.isActive())&&(g[B]=N)}}var K={};for(var V in this._previousActiveHandlers)g[V]||(K[V]=a);this._previousActiveHandlers=g,(Object.keys(K).length||Qe(u))&&(this._changes.push([u,d,K]),this._triggerRenderFrame()),(Object.keys(g).length||Qe(u))&&this._map._stop(!0),this._updatingCamera=!1;var $=u.cameraAnimation;$&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],$(this._map))},Xe.prototype.mergeHandlerResult=function(o,s,a,u,d){if(a){c.extend(o,a);var g={handlerName:u,originalEvent:a.originalEvent||d};a.zoomDelta!==void 0&&(s.zoom=g),a.panDelta!==void 0&&(s.drag=g),a.pitchDelta!==void 0&&(s.pitch=g),a.bearingDelta!==void 0&&(s.rotate=g)}},Xe.prototype._applyChanges=function(){for(var o={},s={},a={},u=0,d=this._changes;u<d.length;u+=1){var g=d[u],v=g[0],b=g[1],T=g[2];v.panDelta&&(o.panDelta=(o.panDelta||new c.Point(0,0))._add(v.panDelta)),v.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(o.around=v.around),v.pinchAround!==void 0&&(o.pinchAround=v.pinchAround),v.noInertia&&(o.noInertia=v.noInertia),c.extend(s,b),c.extend(a,T)}this._updateMapTransform(o,s,a),this._changes=[]},Xe.prototype._updateMapTransform=function(o,s,a){var u=this._map,d=u.transform;if(!Qe(o))return this._fireEvents(s,a,!0);var g=o.panDelta,v=o.zoomDelta,b=o.bearingDelta,T=o.pitchDelta,P=o.around,R=o.pinchAround;R!==void 0&&(P=R),u._stop(!0),P=P||u.transform.centerPoint;var B=d.pointLocation(g?P.sub(g):P);b&&(d.bearing+=b),T&&(d.pitch+=T),v&&(d.zoom+=v),d.setLocationAtPoint(B,P),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(s,a,!0)},Xe.prototype._fireEvents=function(o,s,a){var u=this,d=Sn(this._eventsInProgress),g=Sn(o),v={};for(var b in o)this._eventsInProgress[b]||(v[b+"start"]=o[b].originalEvent),this._eventsInProgress[b]=o[b];for(var T in!d&&g&&this._fireEvent("movestart",g.originalEvent),v)this._fireEvent(T,v[T]);for(var P in g&&this._fireEvent("move",g.originalEvent),o)this._fireEvent(P,o[P].originalEvent);var R,B={};for(var N in this._eventsInProgress){var H=this._eventsInProgress[N],G=H.handlerName,K=H.originalEvent;this._handlersById[G].isActive()||(delete this._eventsInProgress[N],B[N+"end"]=R=s[G]||K)}for(var V in B)this._fireEvent(V,B[V]);var $=Sn(this._eventsInProgress);if(a&&(d||g)&&!$){this._updatingCamera=!0;var re=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),se=function(de){return de!==0&&-u._bearingSnap<de&&de<u._bearingSnap};re?(se(re.bearing||this._map.getBearing())&&(re.bearing=0),this._map.easeTo(re,{originalEvent:R})):(this._map.fire(new c.Event("moveend",{originalEvent:R})),se(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Xe.prototype._fireEvent=function(o,s){this._map.fire(new c.Event(o,s?{originalEvent:s}:{}))},Xe.prototype._requestFrame=function(){var o=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(s){delete o._frameId,o.handleEvent(new nl("renderFrame",{timeStamp:s})),o._applyChanges()})},Xe.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Yl=function(o){function s(a,u){o.call(this),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=u.bearingSnap,c.bindAll(["_renderFrameCallback"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.getCenter=function(){return new c.LngLat(this.transform.center.lng,this.transform.center.lat)},s.prototype.setCenter=function(a,u){return this.jumpTo({center:a},u)},s.prototype.panBy=function(a,u,d){return a=c.Point.convert(a).mult(-1),this.panTo(this.transform.center,c.extend({offset:a},u),d)},s.prototype.panTo=function(a,u,d){return this.easeTo(c.extend({center:a},u),d)},s.prototype.getZoom=function(){return this.transform.zoom},s.prototype.setZoom=function(a,u){return this.jumpTo({zoom:a},u),this},s.prototype.zoomTo=function(a,u,d){return this.easeTo(c.extend({zoom:a},u),d)},s.prototype.zoomIn=function(a,u){return this.zoomTo(this.getZoom()+1,a,u),this},s.prototype.zoomOut=function(a,u){return this.zoomTo(this.getZoom()-1,a,u),this},s.prototype.getBearing=function(){return this.transform.bearing},s.prototype.setBearing=function(a,u){return this.jumpTo({bearing:a},u),this},s.prototype.getPadding=function(){return this.transform.padding},s.prototype.setPadding=function(a,u){return this.jumpTo({padding:a},u),this},s.prototype.rotateTo=function(a,u,d){return this.easeTo(c.extend({bearing:a},u),d)},s.prototype.resetNorth=function(a,u){return this.rotateTo(0,c.extend({duration:1e3},a),u),this},s.prototype.resetNorthPitch=function(a,u){return this.easeTo(c.extend({bearing:0,pitch:0,duration:1e3},a),u),this},s.prototype.snapToNorth=function(a,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,u):this},s.prototype.getPitch=function(){return this.transform.pitch},s.prototype.setPitch=function(a,u){return this.jumpTo({pitch:a},u),this},s.prototype.cameraForBounds=function(a,u){a=c.LngLatBounds.convert(a);var d=u&&u.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),d,u)},s.prototype._cameraForBoxAndBearing=function(a,u,d,g){var v={top:0,bottom:0,right:0,left:0};if(typeof(g=c.extend({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){var b=g.padding;g.padding={top:b,bottom:b,right:b,left:b}}g.padding=c.extend(v,g.padding);var T=this.transform,P=T.padding,R=T.project(c.LngLat.convert(a)),B=T.project(c.LngLat.convert(u)),N=R.rotate(-d*Math.PI/180),H=B.rotate(-d*Math.PI/180),G=new c.Point(Math.max(N.x,H.x),Math.max(N.y,H.y)),K=new c.Point(Math.min(N.x,H.x),Math.min(N.y,H.y)),V=G.sub(K),$=(T.width-(P.left+P.right+g.padding.left+g.padding.right))/V.x,re=(T.height-(P.top+P.bottom+g.padding.top+g.padding.bottom))/V.y;if(!(re<0||$<0)){var se=Math.min(T.scaleZoom(T.scale*Math.min($,re)),g.maxZoom),de=typeof g.offset.x=="number"?new c.Point(g.offset.x,g.offset.y):c.Point.convert(g.offset),he=new c.Point((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(d*Math.PI/180),ye=de.add(he).mult(T.scale/T.zoomScale(se));return{center:T.unproject(R.add(B).div(2).sub(ye)),zoom:se,bearing:d}}c.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},s.prototype.fitBounds=function(a,u,d){return this._fitInternal(this.cameraForBounds(a,u),u,d)},s.prototype.fitScreenCoordinates=function(a,u,d,g,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.Point.convert(a)),this.transform.pointLocation(c.Point.convert(u)),d,g),g,v)},s.prototype._fitInternal=function(a,u,d){return a?(delete(u=c.extend(a,u)).padding,u.linear?this.easeTo(u,d):this.flyTo(u,d)):this},s.prototype.jumpTo=function(a,u){this.stop();var d=this.transform,g=!1,v=!1,b=!1;return"zoom"in a&&d.zoom!==+a.zoom&&(g=!0,d.zoom=+a.zoom),a.center!==void 0&&(d.center=c.LngLat.convert(a.center)),"bearing"in a&&d.bearing!==+a.bearing&&(v=!0,d.bearing=+a.bearing),"pitch"in a&&d.pitch!==+a.pitch&&(b=!0,d.pitch=+a.pitch),a.padding==null||d.isPaddingEqual(a.padding)||(d.padding=a.padding),this.fire(new c.Event("movestart",u)).fire(new c.Event("move",u)),g&&this.fire(new c.Event("zoomstart",u)).fire(new c.Event("zoom",u)).fire(new c.Event("zoomend",u)),v&&this.fire(new c.Event("rotatestart",u)).fire(new c.Event("rotate",u)).fire(new c.Event("rotateend",u)),b&&this.fire(new c.Event("pitchstart",u)).fire(new c.Event("pitch",u)).fire(new c.Event("pitchend",u)),this.fire(new c.Event("moveend",u))},s.prototype.easeTo=function(a,u){var d=this;this._stop(!1,a.easeId),((a=c.extend({offset:[0,0],duration:500,easing:c.ease},a)).animate===!1||!a.essential&&c.browser.prefersReducedMotion)&&(a.duration=0);var g=this.transform,v=this.getZoom(),b=this.getBearing(),T=this.getPitch(),P=this.getPadding(),R="zoom"in a?+a.zoom:v,B="bearing"in a?this._normalizeBearing(a.bearing,b):b,N="pitch"in a?+a.pitch:T,H="padding"in a?a.padding:g.padding,G=c.Point.convert(a.offset),K=g.centerPoint.add(G),V=g.pointLocation(K),$=c.LngLat.convert(a.center||V);this._normalizeCenter($);var re,se,de=g.project(V),he=g.project($).sub(de),ye=g.zoomScale(R-v);a.around&&(re=c.LngLat.convert(a.around),se=g.locationPoint(re));var we={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||R!==v,this._rotating=this._rotating||b!==B,this._pitching=this._pitching||N!==T,this._padding=!g.isPaddingEqual(H),this._easeId=a.easeId,this._prepareEase(u,a.noMoveStart,we),this._ease(function(ze){if(d._zooming&&(g.zoom=c.number(v,R,ze)),d._rotating&&(g.bearing=c.number(b,B,ze)),d._pitching&&(g.pitch=c.number(T,N,ze)),d._padding&&(g.interpolatePadding(P,H,ze),K=g.centerPoint.add(G)),re)g.setLocationAtPoint(re,se);else{var Ie=g.zoomScale(g.zoom-v),je=R>v?Math.min(2,ye):Math.max(.5,ye),et=Math.pow(je,1-ze),ot=g.unproject(de.add(he.mult(ze*et)).mult(Ie));g.setLocationAtPoint(g.renderWorldCopies?ot.wrap():ot,K)}d._fireMoveEvents(u)},function(ze){d._afterEase(u,ze)},a),this},s.prototype._prepareEase=function(a,u,d){d===void 0&&(d={}),this._moving=!0,u||d.moving||this.fire(new c.Event("movestart",a)),this._zooming&&!d.zooming&&this.fire(new c.Event("zoomstart",a)),this._rotating&&!d.rotating&&this.fire(new c.Event("rotatestart",a)),this._pitching&&!d.pitching&&this.fire(new c.Event("pitchstart",a))},s.prototype._fireMoveEvents=function(a){this.fire(new c.Event("move",a)),this._zooming&&this.fire(new c.Event("zoom",a)),this._rotating&&this.fire(new c.Event("rotate",a)),this._pitching&&this.fire(new c.Event("pitch",a))},s.prototype._afterEase=function(a,u){if(!this._easeId||!u||this._easeId!==u){delete this._easeId;var d=this._zooming,g=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new c.Event("zoomend",a)),g&&this.fire(new c.Event("rotateend",a)),v&&this.fire(new c.Event("pitchend",a)),this.fire(new c.Event("moveend",a))}},s.prototype.flyTo=function(a,u){var d=this;if(!a.essential&&c.browser.prefersReducedMotion){var g=c.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(g,u)}this.stop(),a=c.extend({offset:[0,0],speed:1.2,curve:1.42,easing:c.ease},a);var v=this.transform,b=this.getZoom(),T=this.getBearing(),P=this.getPitch(),R=this.getPadding(),B="zoom"in a?c.clamp(+a.zoom,v.minZoom,v.maxZoom):b,N="bearing"in a?this._normalizeBearing(a.bearing,T):T,H="pitch"in a?+a.pitch:P,G="padding"in a?a.padding:v.padding,K=v.zoomScale(B-b),V=c.Point.convert(a.offset),$=v.centerPoint.add(V),re=v.pointLocation($),se=c.LngLat.convert(a.center||re);this._normalizeCenter(se);var de=v.project(re),he=v.project(se).sub(de),ye=a.curve,we=Math.max(v.width,v.height),ze=we/K,Ie=he.mag();if("minZoom"in a){var je=c.clamp(Math.min(a.minZoom,b,B),v.minZoom,v.maxZoom),et=we/v.zoomScale(je-b);ye=Math.sqrt(et/Ie*2)}var ot=ye*ye;function it(ct){var lt=(ze*ze-we*we+(ct?-1:1)*ot*ot*Ie*Ie)/(2*(ct?ze:we)*ot*Ie);return Math.log(Math.sqrt(lt*lt+1)-lt)}function Dt(ct){return(Math.exp(ct)-Math.exp(-ct))/2}function qe(ct){return(Math.exp(ct)+Math.exp(-ct))/2}var dt=it(0),_t=function(ct){return qe(dt)/qe(dt+ye*ct)},ht=function(ct){return we*((qe(dt)*(Dt(lt=dt+ye*ct)/qe(lt))-Dt(dt))/ot)/Ie;var lt},pt=(it(1)-dt)/ye;if(Math.abs(Ie)<1e-6||!isFinite(pt)){if(Math.abs(we-ze)<1e-6)return this.easeTo(a,u);var vt=ze<we?-1:1;pt=Math.abs(Math.log(ze/we))/ye,ht=function(){return 0},_t=function(ct){return Math.exp(vt*ye*ct)}}return a.duration="duration"in a?+a.duration:1e3*pt/("screenSpeed"in a?+a.screenSpeed/ye:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=T!==N,this._pitching=H!==P,this._padding=!v.isPaddingEqual(G),this._prepareEase(u,!1),this._ease(function(ct){var lt=ct*pt,jr=1/_t(lt);v.zoom=ct===1?B:b+v.scaleZoom(jr),d._rotating&&(v.bearing=c.number(T,N,ct)),d._pitching&&(v.pitch=c.number(P,H,ct)),d._padding&&(v.interpolatePadding(R,G,ct),$=v.centerPoint.add(V));var vr=ct===1?se:v.unproject(de.add(he.mult(ht(lt))).mult(jr));v.setLocationAtPoint(v.renderWorldCopies?vr.wrap():vr,$),d._fireMoveEvents(u)},function(){return d._afterEase(u)},a),this},s.prototype.isEasing=function(){return!!this._easeFrameId},s.prototype.stop=function(){return this._stop()},s.prototype._stop=function(a,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,u)}if(!a){var g=this.handlers;g&&g.stop(!1)}return this},s.prototype._ease=function(a,u,d){d.animate===!1||d.duration===0?(a(1),u()):(this._easeStart=c.browser.now(),this._easeOptions=d,this._onEaseFrame=a,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},s.prototype._renderFrameCallback=function(){var a=Math.min((c.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},s.prototype._normalizeBearing=function(a,u){a=c.wrap(a,-180,180);var d=Math.abs(a-u);return Math.abs(a-360-u)<d&&(a-=360),Math.abs(a+360-u)<d&&(a+=360),a},s.prototype._normalizeCenter=function(a){var u=this.transform;if(u.renderWorldCopies&&!u.lngRange){var d=a.lng-u.center.lng;a.lng+=d>180?-360:d<-180?360:0}},s}(c.Evented),En=function(o){o===void 0&&(o={}),this.options=o,c.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};En.prototype.getDefaultPosition=function(){return"bottom-right"},En.prototype.onAdd=function(o){var s=this.options&&this.options.compact;return this._map=o,this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=M.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=M.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),s&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),s===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},En.prototype.onRemove=function(){M.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},En.prototype._setElementTitle=function(o,s){var a=this._map._getUIString("AttributionControl."+s);o.title=a,o.setAttribute("aria-label",a)},En.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},En.prototype._updateEditLink=function(){var o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||c.config.ACCESS_TOKEN}];if(o){var a=s.reduce(function(u,d,g){return d.value&&(u+=d.key+"="+d.value+(g<s.length-1?"&":"")),u},"?");o.href=c.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),o.rel="noopener nofollow",this._setElementTitle(o,"MapFeedback")}},En.prototype._updateData=function(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},En.prototype._updateAttributions=function(){if(this._map.style){var o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(function(b){return typeof b!="string"?"":b})):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){var s=this._map.style.stylesheet;this.styleOwner=s.owner,this.styleId=s.id}var a=this._map.style.sourceCaches;for(var u in a){var d=a[u];if(d.used){var g=d.getSource();g.attribution&&o.indexOf(g.attribution)<0&&o.push(g.attribution)}}o.sort(function(b,T){return b.length-T.length});var v=(o=o.filter(function(b,T){for(var P=T+1;P<o.length;P++)if(o[P].indexOf(b)>=0)return!1;return!0})).join(" | ");v!==this._attribHTML&&(this._attribHTML=v,o.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},En.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var qi=function(){c.bindAll(["_updateLogo"],this),c.bindAll(["_updateCompact"],this)};qi.prototype.onAdd=function(o){this._map=o,this._container=M.create("div","mapboxgl-ctrl");var s=M.create("a","mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://www.mapbox.com/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},qi.prototype.onRemove=function(){M.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},qi.prototype.getDefaultPosition=function(){return"bottom-left"},qi.prototype._updateLogo=function(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},qi.prototype._logoRequired=function(){if(this._map.style){var o=this._map.style.sourceCaches;for(var s in o)if(o[s].getSource().mapbox_logo)return!0;return!1}},qi.prototype._updateCompact=function(){var o=this._container.children;if(o.length){var s=o[0];this._map.getCanvasContainer().offsetWidth<250?s.classList.add("mapboxgl-compact"):s.classList.remove("mapboxgl-compact")}};var un=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};un.prototype.add=function(o){var s=++this._id;return this._queue.push({callback:o,id:s,cancelled:!1}),s},un.prototype.remove=function(o){for(var s=this._currentlyRunning,a=0,u=s?this._queue.concat(s):this._queue;a<u.length;a+=1){var d=u[a];if(d.id===o)return void(d.cancelled=!0)}},un.prototype.run=function(o){o===void 0&&(o=0);var s=this._currentlyRunning=this._queue;this._queue=[];for(var a=0,u=s;a<u.length;a+=1){var d=u[a];if(!d.cancelled&&(d.callback(o),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},un.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var eo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ec=c.window.HTMLImageElement,Jl=c.window.HTMLElement,Gt=c.window.ImageBitmap,Kr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},zh=function(o){function s(u){var d=this;if((u=c.extend({},Kr,u)).minZoom!=null&&u.maxZoom!=null&&u.minZoom>u.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(u.minPitch!=null&&u.maxPitch!=null&&u.minPitch>u.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(u.minPitch!=null&&u.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(u.maxPitch!=null&&u.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var g=new zt(u.minZoom,u.maxZoom,u.minPitch,u.maxPitch,u.renderWorldCopies);if(o.call(this,g,u),this._interactive=u.interactive,this._maxTileCacheSize=u.maxTileCacheSize,this._failIfMajorPerformanceCaveat=u.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=u.preserveDrawingBuffer,this._antialias=u.antialias,this._trackResize=u.trackResize,this._bearingSnap=u.bearingSnap,this._refreshExpiredTiles=u.refreshExpiredTiles,this._fadeDuration=u.fadeDuration,this._crossSourceCollisions=u.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=u.collectResourceTiming,this._renderTaskQueue=new un,this._controls=[],this._mapId=c.uniqueId(),this._locale=c.extend({},eo,u.locale),this._clickTolerance=u.clickTolerance,this._requestManager=new c.RequestManager(u.transformRequest,u.accessToken),typeof u.container=="string"){if(this._container=c.window.document.getElementById(u.container),!this._container)throw new Error("Container '"+u.container+"' not found.")}else{if(!(u.container instanceof Jl))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=u.container}if(u.maxBounds&&this.setMaxBounds(u.maxBounds),c.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return d._update(!1)}),this.on("moveend",function(){return d._update(!1)}),this.on("zoom",function(){return d._update(!0)}),c.window!==void 0&&(c.window.addEventListener("online",this._onWindowOnline,!1),c.window.addEventListener("resize",this._onWindowResize,!1),c.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Xe(this,u),this._hash=u.hash&&new ui(typeof u.hash=="string"&&u.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:u.center,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch}),u.bounds&&(this.resize(),this.fitBounds(u.bounds,c.extend({},u.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=u.localIdeographFontFamily,u.style&&this.setStyle(u.style,{localIdeographFontFamily:u.localIdeographFontFamily}),u.attributionControl&&this.addControl(new En({customAttribution:u.customAttribution})),this.addControl(new qi,u.logoPosition),this.on("style.load",function(){d.transform.unmodified&&d.jumpTo(d.style.stylesheet)}),this.on("data",function(v){d._update(v.dataType==="style"),d.fire(new c.Event(v.dataType+"data",v))}),this.on("dataloading",function(v){d.fire(new c.Event(v.dataType+"dataloading",v))})}o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return s.prototype._getMapId=function(){return this._mapId},s.prototype.addControl=function(u,d){if(d===void 0&&(d=u.getDefaultPosition?u.getDefaultPosition():"top-right"),!u||!u.onAdd)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var g=u.onAdd(this);this._controls.push(u);var v=this._controlPositions[d];return d.indexOf("bottom")!==-1?v.insertBefore(g,v.firstChild):v.appendChild(g),this},s.prototype.removeControl=function(u){if(!u||!u.onRemove)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var d=this._controls.indexOf(u);return d>-1&&this._controls.splice(d,1),u.onRemove(this),this},s.prototype.hasControl=function(u){return this._controls.indexOf(u)>-1},s.prototype.resize=function(u){var d=this._containerDimensions(),g=d[0],v=d[1];if(g===this.transform.width&&v===this.transform.height)return this;this._resizeCanvas(g,v),this.transform.resize(g,v),this.painter.resize(g,v);var b=!this._moving;return b&&this.fire(new c.Event("movestart",u)).fire(new c.Event("move",u)),this.fire(new c.Event("resize",u)),b&&this.fire(new c.Event("moveend",u)),this},s.prototype.getBounds=function(){return this.transform.getBounds()},s.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},s.prototype.setMaxBounds=function(u){return this.transform.setMaxBounds(c.LngLatBounds.convert(u)),this._update()},s.prototype.setMinZoom=function(u){if((u=u??-2)>=-2&&u<=this.transform.maxZoom)return this.transform.minZoom=u,this._update(),this.getZoom()<u&&this.setZoom(u),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},s.prototype.getMinZoom=function(){return this.transform.minZoom},s.prototype.setMaxZoom=function(u){if((u=u??22)>=this.transform.minZoom)return this.transform.maxZoom=u,this._update(),this.getZoom()>u&&this.setZoom(u),this;throw new Error("maxZoom must be greater than the current minZoom")},s.prototype.getMaxZoom=function(){return this.transform.maxZoom},s.prototype.setMinPitch=function(u){if((u=u??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(u>=0&&u<=this.transform.maxPitch)return this.transform.minPitch=u,this._update(),this.getPitch()<u&&this.setPitch(u),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},s.prototype.getMinPitch=function(){return this.transform.minPitch},s.prototype.setMaxPitch=function(u){if((u=u??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(u>=this.transform.minPitch)return this.transform.maxPitch=u,this._update(),this.getPitch()>u&&this.setPitch(u),this;throw new Error("maxPitch must be greater than the current minPitch")},s.prototype.getMaxPitch=function(){return this.transform.maxPitch},s.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},s.prototype.setRenderWorldCopies=function(u){return this.transform.renderWorldCopies=u,this._update()},s.prototype.project=function(u){return this.transform.locationPoint(c.LngLat.convert(u))},s.prototype.unproject=function(u){return this.transform.pointLocation(c.Point.convert(u))},s.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},s.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},s.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},s.prototype._createDelegatedListener=function(u,d,g){var v,b=this;if(u==="mouseenter"||u==="mouseover"){var T=!1;return{layer:d,listener:g,delegates:{mousemove:function(R){var B=b.getLayer(d)?b.queryRenderedFeatures(R.point,{layers:[d]}):[];B.length?T||(T=!0,g.call(b,new Rr(u,b,R.originalEvent,{features:B}))):T=!1},mouseout:function(){T=!1}}}}if(u==="mouseleave"||u==="mouseout"){var P=!1;return{layer:d,listener:g,delegates:{mousemove:function(R){(b.getLayer(d)?b.queryRenderedFeatures(R.point,{layers:[d]}):[]).length?P=!0:P&&(P=!1,g.call(b,new Rr(u,b,R.originalEvent)))},mouseout:function(R){P&&(P=!1,g.call(b,new Rr(u,b,R.originalEvent)))}}}}return{layer:d,listener:g,delegates:(v={},v[u]=function(R){var B=b.getLayer(d)?b.queryRenderedFeatures(R.point,{layers:[d]}):[];B.length&&(R.features=B,g.call(b,R),delete R.features)},v)}},s.prototype.on=function(u,d,g){if(g===void 0)return o.prototype.on.call(this,u,d);var v=this._createDelegatedListener(u,d,g);for(var b in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[u]=this._delegatedListeners[u]||[],this._delegatedListeners[u].push(v),v.delegates)this.on(b,v.delegates[b]);return this},s.prototype.once=function(u,d,g){if(g===void 0)return o.prototype.once.call(this,u,d);var v=this._createDelegatedListener(u,d,g);for(var b in v.delegates)this.once(b,v.delegates[b]);return this},s.prototype.off=function(u,d,g){var v=this;return g===void 0?o.prototype.off.call(this,u,d):(this._delegatedListeners&&this._delegatedListeners[u]&&function(b){for(var T=b[u],P=0;P<T.length;P++){var R=T[P];if(R.layer===d&&R.listener===g){for(var B in R.delegates)v.off(B,R.delegates[B]);return T.splice(P,1),v}}}(this._delegatedListeners),this)},s.prototype.queryRenderedFeatures=function(u,d){if(!this.style)return[];var g;if(d!==void 0||u===void 0||u instanceof c.Point||Array.isArray(u)||(d=u,u=void 0),d=d||{},(u=u||[[0,0],[this.transform.width,this.transform.height]])instanceof c.Point||typeof u[0]=="number")g=[c.Point.convert(u)];else{var v=c.Point.convert(u[0]),b=c.Point.convert(u[1]);g=[v,new c.Point(b.x,v.y),b,new c.Point(v.x,b.y),v]}return this.style.queryRenderedFeatures(g,d,this.transform)},s.prototype.querySourceFeatures=function(u,d){return this.style.querySourceFeatures(u,d)},s.prototype.setStyle=function(u,d){return(d=c.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},d)).diff!==!1&&d.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&u?(this._diffStyle(u,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._updateStyle(u,d))},s.prototype._getUIString=function(u){var d=this._locale[u];if(d==null)throw new Error("Missing UI string '"+u+"'");return d},s.prototype._updateStyle=function(u,d){return this.style&&(this.style.setEventedParent(null),this.style._remove()),u?(this.style=new Wn(this,d||{}),this.style.setEventedParent(this,{style:this.style}),typeof u=="string"?this.style.loadURL(u):this.style.loadJSON(u),this):(delete this.style,this)},s.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Wn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},s.prototype._diffStyle=function(u,d){var g=this;if(typeof u=="string"){var v=this._requestManager.normalizeStyleURL(u),b=this._requestManager.transformRequest(v,c.ResourceType.Style);c.getJSON(b,function(T,P){T?g.fire(new c.ErrorEvent(T)):P&&g._updateDiff(P,d)})}else typeof u=="object"&&this._updateDiff(u,d)},s.prototype._updateDiff=function(u,d){try{this.style.setState(u)&&this._update(!0)}catch(g){c.warnOnce("Unable to perform style diff: "+(g.message||g.error||g)+".  Rebuilding the style from scratch."),this._updateStyle(u,d)}},s.prototype.getStyle=function(){if(this.style)return this.style.serialize()},s.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():c.warnOnce("There is no style added to the map.")},s.prototype.addSource=function(u,d){return this._lazyInitEmptyStyle(),this.style.addSource(u,d),this._update(!0)},s.prototype.isSourceLoaded=function(u){var d=this.style&&this.style.sourceCaches[u];if(d!==void 0)return d.loaded();this.fire(new c.ErrorEvent(new Error("There is no source with ID '"+u+"'")))},s.prototype.areTilesLoaded=function(){var u=this.style&&this.style.sourceCaches;for(var d in u){var g=u[d]._tiles;for(var v in g){var b=g[v];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0},s.prototype.addSourceType=function(u,d,g){return this._lazyInitEmptyStyle(),this.style.addSourceType(u,d,g)},s.prototype.removeSource=function(u){return this.style.removeSource(u),this._update(!0)},s.prototype.getSource=function(u){return this.style.getSource(u)},s.prototype.addImage=function(u,d,g){g===void 0&&(g={});var v=g.pixelRatio;v===void 0&&(v=1);var b=g.sdf;b===void 0&&(b=!1);var T=g.stretchX,P=g.stretchY,R=g.content;if(this._lazyInitEmptyStyle(),d instanceof Ec||Gt&&d instanceof Gt){var B=c.browser.getImageData(d);this.style.addImage(u,{data:new c.RGBAImage({width:B.width,height:B.height},B.data),pixelRatio:v,stretchX:T,stretchY:P,content:R,sdf:b,version:0})}else{if(d.width===void 0||d.height===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var N=d;this.style.addImage(u,{data:new c.RGBAImage({width:d.width,height:d.height},new Uint8Array(d.data)),pixelRatio:v,stretchX:T,stretchY:P,content:R,sdf:b,version:0,userImage:N}),N.onAdd&&N.onAdd(this,u)}},s.prototype.updateImage=function(u,d){var g=this.style.getImage(u);if(!g)return this.fire(new c.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var v=d instanceof Ec||Gt&&d instanceof Gt?c.browser.getImageData(d):d,b=v.width,T=v.height,P=v.data;return b===void 0||T===void 0?this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):b!==g.data.width||T!==g.data.height?this.fire(new c.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(g.data.replace(P,!(d instanceof Ec||Gt&&d instanceof Gt)),void this.style.updateImage(u,g))},s.prototype.hasImage=function(u){return u?!!this.style.getImage(u):(this.fire(new c.ErrorEvent(new Error("Missing required image id"))),!1)},s.prototype.removeImage=function(u){this.style.removeImage(u)},s.prototype.loadImage=function(u,d){c.getImage(this._requestManager.transformRequest(u,c.ResourceType.Image),d)},s.prototype.listImages=function(){return this.style.listImages()},s.prototype.addLayer=function(u,d){return this._lazyInitEmptyStyle(),this.style.addLayer(u,d),this._update(!0)},s.prototype.moveLayer=function(u,d){return this.style.moveLayer(u,d),this._update(!0)},s.prototype.removeLayer=function(u){return this.style.removeLayer(u),this._update(!0)},s.prototype.getLayer=function(u){return this.style.getLayer(u)},s.prototype.setLayerZoomRange=function(u,d,g){return this.style.setLayerZoomRange(u,d,g),this._update(!0)},s.prototype.setFilter=function(u,d,g){return g===void 0&&(g={}),this.style.setFilter(u,d,g),this._update(!0)},s.prototype.getFilter=function(u){return this.style.getFilter(u)},s.prototype.setPaintProperty=function(u,d,g,v){return v===void 0&&(v={}),this.style.setPaintProperty(u,d,g,v),this._update(!0)},s.prototype.getPaintProperty=function(u,d){return this.style.getPaintProperty(u,d)},s.prototype.setLayoutProperty=function(u,d,g,v){return v===void 0&&(v={}),this.style.setLayoutProperty(u,d,g,v),this._update(!0)},s.prototype.getLayoutProperty=function(u,d){return this.style.getLayoutProperty(u,d)},s.prototype.setLight=function(u,d){return d===void 0&&(d={}),this._lazyInitEmptyStyle(),this.style.setLight(u,d),this._update(!0)},s.prototype.getLight=function(){return this.style.getLight()},s.prototype.setFeatureState=function(u,d){return this.style.setFeatureState(u,d),this._update()},s.prototype.removeFeatureState=function(u,d){return this.style.removeFeatureState(u,d),this._update()},s.prototype.getFeatureState=function(u){return this.style.getFeatureState(u)},s.prototype.getContainer=function(){return this._container},s.prototype.getCanvasContainer=function(){return this._canvasContainer},s.prototype.getCanvas=function(){return this._canvas},s.prototype._containerDimensions=function(){var u=0,d=0;return this._container&&(u=this._container.clientWidth||400,d=this._container.clientHeight||300),[u,d]},s.prototype._detectMissingCSS=function(){c.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&c.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},s.prototype._setupContainer=function(){var u=this._container;u.classList.add("mapboxgl-map"),(this._missingCSSCanary=M.create("div","mapboxgl-canary",u)).style.visibility="hidden",this._detectMissingCSS();var d=this._canvasContainer=M.create("div","mapboxgl-canvas-container",u);this._interactive&&d.classList.add("mapboxgl-interactive"),this._canvas=M.create("canvas","mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var g=this._containerDimensions();this._resizeCanvas(g[0],g[1]);var v=this._controlContainer=M.create("div","mapboxgl-control-container",u),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(T){b[T]=M.create("div","mapboxgl-ctrl-"+T,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},s.prototype._resizeCanvas=function(u,d){var g=c.browser.devicePixelRatio||1;this._canvas.width=g*u,this._canvas.height=g*d,this._canvas.style.width=u+"px",this._canvas.style.height=d+"px"},s.prototype._setupPainter=function(){var u=c.extend({},F.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._canvas.getContext("webgl",u)||this._canvas.getContext("experimental-webgl",u);d?(this.painter=new sr(d,this.transform),c.webpSupported.testSupport(d)):this.fire(new c.ErrorEvent(new Error("Failed to initialize WebGL")))},s.prototype._contextLost=function(u){u.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.Event("webglcontextlost",{originalEvent:u}))},s.prototype._contextRestored=function(u){this._setupPainter(),this.resize(),this._update(),this.fire(new c.Event("webglcontextrestored",{originalEvent:u}))},s.prototype._onMapScroll=function(u){if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},s.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},s.prototype._update=function(u){return this.style?(this._styleDirty=this._styleDirty||u,this._sourcesDirty=!0,this.triggerRepaint(),this):this},s.prototype._requestRenderFrame=function(u){return this._update(),this._renderTaskQueue.add(u)},s.prototype._cancelRenderFrame=function(u){this._renderTaskQueue.remove(u)},s.prototype._render=function(u){var d,g=this,v=0,b=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(d=b.createQueryEXT(),b.beginQueryEXT(b.TIME_ELAPSED_EXT,d),v=c.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(u),!this._removed){var T=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var P=this.transform.zoom,R=c.browser.now();this.style.zoomHistory.update(P,R);var B=new c.EvaluationParameters(P,{now:R,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),N=B.crossFadingFactor();N===1&&N===this._crossFadingFactor||(T=!0,this._crossFadingFactor=N),this.style.update(B)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new c.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new c.Event("load"))),this.style&&(this.style.hasTransitions()||T)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var H=c.browser.now()-v;b.endQueryEXT(b.TIME_ELAPSED_EXT,d),setTimeout(function(){var V=b.getQueryObjectEXT(d,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(d),g.fire(new c.Event("gpu-timing-frame",{cpuTime:H,gpuTime:V}))},50)}if(this.listens("gpu-timing-layer")){var G=this.painter.collectGpuTimers();setTimeout(function(){var V=g.painter.queryGpuTimers(G);g.fire(new c.Event("gpu-timing-layer",{layerTimes:V}))},50)}var K=this._sourcesDirty||this._styleDirty||this._placementDirty;return K||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.Event("idle")),!this._loaded||this._fullyLoaded||K||(this._fullyLoaded=!0),this}},s.prototype.remove=function(){this._hash&&this._hash.remove();for(var u=0,d=this._controls;u<d.length;u+=1)d[u].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),c.window!==void 0&&(c.window.removeEventListener("resize",this._onWindowResize,!1),c.window.removeEventListener("orientationchange",this._onWindowResize,!1),c.window.removeEventListener("online",this._onWindowOnline,!1));var g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),Ta(this._canvasContainer),Ta(this._controlContainer),Ta(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new c.Event("remove"))},s.prototype.triggerRepaint=function(){var u=this;this.style&&!this._frame&&(this._frame=c.browser.frame(function(d){u._frame=null,u._render(d)}))},s.prototype._onWindowOnline=function(){this._update()},s.prototype._onWindowResize=function(u){this._trackResize&&this.resize({originalEvent:u})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(u){this._showTileBoundaries!==u&&(this._showTileBoundaries=u,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(u){this._showPadding!==u&&(this._showPadding=u,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(u){this._showCollisionBoxes!==u&&(this._showCollisionBoxes=u,u?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(u){this._showOverdrawInspector!==u&&(this._showOverdrawInspector=u,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(u){this._repaint!==u&&(this._repaint=u,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(u){this._vertices=u,this._update()},s.prototype._setCacheLimits=function(u,d){c.setCacheLimits(u,d)},a.version.get=function(){return c.version},Object.defineProperties(s.prototype,a),s}(Yl);function Ta(o){o.parentNode&&o.parentNode.removeChild(o)}var Tc={showCompass:!0,showZoom:!0,visualizePitch:!1},go=function(o){var s=this;this.options=c.extend({},Tc,o),this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this.options.showZoom&&(c.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(a){return s._map.zoomIn({},{originalEvent:a})}),M.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(a){return s._map.zoomOut({},{originalEvent:a})}),M.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(c.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(a){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:a}):s._map.resetNorth({},{originalEvent:a})}),this._compassIcon=M.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};go.prototype._updateZoomButtons=function(){var o=this._map.getZoom(),s=o===this._map.getMaxZoom(),a=o===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())},go.prototype._rotateCompassArrow=function(){var o=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=o},go.prototype.onAdd=function(o){return this._map=o,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Jn(this._map,this._compass,this.options.visualizePitch)),this._container},go.prototype.onRemove=function(){M.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},go.prototype._createButton=function(o,s){var a=M.create("button",o,this._container);return a.type="button",a.addEventListener("click",s),a},go.prototype._setButtonTitle=function(o,s){var a=this._map._getUIString("NavigationControl."+s);o.title=a,o.setAttribute("aria-label",a)};var Jn=function(o,s,a){a===void 0&&(a=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new Xl({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,a&&(this.mousePitch=new wc({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),c.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),M.addEventListener(s,"mousedown",this.mousedown),M.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),M.addEventListener(s,"touchmove",this.touchmove),M.addEventListener(s,"touchend",this.touchend),M.addEventListener(s,"touchcancel",this.reset)};function ns(o,s,a){if(o=new c.LngLat(o.lng,o.lat),s){var u=new c.LngLat(o.lng-360,o.lat),d=new c.LngLat(o.lng+360,o.lat),g=a.locationPoint(o).distSqr(s);a.locationPoint(u).distSqr(s)<g?o=u:a.locationPoint(d).distSqr(s)<g&&(o=d)}for(;Math.abs(o.lng-a.center.lng)>180;){var v=a.locationPoint(o);if(v.x>=0&&v.y>=0&&v.x<=a.width&&v.y<=a.height)break;o.lng>a.center.lng?o.lng-=360:o.lng+=360}return o}Jn.prototype.down=function(o,s){this.mouseRotate.mousedown(o,s),this.mousePitch&&this.mousePitch.mousedown(o,s),M.disableDrag()},Jn.prototype.move=function(o,s){var a=this.map,u=this.mouseRotate.mousemoveWindow(o,s);if(u&&u.bearingDelta&&a.setBearing(a.getBearing()+u.bearingDelta),this.mousePitch){var d=this.mousePitch.mousemoveWindow(o,s);d&&d.pitchDelta&&a.setPitch(a.getPitch()+d.pitchDelta)}},Jn.prototype.off=function(){var o=this.element;M.removeEventListener(o,"mousedown",this.mousedown),M.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),M.removeEventListener(o,"touchmove",this.touchmove),M.removeEventListener(o,"touchend",this.touchend),M.removeEventListener(o,"touchcancel",this.reset),this.offTemp()},Jn.prototype.offTemp=function(){M.enableDrag(),M.removeEventListener(c.window,"mousemove",this.mousemove),M.removeEventListener(c.window,"mouseup",this.mouseup)},Jn.prototype.mousedown=function(o){this.down(c.extend({},o,{ctrlKey:!0,preventDefault:function(){return o.preventDefault()}}),M.mousePos(this.element,o)),M.addEventListener(c.window,"mousemove",this.mousemove),M.addEventListener(c.window,"mouseup",this.mouseup)},Jn.prototype.mousemove=function(o){this.move(o,M.mousePos(this.element,o))},Jn.prototype.mouseup=function(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()},Jn.prototype.touchstart=function(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=M.touchPos(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return o.preventDefault()}},this._startPos))},Jn.prototype.touchmove=function(o){o.targetTouches.length!==1?this.reset():(this._lastPos=M.touchPos(this.element,o.targetTouches)[0],this.move({preventDefault:function(){return o.preventDefault()}},this._lastPos))},Jn.prototype.touchend=function(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Jn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var to={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ql(o,s,a){var u=o.classList;for(var d in to)u.remove("mapboxgl-"+a+"-anchor-"+d);u.add("mapboxgl-"+a+"-anchor-"+s)}var is,il=function(o){function s(a,u){if(o.call(this),(a instanceof c.window.HTMLElement||u)&&(a=c.extend({element:a},u)),c.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=c.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=M.create("div"),this._element.setAttribute("aria-label","Map marker");var d=M.createNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height","41px"),d.setAttributeNS(null,"width","27px"),d.setAttributeNS(null,"viewBox","0 0 27 41");var g=M.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"stroke","none"),g.setAttributeNS(null,"stroke-width","1"),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"fill-rule","evenodd");var v=M.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"fill-rule","nonzero");var b=M.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"transform","translate(3.0, 29.0)"),b.setAttributeNS(null,"fill","#000000");for(var T=0,P=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];T<P.length;T+=1){var R=P[T],B=M.createNS("http://www.w3.org/2000/svg","ellipse");B.setAttributeNS(null,"opacity","0.04"),B.setAttributeNS(null,"cx","10.5"),B.setAttributeNS(null,"cy","5.80029008"),B.setAttributeNS(null,"rx",R.rx),B.setAttributeNS(null,"ry",R.ry),b.appendChild(B)}var N=M.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill",this._color);var H=M.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),N.appendChild(H);var G=M.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");var K=M.createNS("http://www.w3.org/2000/svg","path");K.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(K);var V=M.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"transform","translate(6.0, 7.0)"),V.setAttributeNS(null,"fill","#FFFFFF");var $=M.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"transform","translate(8.0, 8.0)");var re=M.createNS("http://www.w3.org/2000/svg","circle");re.setAttributeNS(null,"fill","#000000"),re.setAttributeNS(null,"opacity","0.25"),re.setAttributeNS(null,"cx","5.5"),re.setAttributeNS(null,"cy","5.5"),re.setAttributeNS(null,"r","5.4999962");var se=M.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#FFFFFF"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962"),$.appendChild(re),$.appendChild(se),v.appendChild(b),v.appendChild(N),v.appendChild(G),v.appendChild(V),v.appendChild($),d.appendChild(v),d.setAttributeNS(null,"height",41*this._scale+"px"),d.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(d),this._offset=c.Point.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(de){de.preventDefault()}),this._element.addEventListener("mousedown",function(de){de.preventDefault()}),Ql(this._element,this._anchor,"marker"),this._popup=null}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.addTo=function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),M.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=c.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){var u=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[u,-1*(24.6+u)],"bottom-right":[-u,-1*(24.6+u)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},s.prototype._onKeyPress=function(a){var u=a.code,d=a.charCode||a.keyCode;u!=="Space"&&u!=="Enter"&&d!==32&&d!==13||this.togglePopup()},s.prototype._onMapClick=function(a){var u=a.originalEvent.target,d=this._element;this._popup&&(u===d||d.contains(u))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this},s.prototype._update=function(a){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ns(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(u="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var d="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?d="rotateX(0deg)":this._pitchAlignment==="map"&&(d="rotateX("+this._map.getPitch()+"deg)"),a&&a.type!=="moveend"||(this._pos=this._pos.round()),M.setTransform(this._element,to[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+d+" "+u)}},s.prototype.getOffset=function(){return this._offset},s.prototype.setOffset=function(a){return this._offset=c.Point.convert(a),this._update(),this},s.prototype._onMove=function(a){if(!this._isDragging){var u=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.Event("dragstart"))),this.fire(new c.Event("drag")))},s.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.Event("dragend")),this._state="inactive"},s.prototype._addDragHandler=function(a){this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},s.prototype.setDraggable=function(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},s.prototype.isDraggable=function(){return this._draggable},s.prototype.setRotation=function(a){return this._rotation=a||0,this._update(),this},s.prototype.getRotation=function(){return this._rotation},s.prototype.setRotationAlignment=function(a){return this._rotationAlignment=a||"auto",this._update(),this},s.prototype.getRotationAlignment=function(){return this._rotationAlignment},s.prototype.setPitchAlignment=function(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this},s.prototype.getPitchAlignment=function(){return this._pitchAlignment},s}(c.Evented),Cc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},os=0,Ca=!1,Ic=function(o){function s(a){o.call(this),this.options=c.extend({},Cc,a),c.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.onAdd=function(a){var u;return this._map=a,this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),u=this._setupUI,is!==void 0?u(is):c.window.navigator.permissions!==void 0?c.window.navigator.permissions.query({name:"geolocation"}).then(function(d){u(is=d.state!=="denied")}):u(is=!!c.window.navigator.geolocation),this._container},s.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(c.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),M.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,os=0,Ca=!1},s.prototype._isOutOfMapMaxBounds=function(a){var u=this._map.getMaxBounds(),d=a.coords;return u&&(d.longitude<u.getWest()||d.longitude>u.getEast()||d.latitude<u.getSouth()||d.latitude>u.getNorth())},s.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},s.prototype._onSuccess=function(a){if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new c.Event("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new c.Event("geolocate",a)),this._finish()}},s.prototype._updateCamera=function(a){var u=new c.LngLat(a.coords.longitude,a.coords.latitude),d=a.coords.accuracy,g=this._map.getBearing(),v=c.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(d),v,{geolocateSource:!0})},s.prototype._updateMarker=function(a){if(a){var u=new c.LngLat(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},s.prototype._updateCircleRadius=function(){var a=this._map._container.clientHeight/2,u=this._map.unproject([0,a]),d=this._map.unproject([1,a]),g=u.distanceTo(d),v=Math.ceil(2*this._accuracy/g);this._circleElement.style.width=v+"px",this._circleElement.style.height=v+"px"},s.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},s.prototype._onError=function(a){if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&Ca)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new c.Event("error",a)),this._finish()}},s.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},s.prototype._setupUI=function(a){var u=this;if(this._container.addEventListener("contextmenu",function(v){return v.preventDefault()}),this._geolocateButton=M.create("button","mapboxgl-ctrl-geolocate",this._container),M.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",a===!1){c.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{var g=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=M.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new il(this._dotElement),this._circleElement=M.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new il({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(v){v.geolocateSource||u._watchState!=="ACTIVE_LOCK"||v.originalEvent&&v.originalEvent.type==="resize"||(u._watchState="BACKGROUND",u._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),u._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),u.fire(new c.Event("trackuserlocationend")))})},s.prototype.trigger=function(){if(!this._setup)return c.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":os--,Ca=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new c.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var a;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++os>1?(a={maximumAge:6e5,timeout:0},Ca=!0):(a=this.options.positionOptions,Ca=!1),this._geolocationWatchID=c.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,a)}}else c.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},s.prototype._clearWatch=function(){c.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},s}(c.Evented),jo={maxWidth:100,unit:"metric"},qo=function(o){this.options=c.extend({},jo,o),c.bindAll(["_onMove","setUnit"],this)};function eu(o,s,a){var u=a&&a.maxWidth||100,d=o._container.clientHeight/2,g=o.unproject([0,d]),v=o.unproject([u,d]),b=g.distanceTo(v);if(a&&a.unit==="imperial"){var T=3.2808*b;T>5280?Go(s,u,T/5280,o._getUIString("ScaleControl.Miles")):Go(s,u,T,o._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?Go(s,u,b/1852,o._getUIString("ScaleControl.NauticalMiles")):b>=1e3?Go(s,u,b/1e3,o._getUIString("ScaleControl.Kilometers")):Go(s,u,b,o._getUIString("ScaleControl.Meters"))}function Go(o,s,a,u){var d,g,v,b=(d=a,(g=Math.pow(10,(""+Math.floor(d)).length-1))*(v=(v=d/g)>=10?10:v>=5?5:v>=3?3:v>=2?2:v>=1?1:function(T){var P=Math.pow(10,Math.ceil(-Math.log(T)/Math.LN10));return Math.round(T*P)/P}(v)));o.style.width=s*(b/a)+"px",o.innerHTML=b+"&nbsp;"+u}qo.prototype.getDefaultPosition=function(){return"bottom-left"},qo.prototype._onMove=function(){eu(this._map,this._container,this.options)},qo.prototype.onAdd=function(o){return this._map=o,this._container=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",o.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},qo.prototype.onRemove=function(){M.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},qo.prototype.setUnit=function(o){this.options.unit=o,eu(this._map,this._container,this.options)};var Ci=function(o){this._fullscreen=!1,o&&o.container&&(o.container instanceof c.window.HTMLElement?this._container=o.container:c.warnOnce("Full screen control 'container' must be a DOM element.")),c.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in c.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in c.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in c.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in c.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ci.prototype.onAdd=function(o){return this._map=o,this._container||(this._container=this._map.getContainer()),this._controlContainer=M.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",c.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ci.prototype.onRemove=function(){M.remove(this._controlContainer),this._map=null,c.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ci.prototype._checkFullscreenSupport=function(){return!!(c.window.document.fullscreenEnabled||c.window.document.mozFullScreenEnabled||c.window.document.msFullscreenEnabled||c.window.document.webkitFullscreenEnabled)},Ci.prototype._setupUI=function(){var o=this._fullscreenButton=M.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);M.create("span","mapboxgl-ctrl-icon",o).setAttribute("aria-hidden",!0),o.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),c.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ci.prototype._updateTitle=function(){var o=this._getTitle();this._fullscreenButton.setAttribute("aria-label",o),this._fullscreenButton.title=o},Ci.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ci.prototype._isFullscreen=function(){return this._fullscreen},Ci.prototype._changeIcon=function(){(c.window.document.fullscreenElement||c.window.document.mozFullScreenElement||c.window.document.webkitFullscreenElement||c.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ci.prototype._onClickFullscreen=function(){this._isFullscreen()?c.window.document.exitFullscreen?c.window.document.exitFullscreen():c.window.document.mozCancelFullScreen?c.window.document.mozCancelFullScreen():c.window.document.msExitFullscreen?c.window.document.msExitFullscreen():c.window.document.webkitCancelFullScreen&&c.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var kc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ol=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Pc=function(o){function s(a){o.call(this),this.options=c.extend(Object.create(kc),a),c.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return o&&(s.__proto__=o),(s.prototype=Object.create(o&&o.prototype)).constructor=s,s.prototype.addTo=function(a){return this._map&&this.remove(),this._map=a,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new c.Event("open")),this},s.prototype.isOpen=function(){return!!this._map},s.prototype.remove=function(){return this._content&&M.remove(this._content),this._container&&(M.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.Event("close")),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(a){return this._lngLat=c.LngLat.convert(a),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},s.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},s.prototype.getElement=function(){return this._container},s.prototype.setText=function(a){return this.setDOMContent(c.window.document.createTextNode(a))},s.prototype.setHTML=function(a){var u,d=c.window.document.createDocumentFragment(),g=c.window.document.createElement("body");for(g.innerHTML=a;u=g.firstChild;)d.appendChild(u);return this.setDOMContent(d)},s.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},s.prototype.setMaxWidth=function(a){return this.options.maxWidth=a,this._update(),this},s.prototype.setDOMContent=function(a){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=M.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(a),this._createCloseButton(),this._update(),this._focusFirstElement(),this},s.prototype.addClassName=function(a){this._container&&this._container.classList.add(a)},s.prototype.removeClassName=function(a){this._container&&this._container.classList.remove(a)},s.prototype.setOffset=function(a){return this.options.offset=a,this._update(),this},s.prototype.toggleClassName=function(a){if(this._container)return this._container.classList.toggle(a)},s.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=M.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},s.prototype._onMouseUp=function(a){this._update(a.point)},s.prototype._onMouseMove=function(a){this._update(a.point)},s.prototype._onDrag=function(a){this._update(a.point)},s.prototype._update=function(a){var u=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=M.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=M.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(B){return u._container.classList.add(B)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ns(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||a)){var d=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat),g=this.options.anchor,v=function B(N){if(N){if(typeof N=="number"){var H=Math.round(Math.sqrt(.5*Math.pow(N,2)));return{center:new c.Point(0,0),top:new c.Point(0,N),"top-left":new c.Point(H,H),"top-right":new c.Point(-H,H),bottom:new c.Point(0,-N),"bottom-left":new c.Point(H,-H),"bottom-right":new c.Point(-H,-H),left:new c.Point(N,0),right:new c.Point(-N,0)}}if(N instanceof c.Point||Array.isArray(N)){var G=c.Point.convert(N);return{center:G,top:G,"top-left":G,"top-right":G,bottom:G,"bottom-left":G,"bottom-right":G,left:G,right:G}}return{center:c.Point.convert(N.center||[0,0]),top:c.Point.convert(N.top||[0,0]),"top-left":c.Point.convert(N["top-left"]||[0,0]),"top-right":c.Point.convert(N["top-right"]||[0,0]),bottom:c.Point.convert(N.bottom||[0,0]),"bottom-left":c.Point.convert(N["bottom-left"]||[0,0]),"bottom-right":c.Point.convert(N["bottom-right"]||[0,0]),left:c.Point.convert(N.left||[0,0]),right:c.Point.convert(N.right||[0,0])}}return B(new c.Point(0,0))}(this.options.offset);if(!g){var b,T=this._container.offsetWidth,P=this._container.offsetHeight;b=d.y+v.bottom.y<P?["top"]:d.y>this._map.transform.height-P?["bottom"]:[],d.x<T/2?b.push("left"):d.x>this._map.transform.width-T/2&&b.push("right"),g=b.length===0?"bottom":b.join("-")}var R=d.add(v[g]).round();M.setTransform(this._container,to[g]+" translate("+R.x+"px,"+R.y+"px)"),Ql(this._container,g,"popup")}},s.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var a=this._container.querySelector(ol);a&&a.focus()}},s.prototype._onClose=function(){this.remove()},s}(c.Evented),tu={version:c.version,supported:F,setRTLTextPlugin:c.setRTLTextPlugin,getRTLTextPluginStatus:c.getRTLTextPluginStatus,Map:zh,NavigationControl:go,GeolocateControl:Ic,AttributionControl:En,ScaleControl:qo,FullscreenControl:Ci,Popup:Pc,Marker:il,Style:Wn,LngLat:c.LngLat,LngLatBounds:c.LngLatBounds,Point:c.Point,MercatorCoordinate:c.MercatorCoordinate,Evented:c.Evented,config:c.config,prewarm:function(){ve().acquire(ge)},clearPrewarmedResources:function(){var o=We;o&&(o.isPreloaded()&&o.numActive()===1?(o.release(ge),We=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return c.config.ACCESS_TOKEN},set accessToken(o){c.config.ACCESS_TOKEN=o},get baseApiUrl(){return c.config.API_URL},set baseApiUrl(o){c.config.API_URL=o},get workerCount(){return Se.workerCount},set workerCount(o){Se.workerCount=o},get maxParallelImageRequests(){return c.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(o){c.config.MAX_PARALLEL_IMAGE_REQUESTS=o},clearStorage:function(o){c.clearTileCache(o)},workerUrl:""};return tu}),_})})(u2);var O4=u2.exports;const c2=oy(O4);var p2=di.createContext(null);function B4(r){r()}var h2=B4,F4=function(i){return h2=i},N4=function(){return h2};function U4(){var r=N4(),i=null,p=null;return{clear:function(){i=null,p=null},notify:function(){r(function(){for(var _=i;_;)_.callback(),_=_.next})},get:function(){for(var _=[],w=i;w;)_.push(w),w=w.next;return _},subscribe:function(_){var w=!0,c=p={callback:_,next:null,prev:p};return c.prev?c.prev.next=c:i=c,function(){!w||i===null||(w=!1,c.next?c.next.prev=c.prev:p=c.prev,c.prev?c.prev.next=c.next:i=c.next)}}}}var B_={notify:function(){},get:function(){return[]}};function f2(r,i){var p,m=B_;function _(me){return M(),m.subscribe(me)}function w(){m.notify()}function c(){oe.onStateChange&&oe.onStateChange()}function F(){return!!p}function M(){p||(p=i?i.addNestedSub(c):r.subscribe(c),m=U4())}function ee(){p&&(p(),p=void 0,m.clear(),m=B_)}var oe={addNestedSub:_,notifyNestedSubs:w,handleChangeWrapper:c,isSubscribed:F,trySubscribe:M,tryUnsubscribe:ee,getListeners:function(){return m}};return oe}var d2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?tn.useLayoutEffect:tn.useEffect;function V4(r){var i=r.store,p=r.context,m=r.children,_=tn.useMemo(function(){var F=f2(i);return{store:i,subscription:F}},[i]),w=tn.useMemo(function(){return i.getState()},[i]);d2(function(){var F=_.subscription;return F.onStateChange=F.notifyNestedSubs,F.trySubscribe(),w!==i.getState()&&F.notifyNestedSubs(),function(){F.tryUnsubscribe(),F.onStateChange=null}},[_,w]);var c=p||p2;return di.createElement(c.Provider,{value:_},m)}function xs(){return xs=Object.assign?Object.assign.bind():function(r){for(var i=1;i<arguments.length;i++){var p=arguments[i];for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(r[m]=p[m])}return r},xs.apply(this,arguments)}function fd(r,i){if(r==null)return{};var p={},m=Object.keys(r),_,w;for(w=0;w<m.length;w++)_=m[w],!(i.indexOf(_)>=0)&&(p[_]=r[_]);return p}var m2={exports:{}},hr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var An=typeof Symbol=="function"&&Symbol.for,eg=An?Symbol.for("react.element"):60103,tg=An?Symbol.for("react.portal"):60106,Ad=An?Symbol.for("react.fragment"):60107,Md=An?Symbol.for("react.strict_mode"):60108,Ld=An?Symbol.for("react.profiler"):60114,Dd=An?Symbol.for("react.provider"):60109,Rd=An?Symbol.for("react.context"):60110,rg=An?Symbol.for("react.async_mode"):60111,Od=An?Symbol.for("react.concurrent_mode"):60111,Bd=An?Symbol.for("react.forward_ref"):60112,Fd=An?Symbol.for("react.suspense"):60113,j4=An?Symbol.for("react.suspense_list"):60120,Nd=An?Symbol.for("react.memo"):60115,Ud=An?Symbol.for("react.lazy"):60116,q4=An?Symbol.for("react.block"):60121,G4=An?Symbol.for("react.fundamental"):60117,Z4=An?Symbol.for("react.responder"):60118,H4=An?Symbol.for("react.scope"):60119;function Yi(r){if(typeof r=="object"&&r!==null){var i=r.$$typeof;switch(i){case eg:switch(r=r.type,r){case rg:case Od:case Ad:case Ld:case Md:case Fd:return r;default:switch(r=r&&r.$$typeof,r){case Rd:case Bd:case Ud:case Nd:case Dd:return r;default:return i}}case tg:return i}}}function y2(r){return Yi(r)===Od}hr.AsyncMode=rg;hr.ConcurrentMode=Od;hr.ContextConsumer=Rd;hr.ContextProvider=Dd;hr.Element=eg;hr.ForwardRef=Bd;hr.Fragment=Ad;hr.Lazy=Ud;hr.Memo=Nd;hr.Portal=tg;hr.Profiler=Ld;hr.StrictMode=Md;hr.Suspense=Fd;hr.isAsyncMode=function(r){return y2(r)||Yi(r)===rg};hr.isConcurrentMode=y2;hr.isContextConsumer=function(r){return Yi(r)===Rd};hr.isContextProvider=function(r){return Yi(r)===Dd};hr.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===eg};hr.isForwardRef=function(r){return Yi(r)===Bd};hr.isFragment=function(r){return Yi(r)===Ad};hr.isLazy=function(r){return Yi(r)===Ud};hr.isMemo=function(r){return Yi(r)===Nd};hr.isPortal=function(r){return Yi(r)===tg};hr.isProfiler=function(r){return Yi(r)===Ld};hr.isStrictMode=function(r){return Yi(r)===Md};hr.isSuspense=function(r){return Yi(r)===Fd};hr.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===Ad||r===Od||r===Ld||r===Md||r===Fd||r===j4||typeof r=="object"&&r!==null&&(r.$$typeof===Ud||r.$$typeof===Nd||r.$$typeof===Dd||r.$$typeof===Rd||r.$$typeof===Bd||r.$$typeof===G4||r.$$typeof===Z4||r.$$typeof===H4||r.$$typeof===q4)};hr.typeOf=Yi;m2.exports=hr;var W4=m2.exports,ng=W4,X4={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},$4={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},K4={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},g2={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ig={};ig[ng.ForwardRef]=K4;ig[ng.Memo]=g2;function F_(r){return ng.isMemo(r)?g2:ig[r.$$typeof]||X4}var Y4=Object.defineProperty,J4=Object.getOwnPropertyNames,N_=Object.getOwnPropertySymbols,Q4=Object.getOwnPropertyDescriptor,eS=Object.getPrototypeOf,U_=Object.prototype;function v2(r,i,p){if(typeof i!="string"){if(U_){var m=eS(i);m&&m!==U_&&v2(r,m,p)}var _=J4(i);N_&&(_=_.concat(N_(i)));for(var w=F_(r),c=F_(i),F=0;F<_.length;++F){var M=_[F];if(!$4[M]&&!(p&&p[M])&&!(c&&c[M])&&!(w&&w[M])){var ee=Q4(i,M);try{Y4(r,M,ee)}catch{}}}}return r}var tS=v2;const V_=oy(tS);var _2={exports:{}},mr={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=60103,jd=60106,Zp=60107,Hp=60108,Wp=60114,Xp=60109,$p=60110,Kp=60112,Yp=60113,og=60120,Jp=60115,Qp=60116,x2=60121,w2=60122,b2=60117,S2=60129,E2=60131;if(typeof Symbol=="function"&&Symbol.for){var Un=Symbol.for;Vd=Un("react.element"),jd=Un("react.portal"),Zp=Un("react.fragment"),Hp=Un("react.strict_mode"),Wp=Un("react.profiler"),Xp=Un("react.provider"),$p=Un("react.context"),Kp=Un("react.forward_ref"),Yp=Un("react.suspense"),og=Un("react.suspense_list"),Jp=Un("react.memo"),Qp=Un("react.lazy"),x2=Un("react.block"),w2=Un("react.server.block"),b2=Un("react.fundamental"),S2=Un("react.debug_trace_mode"),E2=Un("react.legacy_hidden")}function Po(r){if(typeof r=="object"&&r!==null){var i=r.$$typeof;switch(i){case Vd:switch(r=r.type,r){case Zp:case Wp:case Hp:case Yp:case og:return r;default:switch(r=r&&r.$$typeof,r){case $p:case Kp:case Qp:case Jp:case Xp:return r;default:return i}}case jd:return i}}}var rS=Xp,nS=Vd,iS=Kp,oS=Zp,aS=Qp,sS=Jp,lS=jd,uS=Wp,cS=Hp,pS=Yp;mr.ContextConsumer=$p;mr.ContextProvider=rS;mr.Element=nS;mr.ForwardRef=iS;mr.Fragment=oS;mr.Lazy=aS;mr.Memo=sS;mr.Portal=lS;mr.Profiler=uS;mr.StrictMode=cS;mr.Suspense=pS;mr.isAsyncMode=function(){return!1};mr.isConcurrentMode=function(){return!1};mr.isContextConsumer=function(r){return Po(r)===$p};mr.isContextProvider=function(r){return Po(r)===Xp};mr.isElement=function(r){return typeof r=="object"&&r!==null&&r.$$typeof===Vd};mr.isForwardRef=function(r){return Po(r)===Kp};mr.isFragment=function(r){return Po(r)===Zp};mr.isLazy=function(r){return Po(r)===Qp};mr.isMemo=function(r){return Po(r)===Jp};mr.isPortal=function(r){return Po(r)===jd};mr.isProfiler=function(r){return Po(r)===Wp};mr.isStrictMode=function(r){return Po(r)===Hp};mr.isSuspense=function(r){return Po(r)===Yp};mr.isValidElementType=function(r){return typeof r=="string"||typeof r=="function"||r===Zp||r===Wp||r===S2||r===Hp||r===Yp||r===og||r===E2||typeof r=="object"&&r!==null&&(r.$$typeof===Qp||r.$$typeof===Jp||r.$$typeof===Xp||r.$$typeof===$p||r.$$typeof===Kp||r.$$typeof===b2||r.$$typeof===x2||r[0]===w2)};mr.typeOf=Po;_2.exports=mr;var hS=_2.exports,fS=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],dS=["reactReduxForwardedRef"],mS=[],yS=[null,null];function gS(r,i){var p=r[1];return[i.payload,p+1]}function j_(r,i,p){d2(function(){return r.apply(void 0,i)},p)}function vS(r,i,p,m,_,w,c){r.current=m,i.current=_,p.current=!1,w.current&&(w.current=null,c())}function _S(r,i,p,m,_,w,c,F,M,ee){if(r){var oe=!1,me=null,te=function(){if(!oe){var ke=i.getState(),at,ae;try{at=m(ke,_.current)}catch(J){ae=J,me=J}ae||(me=null),at===w.current?c.current||M():(w.current=at,F.current=at,c.current=!0,ee({type:"STORE_UPDATED",payload:{error:ae}}))}};p.onStateChange=te,p.trySubscribe(),te();var Pe=function(){if(oe=!0,p.tryUnsubscribe(),p.onStateChange=null,me)throw me};return Pe}}var xS=function(){return[null,0]};function wS(r,i){i===void 0&&(i={});var p=i,m=p.getDisplayName,_=m===void 0?function(le){return"ConnectAdvanced("+le+")"}:m,w=p.methodName,c=w===void 0?"connectAdvanced":w,F=p.renderCountProp,M=F===void 0?void 0:F,ee=p.shouldHandleStateChanges,oe=ee===void 0?!0:ee,me=p.storeKey,te=me===void 0?"store":me;p.withRef;var Pe=p.forwardRef,Me=Pe===void 0?!1:Pe,ke=p.context,at=ke===void 0?p2:ke,ae=fd(p,fS),J=at;return function(xe){var Ue=xe.displayName||xe.name||"Component",Ke=_(Ue),Je=xs({},ae,{getDisplayName:_,methodName:c,renderCountProp:M,shouldHandleStateChanges:oe,storeKey:te,displayName:Ke,wrappedComponentName:Ue,WrappedComponent:xe}),rt=ae.pure;function It(Ht){return r(Ht.dispatch,Je)}var yt=rt?tn.useMemo:function(Ht){return Ht()};function tr(Ht){var Gn=tn.useMemo(function(){var Oi=Ht.reactReduxForwardedRef,_n=fd(Ht,dS);return[Ht.context,Oi,_n]},[Ht]),yr=Gn[0],Mn=Gn[1],He=Gn[2],gt=tn.useMemo(function(){return yr&&yr.Consumer&&hS.isContextConsumer(di.createElement(yr.Consumer,null))?yr:J},[yr,J]),ft=tn.useContext(gt),Lt=!!Ht.store&&!!Ht.store.getState&&!!Ht.store.dispatch;ft&&ft.store;var Ot=Lt?Ht.store:ft.store,gn=tn.useMemo(function(){return It(Ot)},[Ot]),nn=tn.useMemo(function(){if(!oe)return yS;var Oi=f2(Ot,Lt?null:ft.subscription),_n=Oi.notifyNestedSubs.bind(Oi);return[Oi,_n]},[Ot,Lt,ft]),pn=nn[0],Zn=nn[1],gr=tn.useMemo(function(){return Lt?ft:xs({},ft,{subscription:pn})},[Lt,ft,pn]),vi=tn.useReducer(gS,mS,xS),Wt=vi[0],Ln=Wt[0],zo=vi[1];if(Ln&&Ln.error)throw Ln.error;var Hn=tn.useRef(),bt=tn.useRef(He),ai=tn.useRef(),on=tn.useRef(!1),vn=yt(function(){return ai.current&&He===bt.current?ai.current:gn(Ot.getState(),He)},[Ot,Ln,He]);j_(vS,[bt,Hn,on,He,vn,ai,Zn]),j_(_S,[oe,Ot,pn,gn,bt,Hn,on,ai,Zn,zo],[Ot,pn,gn]);var oa=tn.useMemo(function(){return di.createElement(xe,xs({},vn,{ref:Mn}))},[Mn,xe,vn]),si=tn.useMemo(function(){return oe?di.createElement(gt.Provider,{value:gr},oa):oa},[gt,oa,gr]);return si}var Wr=rt?di.memo(tr):tr;if(Wr.WrappedComponent=xe,Wr.displayName=tr.displayName=Ke,Me){var Nt=di.forwardRef(function(Gn,yr){return di.createElement(Wr,xs({},Gn,{reactReduxForwardedRef:yr}))});return Nt.displayName=Ke,Nt.WrappedComponent=xe,V_(Nt,xe)}return V_(Wr,xe)}}function q_(r,i){return r===i?r!==0||i!==0||1/r===1/i:r!==r&&i!==i}function l0(r,i){if(q_(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var p=Object.keys(r),m=Object.keys(i);if(p.length!==m.length)return!1;for(var _=0;_<p.length;_++)if(!Object.prototype.hasOwnProperty.call(i,p[_])||!q_(r[p[_]],i[p[_]]))return!1;return!0}function bS(r,i){var p={},m=function(c){var F=r[c];typeof F=="function"&&(p[c]=function(){return i(F.apply(void 0,arguments))})};for(var _ in r)m(_);return p}function ag(r){return function(p,m){var _=r(p,m);function w(){return _}return w.dependsOnOwnProps=!1,w}}function G_(r){return r.dependsOnOwnProps!==null&&r.dependsOnOwnProps!==void 0?!!r.dependsOnOwnProps:r.length!==1}function T2(r,i){return function(m,_){_.displayName;var w=function(F,M){return w.dependsOnOwnProps?w.mapToProps(F,M):w.mapToProps(F)};return w.dependsOnOwnProps=!0,w.mapToProps=function(F,M){w.mapToProps=r,w.dependsOnOwnProps=G_(r);var ee=w(F,M);return typeof ee=="function"&&(w.mapToProps=ee,w.dependsOnOwnProps=G_(ee),ee=w(F,M)),ee},w}}function SS(r){return typeof r=="function"?T2(r):void 0}function ES(r){return r?void 0:ag(function(i){return{dispatch:i}})}function TS(r){return r&&typeof r=="object"?ag(function(i){return bS(r,i)}):void 0}const CS=[SS,ES,TS];function IS(r){return typeof r=="function"?T2(r):void 0}function kS(r){return r?void 0:ag(function(){return{}})}const PS=[IS,kS];function zS(r,i,p){return xs({},p,r,i)}function AS(r){return function(p,m){m.displayName;var _=m.pure,w=m.areMergedPropsEqual,c=!1,F;return function(ee,oe,me){var te=r(ee,oe,me);return c?(!_||!w(te,F))&&(F=te):(c=!0,F=te),F}}}function MS(r){return typeof r=="function"?AS(r):void 0}function LS(r){return r?void 0:function(){return zS}}const DS=[MS,LS];var RS=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function OS(r,i,p,m){return function(w,c){return p(r(w,c),i(m,c),c)}}function BS(r,i,p,m,_){var w=_.areStatesEqual,c=_.areOwnPropsEqual,F=_.areStatePropsEqual,M=!1,ee,oe,me,te,Pe;function Me(le,xe){return ee=le,oe=xe,me=r(ee,oe),te=i(m,oe),Pe=p(me,te,oe),M=!0,Pe}function ke(){return me=r(ee,oe),i.dependsOnOwnProps&&(te=i(m,oe)),Pe=p(me,te,oe),Pe}function at(){return r.dependsOnOwnProps&&(me=r(ee,oe)),i.dependsOnOwnProps&&(te=i(m,oe)),Pe=p(me,te,oe),Pe}function ae(){var le=r(ee,oe),xe=!F(le,me);return me=le,xe&&(Pe=p(me,te,oe)),Pe}function J(le,xe){var Ue=!c(xe,oe),Ke=!w(le,ee,xe,oe);return ee=le,oe=xe,Ue&&Ke?ke():Ue?at():Ke?ae():Pe}return function(xe,Ue){return M?J(xe,Ue):Me(xe,Ue)}}function FS(r,i){var p=i.initMapStateToProps,m=i.initMapDispatchToProps,_=i.initMergeProps,w=fd(i,RS),c=p(r,w),F=m(r,w),M=_(r,w),ee=w.pure?BS:OS;return ee(c,F,M,r,w)}var NS=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function u0(r,i,p){for(var m=i.length-1;m>=0;m--){var _=i[m](r);if(_)return _}return function(w,c){throw new Error("Invalid value of type "+typeof r+" for "+p+" argument when connecting component "+c.wrappedComponentName+".")}}function US(r,i){return r===i}function VS(r){var i=r===void 0?{}:r,p=i.connectHOC,m=p===void 0?wS:p,_=i.mapStateToPropsFactories,w=_===void 0?PS:_,c=i.mapDispatchToPropsFactories,F=c===void 0?CS:c,M=i.mergePropsFactories,ee=M===void 0?DS:M,oe=i.selectorFactory,me=oe===void 0?FS:oe;return function(Pe,Me,ke,at){at===void 0&&(at={});var ae=at,J=ae.pure,le=J===void 0?!0:J,xe=ae.areStatesEqual,Ue=xe===void 0?US:xe,Ke=ae.areOwnPropsEqual,Je=Ke===void 0?l0:Ke,rt=ae.areStatePropsEqual,It=rt===void 0?l0:rt,yt=ae.areMergedPropsEqual,tr=yt===void 0?l0:yt,Wr=fd(ae,NS),Nt=u0(Pe,w,"mapStateToProps"),Ht=u0(Me,F,"mapDispatchToProps"),Gn=u0(ke,ee,"mergeProps");return m(me,xs({methodName:"connect",getDisplayName:function(Mn){return"Connect("+Mn+")"},shouldHandleStateChanges:!!Pe,initMapStateToProps:Nt,initMapDispatchToProps:Ht,initMergeProps:Gn,pure:le,areStatesEqual:Ue,areOwnPropsEqual:Je,areStatePropsEqual:It,areMergedPropsEqual:tr},Wr))}}const qd=VS();F4(l2.unstable_batchedUpdates);function Np(r){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Np(r)}function jS(r,i){if(Np(r)!="object"||!r)return r;var p=r[Symbol.toPrimitive];if(p!==void 0){var m=p.call(r,i||"default");if(Np(m)!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}function qS(r){var i=jS(r,"string");return Np(i)=="symbol"?i:String(i)}function GS(r,i,p){return i=qS(i),i in r?Object.defineProperty(r,i,{value:p,enumerable:!0,configurable:!0,writable:!0}):r[i]=p,r}function Z_(r,i){var p=Object.keys(r);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(r);i&&(m=m.filter(function(_){return Object.getOwnPropertyDescriptor(r,_).enumerable})),p.push.apply(p,m)}return p}function H_(r){for(var i=1;i<arguments.length;i++){var p=arguments[i]!=null?arguments[i]:{};i%2?Z_(Object(p),!0).forEach(function(m){GS(r,m,p[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(p)):Z_(Object(p)).forEach(function(m){Object.defineProperty(r,m,Object.getOwnPropertyDescriptor(p,m))})}return r}function ni(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var W_=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),c0=function(){return Math.random().toString(36).substring(7).split("").join(".")},dd={INIT:"@@redux/INIT"+c0(),REPLACE:"@@redux/REPLACE"+c0(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+c0()}};function ZS(r){if(typeof r!="object"||r===null)return!1;for(var i=r;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(r)===i}function C2(r,i,p){var m;if(typeof i=="function"&&typeof p=="function"||typeof p=="function"&&typeof arguments[3]=="function")throw new Error(ni(0));if(typeof i=="function"&&typeof p>"u"&&(p=i,i=void 0),typeof p<"u"){if(typeof p!="function")throw new Error(ni(1));return p(C2)(r,i)}if(typeof r!="function")throw new Error(ni(2));var _=r,w=i,c=[],F=c,M=!1;function ee(){F===c&&(F=c.slice())}function oe(){if(M)throw new Error(ni(3));return w}function me(ke){if(typeof ke!="function")throw new Error(ni(4));if(M)throw new Error(ni(5));var at=!0;return ee(),F.push(ke),function(){if(at){if(M)throw new Error(ni(6));at=!1,ee();var J=F.indexOf(ke);F.splice(J,1),c=null}}}function te(ke){if(!ZS(ke))throw new Error(ni(7));if(typeof ke.type>"u")throw new Error(ni(8));if(M)throw new Error(ni(9));try{M=!0,w=_(w,ke)}finally{M=!1}for(var at=c=F,ae=0;ae<at.length;ae++){var J=at[ae];J()}return ke}function Pe(ke){if(typeof ke!="function")throw new Error(ni(10));_=ke,te({type:dd.REPLACE})}function Me(){var ke,at=me;return ke={subscribe:function(J){if(typeof J!="object"||J===null)throw new Error(ni(11));function le(){J.next&&J.next(oe())}le();var xe=at(le);return{unsubscribe:xe}}},ke[W_]=function(){return this},ke}return te({type:dd.INIT}),m={dispatch:te,subscribe:me,getState:oe,replaceReducer:Pe},m[W_]=Me,m}function HS(r){Object.keys(r).forEach(function(i){var p=r[i],m=p(void 0,{type:dd.INIT});if(typeof m>"u")throw new Error(ni(12));if(typeof p(void 0,{type:dd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ni(13))})}function WS(r){for(var i=Object.keys(r),p={},m=0;m<i.length;m++){var _=i[m];typeof r[_]=="function"&&(p[_]=r[_])}var w=Object.keys(p),c;try{HS(p)}catch(F){c=F}return function(M,ee){if(M===void 0&&(M={}),c)throw c;for(var oe=!1,me={},te=0;te<w.length;te++){var Pe=w[te],Me=p[Pe],ke=M[Pe],at=Me(ke,ee);if(typeof at>"u")throw ee&&ee.type,new Error(ni(14));me[Pe]=at,oe=oe||at!==ke}return oe=oe||w.length!==Object.keys(M).length,oe?me:M}}function XS(){for(var r=arguments.length,i=new Array(r),p=0;p<r;p++)i[p]=arguments[p];return i.length===0?function(m){return m}:i.length===1?i[0]:i.reduce(function(m,_){return function(){return m(_.apply(void 0,arguments))}})}function $S(){for(var r=arguments.length,i=new Array(r),p=0;p<r;p++)i[p]=arguments[p];return function(m){return function(){var _=m.apply(void 0,arguments),w=function(){throw new Error(ni(15))},c={getState:_.getState,dispatch:function(){return w.apply(void 0,arguments)}},F=i.map(function(M){return M(c)});return w=XS.apply(void 0,F)(_.dispatch),H_(H_({},_),{},{dispatch:w})}}}function KS(r){return({dispatch:p,getState:m})=>_=>w=>typeof w=="function"?w(p,m,r):_(w)}var YS=KS();const I2="SEND_MAP_OBJECT",JS=r=>i=>{i({type:I2,mapObject:r})},k2="SEND_EDITOR_TITLE",P2="TOGGLE_EDITOR_STATE",QS=r=>i=>{i({type:k2,editorTitle:r})},z2=()=>r=>{r({type:P2})},A2="SEND_CUSTOM_MESSAGE",M2="TOGGLE_VIEWER_STATE",e5=(r,i)=>p=>{p({type:A2,customMessage:{title:r,content:i}})},t5=r=>i=>{i({type:M2,viewerState:r})},r5={mapObject:{},editorState:!1,viewerState:!1,customMessage:{title:"",content:""}};function n5(r=r5,i){switch(i.type){case I2:return{...r,mapObject:i.mapObject};case k2:return{...r,editorTitle:i.editorTitle};case P2:return{...r,editorState:!r.editorState};case A2:return{...r,customMessage:i.customMessage};case M2:return{...r,viewerState:!r.viewerState};default:return r}}const i5=C2(WS({commonReducer:n5}),$S(YS)),o5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2060%2060'%20style='enable-background:new%200%200%2060%2060;'%20xml:space='preserve'%3e%3cpath%20d='M48.014,42.889l-9.553-4.776C37.56,37.662,37,36.756,37,35.748v-3.381c0.229-0.28,0.47-0.599,0.719-0.951%20c1.239-1.75,2.232-3.698,2.954-5.799C42.084,24.97,43,23.575,43,22v-4c0-0.963-0.36-1.896-1-2.625v-5.319%20c0.056-0.55,0.276-3.824-2.092-6.525C37.854,1.188,34.521,0,30,0s-7.854,1.188-9.908,3.53C17.724,6.231,17.944,9.506,18,10.056%20v5.319c-0.64,0.729-1,1.662-1,2.625v4c0,1.217,0.553,2.352,1.497,3.109c0.916,3.627,2.833,6.36,3.503,7.237v3.309%20c0,0.968-0.528,1.856-1.377,2.32l-8.921,4.866C8.801,44.424,7,47.458,7,50.762V54c0,4.746,15.045,6,23,6s23-1.254,23-6v-3.043%20C53,47.519,51.089,44.427,48.014,42.889z%20M51,54c0,1.357-7.412,4-21,4S9,55.357,9,54v-3.238c0-2.571,1.402-4.934,3.659-6.164%20l8.921-4.866C23.073,38.917,24,37.354,24,35.655v-4.019l-0.233-0.278c-0.024-0.029-2.475-2.994-3.41-7.065l-0.091-0.396l-0.341-0.22%20C19.346,23.303,19,22.676,19,22v-4c0-0.561,0.238-1.084,0.67-1.475L20,16.228V10l-0.009-0.131c-0.003-0.027-0.343-2.799,1.605-5.021%20C23.253,2.958,26.081,2,30,2c3.905,0,6.727,0.951,8.386,2.828c1.947,2.201,1.625,5.017,1.623,5.041L40,16.228l0.33,0.298%20C40.762,16.916,41,17.439,41,18v4c0,0.873-0.572,1.637-1.422,1.899l-0.498,0.153l-0.16,0.495c-0.669,2.081-1.622,4.003-2.834,5.713%20c-0.297,0.421-0.586,0.794-0.837,1.079L35,31.623v4.125c0,1.77,0.983,3.361,2.566,4.153l9.553,4.776%20C49.513,45.874,51,48.28,51,50.957V54z'/%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",a5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2054.953%2054.953'%20style='enable-background:new%200%200%2054.953%2054.953;'%20xml:space='preserve'%3e%3cpath%20d='M45.297,21.946l9.656-5.517L27.477,0.825L0,16.429l9.656,5.517L0,27.429l9.656,5.517L0,38.429l27.477,15.698l27.476-15.698%20l-9.656-5.483l9.656-5.517L45.297,21.946z%20M27.477,3.125l23.435,13.309l-23.435,13.39L4.041,16.434L27.477,3.125z%20M11.675,23.099%20l15.802,9.028l15.802-9.028l7.633,4.335l-23.435,13.39L4.041,27.434L11.675,23.099z%20M50.912,38.434l-23.435,13.39L4.041,38.434%20l7.634-4.335l15.802,9.028l15.802-9.028L50.912,38.434z'/%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",s5="/assets/instruments-1ZxMtcq5.svg",l5="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20version='1.1'%20x='0px'%20y='0px'%20viewBox='0%200%20161.492%20203.415'%20enable-background='new%200%200%20161.492%20162.732'%20xml:space='preserve'%3e%3cpath%20d='M130.735,68.177c-3.191,0-6.078,1.203-8.338,3.125L98.363,48.78c1.73-2.292,2.796-5.11,2.796-8.197%20c0-7.547-6.142-13.686-13.686-13.686c-7.544,0-13.686,6.138-13.686,13.686c0,1.363,0.262,2.658,0.636,3.901L51.472,55.064%20c-2.138-3.552-5.992-5.952-10.438-5.952c-6.748,0-12.219,5.471-12.219,12.219c0,6.748,5.471,12.219,12.219,12.219%20c2.277,0,4.382-0.665,6.207-1.747l7.143,9.28l-7.192,9.346c-1.813-1.068-3.901-1.721-6.158-1.721%20c-6.748,0-12.219,5.471-12.219,12.219s5.471,12.219,12.219,12.219c4.476,0,8.349-2.432,10.478-6.023l22.937,10.574%20c-0.39,1.27-0.66,2.59-0.66,3.984c0,7.548,6.141,13.686,13.686,13.686c7.544,0,13.686-6.138,13.686-13.686%20c0-3.059-1.043-5.854-2.744-8.134l24.045-22.536c2.252,1.888,5.113,3.07,8.275,3.07c7.144,0,12.952-5.812,12.952-12.952%20S137.878,68.177,130.735,68.177z%20M87.473,107.995c-2.612,0-5.03,0.773-7.104,2.046L66.09,91.486l9.302-4.064%20c2.289,4.371,6.817,7.393,12.082,7.393c7.043,0,12.794-5.368,13.536-12.219h16.922c0.27,2.349,1.143,4.499,2.501,6.296%20l-24.022,22.51C94.006,109.307,90.905,107.995,87.473,107.995z%20M74.317,84.692l-10.07,4.399l-6.163-8.009l6.163-8.005l10.095,4.411%20c-0.325,1.166-0.554,2.372-0.554,3.641C73.788,82.369,74.007,83.55,74.317,84.692z%20M76.721,81.129%20c0-5.929,4.824-10.752,10.752-10.752S98.225,75.2,98.225,81.129s-4.823,10.753-10.752,10.753S76.721,87.057,76.721,81.129z%20M117.931,79.663h-16.922c-0.742-6.852-6.493-12.219-13.536-12.219c-5.235,0-9.741,2.99-12.043,7.321l-9.34-4.082l14.229-18.489%20c2.085,1.292,4.525,2.074,7.155,2.074c3.402,0,6.479-1.294,8.876-3.357l24.028,22.521C119.048,75.217,118.195,77.343,117.931,79.663%20z%20M87.473,29.83c5.929,0,10.752,4.823,10.752,10.752c0,5.929-4.823,10.752-10.752,10.752s-10.752-4.823-10.752-10.752%20C76.721,34.654,81.544,29.83,87.473,29.83z%20M75.562,47.187c0.662,1.189,1.455,2.286,2.425,3.223L63.32,69.471l-10.635-4.649%20c0.333-1.114,0.567-2.268,0.567-3.491c0-1.254-0.243-2.443-0.596-3.583L75.562,47.187z%20M49.588,70.041%20c0.759-0.745,1.386-1.607,1.93-2.529l9.959,4.354l-5.243,6.813L49.588,70.041z%20M56.234,83.489l5.243,6.814l-9.998,4.37%20c-0.545-0.911-1.179-1.759-1.933-2.491L56.234,83.489z%20M52.68,104.432c0.338-1.117,0.573-2.28,0.573-3.506%20c0-1.252-0.243-2.435-0.593-3.569l10.661-4.66l14.712,19.119c-0.968,0.928-1.765,2.008-2.429,3.183L52.68,104.432z%20M87.473,132.433%20c-5.929,0-10.752-4.823-10.752-10.753c0-5.929,4.824-10.752,10.752-10.752s10.752,4.823,10.752,10.752%20C98.225,127.61,93.402,132.433,87.473,132.433z%20M130.735,92.614c-6.333,0-11.486-5.152-11.486-11.485s5.153-11.485,11.486-11.485%20c6.332,0,11.485,5.152,11.485,11.485S137.067,92.614,130.735,92.614z'/%3e%3c/svg%3e",u5="data:image/svg+xml,%3csvg%20width='40'%20height='38'%20viewBox='0%200%2040%2038'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%2028.6429V0.785713H40V28.6429H0ZM38.5714%202.21428H1.42857V27.2143H38.5714V2.21428Z'%20fill='%23D9F1FE'/%3e%3cpath%20d='M2.14284%2030.0714H37.8571C38.2514%2030.0714%2038.5714%2030.3914%2038.5714%2030.7857C38.5714%2031.18%2038.2514%2031.5%2037.8571%2031.5H2.14284C1.74856%2031.5%201.42856%2031.18%201.42856%2030.7857C1.42856%2030.3914%201.74856%2030.0714%202.14284%2030.0714Z'%20fill='%23D9F1FE'/%3e%3cpath%20d='M4.28573%2032.9286H35.7143C36.1086%2032.9286%2036.4286%2033.2486%2036.4286%2033.6428C36.4286%2034.0371%2036.1086%2034.3571%2035.7143%2034.3571H4.28573C3.89144%2034.3571%203.57144%2034.0371%203.57144%2033.6428C3.57144%2033.2486%203.89144%2032.9286%204.28573%2032.9286Z'%20fill='%23D9F1FE'/%3e%3cpath%20d='M6.42858%2035.7857H33.5714C33.9657%2035.7857%2034.2857%2036.1057%2034.2857%2036.5C34.2857%2036.8943%2033.9657%2037.2143%2033.5714%2037.2143H6.42858C6.03429%2037.2143%205.71429%2036.8943%205.71429%2036.5C5.71429%2036.1057%206.03429%2035.7857%206.42858%2035.7857Z'%20fill='%23D9F1FE'/%3e%3c/svg%3e",c5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2052%2052'%20style='enable-background:new%200%200%2052%2052;'%20xml:space='preserve'%3e%3cg%3e%3cpath%20d='M26,0C11.663,0,0,11.663,0,26s11.663,26,26,26s26-11.663,26-26S40.337,0,26,0z%20M26,50C12.767,50,2,39.233,2,26%20S12.767,2,26,2s24,10.767,24,24S39.233,50,26,50z'/%3e%3cpath%20d='M26,37c-0.553,0-1,0.447-1,1v2c0,0.553,0.447,1,1,1s1-0.447,1-1v-2C27,37.447,26.553,37,26,37z'/%3e%3cpath%20d='M26.113,9.001C26.075,9.001,26.037,9,25.998,9c-2.116,0-4.106,0.815-5.615,2.304C18.847,12.819,18,14.842,18,17%20c0,0.553,0.447,1,1,1s1-0.447,1-1c0-1.618,0.635-3.136,1.787-4.272c1.153-1.137,2.688-1.765,4.299-1.727%20c3.161,0.044,5.869,2.752,5.913,5.913c0.029,2.084-0.999,4.002-2.751,5.132C26.588,23.762,25,26.794,25,30.158V33%20c0,0.553,0.447,1,1,1s1-0.447,1-1v-2.842c0-2.642,1.276-5.105,3.332-6.432c2.335-1.506,3.706-4.063,3.667-6.84%20C33.939,12.599,30.401,9.061,26.113,9.001z'/%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",p5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2058.995%2058.995'%20style='enable-background:new%200%200%2058.995%2058.995;'%20xml:space='preserve'%3e%3cpath%20d='M39.927,41.929c-0.524,0.524-0.975,1.1-1.365,1.709l-17.28-10.489c0.457-1.144,0.716-2.388,0.716-3.693%20c0-1.305-0.259-2.549-0.715-3.693l17.284-10.409C40.342,18.142,43.454,20,46.998,20c5.514,0,10-4.486,10-10s-4.486-10-10-10%20s-10,4.486-10,10c0,1.256,0.243,2.454,0.667,3.562L20.358,23.985c-1.788-2.724-4.866-4.529-8.361-4.529c-5.514,0-10,4.486-10,10%20s4.486,10,10,10c3.495,0,6.572-1.805,8.36-4.529L37.661,45.43c-0.43,1.126-0.664,2.329-0.664,3.57c0,2.671,1.04,5.183,2.929,7.071%20c1.949,1.949,4.51,2.924,7.071,2.924s5.122-0.975,7.071-2.924c1.889-1.889,2.929-4.4,2.929-7.071s-1.04-5.183-2.929-7.071%20C50.169,38.029,43.826,38.029,39.927,41.929z%20M46.998,2c4.411,0,8,3.589,8,8s-3.589,8-8,8s-8-3.589-8-8S42.586,2,46.998,2z%20M11.998,37.456c-4.411,0-8-3.589-8-8s3.589-8,8-8s8,3.589,8,8S16.409,37.456,11.998,37.456z%20M52.654,54.657%20c-3.119,3.119-8.194,3.119-11.313,0c-1.511-1.511-2.343-3.521-2.343-5.657s0.832-4.146,2.343-5.657%20c1.56-1.56,3.608-2.339,5.657-2.339s4.097,0.779,5.657,2.339c1.511,1.511,2.343,3.521,2.343,5.657S54.166,53.146,52.654,54.657z'/%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",h5="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20width='40'%20height='40'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3c!--%20Created%20with%20SVG-edit%20-%20https://github.com/SVG-Edit/svgedit--%3e%3cg%20class='layer'%3e%3ctitle%3eLayer%201%3c/title%3e%3cline%20fill='none'%20id='svg_6'%20stroke='%23000000'%20x1='6.699998'%20x2='6.699998'%20y1='1.499999'%20y2='39.113811'/%3e%3cline%20fill='none'%20id='svg_8'%20stroke='%23000000'%20x1='20.399999'%20x2='20.399999'%20y1='1.293094'%20y2='38.906906'/%3e%3cline%20fill='none'%20id='svg_9'%20stroke='%23000000'%20x1='34.999997'%20x2='34.999997'%20y1='1.093094'%20y2='38.706906'/%3e%3ccircle%20cx='6.799998'%20cy='35.1'%20fill='%23ffffff'%20id='svg_10'%20r='3.623534'%20stroke='%23000000'/%3e%3ccircle%20cx='20.4'%20cy='18.9'%20fill='%23ffffff'%20id='svg_12'%20r='3.623533'%20stroke='%23000000'/%3e%3ccircle%20cx='35.2'%20cy='4.8'%20fill='%23ffffff'%20id='svg_13'%20r='3.623533'%20stroke='%23000000'/%3e%3c/g%3e%3c/svg%3e",X_="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2042%2042'%20style='enable-background:new%200%200%2042%2042;'%20xml:space='preserve'%3e%3cpath%20d='M35.965,0.114c-0.329-0.171-0.726-0.148-1.033,0.063L7.5,19.095V1c0-0.553-0.448-1-1-1s-1,0.447-1,1v40c0,0.553,0.448,1,1,1%20s1-0.447,1-1V22.905l27.432,18.919C35.103,41.94,35.301,42,35.5,42c0.159,0,0.319-0.038,0.465-0.114%20C36.294,41.713,36.5,41.372,36.5,41V1C36.5,0.628,36.294,0.287,35.965,0.114z%20M34.5,39.096L8.261,21L34.5,2.904V39.096z'/%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",f5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2044%2044'%20style='enable-background:new%200%200%2044%2044;'%20xml:space='preserve'%3e%3cpath%20d='M22,44c-3.309,0-6-2.665-6-5.941V28H5.941C2.665,28,0,25.309,0,22s2.665-6,5.941-6H16V5.941C16,2.665,18.691,0,22,0%20s6,2.665,6,5.941V16h10.059C41.335,16,44,18.691,44,22s-2.665,6-5.941,6H28v10.059C28,41.335,25.309,44,22,44z%20M5.941,18%20C3.805,18,2,19.832,2,22s1.805,4,3.941,4H18v12.059C18,40.195,19.832,42,22,42s4-1.805,4-3.941V26h12.059C40.195,26,42,24.168,42,22%20s-1.805-4-3.941-4H26V5.941C26,3.805,24.168,2,22,2s-4,1.805-4,3.941V18H5.941z'/%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",d5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2055.25%2055.25'%20style='enable-background:new%200%200%2055.25%2055.25;'%20xml:space='preserve'%3e%3cpath%20d='M52.618,2.631c-3.51-3.508-9.219-3.508-12.729,0L3.827,38.693C3.81,38.71,3.8,38.731,3.785,38.749%20c-0.021,0.024-0.039,0.05-0.058,0.076c-0.053,0.074-0.094,0.153-0.125,0.239c-0.009,0.026-0.022,0.049-0.029,0.075%20c-0.003,0.01-0.009,0.02-0.012,0.03l-3.535,14.85c-0.016,0.067-0.02,0.135-0.022,0.202C0.004,54.234,0,54.246,0,54.259%20c0.001,0.114,0.026,0.225,0.065,0.332c0.009,0.025,0.019,0.047,0.03,0.071c0.049,0.107,0.11,0.21,0.196,0.296%20c0.095,0.095,0.207,0.168,0.328,0.218c0.121,0.05,0.25,0.075,0.379,0.075c0.077,0,0.155-0.009,0.231-0.027l14.85-3.535%20c0.027-0.006,0.051-0.021,0.077-0.03c0.034-0.011,0.066-0.024,0.099-0.039c0.072-0.033,0.139-0.074,0.201-0.123%20c0.024-0.019,0.049-0.033,0.072-0.054c0.008-0.008,0.018-0.012,0.026-0.02l36.063-36.063C56.127,11.85,56.127,6.14,52.618,2.631z%20M51.204,4.045c2.488,2.489,2.7,6.397,0.65,9.137l-9.787-9.787C44.808,1.345,48.716,1.557,51.204,4.045z%20M46.254,18.895l-9.9-9.9%20l1.414-1.414l9.9,9.9L46.254,18.895z%20M4.961,50.288c-0.391-0.391-1.023-0.391-1.414,0L2.79,51.045l2.554-10.728l4.422-0.491%20l-0.569,5.122c-0.004,0.038,0.01,0.073,0.01,0.11c0,0.038-0.014,0.072-0.01,0.11c0.004,0.033,0.021,0.06,0.028,0.092%20c0.012,0.058,0.029,0.111,0.05,0.165c0.026,0.065,0.057,0.124,0.095,0.181c0.031,0.046,0.062,0.087,0.1,0.127%20c0.048,0.051,0.1,0.094,0.157,0.134c0.045,0.031,0.088,0.06,0.138,0.084C9.831,45.982,9.9,46,9.972,46.017%20c0.038,0.009,0.069,0.03,0.108,0.035c0.036,0.004,0.072,0.006,0.109,0.006c0,0,0.001,0,0.001,0c0,0,0.001,0,0.001,0h0.001%20c0,0,0.001,0,0.001,0c0.036,0,0.073-0.002,0.109-0.006l5.122-0.569l-0.491,4.422L4.204,52.459l0.757-0.757%20C5.351,51.312,5.351,50.679,4.961,50.288z%20M17.511,44.809L39.889,22.43c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0%20L16.097,43.395l-4.773,0.53l0.53-4.773l22.38-22.378c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0L10.44,37.738%20l-3.183,0.354L34.94,10.409l9.9,9.9L17.157,47.992L17.511,44.809z%20M49.082,16.067l-9.9-9.9l1.415-1.415l9.9,9.9L49.082,16.067z'/%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",m5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2059.2%2059.2'%20style='enable-background:new%200%200%2059.2%2059.2;'%20xml:space='preserve'%3e%3cg%3e%3cpath%20d='M51.062,21.561c-11.889-11.889-31.232-11.889-43.121,0L0,29.501l8.138,8.138c5.944,5.944,13.752,8.917,21.561,8.917%20s15.616-2.972,21.561-8.917l7.941-7.941L51.062,21.561z%20M49.845,36.225c-11.109,11.108-29.184,11.108-40.293,0l-6.724-6.724%20l6.527-6.527c11.109-11.108,29.184-11.108,40.293,0l6.724,6.724L49.845,36.225z'/%3e%3cpath%20d='M28.572,21.57c-3.86,0-7,3.14-7,7c0,0.552,0.448,1,1,1s1-0.448,1-1c0-2.757,2.243-5,5-5c0.552,0,1-0.448,1-1%20S29.125,21.57,28.572,21.57z'/%3e%3cpath%20d='M29.572,16.57c-7.168,0-13,5.832-13,13s5.832,13,13,13s13-5.832,13-13S36.741,16.57,29.572,16.57z%20M29.572,40.57%20c-6.065,0-11-4.935-11-11s4.935-11,11-11s11,4.935,11,11S35.638,40.57,29.572,40.57z'/%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",sg="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2060%2060'%20style='enable-background:new%200%200%2060%2060;'%20xml:space='preserve'%3e%3cg%3e%3cpath%20d='M30,16c4.411,0,8-3.589,8-8s-3.589-8-8-8s-8,3.589-8,8S25.589,16,30,16z%20M30,2c3.309,0,6,2.691,6,6s-2.691,6-6,6%20s-6-2.691-6-6S26.691,2,30,2z'/%3e%3cpath%20d='M30,44c-4.411,0-8,3.589-8,8s3.589,8,8,8s8-3.589,8-8S34.411,44,30,44z%20M30,58c-3.309,0-6-2.691-6-6s2.691-6,6-6%20s6,2.691,6,6S33.309,58,30,58z'/%3e%3cpath%20d='M30,22c-4.411,0-8,3.589-8,8s3.589,8,8,8s8-3.589,8-8S34.411,22,30,22z%20M30,36c-3.309,0-6-2.691-6-6s2.691-6,6-6%20s6,2.691,6,6S33.309,36,30,36z'/%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",y5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2018.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2060%2060'%20style='enable-background:new%200%200%2060%2060;'%20xml:space='preserve'%3e%3cpath%20d='M59.662,26.042L30.701,0.458c-0.377-0.332-0.94-0.334-1.319-0.004L0.343,25.79c-0.306,0.267-0.42,0.692-0.289,1.076%20l11,32.249c0.138,0.405,0.519,0.677,0.946,0.677h35.954c0.427,0,0.806-0.271,0.945-0.674l11.046-32%20C60.077,26.735,59.966,26.311,59.662,26.042z'/%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",g5="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1'%20viewBox='0%200%2024%2024'%20enable-background='new%200%200%2024%2024'%3e%3cpath%20d='M%2020%202%20C%2018.970152%202%2018.141273%202.7807107%2018.03125%203.78125%20L%2014.5625%204.78125%20C%2014.19654%204.3112749%2013.641793%204%2013%204%20C%2011.895431%204%2011%204.8954305%2011%206%20C%2011%207.1045695%2011.895431%208%2013%208%20C%2013.052792%208%2013.104488%208.0040159%2013.15625%208%20L%2016.53125%2014.6875%20C%2016.440877%2014.788724%2016.349735%2014.881869%2016.28125%2015%20L%2011.9375%2014.46875%20C%2011.705723%2013.620636%2010.921625%2013%2010%2013%20C%208.8954305%2013%208%2013.895431%208%2015%20C%208%2015.217462%208.0295736%2015.428987%208.09375%2015.625%20L%204.96875%2018.25%20C%204.6825722%2018.092012%204.3500149%2018%204%2018%20C%202.8954305%2018%202%2018.895431%202%2020%20C%202%2021.104569%202.8954305%2022%204%2022%20C%205.1045695%2022%206%2021.104569%206%2020%20C%206%2019.782538%205.9704264%2019.571013%205.90625%2019.375%20L%209.03125%2016.75%20C%209.3174278%2016.907988%209.6499851%2017%2010%2017%20C%2010.754554%2017%2011.409413%2016.585686%2011.75%2015.96875%20L%2016.0625%2016.53125%20C%2016.294277%2017.379364%2017.078375%2018%2018%2018%20C%2019.104569%2018%2020%2017.104569%2020%2016%20C%2020%2014.895431%2019.104569%2014%2018%2014%20C%2017.947208%2014%2017.895512%2013.995984%2017.84375%2014%20L%2014.5%207.3125%20C%2014.761761%207.0130168%2014.922918%206.6355416%2014.96875%206.21875%20L%2018.4375%205.21875%20C%2018.80346%205.6887251%2019.358207%206%2020%206%20C%2021.104569%206%2022%205.1045695%2022%204%20C%2022%202.8954305%2021.104569%202%2020%202%20z'/%3e%3c/svg%3e",v5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2060%2060'%20style='enable-background:new%200%200%2060%2060;'%20xml:space='preserve'%3e%3cg%3e%3cpath%20d='M30,28.007c-2.206,0-4,1.794-4,4s1.794,4,4,4s4-1.794,4-4S32.206,28.007,30,28.007z%20M30,34.007c-1.103,0-2-0.897-2-2%20s0.897-2,2-2s2,0.897,2,2S31.103,34.007,30,34.007z'/%3e%3cpath%20d='M30,23.007c-4.962,0-9,4.037-9,9c0,3.158,1.7,6.126,4.436,7.745c0.477,0.282,1.089,0.125,1.37-0.352%20c0.281-0.475,0.124-1.088-0.352-1.369C24.324,36.771,23,34.462,23,32.007c0-3.859,3.14-7,7-7s7,3.141,7,7%20c0,2.455-1.324,4.763-3.455,6.024c-0.475,0.281-0.633,0.895-0.352,1.37c0.187,0.315,0.52,0.49,0.862,0.49%20c0.173,0,0.349-0.045,0.508-0.14C37.3,38.133,39,35.165,39,32.007C39,27.044,34.962,23.007,30,23.007z'/%3e%3cpath%20d='M30,2.007c-16.542,0-30,13.458-30,30C0,42.57,5.662,52.475,14.775,57.854c0.16,0.094,0.334,0.139,0.507,0.139%20c0.342,0,0.676-0.176,0.862-0.491c0.281-0.476,0.123-1.089-0.353-1.37C7.285,51.11,2,41.866,2,32.007c0-15.439,12.561-28,28-28%20s28,12.561,28,28c0,9.859-5.285,19.104-13.792,24.125c-0.476,0.281-0.634,0.894-0.353,1.37c0.28,0.475,0.893,0.632,1.37,0.353%20C54.338,52.475,60,42.57,60,32.007C60,15.465,46.542,2.007,30,2.007z'/%3e%3cpath%20d='M53,32.007c0-12.683-10.318-23-23-23s-23,10.317-23,23c0,8.087,4.342,15.677,11.331,19.809%20c0.16,0.095,0.335,0.14,0.508,0.14c0.342,0,0.675-0.176,0.862-0.491c0.281-0.476,0.124-1.089-0.352-1.369%20C12.965,46.32,9,39.39,9,32.007c0-11.579,9.42-21,21-21s21,9.421,21,21c0,7.383-3.965,14.313-10.349,18.088%20c-0.476,0.28-0.633,0.894-0.352,1.369c0.282,0.476,0.895,0.634,1.37,0.352C48.658,47.684,53,40.093,53,32.007z'/%3e%3cpath%20d='M46,32.007c0-8.822-7.178-16-16-16s-16,7.178-16,16c0,5.615,3.022,10.892,7.888,13.769c0.478,0.283,1.089,0.124,1.37-0.352%20c0.281-0.475,0.124-1.088-0.352-1.369C18.646,41.535,16,36.919,16,32.007c0-7.72,6.28-14,14-14s14,6.28,14,14%20c0,4.911-2.646,9.528-6.907,12.048c-0.475,0.281-0.633,0.895-0.352,1.369c0.187,0.316,0.52,0.491,0.862,0.491%20c0.173,0,0.348-0.045,0.508-0.14C42.978,42.897,46,37.622,46,32.007z'/%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",_5="/assets/map-location-3N0526AM.svg",x5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2055%2055'%20style='enable-background:new%200%200%2055%2055;'%20xml:space='preserve'%3e%3cpath%20d='M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17%20s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4%20c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562%20C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829%20c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91%20v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4%20s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665%20C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z%20M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2%20S11,10.103,11,9z%20M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z%20M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4%20s1.794-4,4-4S33,46.794,33,49z%20M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z%20M47,41c0,1.103-0.897,2-2,2%20s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z%20M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z'/%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",w5="/assets/route-FTdUky9R.svg",b5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2054.953%2054.953'%20style='enable-background:new%200%200%2054.953%2054.953;'%20xml:space='preserve'%3e%3cg%3e%3ccircle%20cx='45.021'%20cy='25.976'%20r='1'/%3e%3ccircle%20cx='9.021'%20cy='25.976'%20r='1'/%3e%3ccircle%20cx='12.021'%20cy='28.976'%20r='1'/%3e%3ccircle%20cx='18.021'%20cy='28.976'%20r='1'/%3e%3ccircle%20cx='15.021'%20cy='31.976'%20r='1'/%3e%3ccircle%20cx='21.021'%20cy='31.976'%20r='1'/%3e%3ccircle%20cx='24.021'%20cy='34.976'%20r='1'/%3e%3ccircle%20cx='30.021'%20cy='34.976'%20r='1'/%3e%3ccircle%20cx='33.021'%20cy='31.976'%20r='1'/%3e%3ccircle%20cx='27.021'%20cy='37.976'%20r='1'/%3e%3ccircle%20cx='36.021'%20cy='28.976'%20r='1'/%3e%3ccircle%20cx='42.021'%20cy='28.976'%20r='1'/%3e%3ccircle%20cx='39.021'%20cy='31.976'%20r='1'/%3e%3cpath%20d='M45.559,32.796l9.394-5.367l-9.656-5.483l9.656-5.517L27.477,0.826L0,16.429l9.656,5.517L0,27.429l9.656,5.517L0,38.429%20l27.477,15.698l27.477-15.698l-9.656-5.483l0.071-0.041C45.439,32.879,45.497,32.837,45.559,32.796z%20M27.477,3.125l23.436,13.309%20l-7.637,4.364l0,0l-15.798,9.026L4.041,16.434L27.477,3.125z%20M11.129,23.409c0.162,0.333,0.497,0.567,0.892,0.567%20c0.27,0,0.512-0.109,0.692-0.283l2.262,1.292c-0.53,0.025-0.954,0.455-0.954,0.991c0,0.552,0.448,1,1,1s1-0.448,1-1%20c0-0.173-0.055-0.327-0.132-0.469l10.33,5.902c-0.116,0.163-0.198,0.352-0.198,0.567c0,0.552,0.448,1,1,1s1-0.448,1-1%20c0-0.051-0.021-0.094-0.029-0.143l10.052-5.743c0.059,0.496,0.465,0.885,0.977,0.885c0.552,0,1-0.448,1-1%20c0-0.325-0.165-0.601-0.406-0.783l2.202-1.258c0.068,0.015,0.132,0.041,0.204,0.041c0.444,0,0.807-0.294,0.938-0.694l0.32-0.183%20l7.634,4.335l-1.983,1.133c-0.157-0.347-0.503-0.591-0.908-0.591c-0.552,0-1,0.448-1,1c0,0.216,0.083,0.405,0.199,0.568%20l-3.945,2.254l0,0l-6.388,3.65c0.078-0.142,0.134-0.298,0.134-0.472c0-0.552-0.448-1-1-1s-1,0.448-1,1%20c0,0.537,0.426,0.967,0.957,0.991l-2.263,1.293c-0.18-0.174-0.423-0.284-0.694-0.284c-0.552,0-1,0.448-1,1%20c0,0.08,0.028,0.151,0.046,0.226l-4.59,2.622l-5.517-3.152c-0.13-0.401-0.494-0.696-0.939-0.696c-0.073,0-0.138,0.027-0.206,0.042%20l-2.201-1.257c0.241-0.183,0.407-0.458,0.407-0.784c0-0.552-0.448-1-1-1c-0.512,0-0.919,0.391-0.977,0.887L6.991,29.12%20c0.007-0.049,0.029-0.093,0.029-0.144c0-0.552-0.448-1-1-1c-0.239,0-0.449,0.095-0.621,0.235l-1.359-0.776L11.129,23.409z%20M50.912,38.434l-23.436,13.39L4.041,38.434l7.633-4.335l15.803,9.028l15.802-9.028L50.912,38.434z'/%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",kf="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2057%2057'%20style='enable-background:new%200%200%2057%2057;'%20xml:space='preserve'%3e%3cg%3e%3cpath%20d='M40.5,23V11.601C40.5,5.204,34.893,0,28,0S15.5,5.204,15.5,11.601V23h-9v26v8h44v-8V23H40.5z%20M17.5,11.601%20C17.5,6.307,22.21,2,28,2s10.5,4.307,10.5,9.601V23h-21V11.601z%20M48.5,55h-40v-4h40V55z%20M8.5,49V25h7h25h8v24H8.5z'/%3e%3cpath%20d='M28.5,31c-2.206,0-4,1.794-4,4v6c0,2.206,1.794,4,4,4s4-1.794,4-4v-6C32.5,32.794,30.706,31,28.5,31z%20M30.5,41%20c0,1.103-0.897,2-2,2s-2-0.897-2-2v-6c0-1.103,0.897-2,2-2s2,0.897,2,2V41z'/%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",S5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2058%2058'%20style='enable-background:new%200%200%2058%2058;'%20xml:space='preserve'%3e%3cg%3e%3crect%20x='9'%20y='12'%20width='40'%20height='2'/%3e%3crect%20x='9'%20y='28'%20width='40'%20height='2'/%3e%3crect%20x='9'%20y='44'%20width='40'%20height='2'/%3e%3cpath%20d='M0,0v58h58V0H0z%20M56,56H2V2h54V56z'/%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",E5="/assets/help-s25hmwCN.svg",T5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2057.945%2057.945'%20style='enable-background:new%200%200%2057.945%2057.945;'%20xml:space='preserve'%3e%3cg%3e%3cpath%20d='M29,21.972c-3.86,0-7,3.14-7,7c0,0.552,0.448,1,1,1s1-0.448,1-1c0-2.757,2.243-5,5-5c0.552,0,1-0.448,1-1%20S29.552,21.972,29,21.972z'/%3e%3cpath%20d='M57.655,27.873c-7.613-7.674-17.758-11.9-28.568-11.9c-0.02,0-0.039,0.001-0.059,0.001c-0.01,0-0.019-0.001-0.028-0.001%20c-0.027,0-0.054,0.004-0.081,0.004C18.173,16.02,8.093,20.239,0.52,27.873l-0.23,0.232c-0.389,0.392-0.386,1.025,0.006,1.414%20c0.195,0.193,0.45,0.29,0.704,0.29c0.257,0,0.515-0.099,0.71-0.296l0.23-0.232c5.254-5.297,11.782-8.855,18.895-10.411%20C17.89,21.255,16,24.896,16,28.972c0,7.168,5.832,13,13,13s13-5.832,13-13c0-4.11-1.923-7.774-4.91-10.158%20c7.211,1.527,13.829,5.108,19.145,10.467c0.389,0.393,1.023,0.395,1.414,0.006C58.041,28.898,58.044,28.265,57.655,27.873z%20M40,28.972c0,6.065-4.935,11-11,11s-11-4.935-11-11c0-6.038,4.891-10.952,10.919-10.996c0.037,0,0.073-0.003,0.109-0.003%20C35.081,17.989,40,22.917,40,28.972z'/%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",C5=r=>({mapObject:r.commonReducer.mapObject,editorState:r.commonReducer.editorState});class I5 extends di.Component{constructor(i){super(i),this.state={icon:this.props.icon,name:this.props.name,layer:this.props.layer}}toggleLayerVisibility(){var i=this.props.mapObject.getLayoutProperty(this.state.layer,"visibility");i==="visible"||i===void 0?(this.props.mapObject.setLayoutProperty(this.state.layer,"visibility","none"),this.setState({...this.state,visibility:!1})):(this.props.mapObject.setLayoutProperty(this.state.layer,"visibility","visible"),this.setState({...this.state,visibility:!0}))}toggleLayerEditor(){this.props.sendEditorTitle(this.state.layer),this.props.toggleEditorState()}render(){let i=this.props.mapObject.getLayoutProperty(this.state.layer,"visibility");return console.log("visibility for",this.state.layer,"is",i),Ee.jsx(Ee.Fragment,{children:Ee.jsxs("div",{className:"layerButton",children:[Ee.jsx("div",{className:"layerType",children:Ee.jsx("img",{src:this.state.icon})}),Ee.jsx("p",{className:"layerName",children:this.state.name}),Ee.jsx("div",{className:"layerEditButton",children:Ee.jsx("img",{src:d5})}),Ee.jsx("div",{className:"layerVisibilityButton",onClick:()=>this.toggleLayerVisibility(),children:Ee.jsx("img",{src:i==="visible"||i===void 0?m5:T5})}),Ee.jsx("div",{className:"layerParamsButton",onClick:()=>this.toggleLayerEditor(),children:Ee.jsx("img",{src:sg})})]})})}}const p0=qd(C5,{sendEditorTitle:QS,toggleEditorState:z2})(I5);class Pf extends di.Component{constructor(i){super(i),this.state={icon:this.props.icon,name:this.props.name,desc:this.props.desc}}render(){return Ee.jsx(Ee.Fragment,{children:Ee.jsxs("div",{className:"instrument",children:[Ee.jsx("img",{src:this.state.icon,className:"instrumentIcon"}),Ee.jsxs("div",{className:"instrumentTextContainer",children:[Ee.jsx("p",{className:"instrumentName",children:this.state.name}),Ee.jsx("p",{className:"instrumentDescription",children:this.state.desc})]})]})})}}class zf extends di.Component{constructor(i){super(i),this.state={icon:this.props.icon,name:this.props.name,desc:this.props.desc}}render(){return Ee.jsx(Ee.Fragment,{children:Ee.jsxs("div",{className:"catalogItem",children:[Ee.jsx("img",{className:"catalogItemImage",src:this.state.icon}),Ee.jsxs("div",{className:"catalogDataContainer",children:[Ee.jsx("p",{className:"catalogItemName",children:this.state.name}),Ee.jsx("div",{className:"catalogMoreButton",children:Ee.jsx("img",{src:sg})},Math.random())]},Math.random()),Ee.jsx("p",{className:"catalogItemDescription",children:this.state.desc})]})})}}const k5="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2060.062%2060.062'%20style='enable-background:new%200%200%2060.062%2060.062;'%20xml:space='preserve'%3e%3cpath%20d='M60.046,11.196c0.004-0.024,0.011-0.048,0.013-0.072c0.007-0.074-0.001-0.149-0.01-0.224%20c-0.002-0.019,0.001-0.037-0.002-0.056c-0.018-0.099-0.051-0.196-0.1-0.289c-0.008-0.016-0.019-0.031-0.028-0.047%20c-0.002-0.002-0.002-0.005-0.003-0.008c-0.001-0.002-0.004-0.003-0.005-0.006c-0.007-0.011-0.013-0.023-0.02-0.033%20c-0.062-0.091-0.137-0.166-0.221-0.23c-0.019-0.014-0.041-0.022-0.061-0.035c-0.074-0.049-0.152-0.089-0.236-0.116%20c-0.037-0.012-0.074-0.018-0.112-0.025c-0.073-0.015-0.146-0.022-0.222-0.02c-0.04,0.001-0.078,0.003-0.118,0.009%20c-0.026,0.004-0.051,0-0.077,0.006L0.798,22.046c-0.413,0.086-0.729,0.421-0.788,0.839s0.15,0.828,0.523,1.025l16.632,8.773%20l2.917,16.187c-0.002,0.012,0.001,0.025,0,0.037c-0.01,0.08-0.011,0.158-0.001,0.237c0.005,0.04,0.01,0.078,0.02,0.117%20c0.023,0.095,0.06,0.184,0.11,0.268c0.01,0.016,0.01,0.035,0.021,0.051c0.003,0.005,0.008,0.009,0.012,0.013%20c0.013,0.019,0.031,0.034,0.046,0.053c0.047,0.058,0.096,0.111,0.152,0.156c0.009,0.007,0.015,0.018,0.025,0.025%20c0.015,0.011,0.032,0.014,0.047,0.024c0.061,0.04,0.124,0.073,0.191,0.099c0.027,0.01,0.052,0.022,0.08,0.03%20c0.09,0.026,0.183,0.044,0.277,0.044c0.001,0,0.002,0,0.003,0h0c0,0,0,0,0,0c0.004,0,0.008-0.002,0.012-0.002%20c0.017,0.001,0.034,0.002,0.051,0.002c0.277,0,0.527-0.124,0.712-0.315l11.079-7.386l11.6,7.54c0.164,0.106,0.354,0.161,0.545,0.161%20c0.105,0,0.212-0.017,0.315-0.051c0.288-0.096,0.518-0.318,0.623-0.604l13.996-37.989c0.013-0.034,0.024-0.069,0.033-0.105%20c0.004-0.015,0.005-0.03,0.008-0.044C60.042,11.22,60.044,11.208,60.046,11.196z%20M48.464,17.579L24.471,35.22%20c-0.039,0.029-0.07,0.065-0.104,0.099c-0.013,0.012-0.026,0.022-0.037,0.035c-0.021,0.023-0.04,0.046-0.059,0.071%20c-0.018,0.024-0.032,0.049-0.048,0.074c-0.037,0.06-0.068,0.122-0.092,0.188c-0.005,0.013-0.013,0.023-0.017,0.036%20c-0.001,0.004-0.005,0.006-0.006,0.01l-2.75,8.937l-2.179-12.091L48.464,17.579z%20M22.908,46.594l2.726-9.004l4.244,2.759%20l1.214,0.789l-4.124,2.749L22.908,46.594z%20M52.044,13.498L18.071,30.899l-14.14-7.458L52.044,13.498z%20M44.559,47.504L29.154,37.492%20l-2.333-1.517l30.154-22.172L44.559,47.504z'/%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",P5=r=>({mapObject:r.commonReducer.mapObject,editorState:r.commonReducer.editorState});class z5 extends di.Component{constructor(i){super(i),this.state={icon:this.props.icon,name:this.props.name,command:this.props.command}}callGissat(i,p){let m="http://localhost:3001/run?";m+=i!=""&&i!=null?"c="+i:"",m+=p!=""&&p!=null?"a="+p:"",fetch(m).then(_=>_.json()).then(_=>{this.props.sendCustomMessage(_.title[0],_.content)})}render(){return Ee.jsx(Ee.Fragment,{children:Ee.jsxs("div",{className:"layerButton",children:[Ee.jsx("div",{className:"layerType",children:Ee.jsx("img",{src:this.state.icon})}),Ee.jsx("p",{className:"layerName",children:this.state.name}),Ee.jsx("div",{className:"layerEditButton",onClick:()=>{this.callGissat(this.state.command,"")},children:Ee.jsx("img",{src:k5})})]})})}}const A5=qd(P5,{sendCustomMessage:e5})(z5),M5=r=>({editorTitle:r.commonReducer.editorTitle,editorState:r.commonReducer.editorState,viewerState:r.commonReducer.viewerState,customMessage:r.commonReducer.customMessage});class L5 extends di.Component{constructor(i){super(i),this.state={isDrawerOpen:!1,isCabinetOpen:!1,isEditorOpen:this.props.editorState,viewerState:this.props.viewerState,currentCustomMessageTitle:"",currentCustomMessageContent:"",currentDrawerId:""},this.PHD={user:{headerTitleText:"User drawer",headerDescriptionText:"Placeholder Description. User drawer information should be put here"},layers:{headerTitleText:"Map name",headerDescriptionText:"description",content:[Ee.jsxs(Ee.Fragment,{children:[Ee.jsxs("div",{className:"contentHeader",children:[Ee.jsx("p",{className:"contentName",children:"Слои"}),Ee.jsx("div",{className:"newLayerButton",children:Ee.jsx("img",{src:f5})})]}),Ee.jsxs("div",{className:"contentContainer",children:[Ee.jsx(p0,{icon:y5,name:"Полигональный слой",layer:"osm_poly"}),Ee.jsx(p0,{icon:v5,name:"Точечный слой",layer:"osm_point"}),Ee.jsx(p0,{icon:g5,name:"Линейный слой",layer:"osm_roads"})]})]})]},instruments:{headerTitleText:"Map name",headerDescriptionText:"Desc text",content:[Ee.jsxs(Ee.Fragment,{children:[Ee.jsx("div",{className:"contentHeader",children:Ee.jsx("p",{className:"contentName",children:"Инструменты"})}),Ee.jsxs("div",{className:"contentContainer",children:[Ee.jsx(Pf,{icon:_5,name:"Построить буфер",desc:"Строит буферную зону вокруг объекта"}),Ee.jsx(Pf,{icon:x5,name:"Построить изохроны",desc:"Строит зону транспортной доступности"}),Ee.jsx(Pf,{icon:w5,name:"Аггрегировать данные",desc:"Строит буферную зону вокруг объекта"}),Ee.jsx(Pf,{icon:b5,name:"Выборка геометрии",desc:"Выборка точек из пересекающихся полигонов"})]})]})]},neural:{headerTitleText:"Neural Network drawer",headerDescriptionText:"Placeholder Description, to be provided later",content:[Ee.jsxs(Ee.Fragment,{children:[Ee.jsx("div",{className:"contentHeader",children:Ee.jsx("div",{className:"toggleGSViewerButton",onClick:()=>{this.props.toggleViewerState()},children:Ee.jsx("img",{src:S5,alt:"toggle neural network content viewer"})})}),Ee.jsx("div",{className:"contentContainer",children:Ee.jsx(A5,{icon:E5,name:"Помощь",command:"info"})})]})]},catalog:{header:[Ee.jsx(Ee.Fragment,{children:Ee.jsxs("div",{className:"catalogHeader",children:[Ee.jsxs("div",{className:"catalogNav",children:[Ee.jsx("p",{className:"catalogNavItem",children:"Проекты"}),Ee.jsx("p",{className:"catalogNavItem",children:"Данные"}),Ee.jsx("p",{className:"catalogNavItem",children:"Магазин"})]}),Ee.jsxs("div",{className:"catalogTools",children:[Ee.jsx("input",{type:"text",placeholder:"Search.."}),Ee.jsx("div",{className:"catalogButtonNewItem",children:"Новый проект"})]})]})})],content:[Ee.jsx(Ee.Fragment,{children:Ee.jsx("div",{className:"catalogContent",children:Ee.jsxs("div",{className:"catalogGrid",children:[Ee.jsx(zf,{icon:kf,name:"Карта ЛЭП",desc:"Карта содержит полилинии ЛЭП и аттрибутивную информацию к столбам"}),Ee.jsx(zf,{icon:kf,name:"Карта ЛЭП",desc:"Карта содержит полилинии ЛЭП и аттрибутивную информацию к столбам"}),Ee.jsx(zf,{icon:kf,name:"Карта ЛЭП",desc:"Карта содержит полилинии ЛЭП и аттрибутивную информацию к столбам"}),Ee.jsx(zf,{icon:kf,name:"Карта ЛЭП",desc:"Карта содержит полилинии ЛЭП и аттрибутивную информацию к столбам"})]})})})]}},this.buttons={user:{action:()=>{this.setDrawerData(!0,this.PHD.user.headerTitleText,this.PHD.user.headerDescriptionText,"user")},icon:o5,id:"user"},layers:{action:()=>{this.setDrawerData(!0,this.PHD.layers.headerTitleText,this.PHD.layers.headerDescriptionText,this.PHD.layers.content,"layers")},icon:a5,id:"layers"},instruments:{action:()=>{this.setDrawerData(!0,this.PHD.instruments.headerTitleText,this.PHD.instruments.headerDescriptionText,this.PHD.instruments.content,"instruments")},icon:s5,id:"instruments"},catalog:{action:()=>{this.setCabinetData(!0,this.PHD.catalog.header,this.PHD.catalog.content,"catalog")},icon:u5,id:"catalog"},neural:{action:()=>{this.setDrawerData(!0,this.PHD.neural.headerTitleText,this.PHD.neural.headerDescriptionText,this.PHD.neural.content,"neural")},icon:l5,id:"neural"},space:{size:4},info:{action:()=>{},icon:c5,id:"info"},about_us:{action:()=>{},id:"about_us"}},this.drawerHeaderButtons=[{icon:p5,name:"share",action:()=>{}},{icon:h5,name:"props",action:()=>{}},{icon:X_,name:"back",action:()=>{this.setDrawerData(!1)}},{icon:sg,name:"more",action:()=>{}}]}setDrawerData(i,p,m,_,w){if(this.state.currentDrawerId==w){this.setDrawerOpen(!1);return}this.setState({...this.state,isDrawerOpen:i,isCabinetOpen:(this.state.isCabinetOpen,!1),currentDrawerHeaderTitle:p,currentDrawerHeaderDescription:m,currentDrawerContent:_,currentDrawerId:w})}setDrawerOpen(i){this.setState({...this.state,isDrawerOpen:i,currentDrawerId:""})}setCabinetData(i,p,m){this.setState({...this.state,isDrawerOpen:(this.state.isDrawerOpen,!1),isCabinetOpen:!this.state.isCabinetOpen,currentCabinetHeader:p,currentCabinetContent:m})}render(){let i=[];for(let F in this.buttons){let M=this.buttons[F];if(M.size)for(let ee=0;ee<M.size;ee++)i.push(Ee.jsx("div",{className:"sidebarButton",onClick:M.action,children:Ee.jsx("img",{src:M.icon})},F));else i.push(Ee.jsx("div",{className:"sidebarButton",onClick:M.action,children:Ee.jsx("img",{src:M.icon,alt:F})}))}const p=`drawer ${this.state.isDrawerOpen?"open":"closed"}`,m=`cabinet ${this.state.isCabinetOpen?"open":"closed"}`,_=`layerEditor ${this.props.editorState?"open":"closed"}`,w=`customMessageBox ${this.props.viewerState?"open":"closed"}`,c=[];for(let F in this.drawerHeaderButtons){let M=this.drawerHeaderButtons[F];c.push(Ee.jsx("div",{className:"drawerHeaderButton",onClick:M.action,children:Ee.jsx("img",{src:M.icon,alt:F})}))}return Ee.jsxs(Ee.Fragment,{children:[Ee.jsx("div",{className:"sidebarMenu",children:Ee.jsx("div",{className:"buttonContainer",children:i})}),Ee.jsxs("div",{className:p,children:[Ee.jsxs("div",{className:"drawerHeader",children:[Ee.jsxs("div",{className:"drawerHeaderTopContainer",children:[Ee.jsx("p",{className:"drawerHeaderTitle",children:this.state.currentDrawerHeaderTitle}),Ee.jsx("div",{className:"drawerHeaderButtonContainer",children:c})]}),Ee.jsx("p",{className:"drawerHeaderDescription",children:this.state.currentDrawerHeaderDescription})]}),Ee.jsx("div",{className:"drawerContent",children:this.state.currentDrawerContent})]}),Ee.jsxs("div",{className:m,children:[Ee.jsx("div",{className:"cabinetHeader",children:this.state.currentCabinetHeader}),Ee.jsx("div",{className:"cabinetContent",children:this.state.currentCabinetContent})]}),Ee.jsxs("div",{className:_,children:[Ee.jsxs("div",{className:"layerEditorHeader",children:[Ee.jsxs("p",{className:"layerEditorHeaderTitle",children:["Свойства слоя ",this.props.editorTitle]}),Ee.jsx("div",{className:"layerEditorCloseButton",onClick:()=>{this.props.toggleEditorState()},children:Ee.jsx("img",{src:X_,alt:"close layer editor"})})]}),Ee.jsx("div",{className:"layerEditorContent"})]}),Ee.jsxs("div",{className:w,children:[Ee.jsx("p",{className:"messageTitle",children:this.props.customMessage.title}),Ee.jsx("pre",{className:"messageContent",children:this.props.customMessage.content})]})]})}}const D5=qd(M5,{toggleEditorState:z2,toggleViewerState:t5})(L5),R5=r=>({});let O5=class extends di.Component{constructor(i){super(i),this.state={lng:71.43,lat:51.15,zoom:10}}componentDidMount(){const i=new c2.Map({container:this.mapContainer,style:"mapbox://styles/youthanasia/ck3q3c3916uu91clt5dhe6bzm",center:[this.state.lng,this.state.lat],zoom:this.state.zoom});this.props.sendMapObject(i)}render(){return Ee.jsx("div",{className:"mapContainer",ref:i=>this.mapContainer=i})}};const B5=qd(R5,{sendMapObject:JS})(O5);function F5(){return Ee.jsx(V4,{store:i5,children:Ee.jsxs("div",{children:[Ee.jsx(D5,{}),Ee.jsx(B5,{})]})})}c2.accessToken="pk.eyJ1IjoieW91dGhhbmFzaWEiLCJhIjoiY2szaDBiZjExMDZ3bjNubXVlcG1pYWJkNiJ9.sUl9ok_xgZgiztpBhZJMuA";h0.createRoot(document.getElementById("root")).render(Ee.jsx(di.StrictMode,{children:Ee.jsx(F5,{})}));
